(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function m0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hg={exports:{}},Zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES;function TI(){if(ES)return Zl;ES=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var c in i)c!=="key"&&(o[c]=i[c])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:l,ref:i!==void 0?i:null,props:o}}return Zl.Fragment=e,Zl.jsx=n,Zl.jsxs=n,Zl}var CS;function _I(){return CS||(CS=1,hg.exports=TI()),hg.exports}var g=_I(),pg={exports:{}},Ee={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS;function AI(){if(TS)return Ee;TS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function b(U){return U===null||typeof U!="object"?null:(U=v&&U[v]||U["@@iterator"],typeof U=="function"?U:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function T(U,V,ne){this.props=U,this.context=V,this.refs=E,this.updater=ne||w}T.prototype.isReactComponent={},T.prototype.setState=function(U,V){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,V,"setState")},T.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function N(){}N.prototype=T.prototype;function A(U,V,ne){this.props=U,this.context=V,this.refs=E,this.updater=ne||w}var I=A.prototype=new N;I.constructor=A,S(I,T.prototype),I.isPureReactComponent=!0;var M=Array.isArray;function D(){}var R={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function z(U,V,ne){var se=ne.ref;return{$$typeof:t,type:U,key:V,ref:se!==void 0?se:null,props:ne}}function F(U,V){return z(U.type,V,U.props)}function Q(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function G(U){var V={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ne){return V[ne]})}var X=/\/+/g;function q(U,V){return typeof U=="object"&&U!==null&&U.key!=null?G(""+U.key):V.toString(36)}function K(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(D,D):(U.status="pending",U.then(function(V){U.status==="pending"&&(U.status="fulfilled",U.value=V)},function(V){U.status==="pending"&&(U.status="rejected",U.reason=V)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function L(U,V,ne,se,he){var ye=typeof U;(ye==="undefined"||ye==="boolean")&&(U=null);var De=!1;if(U===null)De=!0;else switch(ye){case"bigint":case"string":case"number":De=!0;break;case"object":switch(U.$$typeof){case t:case e:De=!0;break;case p:return De=U._init,L(De(U._payload),V,ne,se,he)}}if(De)return he=he(U),De=se===""?"."+q(U,0):se,M(he)?(ne="",De!=null&&(ne=De.replace(X,"$&/")+"/"),L(he,V,ne,"",function(Pe){return Pe})):he!=null&&(Q(he)&&(he=F(he,ne+(he.key==null||U&&U.key===he.key?"":(""+he.key).replace(X,"$&/")+"/")+De)),V.push(he)),1;De=0;var nt=se===""?".":se+":";if(M(U))for(var qe=0;qe<U.length;qe++)se=U[qe],ye=nt+q(se,qe),De+=L(se,V,ne,ye,he);else if(qe=b(U),typeof qe=="function")for(U=qe.call(U),qe=0;!(se=U.next()).done;)se=se.value,ye=nt+q(se,qe++),De+=L(se,V,ne,ye,he);else if(ye==="object"){if(typeof U.then=="function")return L(K(U),V,ne,se,he);throw V=String(U),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return De}function W(U,V,ne){if(U==null)return U;var se=[],he=0;return L(U,se,"","",function(ye){return V.call(ne,ye,he++)}),se}function oe(U){if(U._status===-1){var V=U._result;V=V(),V.then(function(ne){(U._status===0||U._status===-1)&&(U._status=1,U._result=ne)},function(ne){(U._status===0||U._status===-1)&&(U._status=2,U._result=ne)}),U._status===-1&&(U._status=0,U._result=V)}if(U._status===1)return U._result.default;throw U._result}var fe=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Ne={map:W,forEach:function(U,V,ne){W(U,function(){V.apply(this,arguments)},ne)},count:function(U){var V=0;return W(U,function(){V++}),V},toArray:function(U){return W(U,function(V){return V})||[]},only:function(U){if(!Q(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return Ee.Activity=m,Ee.Children=Ne,Ee.Component=T,Ee.Fragment=n,Ee.Profiler=i,Ee.PureComponent=A,Ee.StrictMode=r,Ee.Suspense=d,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(U){return R.H.useMemoCache(U)}},Ee.cache=function(U){return function(){return U.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(U,V,ne){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var se=S({},U.props),he=U.key;if(V!=null)for(ye in V.key!==void 0&&(he=""+V.key),V)!B.call(V,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&V.ref===void 0||(se[ye]=V[ye]);var ye=arguments.length-2;if(ye===1)se.children=ne;else if(1<ye){for(var De=Array(ye),nt=0;nt<ye;nt++)De[nt]=arguments[nt+2];se.children=De}return z(U.type,he,se)},Ee.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:o,_context:U},U},Ee.createElement=function(U,V,ne){var se,he={},ye=null;if(V!=null)for(se in V.key!==void 0&&(ye=""+V.key),V)B.call(V,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(he[se]=V[se]);var De=arguments.length-2;if(De===1)he.children=ne;else if(1<De){for(var nt=Array(De),qe=0;qe<De;qe++)nt[qe]=arguments[qe+2];he.children=nt}if(U&&U.defaultProps)for(se in De=U.defaultProps,De)he[se]===void 0&&(he[se]=De[se]);return z(U,ye,he)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(U){return{$$typeof:c,render:U}},Ee.isValidElement=Q,Ee.lazy=function(U){return{$$typeof:p,_payload:{_status:-1,_result:U},_init:oe}},Ee.memo=function(U,V){return{$$typeof:f,type:U,compare:V===void 0?null:V}},Ee.startTransition=function(U){var V=R.T,ne={};R.T=ne;try{var se=U(),he=R.S;he!==null&&he(ne,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(D,fe)}catch(ye){fe(ye)}finally{V!==null&&ne.types!==null&&(V.types=ne.types),R.T=V}},Ee.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ee.use=function(U){return R.H.use(U)},Ee.useActionState=function(U,V,ne){return R.H.useActionState(U,V,ne)},Ee.useCallback=function(U,V){return R.H.useCallback(U,V)},Ee.useContext=function(U){return R.H.useContext(U)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(U,V){return R.H.useDeferredValue(U,V)},Ee.useEffect=function(U,V){return R.H.useEffect(U,V)},Ee.useEffectEvent=function(U){return R.H.useEffectEvent(U)},Ee.useId=function(){return R.H.useId()},Ee.useImperativeHandle=function(U,V,ne){return R.H.useImperativeHandle(U,V,ne)},Ee.useInsertionEffect=function(U,V){return R.H.useInsertionEffect(U,V)},Ee.useLayoutEffect=function(U,V){return R.H.useLayoutEffect(U,V)},Ee.useMemo=function(U,V){return R.H.useMemo(U,V)},Ee.useOptimistic=function(U,V){return R.H.useOptimistic(U,V)},Ee.useReducer=function(U,V,ne){return R.H.useReducer(U,V,ne)},Ee.useRef=function(U){return R.H.useRef(U)},Ee.useState=function(U){return R.H.useState(U)},Ee.useSyncExternalStore=function(U,V,ne){return R.H.useSyncExternalStore(U,V,ne)},Ee.useTransition=function(){return R.H.useTransition()},Ee.version="19.2.0",Ee}var _S;function Zc(){return _S||(_S=1,pg.exports=AI()),pg.exports}var _=Zc();const Be=m0(_);var mg={exports:{}},ec={},gg={exports:{}},yg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS;function NI(){return AS||(AS=1,(function(t){function e(L,W){var oe=L.length;L.push(W);e:for(;0<oe;){var fe=oe-1>>>1,Ne=L[fe];if(0<i(Ne,W))L[fe]=W,L[oe]=Ne,oe=fe;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var W=L[0],oe=L.pop();if(oe!==W){L[0]=oe;e:for(var fe=0,Ne=L.length,U=Ne>>>1;fe<U;){var V=2*(fe+1)-1,ne=L[V],se=V+1,he=L[se];if(0>i(ne,oe))se<Ne&&0>i(he,ne)?(L[fe]=he,L[se]=oe,fe=se):(L[fe]=ne,L[V]=oe,fe=V);else if(se<Ne&&0>i(he,oe))L[fe]=he,L[se]=oe,fe=se;else break e}}return W}function i(L,W){var oe=L.sortIndex-W.sortIndex;return oe!==0?oe:L.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],f=[],p=1,m=null,v=3,b=!1,w=!1,S=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function I(L){for(var W=n(f);W!==null;){if(W.callback===null)r(f);else if(W.startTime<=L)r(f),W.sortIndex=W.expirationTime,e(d,W);else break;W=n(f)}}function M(L){if(S=!1,I(L),!w)if(n(d)!==null)w=!0,D||(D=!0,G());else{var W=n(f);W!==null&&K(M,W.startTime-L)}}var D=!1,R=-1,B=5,z=-1;function F(){return E?!0:!(t.unstable_now()-z<B)}function Q(){if(E=!1,D){var L=t.unstable_now();z=L;var W=!0;try{e:{w=!1,S&&(S=!1,N(R),R=-1),b=!0;var oe=v;try{t:{for(I(L),m=n(d);m!==null&&!(m.expirationTime>L&&F());){var fe=m.callback;if(typeof fe=="function"){m.callback=null,v=m.priorityLevel;var Ne=fe(m.expirationTime<=L);if(L=t.unstable_now(),typeof Ne=="function"){m.callback=Ne,I(L),W=!0;break t}m===n(d)&&r(d),I(L)}else r(d);m=n(d)}if(m!==null)W=!0;else{var U=n(f);U!==null&&K(M,U.startTime-L),W=!1}}break e}finally{m=null,v=oe,b=!1}W=void 0}}finally{W?G():D=!1}}}var G;if(typeof A=="function")G=function(){A(Q)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,q=X.port2;X.port1.onmessage=Q,G=function(){q.postMessage(null)}}else G=function(){T(Q,0)};function K(L,W){R=T(function(){L(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(L){switch(v){case 1:case 2:case 3:var W=3;break;default:W=v}var oe=v;v=W;try{return L()}finally{v=oe}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(L,W){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var oe=v;v=L;try{return W()}finally{v=oe}},t.unstable_scheduleCallback=function(L,W,oe){var fe=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?fe+oe:fe):oe=fe,L){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=oe+Ne,L={id:p++,callback:W,priorityLevel:L,startTime:oe,expirationTime:Ne,sortIndex:-1},oe>fe?(L.sortIndex=oe,e(f,L),n(d)===null&&L===n(f)&&(S?(N(R),R=-1):S=!0,K(M,oe-fe))):(L.sortIndex=Ne,e(d,L),w||b||(w=!0,D||(D=!0,G()))),L},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(L){var W=v;return function(){var oe=v;v=W;try{return L.apply(this,arguments)}finally{v=oe}}}})(yg)),yg}var NS;function kI(){return NS||(NS=1,gg.exports=NI()),gg.exports}var vg={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kS;function RI(){if(kS)return rn;kS=1;var t=Zc();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(d,f,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:d,containerInfo:f,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,rn.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,p)},rn.flushSync=function(d){var f=l.T,p=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=f,r.p=p,r.d.f()}},rn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(d,f))},rn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},rn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,m=c(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:b}):p==="script"&&r.d.X(d,{crossOrigin:m,integrity:v,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},rn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(d)},rn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,m=c(p,f.crossOrigin);r.d.L(d,p,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},rn.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=c(f.as,f.crossOrigin);r.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(d)},rn.requestFormReset=function(d){r.d.r(d)},rn.unstable_batchedUpdates=function(d,f){return d(f)},rn.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},rn.useFormStatus=function(){return l.H.useHostTransitionStatus()},rn.version="19.2.0",rn}var RS;function b1(){if(RS)return vg.exports;RS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vg.exports=RI(),vg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS;function MI(){if(MS)return ec;MS=1;var t=kI(),e=Zc(),n=b1();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function d(s){if(o(s)!==s)throw Error(r(188))}function f(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var u=s,h=a;;){var y=u.return;if(y===null)break;var x=y.alternate;if(x===null){if(h=y.return,h!==null){u=h;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===u)return d(y),s;if(x===h)return d(y),a;x=x.sibling}throw Error(r(188))}if(u.return!==h.return)u=y,h=x;else{for(var C=!1,k=y.child;k;){if(k===u){C=!0,u=y,h=x;break}if(k===h){C=!0,h=y,u=x;break}k=k.sibling}if(!C){for(k=x.child;k;){if(k===u){C=!0,u=x,h=y;break}if(k===h){C=!0,h=x,u=y;break}k=k.sibling}if(!C)throw Error(r(189))}}if(u.alternate!==h)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),A=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=Q&&s[Q]||s["@@iterator"],typeof s=="function"?s:null)}var X=Symbol.for("react.client.reference");function q(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===X?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case M:return"Suspense";case D:return"SuspenseList";case z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case A:return s.displayName||"Context";case N:return(s._context.displayName||"Context")+".Consumer";case I:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return a=s.displayName||null,a!==null?a:q(s.type)||"Memo";case B:a=s._payload,s=s._init;try{return q(s(a))}catch{}}return null}var K=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},fe=[],Ne=-1;function U(s){return{current:s}}function V(s){0>Ne||(s.current=fe[Ne],fe[Ne]=null,Ne--)}function ne(s,a){Ne++,fe[Ne]=s.current,s.current=a}var se=U(null),he=U(null),ye=U(null),De=U(null);function nt(s,a){switch(ne(ye,a),ne(he,s),ne(se,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Gw(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Gw(a),s=Jw(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}V(se),ne(se,s)}function qe(){V(se),V(he),V(ye)}function Pe(s){s.memoizedState!==null&&ne(De,s);var a=se.current,u=Jw(a,s.type);a!==u&&(ne(he,s),ne(se,u))}function Dr(s){he.current===s&&(V(se),V(he)),De.current===s&&(V(De),Yl._currentValue=oe)}var mn,ei;function qt(s){if(mn===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);mn=a&&a[1]||"",ei=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mn+s+ei}var Or=!1;function Lr(s,a){if(!s||Or)return"";Or=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Y){var J=Y}Reflect.construct(s,[],te)}else{try{te.call()}catch(Y){J=Y}s.call(te.prototype)}}else{try{throw Error()}catch(Y){J=Y}(te=s())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Y){if(Y&&J&&typeof Y.stack=="string")return[Y.stack,J.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=h.DetermineComponentFrameRoot(),C=x[0],k=x[1];if(C&&k){var O=C.split(`
`),$=k.split(`
`);for(y=h=0;h<O.length&&!O[h].includes("DetermineComponentFrameRoot");)h++;for(;y<$.length&&!$[y].includes("DetermineComponentFrameRoot");)y++;if(h===O.length||y===$.length)for(h=O.length-1,y=$.length-1;1<=h&&0<=y&&O[h]!==$[y];)y--;for(;1<=h&&0<=y;h--,y--)if(O[h]!==$[y]){if(h!==1||y!==1)do if(h--,y--,0>y||O[h]!==$[y]){var Z=`
`+O[h].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=h&&0<=y);break}}}finally{Or=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?qt(u):""}function hu(s,a){switch(s.tag){case 26:case 27:case 5:return qt(s.type);case 16:return qt("Lazy");case 13:return s.child!==a&&a!==null?qt("Suspense Fallback"):qt("Suspense");case 19:return qt("SuspenseList");case 0:case 15:return Lr(s.type,!1);case 11:return Lr(s.type.render,!1);case 1:return Lr(s.type,!0);case 31:return qt("Activity");default:return""}}function ll(s){try{var a="",u=null;do a+=hu(s,u),u=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var zs=Object.prototype.hasOwnProperty,Vn=t.unstable_scheduleCallback,Hi=t.unstable_cancelCallback,Do=t.unstable_shouldYield,pu=t.unstable_requestPaint,en=t.unstable_now,tp=t.unstable_getCurrentPriorityLevel,mu=t.unstable_ImmediatePriority,ti=t.unstable_UserBlockingPriority,mr=t.unstable_NormalPriority,js=t.unstable_LowPriority,cl=t.unstable_IdlePriority,Pr=t.log,gu=t.unstable_setDisableYieldValue,qs=null,an=null;function Fn(s){if(typeof Pr=="function"&&gu(s),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(qs,s)}catch{}}var tn=Math.clz32?Math.clz32:rp,np=Math.log,yu=Math.LN2;function rp(s){return s>>>=0,s===0?32:31-(np(s)/yu|0)|0}var Oo=256,Lo=262144,yt=4194304;function vt(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Dt(s,a,u){var h=s.pendingLanes;if(h===0)return 0;var y=0,x=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var k=h&134217727;return k!==0?(h=k&~x,h!==0?y=vt(h):(C&=k,C!==0?y=vt(C):u||(u=k&~s,u!==0&&(y=vt(u))))):(k=h&~x,k!==0?y=vt(k):C!==0?y=vt(C):u||(u=h&~s,u!==0&&(y=vt(u)))),y===0?0:a!==0&&a!==y&&(a&x)===0&&(x=y&-y,u=a&-a,x>=u||x===32&&(u&4194048)!==0)?a:y}function gn(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function yn(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nn(){var s=yt;return yt<<=1,(yt&62914560)===0&&(yt=4194304),s}function vn(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Gn(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function kt(s,a,u,h,y,x){var C=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var k=s.entanglements,O=s.expirationTimes,$=s.hiddenUpdates;for(u=C&~u;0<u;){var Z=31-tn(u),te=1<<Z;k[Z]=0,O[Z]=-1;var J=$[Z];if(J!==null)for($[Z]=null,Z=0;Z<J.length;Z++){var Y=J[Z];Y!==null&&(Y.lane&=-536870913)}u&=~te}h!==0&&gr(s,h,0),x!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=x&~(C&~a))}function gr(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-tn(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|u&261930}function Rn(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var h=31-tn(u),y=1<<h;y&a|s[h]&a&&(s[h]|=a),u&=~y}}function Jn(s,a){var u=a&-a;return u=(u&42)!==0?1:ni(u),(u&(s.suspendedLanes|a))!==0?0:u}function ni(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ri(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function yr(){var s=W.p;return s!==0?s:(s=window.event,s===void 0?32:gS(s.type))}function $i(s,a){var u=W.p;try{return W.p=s,a()}finally{W.p=u}}var Kn=Math.random().toString(36).slice(2),Ht="__reactFiber$"+Kn,bn="__reactProps$"+Kn,Po="__reactContainer$"+Kn,ip="__reactEvents$"+Kn,pR="__reactListeners$"+Kn,mR="__reactHandles$"+Kn,Dv="__reactResources$"+Kn,ul="__reactMarker$"+Kn;function sp(s){delete s[Ht],delete s[bn],delete s[ip],delete s[pR],delete s[mR]}function Uo(s){var a=s[Ht];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Po]||u[Ht]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=eS(s);s!==null;){if(u=s[Ht])return u;s=eS(s)}return a}s=u,u=s.parentNode}return null}function Bo(s){if(s=s[Ht]||s[Po]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function dl(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function zo(s){var a=s[Dv];return a||(a=s[Dv]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ot(s){s[ul]=!0}var Ov=new Set,Lv={};function Hs(s,a){jo(s,a),jo(s+"Capture",a)}function jo(s,a){for(Lv[s]=a,s=0;s<a.length;s++)Ov.add(a[s])}var gR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pv={},Uv={};function yR(s){return zs.call(Uv,s)?!0:zs.call(Pv,s)?!1:gR.test(s)?Uv[s]=!0:(Pv[s]=!0,!1)}function vu(s,a,u){if(yR(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function bu(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function ii(s,a,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+h)}}function Yn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Bv(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function vR(s,a,u){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,x=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return y.call(this)},set:function(C){u=""+C,x.call(this,C)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function op(s){if(!s._valueTracker){var a=Bv(s)?"checked":"value";s._valueTracker=vR(s,a,""+s[a])}}function zv(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),h="";return s&&(h=Bv(s)?s.checked?"true":"false":s.value),s=h,s!==u?(a.setValue(s),!0):!1}function xu(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var bR=/[\n"\\]/g;function Wn(s){return s.replace(bR,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function ap(s,a,u,h,y,x,C,k){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),a!=null?C==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Yn(a)):s.value!==""+Yn(a)&&(s.value=""+Yn(a)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),a!=null?lp(s,C,Yn(a)):u!=null?lp(s,C,Yn(u)):h!=null&&s.removeAttribute("value"),y==null&&x!=null&&(s.defaultChecked=!!x),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?s.name=""+Yn(k):s.removeAttribute("name")}function jv(s,a,u,h,y,x,C,k){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.type=x),a!=null||u!=null){if(!(x!=="submit"&&x!=="reset"||a!=null)){op(s);return}u=u!=null?""+Yn(u):"",a=a!=null?""+Yn(a):u,k||a===s.value||(s.value=a),s.defaultValue=a}h=h??y,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=k?s.checked:!!h,s.defaultChecked=!!h,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C),op(s)}function lp(s,a,u){a==="number"&&xu(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function qo(s,a,u,h){if(s=s.options,a){a={};for(var y=0;y<u.length;y++)a["$"+u[y]]=!0;for(u=0;u<s.length;u++)y=a.hasOwnProperty("$"+s[u].value),s[u].selected!==y&&(s[u].selected=y),y&&h&&(s[u].defaultSelected=!0)}else{for(u=""+Yn(u),a=null,y=0;y<s.length;y++){if(s[y].value===u){s[y].selected=!0,h&&(s[y].defaultSelected=!0);return}a!==null||s[y].disabled||(a=s[y])}a!==null&&(a.selected=!0)}}function qv(s,a,u){if(a!=null&&(a=""+Yn(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+Yn(u):""}function Hv(s,a,u,h){if(a==null){if(h!=null){if(u!=null)throw Error(r(92));if(K(h)){if(1<h.length)throw Error(r(93));h=h[0]}u=h}u==null&&(u=""),a=u}u=Yn(a),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h),op(s)}function Ho(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var xR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $v(s,a,u){var h=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,u):typeof u!="number"||u===0||xR.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function Vv(s,a,u){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var y in a)h=a[y],a.hasOwnProperty(y)&&u[y]!==h&&$v(s,y,h)}else for(var x in a)a.hasOwnProperty(x)&&$v(s,x,a[x])}function cp(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),SR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wu(s){return SR.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function si(){}var up=null;function dp(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var $o=null,Vo=null;function Fv(s){var a=Bo(s);if(a&&(s=a.stateNode)){var u=s[bn]||null;e:switch(s=a.stateNode,a.type){case"input":if(ap(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Wn(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var h=u[a];if(h!==s&&h.form===s.form){var y=h[bn]||null;if(!y)throw Error(r(90));ap(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<u.length;a++)h=u[a],h.form===s.form&&zv(h)}break e;case"textarea":qv(s,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&qo(s,!!u.multiple,a,!1)}}}var fp=!1;function Gv(s,a,u){if(fp)return s(a,u);fp=!0;try{var h=s(a);return h}finally{if(fp=!1,($o!==null||Vo!==null)&&(ld(),$o&&(a=$o,s=Vo,Vo=$o=null,Fv(a),s)))for(a=0;a<s.length;a++)Fv(s[a])}}function fl(s,a){var u=s.stateNode;if(u===null)return null;var h=u[bn]||null;if(h===null)return null;u=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(r(231,a,typeof u));return u}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hp=!1;if(oi)try{var hl={};Object.defineProperty(hl,"passive",{get:function(){hp=!0}}),window.addEventListener("test",hl,hl),window.removeEventListener("test",hl,hl)}catch{hp=!1}var Vi=null,pp=null,Su=null;function Jv(){if(Su)return Su;var s,a=pp,u=a.length,h,y="value"in Vi?Vi.value:Vi.textContent,x=y.length;for(s=0;s<u&&a[s]===y[s];s++);var C=u-s;for(h=1;h<=C&&a[u-h]===y[x-h];h++);return Su=y.slice(s,1<h?1-h:void 0)}function Eu(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Cu(){return!0}function Kv(){return!1}function xn(s){function a(u,h,y,x,C){this._reactName=u,this._targetInst=y,this.type=h,this.nativeEvent=x,this.target=C,this.currentTarget=null;for(var k in s)s.hasOwnProperty(k)&&(u=s[k],this[k]=u?u(x):x[k]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Cu:Kv,this.isPropagationStopped=Kv,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Cu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Cu)},persist:function(){},isPersistent:Cu}),a}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tu=xn($s),pl=m({},$s,{view:0,detail:0}),ER=xn(pl),mp,gp,ml,_u=m({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vp,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ml&&(ml&&s.type==="mousemove"?(mp=s.screenX-ml.screenX,gp=s.screenY-ml.screenY):gp=mp=0,ml=s),mp)},movementY:function(s){return"movementY"in s?s.movementY:gp}}),Yv=xn(_u),CR=m({},_u,{dataTransfer:0}),TR=xn(CR),_R=m({},pl,{relatedTarget:0}),yp=xn(_R),AR=m({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),NR=xn(AR),kR=m({},$s,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),RR=xn(kR),MR=m({},$s,{data:0}),Wv=xn(MR),IR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LR(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=OR[s])?!!a[s]:!1}function vp(){return LR}var PR=m({},pl,{key:function(s){if(s.key){var a=IR[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Eu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?DR[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vp,charCode:function(s){return s.type==="keypress"?Eu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Eu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),UR=xn(PR),BR=m({},_u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xv=xn(BR),zR=m({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vp}),jR=xn(zR),qR=m({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),HR=xn(qR),$R=m({},_u,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),VR=xn($R),FR=m({},$s,{newState:0,oldState:0}),GR=xn(FR),JR=[9,13,27,32],bp=oi&&"CompositionEvent"in window,gl=null;oi&&"documentMode"in document&&(gl=document.documentMode);var KR=oi&&"TextEvent"in window&&!gl,Qv=oi&&(!bp||gl&&8<gl&&11>=gl),Zv=" ",eb=!1;function tb(s,a){switch(s){case"keyup":return JR.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nb(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Fo=!1;function YR(s,a){switch(s){case"compositionend":return nb(a);case"keypress":return a.which!==32?null:(eb=!0,Zv);case"textInput":return s=a.data,s===Zv&&eb?null:s;default:return null}}function WR(s,a){if(Fo)return s==="compositionend"||!bp&&tb(s,a)?(s=Jv(),Su=pp=Vi=null,Fo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Qv&&a.locale!=="ko"?null:a.data;default:return null}}var XR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rb(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!XR[s.type]:a==="textarea"}function ib(s,a,u,h){$o?Vo?Vo.push(h):Vo=[h]:$o=h,a=md(a,"onChange"),0<a.length&&(u=new Tu("onChange","change",null,u,h),s.push({event:u,listeners:a}))}var yl=null,vl=null;function QR(s){jw(s,0)}function Au(s){var a=dl(s);if(zv(a))return s}function sb(s,a){if(s==="change")return a}var ob=!1;if(oi){var xp;if(oi){var wp="oninput"in document;if(!wp){var ab=document.createElement("div");ab.setAttribute("oninput","return;"),wp=typeof ab.oninput=="function"}xp=wp}else xp=!1;ob=xp&&(!document.documentMode||9<document.documentMode)}function lb(){yl&&(yl.detachEvent("onpropertychange",cb),vl=yl=null)}function cb(s){if(s.propertyName==="value"&&Au(vl)){var a=[];ib(a,vl,s,dp(s)),Gv(QR,a)}}function ZR(s,a,u){s==="focusin"?(lb(),yl=a,vl=u,yl.attachEvent("onpropertychange",cb)):s==="focusout"&&lb()}function eM(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Au(vl)}function tM(s,a){if(s==="click")return Au(a)}function nM(s,a){if(s==="input"||s==="change")return Au(a)}function rM(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Mn=typeof Object.is=="function"?Object.is:rM;function bl(s,a){if(Mn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var y=u[h];if(!zs.call(a,y)||!Mn(s[y],a[y]))return!1}return!0}function ub(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function db(s,a){var u=ub(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=a&&h>=a)return{node:u,offset:a-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=ub(u)}}function fb(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?fb(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function hb(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=xu(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=xu(s.document)}return a}function Sp(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var iM=oi&&"documentMode"in document&&11>=document.documentMode,Go=null,Ep=null,xl=null,Cp=!1;function pb(s,a,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Cp||Go==null||Go!==xu(h)||(h=Go,"selectionStart"in h&&Sp(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),xl&&bl(xl,h)||(xl=h,h=md(Ep,"onSelect"),0<h.length&&(a=new Tu("onSelect","select",null,a,u),s.push({event:a,listeners:h}),a.target=Go)))}function Vs(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var Jo={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionrun:Vs("Transition","TransitionRun"),transitionstart:Vs("Transition","TransitionStart"),transitioncancel:Vs("Transition","TransitionCancel"),transitionend:Vs("Transition","TransitionEnd")},Tp={},mb={};oi&&(mb=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function Fs(s){if(Tp[s])return Tp[s];if(!Jo[s])return s;var a=Jo[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in mb)return Tp[s]=a[u];return s}var gb=Fs("animationend"),yb=Fs("animationiteration"),vb=Fs("animationstart"),sM=Fs("transitionrun"),oM=Fs("transitionstart"),aM=Fs("transitioncancel"),bb=Fs("transitionend"),xb=new Map,_p="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_p.push("scrollEnd");function vr(s,a){xb.set(s,a),Hs(a,[s])}var Nu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Xn=[],Ko=0,Ap=0;function ku(){for(var s=Ko,a=Ap=Ko=0;a<s;){var u=Xn[a];Xn[a++]=null;var h=Xn[a];Xn[a++]=null;var y=Xn[a];Xn[a++]=null;var x=Xn[a];if(Xn[a++]=null,h!==null&&y!==null){var C=h.pending;C===null?y.next=y:(y.next=C.next,C.next=y),h.pending=y}x!==0&&wb(u,y,x)}}function Ru(s,a,u,h){Xn[Ko++]=s,Xn[Ko++]=a,Xn[Ko++]=u,Xn[Ko++]=h,Ap|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Np(s,a,u,h){return Ru(s,a,u,h),Mu(s)}function Gs(s,a){return Ru(s,null,null,a),Mu(s)}function wb(s,a,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var y=!1,x=s.return;x!==null;)x.childLanes|=u,h=x.alternate,h!==null&&(h.childLanes|=u),x.tag===22&&(s=x.stateNode,s===null||s._visibility&1||(y=!0)),s=x,x=x.return;return s.tag===3?(x=s.stateNode,y&&a!==null&&(y=31-tn(u),s=x.hiddenUpdates,h=s[y],h===null?s[y]=[a]:h.push(a),a.lane=u|536870912),x):null}function Mu(s){if(50<Hl)throw Hl=0,Um=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Yo={};function lM(s,a,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(s,a,u,h){return new lM(s,a,u,h)}function kp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ai(s,a){var u=s.alternate;return u===null?(u=In(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function Sb(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Iu(s,a,u,h,y,x){var C=0;if(h=s,typeof s=="function")kp(s)&&(C=1);else if(typeof s=="string")C=hI(s,u,se.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case z:return s=In(31,u,a,y),s.elementType=z,s.lanes=x,s;case S:return Js(u.children,y,x,a);case E:C=8,y|=24;break;case T:return s=In(12,u,a,y|2),s.elementType=T,s.lanes=x,s;case M:return s=In(13,u,a,y),s.elementType=M,s.lanes=x,s;case D:return s=In(19,u,a,y),s.elementType=D,s.lanes=x,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case A:C=10;break e;case N:C=9;break e;case I:C=11;break e;case R:C=14;break e;case B:C=16,h=null;break e}C=29,u=Error(r(130,s===null?"null":typeof s,"")),h=null}return a=In(C,u,a,y),a.elementType=s,a.type=h,a.lanes=x,a}function Js(s,a,u,h){return s=In(7,s,h,a),s.lanes=u,s}function Rp(s,a,u){return s=In(6,s,null,a),s.lanes=u,s}function Eb(s){var a=In(18,null,null,0);return a.stateNode=s,a}function Mp(s,a,u){return a=In(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var Cb=new WeakMap;function Qn(s,a){if(typeof s=="object"&&s!==null){var u=Cb.get(s);return u!==void 0?u:(a={value:s,source:a,stack:ll(a)},Cb.set(s,a),a)}return{value:s,source:a,stack:ll(a)}}var Wo=[],Xo=0,Du=null,wl=0,Zn=[],er=0,Fi=null,Ur=1,Br="";function li(s,a){Wo[Xo++]=wl,Wo[Xo++]=Du,Du=s,wl=a}function Tb(s,a,u){Zn[er++]=Ur,Zn[er++]=Br,Zn[er++]=Fi,Fi=s;var h=Ur;s=Br;var y=32-tn(h)-1;h&=~(1<<y),u+=1;var x=32-tn(a)+y;if(30<x){var C=y-y%5;x=(h&(1<<C)-1).toString(32),h>>=C,y-=C,Ur=1<<32-tn(a)+y|u<<y|h,Br=x+s}else Ur=1<<x|u<<y|h,Br=s}function Ip(s){s.return!==null&&(li(s,1),Tb(s,1,0))}function Dp(s){for(;s===Du;)Du=Wo[--Xo],Wo[Xo]=null,wl=Wo[--Xo],Wo[Xo]=null;for(;s===Fi;)Fi=Zn[--er],Zn[er]=null,Br=Zn[--er],Zn[er]=null,Ur=Zn[--er],Zn[er]=null}function _b(s,a){Zn[er++]=Ur,Zn[er++]=Br,Zn[er++]=Fi,Ur=a.id,Br=a.overflow,Fi=s}var $t=null,Qe=null,Oe=!1,Gi=null,tr=!1,Op=Error(r(519));function Ji(s){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sl(Qn(a,s)),Op}function Ab(s){var a=s.stateNode,u=s.type,h=s.memoizedProps;switch(a[Ht]=s,a[bn]=h,u){case"dialog":Re("cancel",a),Re("close",a);break;case"iframe":case"object":case"embed":Re("load",a);break;case"video":case"audio":for(u=0;u<Vl.length;u++)Re(Vl[u],a);break;case"source":Re("error",a);break;case"img":case"image":case"link":Re("error",a),Re("load",a);break;case"details":Re("toggle",a);break;case"input":Re("invalid",a),jv(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Re("invalid",a);break;case"textarea":Re("invalid",a),Hv(a,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||h.suppressHydrationWarning===!0||Vw(a.textContent,u)?(h.popover!=null&&(Re("beforetoggle",a),Re("toggle",a)),h.onScroll!=null&&Re("scroll",a),h.onScrollEnd!=null&&Re("scrollend",a),h.onClick!=null&&(a.onclick=si),a=!0):a=!1,a||Ji(s,!0)}function Nb(s){for($t=s.return;$t;)switch($t.tag){case 5:case 31:case 13:tr=!1;return;case 27:case 3:tr=!0;return;default:$t=$t.return}}function Qo(s){if(s!==$t)return!1;if(!Oe)return Nb(s),Oe=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||Qm(s.type,s.memoizedProps)),u=!u),u&&Qe&&Ji(s),Nb(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Qe=Zw(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Qe=Zw(s)}else a===27?(a=Qe,ls(s.type)?(s=rg,rg=null,Qe=s):Qe=a):Qe=$t?rr(s.stateNode.nextSibling):null;return!0}function Ks(){Qe=$t=null,Oe=!1}function Lp(){var s=Gi;return s!==null&&(Cn===null?Cn=s:Cn.push.apply(Cn,s),Gi=null),s}function Sl(s){Gi===null?Gi=[s]:Gi.push(s)}var Pp=U(null),Ys=null,ci=null;function Ki(s,a,u){ne(Pp,a._currentValue),a._currentValue=u}function ui(s){s._currentValue=Pp.current,V(Pp)}function Up(s,a,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===u)break;s=s.return}}function Bp(s,a,u,h){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var x=y.dependencies;if(x!==null){var C=y.child;x=x.firstContext;e:for(;x!==null;){var k=x;x=y;for(var O=0;O<a.length;O++)if(k.context===a[O]){x.lanes|=u,k=x.alternate,k!==null&&(k.lanes|=u),Up(x.return,u,s),h||(C=null);break e}x=k.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(r(341));C.lanes|=u,x=C.alternate,x!==null&&(x.lanes|=u),Up(C,u,s),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===s){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function Zo(s,a,u,h){s=null;for(var y=a,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var k=y.type;Mn(y.pendingProps.value,C.value)||(s!==null?s.push(k):s=[k])}}else if(y===De.current){if(C=y.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Yl):s=[Yl])}y=y.return}s!==null&&Bp(a,s,u,h),a.flags|=262144}function Ou(s){for(s=s.firstContext;s!==null;){if(!Mn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ws(s){Ys=s,ci=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Vt(s){return kb(Ys,s)}function Lu(s,a){return Ys===null&&Ws(s),kb(s,a)}function kb(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},ci===null){if(s===null)throw Error(r(308));ci=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else ci=ci.next=a;return u}var cM=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},uM=t.unstable_scheduleCallback,dM=t.unstable_NormalPriority,wt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zp(){return{controller:new cM,data:new Map,refCount:0}}function El(s){s.refCount--,s.refCount===0&&uM(dM,function(){s.controller.abort()})}var Cl=null,jp=0,ea=0,ta=null;function fM(s,a){if(Cl===null){var u=Cl=[];jp=0,ea=$m(),ta={status:"pending",value:void 0,then:function(h){u.push(h)}}}return jp++,a.then(Rb,Rb),a}function Rb(){if(--jp===0&&Cl!==null){ta!==null&&(ta.status="fulfilled");var s=Cl;Cl=null,ea=0,ta=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function hM(s,a){var u=[],h={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var y=0;y<u.length;y++)(0,u[y])(a)},function(y){for(h.status="rejected",h.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),h}var Mb=L.S;L.S=function(s,a){pw=en(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&fM(s,a),Mb!==null&&Mb(s,a)};var Xs=U(null);function qp(){var s=Xs.current;return s!==null?s:Ye.pooledCache}function Pu(s,a){a===null?ne(Xs,Xs.current):ne(Xs,a.pool)}function Ib(){var s=qp();return s===null?null:{parent:wt._currentValue,pool:s}}var na=Error(r(460)),Hp=Error(r(474)),Uu=Error(r(542)),Bu={then:function(){}};function Db(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Ob(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(si,si),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Pb(s),s;default:if(typeof a.status=="string")a.then(si,si);else{if(s=Ye,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=h}},function(h){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Pb(s),s}throw Zs=a,na}}function Qs(s){try{var a=s._init;return a(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Zs=u,na):u}}var Zs=null;function Lb(){if(Zs===null)throw Error(r(459));var s=Zs;return Zs=null,s}function Pb(s){if(s===na||s===Uu)throw Error(r(483))}var ra=null,Tl=0;function zu(s){var a=Tl;return Tl+=1,ra===null&&(ra=[]),Ob(ra,s,a)}function _l(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function ju(s,a){throw a.$$typeof===v?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Ub(s){function a(j,P){if(s){var H=j.deletions;H===null?(j.deletions=[P],j.flags|=16):H.push(P)}}function u(j,P){if(!s)return null;for(;P!==null;)a(j,P),P=P.sibling;return null}function h(j){for(var P=new Map;j!==null;)j.key!==null?P.set(j.key,j):P.set(j.index,j),j=j.sibling;return P}function y(j,P){return j=ai(j,P),j.index=0,j.sibling=null,j}function x(j,P,H){return j.index=H,s?(H=j.alternate,H!==null?(H=H.index,H<P?(j.flags|=67108866,P):H):(j.flags|=67108866,P)):(j.flags|=1048576,P)}function C(j){return s&&j.alternate===null&&(j.flags|=67108866),j}function k(j,P,H,ee){return P===null||P.tag!==6?(P=Rp(H,j.mode,ee),P.return=j,P):(P=y(P,H),P.return=j,P)}function O(j,P,H,ee){var me=H.type;return me===S?Z(j,P,H.props.children,ee,H.key):P!==null&&(P.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===B&&Qs(me)===P.type)?(P=y(P,H.props),_l(P,H),P.return=j,P):(P=Iu(H.type,H.key,H.props,null,j.mode,ee),_l(P,H),P.return=j,P)}function $(j,P,H,ee){return P===null||P.tag!==4||P.stateNode.containerInfo!==H.containerInfo||P.stateNode.implementation!==H.implementation?(P=Mp(H,j.mode,ee),P.return=j,P):(P=y(P,H.children||[]),P.return=j,P)}function Z(j,P,H,ee,me){return P===null||P.tag!==7?(P=Js(H,j.mode,ee,me),P.return=j,P):(P=y(P,H),P.return=j,P)}function te(j,P,H){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Rp(""+P,j.mode,H),P.return=j,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case b:return H=Iu(P.type,P.key,P.props,null,j.mode,H),_l(H,P),H.return=j,H;case w:return P=Mp(P,j.mode,H),P.return=j,P;case B:return P=Qs(P),te(j,P,H)}if(K(P)||G(P))return P=Js(P,j.mode,H,null),P.return=j,P;if(typeof P.then=="function")return te(j,zu(P),H);if(P.$$typeof===A)return te(j,Lu(j,P),H);ju(j,P)}return null}function J(j,P,H,ee){var me=P!==null?P.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return me!==null?null:k(j,P,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return H.key===me?O(j,P,H,ee):null;case w:return H.key===me?$(j,P,H,ee):null;case B:return H=Qs(H),J(j,P,H,ee)}if(K(H)||G(H))return me!==null?null:Z(j,P,H,ee,null);if(typeof H.then=="function")return J(j,P,zu(H),ee);if(H.$$typeof===A)return J(j,P,Lu(j,H),ee);ju(j,H)}return null}function Y(j,P,H,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return j=j.get(H)||null,k(P,j,""+ee,me);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return j=j.get(ee.key===null?H:ee.key)||null,O(P,j,ee,me);case w:return j=j.get(ee.key===null?H:ee.key)||null,$(P,j,ee,me);case B:return ee=Qs(ee),Y(j,P,H,ee,me)}if(K(ee)||G(ee))return j=j.get(H)||null,Z(P,j,ee,me,null);if(typeof ee.then=="function")return Y(j,P,H,zu(ee),me);if(ee.$$typeof===A)return Y(j,P,H,Lu(P,ee),me);ju(P,ee)}return null}function ce(j,P,H,ee){for(var me=null,ze=null,ue=P,_e=P=0,Ie=null;ue!==null&&_e<H.length;_e++){ue.index>_e?(Ie=ue,ue=null):Ie=ue.sibling;var je=J(j,ue,H[_e],ee);if(je===null){ue===null&&(ue=Ie);break}s&&ue&&je.alternate===null&&a(j,ue),P=x(je,P,_e),ze===null?me=je:ze.sibling=je,ze=je,ue=Ie}if(_e===H.length)return u(j,ue),Oe&&li(j,_e),me;if(ue===null){for(;_e<H.length;_e++)ue=te(j,H[_e],ee),ue!==null&&(P=x(ue,P,_e),ze===null?me=ue:ze.sibling=ue,ze=ue);return Oe&&li(j,_e),me}for(ue=h(ue);_e<H.length;_e++)Ie=Y(ue,j,_e,H[_e],ee),Ie!==null&&(s&&Ie.alternate!==null&&ue.delete(Ie.key===null?_e:Ie.key),P=x(Ie,P,_e),ze===null?me=Ie:ze.sibling=Ie,ze=Ie);return s&&ue.forEach(function(hs){return a(j,hs)}),Oe&&li(j,_e),me}function ve(j,P,H,ee){if(H==null)throw Error(r(151));for(var me=null,ze=null,ue=P,_e=P=0,Ie=null,je=H.next();ue!==null&&!je.done;_e++,je=H.next()){ue.index>_e?(Ie=ue,ue=null):Ie=ue.sibling;var hs=J(j,ue,je.value,ee);if(hs===null){ue===null&&(ue=Ie);break}s&&ue&&hs.alternate===null&&a(j,ue),P=x(hs,P,_e),ze===null?me=hs:ze.sibling=hs,ze=hs,ue=Ie}if(je.done)return u(j,ue),Oe&&li(j,_e),me;if(ue===null){for(;!je.done;_e++,je=H.next())je=te(j,je.value,ee),je!==null&&(P=x(je,P,_e),ze===null?me=je:ze.sibling=je,ze=je);return Oe&&li(j,_e),me}for(ue=h(ue);!je.done;_e++,je=H.next())je=Y(ue,j,_e,je.value,ee),je!==null&&(s&&je.alternate!==null&&ue.delete(je.key===null?_e:je.key),P=x(je,P,_e),ze===null?me=je:ze.sibling=je,ze=je);return s&&ue.forEach(function(CI){return a(j,CI)}),Oe&&li(j,_e),me}function Ke(j,P,H,ee){if(typeof H=="object"&&H!==null&&H.type===S&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case b:e:{for(var me=H.key;P!==null;){if(P.key===me){if(me=H.type,me===S){if(P.tag===7){u(j,P.sibling),ee=y(P,H.props.children),ee.return=j,j=ee;break e}}else if(P.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===B&&Qs(me)===P.type){u(j,P.sibling),ee=y(P,H.props),_l(ee,H),ee.return=j,j=ee;break e}u(j,P);break}else a(j,P);P=P.sibling}H.type===S?(ee=Js(H.props.children,j.mode,ee,H.key),ee.return=j,j=ee):(ee=Iu(H.type,H.key,H.props,null,j.mode,ee),_l(ee,H),ee.return=j,j=ee)}return C(j);case w:e:{for(me=H.key;P!==null;){if(P.key===me)if(P.tag===4&&P.stateNode.containerInfo===H.containerInfo&&P.stateNode.implementation===H.implementation){u(j,P.sibling),ee=y(P,H.children||[]),ee.return=j,j=ee;break e}else{u(j,P);break}else a(j,P);P=P.sibling}ee=Mp(H,j.mode,ee),ee.return=j,j=ee}return C(j);case B:return H=Qs(H),Ke(j,P,H,ee)}if(K(H))return ce(j,P,H,ee);if(G(H)){if(me=G(H),typeof me!="function")throw Error(r(150));return H=me.call(H),ve(j,P,H,ee)}if(typeof H.then=="function")return Ke(j,P,zu(H),ee);if(H.$$typeof===A)return Ke(j,P,Lu(j,H),ee);ju(j,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,P!==null&&P.tag===6?(u(j,P.sibling),ee=y(P,H),ee.return=j,j=ee):(u(j,P),ee=Rp(H,j.mode,ee),ee.return=j,j=ee),C(j)):u(j,P)}return function(j,P,H,ee){try{Tl=0;var me=Ke(j,P,H,ee);return ra=null,me}catch(ue){if(ue===na||ue===Uu)throw ue;var ze=In(29,ue,null,j.mode);return ze.lanes=ee,ze.return=j,ze}finally{}}}var eo=Ub(!0),Bb=Ub(!1),Yi=!1;function $p(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vp(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Wi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Xi(s,a,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(He&2)!==0){var y=h.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),h.pending=a,a=Mu(s),wb(s,null,u),a}return Ru(s,h,a,u),Mu(s)}function Al(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Rn(s,u)}}function Fp(s,a){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var y=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};x===null?y=x=C:x=x.next=C,u=u.next}while(u!==null);x===null?y=x=a:x=x.next=a}else y=x=a;u={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var Gp=!1;function Nl(){if(Gp){var s=ta;if(s!==null)throw s}}function kl(s,a,u,h){Gp=!1;var y=s.updateQueue;Yi=!1;var x=y.firstBaseUpdate,C=y.lastBaseUpdate,k=y.shared.pending;if(k!==null){y.shared.pending=null;var O=k,$=O.next;O.next=null,C===null?x=$:C.next=$,C=O;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,k=Z.lastBaseUpdate,k!==C&&(k===null?Z.firstBaseUpdate=$:k.next=$,Z.lastBaseUpdate=O))}if(x!==null){var te=y.baseState;C=0,Z=$=O=null,k=x;do{var J=k.lane&-536870913,Y=J!==k.lane;if(Y?(Me&J)===J:(h&J)===J){J!==0&&J===ea&&(Gp=!0),Z!==null&&(Z=Z.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var ce=s,ve=k;J=a;var Ke=u;switch(ve.tag){case 1:if(ce=ve.payload,typeof ce=="function"){te=ce.call(Ke,te,J);break e}te=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=ve.payload,J=typeof ce=="function"?ce.call(Ke,te,J):ce,J==null)break e;te=m({},te,J);break e;case 2:Yi=!0}}J=k.callback,J!==null&&(s.flags|=64,Y&&(s.flags|=8192),Y=y.callbacks,Y===null?y.callbacks=[J]:Y.push(J))}else Y={lane:J,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Z===null?($=Z=Y,O=te):Z=Z.next=Y,C|=J;if(k=k.next,k===null){if(k=y.shared.pending,k===null)break;Y=k,k=Y.next,Y.next=null,y.lastBaseUpdate=Y,y.shared.pending=null}}while(!0);Z===null&&(O=te),y.baseState=O,y.firstBaseUpdate=$,y.lastBaseUpdate=Z,x===null&&(y.shared.lanes=0),ns|=C,s.lanes=C,s.memoizedState=te}}function zb(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function jb(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)zb(u[s],a)}var ia=U(null),qu=U(0);function qb(s,a){s=bi,ne(qu,s),ne(ia,a),bi=s|a.baseLanes}function Jp(){ne(qu,bi),ne(ia,ia.current)}function Kp(){bi=qu.current,V(ia),V(qu)}var Dn=U(null),nr=null;function Qi(s){var a=s.alternate;ne(bt,bt.current&1),ne(Dn,s),nr===null&&(a===null||ia.current!==null||a.memoizedState!==null)&&(nr=s)}function Yp(s){ne(bt,bt.current),ne(Dn,s),nr===null&&(nr=s)}function Hb(s){s.tag===22?(ne(bt,bt.current),ne(Dn,s),nr===null&&(nr=s)):Zi()}function Zi(){ne(bt,bt.current),ne(Dn,Dn.current)}function On(s){V(Dn),nr===s&&(nr=null),V(bt)}var bt=U(0);function Hu(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||tg(u)||ng(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var di=0,Ce=null,Ge=null,St=null,$u=!1,sa=!1,to=!1,Vu=0,Rl=0,oa=null,pM=0;function ut(){throw Error(r(321))}function Wp(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Mn(s[u],a[u]))return!1;return!0}function Xp(s,a,u,h,y,x){return di=x,Ce=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,L.H=s===null||s.memoizedState===null?Tx:fm,to=!1,x=u(h,y),to=!1,sa&&(x=Vb(a,u,h,y)),$b(s),x}function $b(s){L.H=Dl;var a=Ge!==null&&Ge.next!==null;if(di=0,St=Ge=Ce=null,$u=!1,Rl=0,oa=null,a)throw Error(r(300));s===null||Et||(s=s.dependencies,s!==null&&Ou(s)&&(Et=!0))}function Vb(s,a,u,h){Ce=s;var y=0;do{if(sa&&(oa=null),Rl=0,sa=!1,25<=y)throw Error(r(301));if(y+=1,St=Ge=null,s.updateQueue!=null){var x=s.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}L.H=_x,x=a(u,h)}while(sa);return x}function mM(){var s=L.H,a=s.useState()[0];return a=typeof a.then=="function"?Ml(a):a,s=s.useState()[0],(Ge!==null?Ge.memoizedState:null)!==s&&(Ce.flags|=1024),a}function Qp(){var s=Vu!==0;return Vu=0,s}function Zp(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function em(s){if($u){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}$u=!1}di=0,St=Ge=Ce=null,sa=!1,Rl=Vu=0,oa=null}function ln(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Ce.memoizedState=St=s:St=St.next=s,St}function xt(){if(Ge===null){var s=Ce.alternate;s=s!==null?s.memoizedState:null}else s=Ge.next;var a=St===null?Ce.memoizedState:St.next;if(a!==null)St=a,Ge=s;else{if(s===null)throw Ce.alternate===null?Error(r(467)):Error(r(310));Ge=s,s={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},St===null?Ce.memoizedState=St=s:St=St.next=s}return St}function Fu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ml(s){var a=Rl;return Rl+=1,oa===null&&(oa=[]),s=Ob(oa,s,a),a=Ce,(St===null?a.memoizedState:St.next)===null&&(a=a.alternate,L.H=a===null||a.memoizedState===null?Tx:fm),s}function Gu(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ml(s);if(s.$$typeof===A)return Vt(s)}throw Error(r(438,String(s)))}function tm(s){var a=null,u=Ce.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var h=Ce.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Fu(),Ce.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),h=0;h<s;h++)u[h]=F;return a.index++,u}function fi(s,a){return typeof a=="function"?a(s):a}function Ju(s){var a=xt();return nm(a,Ge,s)}function nm(s,a,u){var h=s.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=u;var y=s.baseQueue,x=h.pending;if(x!==null){if(y!==null){var C=y.next;y.next=x.next,x.next=C}a.baseQueue=y=x,h.pending=null}if(x=s.baseState,y===null)s.memoizedState=x;else{a=y.next;var k=C=null,O=null,$=a,Z=!1;do{var te=$.lane&-536870913;if(te!==$.lane?(Me&te)===te:(di&te)===te){var J=$.revertLane;if(J===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),te===ea&&(Z=!0);else if((di&J)===J){$=$.next,J===ea&&(Z=!0);continue}else te={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(k=O=te,C=x):O=O.next=te,Ce.lanes|=J,ns|=J;te=$.action,to&&u(x,te),x=$.hasEagerState?$.eagerState:u(x,te)}else J={lane:te,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(k=O=J,C=x):O=O.next=J,Ce.lanes|=te,ns|=te;$=$.next}while($!==null&&$!==a);if(O===null?C=x:O.next=k,!Mn(x,s.memoizedState)&&(Et=!0,Z&&(u=ta,u!==null)))throw u;s.memoizedState=x,s.baseState=C,s.baseQueue=O,h.lastRenderedState=x}return y===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function rm(s){var a=xt(),u=a.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var h=u.dispatch,y=u.pending,x=a.memoizedState;if(y!==null){u.pending=null;var C=y=y.next;do x=s(x,C.action),C=C.next;while(C!==y);Mn(x,a.memoizedState)||(Et=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),u.lastRenderedState=x}return[x,h]}function Fb(s,a,u){var h=Ce,y=xt(),x=Oe;if(x){if(u===void 0)throw Error(r(407));u=u()}else u=a();var C=!Mn((Ge||y).memoizedState,u);if(C&&(y.memoizedState=u,Et=!0),y=y.queue,om(Kb.bind(null,h,y,s),[s]),y.getSnapshot!==a||C||St!==null&&St.memoizedState.tag&1){if(h.flags|=2048,aa(9,{destroy:void 0},Jb.bind(null,h,y,u,a),null),Ye===null)throw Error(r(349));x||(di&127)!==0||Gb(h,a,u)}return u}function Gb(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Ce.updateQueue,a===null?(a=Fu(),Ce.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function Jb(s,a,u,h){a.value=u,a.getSnapshot=h,Yb(a)&&Wb(s)}function Kb(s,a,u){return u(function(){Yb(a)&&Wb(s)})}function Yb(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Mn(s,u)}catch{return!0}}function Wb(s){var a=Gs(s,2);a!==null&&Tn(a,s,2)}function im(s){var a=ln();if(typeof s=="function"){var u=s;if(s=u(),to){Fn(!0);try{u()}finally{Fn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:s},a}function Xb(s,a,u,h){return s.baseState=u,nm(s,Ge,typeof h=="function"?h:fi)}function gM(s,a,u,h,y){if(Wu(s))throw Error(r(485));if(s=a.action,s!==null){var x={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){x.listeners.push(C)}};L.T!==null?u(!0):x.isTransition=!1,h(x),u=a.pending,u===null?(x.next=a.pending=x,Qb(a,x)):(x.next=u.next,a.pending=u.next=x)}}function Qb(s,a){var u=a.action,h=a.payload,y=s.state;if(a.isTransition){var x=L.T,C={};L.T=C;try{var k=u(y,h),O=L.S;O!==null&&O(C,k),Zb(s,a,k)}catch($){sm(s,a,$)}finally{x!==null&&C.types!==null&&(x.types=C.types),L.T=x}}else try{x=u(y,h),Zb(s,a,x)}catch($){sm(s,a,$)}}function Zb(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){ex(s,a,h)},function(h){return sm(s,a,h)}):ex(s,a,u)}function ex(s,a,u){a.status="fulfilled",a.value=u,tx(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,Qb(s,u)))}function sm(s,a,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=u,tx(a),a=a.next;while(a!==h)}s.action=null}function tx(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function nx(s,a){return a}function rx(s,a){if(Oe){var u=Ye.formState;if(u!==null){e:{var h=Ce;if(Oe){if(Qe){t:{for(var y=Qe,x=tr;y.nodeType!==8;){if(!x){y=null;break t}if(y=rr(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){Qe=rr(y.nextSibling),h=y.data==="F!";break e}}Ji(h)}h=!1}h&&(a=u[0])}}return u=ln(),u.memoizedState=u.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nx,lastRenderedState:a},u.queue=h,u=Sx.bind(null,Ce,h),h.dispatch=u,h=im(!1),x=dm.bind(null,Ce,!1,h.queue),h=ln(),y={state:a,dispatch:null,action:s,pending:null},h.queue=y,u=gM.bind(null,Ce,y,x,u),y.dispatch=u,h.memoizedState=s,[a,u,!1]}function ix(s){var a=xt();return sx(a,Ge,s)}function sx(s,a,u){if(a=nm(s,a,nx)[0],s=Ju(fi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Ml(a)}catch(C){throw C===na?Uu:C}else h=a;a=xt();var y=a.queue,x=y.dispatch;return u!==a.memoizedState&&(Ce.flags|=2048,aa(9,{destroy:void 0},yM.bind(null,y,u),null)),[h,x,s]}function yM(s,a){s.action=a}function ox(s){var a=xt(),u=Ge;if(u!==null)return sx(a,u,s);xt(),a=a.memoizedState,u=xt();var h=u.queue.dispatch;return u.memoizedState=s,[a,h,!1]}function aa(s,a,u,h){return s={tag:s,create:u,deps:h,inst:a,next:null},a=Ce.updateQueue,a===null&&(a=Fu(),Ce.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,a.lastEffect=s),s}function ax(){return xt().memoizedState}function Ku(s,a,u,h){var y=ln();Ce.flags|=s,y.memoizedState=aa(1|a,{destroy:void 0},u,h===void 0?null:h)}function Yu(s,a,u,h){var y=xt();h=h===void 0?null:h;var x=y.memoizedState.inst;Ge!==null&&h!==null&&Wp(h,Ge.memoizedState.deps)?y.memoizedState=aa(a,x,u,h):(Ce.flags|=s,y.memoizedState=aa(1|a,x,u,h))}function lx(s,a){Ku(8390656,8,s,a)}function om(s,a){Yu(2048,8,s,a)}function vM(s){Ce.flags|=4;var a=Ce.updateQueue;if(a===null)a=Fu(),Ce.updateQueue=a,a.events=[s];else{var u=a.events;u===null?a.events=[s]:u.push(s)}}function cx(s){var a=xt().memoizedState;return vM({ref:a,nextImpl:s}),function(){if((He&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function ux(s,a){return Yu(4,2,s,a)}function dx(s,a){return Yu(4,4,s,a)}function fx(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function hx(s,a,u){u=u!=null?u.concat([s]):null,Yu(4,4,fx.bind(null,a,s),u)}function am(){}function px(s,a){var u=xt();a=a===void 0?null:a;var h=u.memoizedState;return a!==null&&Wp(a,h[1])?h[0]:(u.memoizedState=[s,a],s)}function mx(s,a){var u=xt();a=a===void 0?null:a;var h=u.memoizedState;if(a!==null&&Wp(a,h[1]))return h[0];if(h=s(),to){Fn(!0);try{s()}finally{Fn(!1)}}return u.memoizedState=[h,a],h}function lm(s,a,u){return u===void 0||(di&1073741824)!==0&&(Me&261930)===0?s.memoizedState=a:(s.memoizedState=u,s=gw(),Ce.lanes|=s,ns|=s,u)}function gx(s,a,u,h){return Mn(u,a)?u:ia.current!==null?(s=lm(s,u,h),Mn(s,a)||(Et=!0),s):(di&42)===0||(di&1073741824)!==0&&(Me&261930)===0?(Et=!0,s.memoizedState=u):(s=gw(),Ce.lanes|=s,ns|=s,a)}function yx(s,a,u,h,y){var x=W.p;W.p=x!==0&&8>x?x:8;var C=L.T,k={};L.T=k,dm(s,!1,a,u);try{var O=y(),$=L.S;if($!==null&&$(k,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Z=hM(O,h);Il(s,a,Z,Un(s))}else Il(s,a,h,Un(s))}catch(te){Il(s,a,{then:function(){},status:"rejected",reason:te},Un())}finally{W.p=x,C!==null&&k.types!==null&&(C.types=k.types),L.T=C}}function bM(){}function cm(s,a,u,h){if(s.tag!==5)throw Error(r(476));var y=vx(s).queue;yx(s,y,a,oe,u===null?bM:function(){return bx(s),u(h)})}function vx(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:oe},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function bx(s){var a=vx(s);a.next===null&&(a=s.alternate.memoizedState),Il(s,a.next.queue,{},Un())}function um(){return Vt(Yl)}function xx(){return xt().memoizedState}function wx(){return xt().memoizedState}function xM(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=Un();s=Wi(u);var h=Xi(a,s,u);h!==null&&(Tn(h,a,u),Al(h,a,u)),a={cache:zp()},s.payload=a;return}a=a.return}}function wM(s,a,u){var h=Un();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Wu(s)?Ex(a,u):(u=Np(s,a,u,h),u!==null&&(Tn(u,s,h),Cx(u,a,h)))}function Sx(s,a,u){var h=Un();Il(s,a,u,h)}function Il(s,a,u,h){var y={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Wu(s))Ex(a,y);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var C=a.lastRenderedState,k=x(C,u);if(y.hasEagerState=!0,y.eagerState=k,Mn(k,C))return Ru(s,a,y,0),Ye===null&&ku(),!1}catch{}finally{}if(u=Np(s,a,y,h),u!==null)return Tn(u,s,h),Cx(u,a,h),!0}return!1}function dm(s,a,u,h){if(h={lane:2,revertLane:$m(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Wu(s)){if(a)throw Error(r(479))}else a=Np(s,u,h,2),a!==null&&Tn(a,s,2)}function Wu(s){var a=s.alternate;return s===Ce||a!==null&&a===Ce}function Ex(s,a){sa=$u=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function Cx(s,a,u){if((u&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Rn(s,u)}}var Dl={readContext:Vt,use:Gu,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut};Dl.useEffectEvent=ut;var Tx={readContext:Vt,use:Gu,useCallback:function(s,a){return ln().memoizedState=[s,a===void 0?null:a],s},useContext:Vt,useEffect:lx,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,Ku(4194308,4,fx.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Ku(4194308,4,s,a)},useInsertionEffect:function(s,a){Ku(4,2,s,a)},useMemo:function(s,a){var u=ln();a=a===void 0?null:a;var h=s();if(to){Fn(!0);try{s()}finally{Fn(!1)}}return u.memoizedState=[h,a],h},useReducer:function(s,a,u){var h=ln();if(u!==void 0){var y=u(a);if(to){Fn(!0);try{u(a)}finally{Fn(!1)}}}else y=a;return h.memoizedState=h.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},h.queue=s,s=s.dispatch=wM.bind(null,Ce,s),[h.memoizedState,s]},useRef:function(s){var a=ln();return s={current:s},a.memoizedState=s},useState:function(s){s=im(s);var a=s.queue,u=Sx.bind(null,Ce,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:am,useDeferredValue:function(s,a){var u=ln();return lm(u,s,a)},useTransition:function(){var s=im(!1);return s=yx.bind(null,Ce,s.queue,!0,!1),ln().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var h=Ce,y=ln();if(Oe){if(u===void 0)throw Error(r(407));u=u()}else{if(u=a(),Ye===null)throw Error(r(349));(Me&127)!==0||Gb(h,a,u)}y.memoizedState=u;var x={value:u,getSnapshot:a};return y.queue=x,lx(Kb.bind(null,h,x,s),[s]),h.flags|=2048,aa(9,{destroy:void 0},Jb.bind(null,h,x,u,a),null),u},useId:function(){var s=ln(),a=Ye.identifierPrefix;if(Oe){var u=Br,h=Ur;u=(h&~(1<<32-tn(h)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Vu++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=pM++,a="_"+a+"r_"+u.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:um,useFormState:rx,useActionState:rx,useOptimistic:function(s){var a=ln();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=dm.bind(null,Ce,!0,u),u.dispatch=a,[s,a]},useMemoCache:tm,useCacheRefresh:function(){return ln().memoizedState=xM.bind(null,Ce)},useEffectEvent:function(s){var a=ln(),u={impl:s};return a.memoizedState=u,function(){if((He&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},fm={readContext:Vt,use:Gu,useCallback:px,useContext:Vt,useEffect:om,useImperativeHandle:hx,useInsertionEffect:ux,useLayoutEffect:dx,useMemo:mx,useReducer:Ju,useRef:ax,useState:function(){return Ju(fi)},useDebugValue:am,useDeferredValue:function(s,a){var u=xt();return gx(u,Ge.memoizedState,s,a)},useTransition:function(){var s=Ju(fi)[0],a=xt().memoizedState;return[typeof s=="boolean"?s:Ml(s),a]},useSyncExternalStore:Fb,useId:xx,useHostTransitionStatus:um,useFormState:ix,useActionState:ix,useOptimistic:function(s,a){var u=xt();return Xb(u,Ge,s,a)},useMemoCache:tm,useCacheRefresh:wx};fm.useEffectEvent=cx;var _x={readContext:Vt,use:Gu,useCallback:px,useContext:Vt,useEffect:om,useImperativeHandle:hx,useInsertionEffect:ux,useLayoutEffect:dx,useMemo:mx,useReducer:rm,useRef:ax,useState:function(){return rm(fi)},useDebugValue:am,useDeferredValue:function(s,a){var u=xt();return Ge===null?lm(u,s,a):gx(u,Ge.memoizedState,s,a)},useTransition:function(){var s=rm(fi)[0],a=xt().memoizedState;return[typeof s=="boolean"?s:Ml(s),a]},useSyncExternalStore:Fb,useId:xx,useHostTransitionStatus:um,useFormState:ox,useActionState:ox,useOptimistic:function(s,a){var u=xt();return Ge!==null?Xb(u,Ge,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:tm,useCacheRefresh:wx};_x.useEffectEvent=cx;function hm(s,a,u,h){a=s.memoizedState,u=u(h,a),u=u==null?a:m({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var pm={enqueueSetState:function(s,a,u){s=s._reactInternals;var h=Un(),y=Wi(h);y.payload=a,u!=null&&(y.callback=u),a=Xi(s,y,h),a!==null&&(Tn(a,s,h),Al(a,s,h))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var h=Un(),y=Wi(h);y.tag=1,y.payload=a,u!=null&&(y.callback=u),a=Xi(s,y,h),a!==null&&(Tn(a,s,h),Al(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Un(),h=Wi(u);h.tag=2,a!=null&&(h.callback=a),a=Xi(s,h,u),a!==null&&(Tn(a,s,u),Al(a,s,u))}};function Ax(s,a,u,h,y,x,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,x,C):a.prototype&&a.prototype.isPureReactComponent?!bl(u,h)||!bl(y,x):!0}function Nx(s,a,u,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==s&&pm.enqueueReplaceState(a,a.state,null)}function no(s,a){var u=a;if("ref"in a){u={};for(var h in a)h!=="ref"&&(u[h]=a[h])}if(s=s.defaultProps){u===a&&(u=m({},u));for(var y in s)u[y]===void 0&&(u[y]=s[y])}return u}function kx(s){Nu(s)}function Rx(s){console.error(s)}function Mx(s){Nu(s)}function Xu(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function Ix(s,a,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function mm(s,a,u){return u=Wi(u),u.tag=3,u.payload={element:null},u.callback=function(){Xu(s,a)},u}function Dx(s){return s=Wi(s),s.tag=3,s}function Ox(s,a,u,h){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var x=h.value;s.payload=function(){return y(x)},s.callback=function(){Ix(a,u,h)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){Ix(a,u,h),typeof y!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var k=h.stack;this.componentDidCatch(h.value,{componentStack:k!==null?k:""})})}function SM(s,a,u,h,y){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=u.alternate,a!==null&&Zo(a,u,y,!0),u=Dn.current,u!==null){switch(u.tag){case 31:case 13:return nr===null?cd():u.alternate===null&&dt===0&&(dt=3),u.flags&=-257,u.flags|=65536,u.lanes=y,h===Bu?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([h]):a.add(h),jm(s,h,y)),!1;case 22:return u.flags|=65536,h===Bu?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([h]):u.add(h)),jm(s,h,y)),!1}throw Error(r(435,u.tag))}return jm(s,h,y),cd(),!1}if(Oe)return a=Dn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,h!==Op&&(s=Error(r(422),{cause:h}),Sl(Qn(s,u)))):(h!==Op&&(a=Error(r(423),{cause:h}),Sl(Qn(a,u))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,h=Qn(h,u),y=mm(s.stateNode,h,y),Fp(s,y),dt!==4&&(dt=2)),!1;var x=Error(r(520),{cause:h});if(x=Qn(x,u),ql===null?ql=[x]:ql.push(x),dt!==4&&(dt=2),a===null)return!0;h=Qn(h,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=y&-y,u.lanes|=s,s=mm(u.stateNode,h,s),Fp(u,s),!1;case 1:if(a=u.type,x=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(rs===null||!rs.has(x))))return u.flags|=65536,y&=-y,u.lanes|=y,y=Dx(y),Ox(y,s,u,h),Fp(u,y),!1}u=u.return}while(u!==null);return!1}var gm=Error(r(461)),Et=!1;function Ft(s,a,u,h){a.child=s===null?Bb(a,null,u,h):eo(a,s.child,u,h)}function Lx(s,a,u,h,y){u=u.render;var x=a.ref;if("ref"in h){var C={};for(var k in h)k!=="ref"&&(C[k]=h[k])}else C=h;return Ws(a),h=Xp(s,a,u,C,x,y),k=Qp(),s!==null&&!Et?(Zp(s,a,y),hi(s,a,y)):(Oe&&k&&Ip(a),a.flags|=1,Ft(s,a,h,y),a.child)}function Px(s,a,u,h,y){if(s===null){var x=u.type;return typeof x=="function"&&!kp(x)&&x.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=x,Ux(s,a,x,h,y)):(s=Iu(u.type,null,h,a,a.mode,y),s.ref=a.ref,s.return=a,a.child=s)}if(x=s.child,!Cm(s,y)){var C=x.memoizedProps;if(u=u.compare,u=u!==null?u:bl,u(C,h)&&s.ref===a.ref)return hi(s,a,y)}return a.flags|=1,s=ai(x,h),s.ref=a.ref,s.return=a,a.child=s}function Ux(s,a,u,h,y){if(s!==null){var x=s.memoizedProps;if(bl(x,h)&&s.ref===a.ref)if(Et=!1,a.pendingProps=h=x,Cm(s,y))(s.flags&131072)!==0&&(Et=!0);else return a.lanes=s.lanes,hi(s,a,y)}return ym(s,a,u,h,y)}function Bx(s,a,u,h){var y=h.children,x=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(x=x!==null?x.baseLanes|u:u,s!==null){for(h=a.child=s.child,y=0;h!==null;)y=y|h.lanes|h.childLanes,h=h.sibling;h=y&~x}else h=0,a.child=null;return zx(s,a,x,u,h)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Pu(a,x!==null?x.cachePool:null),x!==null?qb(a,x):Jp(),Hb(a);else return h=a.lanes=536870912,zx(s,a,x!==null?x.baseLanes|u:u,u,h)}else x!==null?(Pu(a,x.cachePool),qb(a,x),Zi(),a.memoizedState=null):(s!==null&&Pu(a,null),Jp(),Zi());return Ft(s,a,y,u),a.child}function Ol(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function zx(s,a,u,h,y){var x=qp();return x=x===null?null:{parent:wt._currentValue,pool:x},a.memoizedState={baseLanes:u,cachePool:x},s!==null&&Pu(a,null),Jp(),Hb(a),s!==null&&Zo(s,a,h,!0),a.childLanes=y,null}function Qu(s,a){return a=ed({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function jx(s,a,u){return eo(a,s.child,null,u),s=Qu(a,a.pendingProps),s.flags|=2,On(a),a.memoizedState=null,s}function EM(s,a,u){var h=a.pendingProps,y=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(Oe){if(h.mode==="hidden")return s=Qu(a,h),a.lanes=536870912,Ol(null,s);if(Yp(a),(s=Qe)?(s=Qw(s,tr),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Fi!==null?{id:Ur,overflow:Br}:null,retryLane:536870912,hydrationErrors:null},u=Eb(s),u.return=a,a.child=u,$t=a,Qe=null)):s=null,s===null)throw Ji(a);return a.lanes=536870912,null}return Qu(a,h)}var x=s.memoizedState;if(x!==null){var C=x.dehydrated;if(Yp(a),y)if(a.flags&256)a.flags&=-257,a=jx(s,a,u);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(r(558));else if(Et||Zo(s,a,u,!1),y=(u&s.childLanes)!==0,Et||y){if(h=Ye,h!==null&&(C=Jn(h,u),C!==0&&C!==x.retryLane))throw x.retryLane=C,Gs(s,C),Tn(h,s,C),gm;cd(),a=jx(s,a,u)}else s=x.treeContext,Qe=rr(C.nextSibling),$t=a,Oe=!0,Gi=null,tr=!1,s!==null&&_b(a,s),a=Qu(a,h),a.flags|=4096;return a}return s=ai(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Zu(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function ym(s,a,u,h,y){return Ws(a),u=Xp(s,a,u,h,void 0,y),h=Qp(),s!==null&&!Et?(Zp(s,a,y),hi(s,a,y)):(Oe&&h&&Ip(a),a.flags|=1,Ft(s,a,u,y),a.child)}function qx(s,a,u,h,y,x){return Ws(a),a.updateQueue=null,u=Vb(a,h,u,y),$b(s),h=Qp(),s!==null&&!Et?(Zp(s,a,x),hi(s,a,x)):(Oe&&h&&Ip(a),a.flags|=1,Ft(s,a,u,x),a.child)}function Hx(s,a,u,h,y){if(Ws(a),a.stateNode===null){var x=Yo,C=u.contextType;typeof C=="object"&&C!==null&&(x=Vt(C)),x=new u(h,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=pm,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=h,x.state=a.memoizedState,x.refs={},$p(a),C=u.contextType,x.context=typeof C=="object"&&C!==null?Vt(C):Yo,x.state=a.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(hm(a,u,C,h),x.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(C=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),C!==x.state&&pm.enqueueReplaceState(x,x.state,null),kl(a,h,x,y),Nl(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){x=a.stateNode;var k=a.memoizedProps,O=no(u,k);x.props=O;var $=x.context,Z=u.contextType;C=Yo,typeof Z=="object"&&Z!==null&&(C=Vt(Z));var te=u.getDerivedStateFromProps;Z=typeof te=="function"||typeof x.getSnapshotBeforeUpdate=="function",k=a.pendingProps!==k,Z||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k||$!==C)&&Nx(a,x,h,C),Yi=!1;var J=a.memoizedState;x.state=J,kl(a,h,x,y),Nl(),$=a.memoizedState,k||J!==$||Yi?(typeof te=="function"&&(hm(a,u,te,h),$=a.memoizedState),(O=Yi||Ax(a,u,O,h,J,$,C))?(Z||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=$),x.props=h,x.state=$,x.context=C,h=O):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{x=a.stateNode,Vp(s,a),C=a.memoizedProps,Z=no(u,C),x.props=Z,te=a.pendingProps,J=x.context,$=u.contextType,O=Yo,typeof $=="object"&&$!==null&&(O=Vt($)),k=u.getDerivedStateFromProps,($=typeof k=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==te||J!==O)&&Nx(a,x,h,O),Yi=!1,J=a.memoizedState,x.state=J,kl(a,h,x,y),Nl();var Y=a.memoizedState;C!==te||J!==Y||Yi||s!==null&&s.dependencies!==null&&Ou(s.dependencies)?(typeof k=="function"&&(hm(a,u,k,h),Y=a.memoizedState),(Z=Yi||Ax(a,u,Z,h,J,Y,O)||s!==null&&s.dependencies!==null&&Ou(s.dependencies))?($||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(h,Y,O),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(h,Y,O)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===s.memoizedProps&&J===s.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&J===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=Y),x.props=h,x.state=Y,x.context=O,h=Z):(typeof x.componentDidUpdate!="function"||C===s.memoizedProps&&J===s.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&J===s.memoizedState||(a.flags|=1024),h=!1)}return x=h,Zu(s,a),h=(a.flags&128)!==0,x||h?(x=a.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,s!==null&&h?(a.child=eo(a,s.child,null,y),a.child=eo(a,null,u,y)):Ft(s,a,u,y),a.memoizedState=x.state,s=a.child):s=hi(s,a,y),s}function $x(s,a,u,h){return Ks(),a.flags|=256,Ft(s,a,u,h),a.child}var vm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bm(s){return{baseLanes:s,cachePool:Ib()}}function xm(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=Pn),s}function Vx(s,a,u){var h=a.pendingProps,y=!1,x=(a.flags&128)!==0,C;if((C=x)||(C=s!==null&&s.memoizedState===null?!1:(bt.current&2)!==0),C&&(y=!0,a.flags&=-129),C=(a.flags&32)!==0,a.flags&=-33,s===null){if(Oe){if(y?Qi(a):Zi(),(s=Qe)?(s=Qw(s,tr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Fi!==null?{id:Ur,overflow:Br}:null,retryLane:536870912,hydrationErrors:null},u=Eb(s),u.return=a,a.child=u,$t=a,Qe=null)):s=null,s===null)throw Ji(a);return ng(s)?a.lanes=32:a.lanes=536870912,null}var k=h.children;return h=h.fallback,y?(Zi(),y=a.mode,k=ed({mode:"hidden",children:k},y),h=Js(h,y,u,null),k.return=a,h.return=a,k.sibling=h,a.child=k,h=a.child,h.memoizedState=bm(u),h.childLanes=xm(s,C,u),a.memoizedState=vm,Ol(null,h)):(Qi(a),wm(a,k))}var O=s.memoizedState;if(O!==null&&(k=O.dehydrated,k!==null)){if(x)a.flags&256?(Qi(a),a.flags&=-257,a=Sm(s,a,u)):a.memoizedState!==null?(Zi(),a.child=s.child,a.flags|=128,a=null):(Zi(),k=h.fallback,y=a.mode,h=ed({mode:"visible",children:h.children},y),k=Js(k,y,u,null),k.flags|=2,h.return=a,k.return=a,h.sibling=k,a.child=h,eo(a,s.child,null,u),h=a.child,h.memoizedState=bm(u),h.childLanes=xm(s,C,u),a.memoizedState=vm,a=Ol(null,h));else if(Qi(a),ng(k)){if(C=k.nextSibling&&k.nextSibling.dataset,C)var $=C.dgst;C=$,h=Error(r(419)),h.stack="",h.digest=C,Sl({value:h,source:null,stack:null}),a=Sm(s,a,u)}else if(Et||Zo(s,a,u,!1),C=(u&s.childLanes)!==0,Et||C){if(C=Ye,C!==null&&(h=Jn(C,u),h!==0&&h!==O.retryLane))throw O.retryLane=h,Gs(s,h),Tn(C,s,h),gm;tg(k)||cd(),a=Sm(s,a,u)}else tg(k)?(a.flags|=192,a.child=s.child,a=null):(s=O.treeContext,Qe=rr(k.nextSibling),$t=a,Oe=!0,Gi=null,tr=!1,s!==null&&_b(a,s),a=wm(a,h.children),a.flags|=4096);return a}return y?(Zi(),k=h.fallback,y=a.mode,O=s.child,$=O.sibling,h=ai(O,{mode:"hidden",children:h.children}),h.subtreeFlags=O.subtreeFlags&65011712,$!==null?k=ai($,k):(k=Js(k,y,u,null),k.flags|=2),k.return=a,h.return=a,h.sibling=k,a.child=h,Ol(null,h),h=a.child,k=s.child.memoizedState,k===null?k=bm(u):(y=k.cachePool,y!==null?(O=wt._currentValue,y=y.parent!==O?{parent:O,pool:O}:y):y=Ib(),k={baseLanes:k.baseLanes|u,cachePool:y}),h.memoizedState=k,h.childLanes=xm(s,C,u),a.memoizedState=vm,Ol(s.child,h)):(Qi(a),u=s.child,s=u.sibling,u=ai(u,{mode:"visible",children:h.children}),u.return=a,u.sibling=null,s!==null&&(C=a.deletions,C===null?(a.deletions=[s],a.flags|=16):C.push(s)),a.child=u,a.memoizedState=null,u)}function wm(s,a){return a=ed({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function ed(s,a){return s=In(22,s,null,a),s.lanes=0,s}function Sm(s,a,u){return eo(a,s.child,null,u),s=wm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Fx(s,a,u){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),Up(s.return,a,u)}function Em(s,a,u,h,y,x){var C=s.memoizedState;C===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:y,treeForkCount:x}:(C.isBackwards=a,C.rendering=null,C.renderingStartTime=0,C.last=h,C.tail=u,C.tailMode=y,C.treeForkCount=x)}function Gx(s,a,u){var h=a.pendingProps,y=h.revealOrder,x=h.tail;h=h.children;var C=bt.current,k=(C&2)!==0;if(k?(C=C&1|2,a.flags|=128):C&=1,ne(bt,C),Ft(s,a,h,u),h=Oe?wl:0,!k&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Fx(s,u,a);else if(s.tag===19)Fx(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(u=a.child,y=null;u!==null;)s=u.alternate,s!==null&&Hu(s)===null&&(y=u),u=u.sibling;u=y,u===null?(y=a.child,a.child=null):(y=u.sibling,u.sibling=null),Em(a,!1,y,u,x,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,y=a.child,a.child=null;y!==null;){if(s=y.alternate,s!==null&&Hu(s)===null){a.child=y;break}s=y.sibling,y.sibling=u,u=y,y=s}Em(a,!0,u,null,x,h);break;case"together":Em(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function hi(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),ns|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(Zo(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,u=ai(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=ai(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function Cm(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Ou(s)))}function CM(s,a,u){switch(a.tag){case 3:nt(a,a.stateNode.containerInfo),Ki(a,wt,s.memoizedState.cache),Ks();break;case 27:case 5:Pe(a);break;case 4:nt(a,a.stateNode.containerInfo);break;case 10:Ki(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Yp(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Qi(a),a.flags|=128,null):(u&a.child.childLanes)!==0?Vx(s,a,u):(Qi(a),s=hi(s,a,u),s!==null?s.sibling:null);Qi(a);break;case 19:var y=(s.flags&128)!==0;if(h=(u&a.childLanes)!==0,h||(Zo(s,a,u,!1),h=(u&a.childLanes)!==0),y){if(h)return Gx(s,a,u);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ne(bt,bt.current),h)break;return null;case 22:return a.lanes=0,Bx(s,a,u,a.pendingProps);case 24:Ki(a,wt,s.memoizedState.cache)}return hi(s,a,u)}function Jx(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)Et=!0;else{if(!Cm(s,u)&&(a.flags&128)===0)return Et=!1,CM(s,a,u);Et=(s.flags&131072)!==0}else Et=!1,Oe&&(a.flags&1048576)!==0&&Tb(a,wl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(s=Qs(a.elementType),a.type=s,typeof s=="function")kp(s)?(h=no(s,h),a.tag=1,a=Hx(null,a,s,h,u)):(a.tag=0,a=ym(null,a,s,h,u));else{if(s!=null){var y=s.$$typeof;if(y===I){a.tag=11,a=Lx(null,a,s,h,u);break e}else if(y===R){a.tag=14,a=Px(null,a,s,h,u);break e}}throw a=q(s)||s,Error(r(306,a,""))}}return a;case 0:return ym(s,a,a.type,a.pendingProps,u);case 1:return h=a.type,y=no(h,a.pendingProps),Hx(s,a,h,y,u);case 3:e:{if(nt(a,a.stateNode.containerInfo),s===null)throw Error(r(387));h=a.pendingProps;var x=a.memoizedState;y=x.element,Vp(s,a),kl(a,h,null,u);var C=a.memoizedState;if(h=C.cache,Ki(a,wt,h),h!==x.cache&&Bp(a,[wt],u,!0),Nl(),h=C.element,x.isDehydrated)if(x={element:h,isDehydrated:!1,cache:C.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=$x(s,a,h,u);break e}else if(h!==y){y=Qn(Error(r(424)),a),Sl(y),a=$x(s,a,h,u);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Qe=rr(s.firstChild),$t=a,Oe=!0,Gi=null,tr=!0,u=Bb(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Ks(),h===y){a=hi(s,a,u);break e}Ft(s,a,h,u)}a=a.child}return a;case 26:return Zu(s,a),s===null?(u=iS(a.type,null,a.pendingProps,null))?a.memoizedState=u:Oe||(u=a.type,s=a.pendingProps,h=gd(ye.current).createElement(u),h[Ht]=a,h[bn]=s,Gt(h,u,s),Ot(h),a.stateNode=h):a.memoizedState=iS(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Pe(a),s===null&&Oe&&(h=a.stateNode=tS(a.type,a.pendingProps,ye.current),$t=a,tr=!0,y=Qe,ls(a.type)?(rg=y,Qe=rr(h.firstChild)):Qe=y),Ft(s,a,a.pendingProps.children,u),Zu(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Oe&&((y=h=Qe)&&(h=eI(h,a.type,a.pendingProps,tr),h!==null?(a.stateNode=h,$t=a,Qe=rr(h.firstChild),tr=!1,y=!0):y=!1),y||Ji(a)),Pe(a),y=a.type,x=a.pendingProps,C=s!==null?s.memoizedProps:null,h=x.children,Qm(y,x)?h=null:C!==null&&Qm(y,C)&&(a.flags|=32),a.memoizedState!==null&&(y=Xp(s,a,mM,null,null,u),Yl._currentValue=y),Zu(s,a),Ft(s,a,h,u),a.child;case 6:return s===null&&Oe&&((s=u=Qe)&&(u=tI(u,a.pendingProps,tr),u!==null?(a.stateNode=u,$t=a,Qe=null,s=!0):s=!1),s||Ji(a)),null;case 13:return Vx(s,a,u);case 4:return nt(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=eo(a,null,h,u):Ft(s,a,h,u),a.child;case 11:return Lx(s,a,a.type,a.pendingProps,u);case 7:return Ft(s,a,a.pendingProps,u),a.child;case 8:return Ft(s,a,a.pendingProps.children,u),a.child;case 12:return Ft(s,a,a.pendingProps.children,u),a.child;case 10:return h=a.pendingProps,Ki(a,a.type,h.value),Ft(s,a,h.children,u),a.child;case 9:return y=a.type._context,h=a.pendingProps.children,Ws(a),y=Vt(y),h=h(y),a.flags|=1,Ft(s,a,h,u),a.child;case 14:return Px(s,a,a.type,a.pendingProps,u);case 15:return Ux(s,a,a.type,a.pendingProps,u);case 19:return Gx(s,a,u);case 31:return EM(s,a,u);case 22:return Bx(s,a,u,a.pendingProps);case 24:return Ws(a),h=Vt(wt),s===null?(y=qp(),y===null&&(y=Ye,x=zp(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=u),y=x),a.memoizedState={parent:h,cache:y},$p(a),Ki(a,wt,y)):((s.lanes&u)!==0&&(Vp(s,a),kl(a,null,null,u),Nl()),y=s.memoizedState,x=a.memoizedState,y.parent!==h?(y={parent:h,cache:h},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),Ki(a,wt,h)):(h=x.cache,Ki(a,wt,h),h!==y.cache&&Bp(a,[wt],u,!0))),Ft(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function pi(s){s.flags|=4}function Tm(s,a,u,h,y){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(xw())s.flags|=8192;else throw Zs=Bu,Hp}else s.flags&=-16777217}function Kx(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!cS(a))if(xw())s.flags|=8192;else throw Zs=Bu,Hp}function td(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?nn():536870912,s.lanes|=a,da|=a)}function Ll(s,a){if(!Oe)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Ze(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(a)for(var y=s.child;y!==null;)u|=y.lanes|y.childLanes,h|=y.subtreeFlags&65011712,h|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)u|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=h,s.childLanes=u,a}function TM(s,a,u){var h=a.pendingProps;switch(Dp(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(a),null;case 1:return Ze(a),null;case 3:return u=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),ui(wt),qe(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Qo(a)?pi(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Lp())),Ze(a),null;case 26:var y=a.type,x=a.memoizedState;return s===null?(pi(a),x!==null?(Ze(a),Kx(a,x)):(Ze(a),Tm(a,y,null,h,u))):x?x!==s.memoizedState?(pi(a),Ze(a),Kx(a,x)):(Ze(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&pi(a),Ze(a),Tm(a,y,s,h,u)),null;case 27:if(Dr(a),u=ye.current,y=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&pi(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return Ze(a),null}s=se.current,Qo(a)?Ab(a):(s=tS(y,h,u),a.stateNode=s,pi(a))}return Ze(a),null;case 5:if(Dr(a),y=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&pi(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return Ze(a),null}if(x=se.current,Qo(a))Ab(a);else{var C=gd(ye.current);switch(x){case 1:x=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:x=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":x=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":x=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":x=C.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof h.is=="string"?C.createElement("select",{is:h.is}):C.createElement("select"),h.multiple?x.multiple=!0:h.size&&(x.size=h.size);break;default:x=typeof h.is=="string"?C.createElement(y,{is:h.is}):C.createElement(y)}}x[Ht]=a,x[bn]=h;e:for(C=a.child;C!==null;){if(C.tag===5||C.tag===6)x.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===a)break e;for(;C.sibling===null;){if(C.return===null||C.return===a)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}a.stateNode=x;e:switch(Gt(x,y,h),y){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&pi(a)}}return Ze(a),Tm(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,u),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&pi(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(r(166));if(s=ye.current,Qo(a)){if(s=a.stateNode,u=a.memoizedProps,h=null,y=$t,y!==null)switch(y.tag){case 27:case 5:h=y.memoizedProps}s[Ht]=a,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||Vw(s.nodeValue,u)),s||Ji(a,!0)}else s=gd(s).createTextNode(h),s[Ht]=a,a.stateNode=s}return Ze(a),null;case 31:if(u=a.memoizedState,s===null||s.memoizedState!==null){if(h=Qo(a),u!==null){if(s===null){if(!h)throw Error(r(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Ht]=a}else Ks(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ze(a),s=!1}else u=Lp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return a.flags&256?(On(a),a):(On(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Ze(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Qo(a),h!==null&&h.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Ht]=a}else Ks(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ze(a),y=!1}else y=Lp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(On(a),a):(On(a),null)}return On(a),(a.flags&128)!==0?(a.lanes=u,a):(u=h!==null,s=s!==null&&s.memoizedState!==null,u&&(h=a.child,y=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(y=h.alternate.memoizedState.cachePool.pool),x=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==y&&(h.flags|=2048)),u!==s&&u&&(a.child.flags|=8192),td(a,a.updateQueue),Ze(a),null);case 4:return qe(),s===null&&Jm(a.stateNode.containerInfo),Ze(a),null;case 10:return ui(a.type),Ze(a),null;case 19:if(V(bt),h=a.memoizedState,h===null)return Ze(a),null;if(y=(a.flags&128)!==0,x=h.rendering,x===null)if(y)Ll(h,!1);else{if(dt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(x=Hu(s),x!==null){for(a.flags|=128,Ll(h,!1),s=x.updateQueue,a.updateQueue=s,td(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)Sb(u,s),u=u.sibling;return ne(bt,bt.current&1|2),Oe&&li(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&en()>od&&(a.flags|=128,y=!0,Ll(h,!1),a.lanes=4194304)}else{if(!y)if(s=Hu(x),s!==null){if(a.flags|=128,y=!0,s=s.updateQueue,a.updateQueue=s,td(a,s),Ll(h,!0),h.tail===null&&h.tailMode==="hidden"&&!x.alternate&&!Oe)return Ze(a),null}else 2*en()-h.renderingStartTime>od&&u!==536870912&&(a.flags|=128,y=!0,Ll(h,!1),a.lanes=4194304);h.isBackwards?(x.sibling=a.child,a.child=x):(s=h.last,s!==null?s.sibling=x:a.child=x,h.last=x)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=en(),s.sibling=null,u=bt.current,ne(bt,y?u&1|2:u&1),Oe&&li(a,h.treeForkCount),s):(Ze(a),null);case 22:case 23:return On(a),Kp(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(u&536870912)!==0&&(a.flags&128)===0&&(Ze(a),a.subtreeFlags&6&&(a.flags|=8192)):Ze(a),u=a.updateQueue,u!==null&&td(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==u&&(a.flags|=2048),s!==null&&V(Xs),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),ui(wt),Ze(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function _M(s,a){switch(Dp(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ui(wt),qe(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Dr(a),null;case 31:if(a.memoizedState!==null){if(On(a),a.alternate===null)throw Error(r(340));Ks()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(On(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Ks()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return V(bt),null;case 4:return qe(),null;case 10:return ui(a.type),null;case 22:case 23:return On(a),Kp(),s!==null&&V(Xs),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return ui(wt),null;case 25:return null;default:return null}}function Yx(s,a){switch(Dp(a),a.tag){case 3:ui(wt),qe();break;case 26:case 27:case 5:Dr(a);break;case 4:qe();break;case 31:a.memoizedState!==null&&On(a);break;case 13:On(a);break;case 19:V(bt);break;case 10:ui(a.type);break;case 22:case 23:On(a),Kp(),s!==null&&V(Xs);break;case 24:ui(wt)}}function Pl(s,a){try{var u=a.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var y=h.next;u=y;do{if((u.tag&s)===s){h=void 0;var x=u.create,C=u.inst;h=x(),C.destroy=h}u=u.next}while(u!==y)}}catch(k){Ve(a,a.return,k)}}function es(s,a,u){try{var h=a.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var x=y.next;h=x;do{if((h.tag&s)===s){var C=h.inst,k=C.destroy;if(k!==void 0){C.destroy=void 0,y=a;var O=u,$=k;try{$()}catch(Z){Ve(y,O,Z)}}}h=h.next}while(h!==x)}}catch(Z){Ve(a,a.return,Z)}}function Wx(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{jb(a,u)}catch(h){Ve(s,s.return,h)}}}function Xx(s,a,u){u.props=no(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){Ve(s,a,h)}}function Ul(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(y){Ve(s,a,y)}}function zr(s,a){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(y){Ve(s,a,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){Ve(s,a,y)}else u.current=null}function Qx(s){var a=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(y){Ve(s,s.return,y)}}function _m(s,a,u){try{var h=s.stateNode;KM(h,s.type,u,a),h[bn]=a}catch(y){Ve(s,s.return,y)}}function Zx(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ls(s.type)||s.tag===4}function Am(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Zx(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ls(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Nm(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=si));else if(h!==4&&(h===27&&ls(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(Nm(s,a,u),s=s.sibling;s!==null;)Nm(s,a,u),s=s.sibling}function nd(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(h!==4&&(h===27&&ls(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(nd(s,a,u),s=s.sibling;s!==null;)nd(s,a,u),s=s.sibling}function ew(s){var a=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);Gt(a,h,u),a[Ht]=s,a[bn]=u}catch(x){Ve(s,s.return,x)}}var mi=!1,Ct=!1,km=!1,tw=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function AM(s,a){if(s=s.containerInfo,Wm=Ed,s=hb(s),Sp(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var y=h.anchorOffset,x=h.focusNode;h=h.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var C=0,k=-1,O=-1,$=0,Z=0,te=s,J=null;t:for(;;){for(var Y;te!==u||y!==0&&te.nodeType!==3||(k=C+y),te!==x||h!==0&&te.nodeType!==3||(O=C+h),te.nodeType===3&&(C+=te.nodeValue.length),(Y=te.firstChild)!==null;)J=te,te=Y;for(;;){if(te===s)break t;if(J===u&&++$===y&&(k=C),J===x&&++Z===h&&(O=C),(Y=te.nextSibling)!==null)break;te=J,J=te.parentNode}te=Y}u=k===-1||O===-1?null:{start:k,end:O}}else u=null}u=u||{start:0,end:0}}else u=null;for(Xm={focusedElem:s,selectionRange:u},Ed=!1,Lt=a;Lt!==null;)if(a=Lt,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Lt=s;else for(;Lt!==null;){switch(a=Lt,x=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)y=s[u],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&x!==null){s=void 0,u=a,y=x.memoizedProps,x=x.memoizedState,h=u.stateNode;try{var ce=no(u.type,y);s=h.getSnapshotBeforeUpdate(ce,x),h.__reactInternalSnapshotBeforeUpdate=s}catch(ve){Ve(u,u.return,ve)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)eg(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":eg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,Lt=s;break}Lt=a.return}}function nw(s,a,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:yi(s,u),h&4&&Pl(5,u);break;case 1:if(yi(s,u),h&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(C){Ve(u,u.return,C)}else{var y=no(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(y,a,s.__reactInternalSnapshotBeforeUpdate)}catch(C){Ve(u,u.return,C)}}h&64&&Wx(u),h&512&&Ul(u,u.return);break;case 3:if(yi(s,u),h&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{jb(s,a)}catch(C){Ve(u,u.return,C)}}break;case 27:a===null&&h&4&&ew(u);case 26:case 5:yi(s,u),a===null&&h&4&&Qx(u),h&512&&Ul(u,u.return);break;case 12:yi(s,u);break;case 31:yi(s,u),h&4&&sw(s,u);break;case 13:yi(s,u),h&4&&ow(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=PM.bind(null,u),nI(s,u))));break;case 22:if(h=u.memoizedState!==null||mi,!h){a=a!==null&&a.memoizedState!==null||Ct,y=mi;var x=Ct;mi=h,(Ct=a)&&!x?vi(s,u,(u.subtreeFlags&8772)!==0):yi(s,u),mi=y,Ct=x}break;case 30:break;default:yi(s,u)}}function rw(s){var a=s.alternate;a!==null&&(s.alternate=null,rw(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&sp(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var rt=null,wn=!1;function gi(s,a,u){for(u=u.child;u!==null;)iw(s,a,u),u=u.sibling}function iw(s,a,u){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(qs,u)}catch{}switch(u.tag){case 26:Ct||zr(u,a),gi(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Ct||zr(u,a);var h=rt,y=wn;ls(u.type)&&(rt=u.stateNode,wn=!1),gi(s,a,u),Gl(u.stateNode),rt=h,wn=y;break;case 5:Ct||zr(u,a);case 6:if(h=rt,y=wn,rt=null,gi(s,a,u),rt=h,wn=y,rt!==null)if(wn)try{(rt.nodeType===9?rt.body:rt.nodeName==="HTML"?rt.ownerDocument.body:rt).removeChild(u.stateNode)}catch(x){Ve(u,a,x)}else try{rt.removeChild(u.stateNode)}catch(x){Ve(u,a,x)}break;case 18:rt!==null&&(wn?(s=rt,Ww(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),ba(s)):Ww(rt,u.stateNode));break;case 4:h=rt,y=wn,rt=u.stateNode.containerInfo,wn=!0,gi(s,a,u),rt=h,wn=y;break;case 0:case 11:case 14:case 15:es(2,u,a),Ct||es(4,u,a),gi(s,a,u);break;case 1:Ct||(zr(u,a),h=u.stateNode,typeof h.componentWillUnmount=="function"&&Xx(u,a,h)),gi(s,a,u);break;case 21:gi(s,a,u);break;case 22:Ct=(h=Ct)||u.memoizedState!==null,gi(s,a,u),Ct=h;break;default:gi(s,a,u)}}function sw(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ba(s)}catch(u){Ve(a,a.return,u)}}}function ow(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ba(s)}catch(u){Ve(a,a.return,u)}}function NM(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new tw),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new tw),a;default:throw Error(r(435,s.tag))}}function rd(s,a){var u=NM(s);a.forEach(function(h){if(!u.has(h)){u.add(h);var y=UM.bind(null,s,h);h.then(y,y)}})}function Sn(s,a){var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var y=u[h],x=s,C=a,k=C;e:for(;k!==null;){switch(k.tag){case 27:if(ls(k.type)){rt=k.stateNode,wn=!1;break e}break;case 5:rt=k.stateNode,wn=!1;break e;case 3:case 4:rt=k.stateNode.containerInfo,wn=!0;break e}k=k.return}if(rt===null)throw Error(r(160));iw(x,C,y),rt=null,wn=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)aw(a,s),a=a.sibling}var br=null;function aw(s,a){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Sn(a,s),En(s),h&4&&(es(3,s,s.return),Pl(3,s),es(5,s,s.return));break;case 1:Sn(a,s),En(s),h&512&&(Ct||u===null||zr(u,u.return)),h&64&&mi&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var y=br;if(Sn(a,s),En(s),h&512&&(Ct||u===null||zr(u,u.return)),h&4){var x=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,y=y.ownerDocument||y;t:switch(h){case"title":x=y.getElementsByTagName("title")[0],(!x||x[ul]||x[Ht]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(h),y.head.insertBefore(x,y.querySelector("head > title"))),Gt(x,h,u),x[Ht]=s,Ot(x),h=x;break e;case"link":var C=aS("link","href",y).get(h+(u.href||""));if(C){for(var k=0;k<C.length;k++)if(x=C[k],x.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&x.getAttribute("rel")===(u.rel==null?null:u.rel)&&x.getAttribute("title")===(u.title==null?null:u.title)&&x.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(k,1);break t}}x=y.createElement(h),Gt(x,h,u),y.head.appendChild(x);break;case"meta":if(C=aS("meta","content",y).get(h+(u.content||""))){for(k=0;k<C.length;k++)if(x=C[k],x.getAttribute("content")===(u.content==null?null:""+u.content)&&x.getAttribute("name")===(u.name==null?null:u.name)&&x.getAttribute("property")===(u.property==null?null:u.property)&&x.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&x.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(k,1);break t}}x=y.createElement(h),Gt(x,h,u),y.head.appendChild(x);break;default:throw Error(r(468,h))}x[Ht]=s,Ot(x),h=x}s.stateNode=h}else lS(y,s.type,s.stateNode);else s.stateNode=oS(y,h,s.memoizedProps);else x!==h?(x===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):x.count--,h===null?lS(y,s.type,s.stateNode):oS(y,h,s.memoizedProps)):h===null&&s.stateNode!==null&&_m(s,s.memoizedProps,u.memoizedProps)}break;case 27:Sn(a,s),En(s),h&512&&(Ct||u===null||zr(u,u.return)),u!==null&&h&4&&_m(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Sn(a,s),En(s),h&512&&(Ct||u===null||zr(u,u.return)),s.flags&32){y=s.stateNode;try{Ho(y,"")}catch(ce){Ve(s,s.return,ce)}}h&4&&s.stateNode!=null&&(y=s.memoizedProps,_m(s,y,u!==null?u.memoizedProps:y)),h&1024&&(km=!0);break;case 6:if(Sn(a,s),En(s),h&4){if(s.stateNode===null)throw Error(r(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(ce){Ve(s,s.return,ce)}}break;case 3:if(bd=null,y=br,br=yd(a.containerInfo),Sn(a,s),br=y,En(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{ba(a.containerInfo)}catch(ce){Ve(s,s.return,ce)}km&&(km=!1,lw(s));break;case 4:h=br,br=yd(s.stateNode.containerInfo),Sn(a,s),En(s),br=h;break;case 12:Sn(a,s),En(s);break;case 31:Sn(a,s),En(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,rd(s,h)));break;case 13:Sn(a,s),En(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(sd=en()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,rd(s,h)));break;case 22:y=s.memoizedState!==null;var O=u!==null&&u.memoizedState!==null,$=mi,Z=Ct;if(mi=$||y,Ct=Z||O,Sn(a,s),Ct=Z,mi=$,En(s),h&8192)e:for(a=s.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(u===null||O||mi||Ct||ro(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){O=u=a;try{if(x=O.stateNode,y)C=x.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{k=O.stateNode;var te=O.memoizedProps.style,J=te!=null&&te.hasOwnProperty("display")?te.display:null;k.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ce){Ve(O,O.return,ce)}}}else if(a.tag===6){if(u===null){O=a;try{O.stateNode.nodeValue=y?"":O.memoizedProps}catch(ce){Ve(O,O.return,ce)}}}else if(a.tag===18){if(u===null){O=a;try{var Y=O.stateNode;y?Xw(Y,!0):Xw(O.stateNode,!1)}catch(ce){Ve(O,O.return,ce)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,rd(s,u))));break;case 19:Sn(a,s),En(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,rd(s,h)));break;case 30:break;case 21:break;default:Sn(a,s),En(s)}}function En(s){var a=s.flags;if(a&2){try{for(var u,h=s.return;h!==null;){if(Zx(h)){u=h;break}h=h.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var y=u.stateNode,x=Am(s);nd(s,x,y);break;case 5:var C=u.stateNode;u.flags&32&&(Ho(C,""),u.flags&=-33);var k=Am(s);nd(s,k,C);break;case 3:case 4:var O=u.stateNode.containerInfo,$=Am(s);Nm(s,$,O);break;default:throw Error(r(161))}}catch(Z){Ve(s,s.return,Z)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function lw(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;lw(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function yi(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)nw(s,a.alternate,a),a=a.sibling}function ro(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:es(4,a,a.return),ro(a);break;case 1:zr(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&Xx(a,a.return,u),ro(a);break;case 27:Gl(a.stateNode);case 26:case 5:zr(a,a.return),ro(a);break;case 22:a.memoizedState===null&&ro(a);break;case 30:ro(a);break;default:ro(a)}s=s.sibling}}function vi(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,y=s,x=a,C=x.flags;switch(x.tag){case 0:case 11:case 15:vi(y,x,u),Pl(4,x);break;case 1:if(vi(y,x,u),h=x,y=h.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch($){Ve(h,h.return,$)}if(h=x,y=h.updateQueue,y!==null){var k=h.stateNode;try{var O=y.shared.hiddenCallbacks;if(O!==null)for(y.shared.hiddenCallbacks=null,y=0;y<O.length;y++)zb(O[y],k)}catch($){Ve(h,h.return,$)}}u&&C&64&&Wx(x),Ul(x,x.return);break;case 27:ew(x);case 26:case 5:vi(y,x,u),u&&h===null&&C&4&&Qx(x),Ul(x,x.return);break;case 12:vi(y,x,u);break;case 31:vi(y,x,u),u&&C&4&&sw(y,x);break;case 13:vi(y,x,u),u&&C&4&&ow(y,x);break;case 22:x.memoizedState===null&&vi(y,x,u),Ul(x,x.return);break;case 30:break;default:vi(y,x,u)}a=a.sibling}}function Rm(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&El(u))}function Mm(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&El(s))}function xr(s,a,u,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)cw(s,a,u,h),a=a.sibling}function cw(s,a,u,h){var y=a.flags;switch(a.tag){case 0:case 11:case 15:xr(s,a,u,h),y&2048&&Pl(9,a);break;case 1:xr(s,a,u,h);break;case 3:xr(s,a,u,h),y&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&El(s)));break;case 12:if(y&2048){xr(s,a,u,h),s=a.stateNode;try{var x=a.memoizedProps,C=x.id,k=x.onPostCommit;typeof k=="function"&&k(C,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(O){Ve(a,a.return,O)}}else xr(s,a,u,h);break;case 31:xr(s,a,u,h);break;case 13:xr(s,a,u,h);break;case 23:break;case 22:x=a.stateNode,C=a.alternate,a.memoizedState!==null?x._visibility&2?xr(s,a,u,h):Bl(s,a):x._visibility&2?xr(s,a,u,h):(x._visibility|=2,la(s,a,u,h,(a.subtreeFlags&10256)!==0||!1)),y&2048&&Rm(C,a);break;case 24:xr(s,a,u,h),y&2048&&Mm(a.alternate,a);break;default:xr(s,a,u,h)}}function la(s,a,u,h,y){for(y=y&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var x=s,C=a,k=u,O=h,$=C.flags;switch(C.tag){case 0:case 11:case 15:la(x,C,k,O,y),Pl(8,C);break;case 23:break;case 22:var Z=C.stateNode;C.memoizedState!==null?Z._visibility&2?la(x,C,k,O,y):Bl(x,C):(Z._visibility|=2,la(x,C,k,O,y)),y&&$&2048&&Rm(C.alternate,C);break;case 24:la(x,C,k,O,y),y&&$&2048&&Mm(C.alternate,C);break;default:la(x,C,k,O,y)}a=a.sibling}}function Bl(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,h=a,y=h.flags;switch(h.tag){case 22:Bl(u,h),y&2048&&Rm(h.alternate,h);break;case 24:Bl(u,h),y&2048&&Mm(h.alternate,h);break;default:Bl(u,h)}a=a.sibling}}var zl=8192;function ca(s,a,u){if(s.subtreeFlags&zl)for(s=s.child;s!==null;)uw(s,a,u),s=s.sibling}function uw(s,a,u){switch(s.tag){case 26:ca(s,a,u),s.flags&zl&&s.memoizedState!==null&&pI(u,br,s.memoizedState,s.memoizedProps);break;case 5:ca(s,a,u);break;case 3:case 4:var h=br;br=yd(s.stateNode.containerInfo),ca(s,a,u),br=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=zl,zl=16777216,ca(s,a,u),zl=h):ca(s,a,u));break;default:ca(s,a,u)}}function dw(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function jl(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Lt=h,hw(h,s)}dw(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)fw(s),s=s.sibling}function fw(s){switch(s.tag){case 0:case 11:case 15:jl(s),s.flags&2048&&es(9,s,s.return);break;case 3:jl(s);break;case 12:jl(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,id(s)):jl(s);break;default:jl(s)}}function id(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Lt=h,hw(h,s)}dw(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:es(8,a,a.return),id(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,id(a));break;default:id(a)}s=s.sibling}}function hw(s,a){for(;Lt!==null;){var u=Lt;switch(u.tag){case 0:case 11:case 15:es(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:El(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Lt=h;else e:for(u=s;Lt!==null;){h=Lt;var y=h.sibling,x=h.return;if(rw(h),h===u){Lt=null;break e}if(y!==null){y.return=x,Lt=y;break e}Lt=x}}}var kM={getCacheForType:function(s){var a=Vt(wt),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u},cacheSignal:function(){return Vt(wt).controller.signal}},RM=typeof WeakMap=="function"?WeakMap:Map,He=0,Ye=null,ke=null,Me=0,$e=0,Ln=null,ts=!1,ua=!1,Im=!1,bi=0,dt=0,ns=0,io=0,Dm=0,Pn=0,da=0,ql=null,Cn=null,Om=!1,sd=0,pw=0,od=1/0,ad=null,rs=null,Rt=0,is=null,fa=null,xi=0,Lm=0,Pm=null,mw=null,Hl=0,Um=null;function Un(){return(He&2)!==0&&Me!==0?Me&-Me:L.T!==null?$m():yr()}function gw(){if(Pn===0)if((Me&536870912)===0||Oe){var s=Lo;Lo<<=1,(Lo&3932160)===0&&(Lo=262144),Pn=s}else Pn=536870912;return s=Dn.current,s!==null&&(s.flags|=32),Pn}function Tn(s,a,u){(s===Ye&&($e===2||$e===9)||s.cancelPendingCommit!==null)&&(ha(s,0),ss(s,Me,Pn,!1)),Gn(s,u),((He&2)===0||s!==Ye)&&(s===Ye&&((He&2)===0&&(io|=u),dt===4&&ss(s,Me,Pn,!1)),jr(s))}function yw(s,a,u){if((He&6)!==0)throw Error(r(327));var h=!u&&(a&127)===0&&(a&s.expiredLanes)===0||gn(s,a),y=h?DM(s,a):zm(s,a,!0),x=h;do{if(y===0){ua&&!h&&ss(s,a,0,!1);break}else{if(u=s.current.alternate,x&&!MM(u)){y=zm(s,a,!1),x=!1;continue}if(y===2){if(x=a,s.errorRecoveryDisabledLanes&x)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){a=C;e:{var k=s;y=ql;var O=k.current.memoizedState.isDehydrated;if(O&&(ha(k,C).flags|=256),C=zm(k,C,!1),C!==2){if(Im&&!O){k.errorRecoveryDisabledLanes|=x,io|=x,y=4;break e}x=Cn,Cn=y,x!==null&&(Cn===null?Cn=x:Cn.push.apply(Cn,x))}y=C}if(x=!1,y!==2)continue}}if(y===1){ha(s,0),ss(s,a,0,!0);break}e:{switch(h=s,x=y,x){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:ss(h,a,Pn,!ts);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(y=sd+300-en(),10<y)){if(ss(h,a,Pn,!ts),Dt(h,0,!0)!==0)break e;xi=a,h.timeoutHandle=Kw(vw.bind(null,h,u,Cn,ad,Om,a,Pn,io,da,ts,x,"Throttled",-0,0),y);break e}vw(h,u,Cn,ad,Om,a,Pn,io,da,ts,x,null,-0,0)}}break}while(!0);jr(s)}function vw(s,a,u,h,y,x,C,k,O,$,Z,te,J,Y){if(s.timeoutHandle=-1,te=a.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:si},uw(a,x,te);var ce=(x&62914560)===x?sd-en():(x&4194048)===x?pw-en():0;if(ce=mI(te,ce),ce!==null){xi=x,s.cancelPendingCommit=ce(_w.bind(null,s,a,x,u,h,y,C,k,O,Z,te,null,J,Y)),ss(s,x,C,!$);return}}_w(s,a,x,u,h,y,C,k,O)}function MM(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var y=u[h],x=y.getSnapshot;y=y.value;try{if(!Mn(x(),y))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ss(s,a,u,h){a&=~Dm,a&=~io,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var y=a;0<y;){var x=31-tn(y),C=1<<x;h[x]=-1,y&=~C}u!==0&&gr(s,u,a)}function ld(){return(He&6)===0?($l(0),!1):!0}function Bm(){if(ke!==null){if($e===0)var s=ke.return;else s=ke,ci=Ys=null,em(s),ra=null,Tl=0,s=ke;for(;s!==null;)Yx(s.alternate,s),s=s.return;ke=null}}function ha(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,XM(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),xi=0,Bm(),Ye=s,ke=u=ai(s.current,null),Me=a,$e=0,Ln=null,ts=!1,ua=gn(s,a),Im=!1,da=Pn=Dm=io=ns=dt=0,Cn=ql=null,Om=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var y=31-tn(h),x=1<<y;a|=s[y],h&=~x}return bi=a,ku(),u}function bw(s,a){Ce=null,L.H=Dl,a===na||a===Uu?(a=Lb(),$e=3):a===Hp?(a=Lb(),$e=4):$e=a===gm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ln=a,ke===null&&(dt=1,Xu(s,Qn(a,s.current)))}function xw(){var s=Dn.current;return s===null?!0:(Me&4194048)===Me?nr===null:(Me&62914560)===Me||(Me&536870912)!==0?s===nr:!1}function ww(){var s=L.H;return L.H=Dl,s===null?Dl:s}function Sw(){var s=L.A;return L.A=kM,s}function cd(){dt=4,ts||(Me&4194048)!==Me&&Dn.current!==null||(ua=!0),(ns&134217727)===0&&(io&134217727)===0||Ye===null||ss(Ye,Me,Pn,!1)}function zm(s,a,u){var h=He;He|=2;var y=ww(),x=Sw();(Ye!==s||Me!==a)&&(ad=null,ha(s,a)),a=!1;var C=dt;e:do try{if($e!==0&&ke!==null){var k=ke,O=Ln;switch($e){case 8:Bm(),C=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(a=!0);var $=$e;if($e=0,Ln=null,pa(s,k,O,$),u&&ua){C=0;break e}break;default:$=$e,$e=0,Ln=null,pa(s,k,O,$)}}IM(),C=dt;break}catch(Z){bw(s,Z)}while(!0);return a&&s.shellSuspendCounter++,ci=Ys=null,He=h,L.H=y,L.A=x,ke===null&&(Ye=null,Me=0,ku()),C}function IM(){for(;ke!==null;)Ew(ke)}function DM(s,a){var u=He;He|=2;var h=ww(),y=Sw();Ye!==s||Me!==a?(ad=null,od=en()+500,ha(s,a)):ua=gn(s,a);e:do try{if($e!==0&&ke!==null){a=ke;var x=Ln;t:switch($e){case 1:$e=0,Ln=null,pa(s,a,x,1);break;case 2:case 9:if(Db(x)){$e=0,Ln=null,Cw(a);break}a=function(){$e!==2&&$e!==9||Ye!==s||($e=7),jr(s)},x.then(a,a);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:Db(x)?($e=0,Ln=null,Cw(a)):($e=0,Ln=null,pa(s,a,x,7));break;case 5:var C=null;switch(ke.tag){case 26:C=ke.memoizedState;case 5:case 27:var k=ke;if(C?cS(C):k.stateNode.complete){$e=0,Ln=null;var O=k.sibling;if(O!==null)ke=O;else{var $=k.return;$!==null?(ke=$,ud($)):ke=null}break t}}$e=0,Ln=null,pa(s,a,x,5);break;case 6:$e=0,Ln=null,pa(s,a,x,6);break;case 8:Bm(),dt=6;break e;default:throw Error(r(462))}}OM();break}catch(Z){bw(s,Z)}while(!0);return ci=Ys=null,L.H=h,L.A=y,He=u,ke!==null?0:(Ye=null,Me=0,ku(),dt)}function OM(){for(;ke!==null&&!Do();)Ew(ke)}function Ew(s){var a=Jx(s.alternate,s,bi);s.memoizedProps=s.pendingProps,a===null?ud(s):ke=a}function Cw(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=qx(u,a,a.pendingProps,a.type,void 0,Me);break;case 11:a=qx(u,a,a.pendingProps,a.type.render,a.ref,Me);break;case 5:em(a);default:Yx(u,a),a=ke=Sb(a,bi),a=Jx(u,a,bi)}s.memoizedProps=s.pendingProps,a===null?ud(s):ke=a}function pa(s,a,u,h){ci=Ys=null,em(a),ra=null,Tl=0;var y=a.return;try{if(SM(s,y,a,u,Me)){dt=1,Xu(s,Qn(u,s.current)),ke=null;return}}catch(x){if(y!==null)throw ke=y,x;dt=1,Xu(s,Qn(u,s.current)),ke=null;return}a.flags&32768?(Oe||h===1?s=!0:ua||(Me&536870912)!==0?s=!1:(ts=s=!0,(h===2||h===9||h===3||h===6)&&(h=Dn.current,h!==null&&h.tag===13&&(h.flags|=16384))),Tw(a,s)):ud(a)}function ud(s){var a=s;do{if((a.flags&32768)!==0){Tw(a,ts);return}s=a.return;var u=TM(a.alternate,a,bi);if(u!==null){ke=u;return}if(a=a.sibling,a!==null){ke=a;return}ke=a=s}while(a!==null);dt===0&&(dt=5)}function Tw(s,a){do{var u=_M(s.alternate,s);if(u!==null){u.flags&=32767,ke=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){ke=s;return}ke=s=u}while(s!==null);dt=6,ke=null}function _w(s,a,u,h,y,x,C,k,O){s.cancelPendingCommit=null;do dd();while(Rt!==0);if((He&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(x=a.lanes|a.childLanes,x|=Ap,kt(s,u,x,C,k,O),s===Ye&&(ke=Ye=null,Me=0),fa=a,is=s,xi=u,Lm=x,Pm=y,mw=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,BM(mr,function(){return Mw(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=L.T,L.T=null,y=W.p,W.p=2,C=He,He|=4;try{AM(s,a,u)}finally{He=C,W.p=y,L.T=h}}Rt=1,Aw(),Nw(),kw()}}function Aw(){if(Rt===1){Rt=0;var s=is,a=fa,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=L.T,L.T=null;var h=W.p;W.p=2;var y=He;He|=4;try{aw(a,s);var x=Xm,C=hb(s.containerInfo),k=x.focusedElem,O=x.selectionRange;if(C!==k&&k&&k.ownerDocument&&fb(k.ownerDocument.documentElement,k)){if(O!==null&&Sp(k)){var $=O.start,Z=O.end;if(Z===void 0&&(Z=$),"selectionStart"in k)k.selectionStart=$,k.selectionEnd=Math.min(Z,k.value.length);else{var te=k.ownerDocument||document,J=te&&te.defaultView||window;if(J.getSelection){var Y=J.getSelection(),ce=k.textContent.length,ve=Math.min(O.start,ce),Ke=O.end===void 0?ve:Math.min(O.end,ce);!Y.extend&&ve>Ke&&(C=Ke,Ke=ve,ve=C);var j=db(k,ve),P=db(k,Ke);if(j&&P&&(Y.rangeCount!==1||Y.anchorNode!==j.node||Y.anchorOffset!==j.offset||Y.focusNode!==P.node||Y.focusOffset!==P.offset)){var H=te.createRange();H.setStart(j.node,j.offset),Y.removeAllRanges(),ve>Ke?(Y.addRange(H),Y.extend(P.node,P.offset)):(H.setEnd(P.node,P.offset),Y.addRange(H))}}}}for(te=[],Y=k;Y=Y.parentNode;)Y.nodeType===1&&te.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<te.length;k++){var ee=te[k];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Ed=!!Wm,Xm=Wm=null}finally{He=y,W.p=h,L.T=u}}s.current=a,Rt=2}}function Nw(){if(Rt===2){Rt=0;var s=is,a=fa,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=L.T,L.T=null;var h=W.p;W.p=2;var y=He;He|=4;try{nw(s,a.alternate,a)}finally{He=y,W.p=h,L.T=u}}Rt=3}}function kw(){if(Rt===4||Rt===3){Rt=0,pu();var s=is,a=fa,u=xi,h=mw;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Rt=5:(Rt=0,fa=is=null,Rw(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(rs=null),ri(u),a=a.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(qs,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=L.T,y=W.p,W.p=2,L.T=null;try{for(var x=s.onRecoverableError,C=0;C<h.length;C++){var k=h[C];x(k.value,{componentStack:k.stack})}}finally{L.T=a,W.p=y}}(xi&3)!==0&&dd(),jr(s),y=s.pendingLanes,(u&261930)!==0&&(y&42)!==0?s===Um?Hl++:(Hl=0,Um=s):Hl=0,$l(0)}}function Rw(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,El(a)))}function dd(){return Aw(),Nw(),kw(),Mw()}function Mw(){if(Rt!==5)return!1;var s=is,a=Lm;Lm=0;var u=ri(xi),h=L.T,y=W.p;try{W.p=32>u?32:u,L.T=null,u=Pm,Pm=null;var x=is,C=xi;if(Rt=0,fa=is=null,xi=0,(He&6)!==0)throw Error(r(331));var k=He;if(He|=4,fw(x.current),cw(x,x.current,C,u),He=k,$l(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(qs,x)}catch{}return!0}finally{W.p=y,L.T=h,Rw(s,a)}}function Iw(s,a,u){a=Qn(u,a),a=mm(s.stateNode,a,2),s=Xi(s,a,2),s!==null&&(Gn(s,2),jr(s))}function Ve(s,a,u){if(s.tag===3)Iw(s,s,u);else for(;a!==null;){if(a.tag===3){Iw(a,s,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(rs===null||!rs.has(h))){s=Qn(u,s),u=Dx(2),h=Xi(a,u,2),h!==null&&(Ox(u,h,a,s),Gn(h,2),jr(h));break}}a=a.return}}function jm(s,a,u){var h=s.pingCache;if(h===null){h=s.pingCache=new RM;var y=new Set;h.set(a,y)}else y=h.get(a),y===void 0&&(y=new Set,h.set(a,y));y.has(u)||(Im=!0,y.add(u),s=LM.bind(null,s,a,u),a.then(s,s))}function LM(s,a,u){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,Ye===s&&(Me&u)===u&&(dt===4||dt===3&&(Me&62914560)===Me&&300>en()-sd?(He&2)===0&&ha(s,0):Dm|=u,da===Me&&(da=0)),jr(s)}function Dw(s,a){a===0&&(a=nn()),s=Gs(s,a),s!==null&&(Gn(s,a),jr(s))}function PM(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),Dw(s,u)}function UM(s,a){var u=0;switch(s.tag){case 31:case 13:var h=s.stateNode,y=s.memoizedState;y!==null&&(u=y.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(a),Dw(s,u)}function BM(s,a){return Vn(s,a)}var fd=null,ma=null,qm=!1,hd=!1,Hm=!1,as=0;function jr(s){s!==ma&&s.next===null&&(ma===null?fd=ma=s:ma=ma.next=s),hd=!0,qm||(qm=!0,jM())}function $l(s,a){if(!Hm&&hd){Hm=!0;do for(var u=!1,h=fd;h!==null;){if(s!==0){var y=h.pendingLanes;if(y===0)var x=0;else{var C=h.suspendedLanes,k=h.pingedLanes;x=(1<<31-tn(42|s)+1)-1,x&=y&~(C&~k),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(u=!0,Uw(h,x))}else x=Me,x=Dt(h,h===Ye?x:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(x&3)===0||gn(h,x)||(u=!0,Uw(h,x));h=h.next}while(u);Hm=!1}}function zM(){Ow()}function Ow(){hd=qm=!1;var s=0;as!==0&&WM()&&(s=as);for(var a=en(),u=null,h=fd;h!==null;){var y=h.next,x=Lw(h,a);x===0?(h.next=null,u===null?fd=y:u.next=y,y===null&&(ma=u)):(u=h,(s!==0||(x&3)!==0)&&(hd=!0)),h=y}Rt!==0&&Rt!==5||$l(s),as!==0&&(as=0)}function Lw(s,a){for(var u=s.suspendedLanes,h=s.pingedLanes,y=s.expirationTimes,x=s.pendingLanes&-62914561;0<x;){var C=31-tn(x),k=1<<C,O=y[C];O===-1?((k&u)===0||(k&h)!==0)&&(y[C]=yn(k,a)):O<=a&&(s.expiredLanes|=k),x&=~k}if(a=Ye,u=Me,u=Dt(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===a&&($e===2||$e===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Hi(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||gn(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(h!==null&&Hi(h),ri(u)){case 2:case 8:u=ti;break;case 32:u=mr;break;case 268435456:u=cl;break;default:u=mr}return h=Pw.bind(null,s),u=Vn(u,h),s.callbackPriority=a,s.callbackNode=u,a}return h!==null&&h!==null&&Hi(h),s.callbackPriority=2,s.callbackNode=null,2}function Pw(s,a){if(Rt!==0&&Rt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(dd()&&s.callbackNode!==u)return null;var h=Me;return h=Dt(s,s===Ye?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(yw(s,h,a),Lw(s,en()),s.callbackNode!=null&&s.callbackNode===u?Pw.bind(null,s):null)}function Uw(s,a){if(dd())return null;yw(s,a,!0)}function jM(){QM(function(){(He&6)!==0?Vn(mu,zM):Ow()})}function $m(){if(as===0){var s=ea;s===0&&(s=Oo,Oo<<=1,(Oo&261888)===0&&(Oo=256)),as=s}return as}function Bw(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:wu(""+s)}function zw(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function qM(s,a,u,h,y){if(a==="submit"&&u&&u.stateNode===y){var x=Bw((y[bn]||null).action),C=h.submitter;C&&(a=(a=C[bn]||null)?Bw(a.formAction):C.getAttribute("formAction"),a!==null&&(x=a,C=null));var k=new Tu("action","action",null,h,y);s.push({event:k,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(as!==0){var O=C?zw(y,C):new FormData(y);cm(u,{pending:!0,data:O,method:y.method,action:x},null,O)}}else typeof x=="function"&&(k.preventDefault(),O=C?zw(y,C):new FormData(y),cm(u,{pending:!0,data:O,method:y.method,action:x},x,O))},currentTarget:y}]})}}for(var Vm=0;Vm<_p.length;Vm++){var Fm=_p[Vm],HM=Fm.toLowerCase(),$M=Fm[0].toUpperCase()+Fm.slice(1);vr(HM,"on"+$M)}vr(gb,"onAnimationEnd"),vr(yb,"onAnimationIteration"),vr(vb,"onAnimationStart"),vr("dblclick","onDoubleClick"),vr("focusin","onFocus"),vr("focusout","onBlur"),vr(sM,"onTransitionRun"),vr(oM,"onTransitionStart"),vr(aM,"onTransitionCancel"),vr(bb,"onTransitionEnd"),jo("onMouseEnter",["mouseout","mouseover"]),jo("onMouseLeave",["mouseout","mouseover"]),jo("onPointerEnter",["pointerout","pointerover"]),jo("onPointerLeave",["pointerout","pointerover"]),Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vl));function jw(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],y=h.event;h=h.listeners;e:{var x=void 0;if(a)for(var C=h.length-1;0<=C;C--){var k=h[C],O=k.instance,$=k.currentTarget;if(k=k.listener,O!==x&&y.isPropagationStopped())break e;x=k,y.currentTarget=$;try{x(y)}catch(Z){Nu(Z)}y.currentTarget=null,x=O}else for(C=0;C<h.length;C++){if(k=h[C],O=k.instance,$=k.currentTarget,k=k.listener,O!==x&&y.isPropagationStopped())break e;x=k,y.currentTarget=$;try{x(y)}catch(Z){Nu(Z)}y.currentTarget=null,x=O}}}}function Re(s,a){var u=a[ip];u===void 0&&(u=a[ip]=new Set);var h=s+"__bubble";u.has(h)||(qw(a,s,2,!1),u.add(h))}function Gm(s,a,u){var h=0;a&&(h|=4),qw(u,s,h,a)}var pd="_reactListening"+Math.random().toString(36).slice(2);function Jm(s){if(!s[pd]){s[pd]=!0,Ov.forEach(function(u){u!=="selectionchange"&&(VM.has(u)||Gm(u,!1,s),Gm(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[pd]||(a[pd]=!0,Gm("selectionchange",!1,a))}}function qw(s,a,u,h){switch(gS(a)){case 2:var y=vI;break;case 8:y=bI;break;default:y=lg}u=y.bind(null,a,u,s),y=void 0,!hp||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),h?y!==void 0?s.addEventListener(a,u,{capture:!0,passive:y}):s.addEventListener(a,u,!0):y!==void 0?s.addEventListener(a,u,{passive:y}):s.addEventListener(a,u,!1)}function Km(s,a,u,h,y){var x=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var k=h.stateNode.containerInfo;if(k===y)break;if(C===4)for(C=h.return;C!==null;){var O=C.tag;if((O===3||O===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;k!==null;){if(C=Uo(k),C===null)return;if(O=C.tag,O===5||O===6||O===26||O===27){h=x=C;continue e}k=k.parentNode}}h=h.return}Gv(function(){var $=x,Z=dp(u),te=[];e:{var J=xb.get(s);if(J!==void 0){var Y=Tu,ce=s;switch(s){case"keypress":if(Eu(u)===0)break e;case"keydown":case"keyup":Y=UR;break;case"focusin":ce="focus",Y=yp;break;case"focusout":ce="blur",Y=yp;break;case"beforeblur":case"afterblur":Y=yp;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Yv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=TR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=jR;break;case gb:case yb:case vb:Y=NR;break;case bb:Y=HR;break;case"scroll":case"scrollend":Y=ER;break;case"wheel":Y=VR;break;case"copy":case"cut":case"paste":Y=RR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Xv;break;case"toggle":case"beforetoggle":Y=GR}var ve=(a&4)!==0,Ke=!ve&&(s==="scroll"||s==="scrollend"),j=ve?J!==null?J+"Capture":null:J;ve=[];for(var P=$,H;P!==null;){var ee=P;if(H=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||H===null||j===null||(ee=fl(P,j),ee!=null&&ve.push(Fl(P,ee,H))),Ke)break;P=P.return}0<ve.length&&(J=new Y(J,ce,null,u,Z),te.push({event:J,listeners:ve}))}}if((a&7)===0){e:{if(J=s==="mouseover"||s==="pointerover",Y=s==="mouseout"||s==="pointerout",J&&u!==up&&(ce=u.relatedTarget||u.fromElement)&&(Uo(ce)||ce[Po]))break e;if((Y||J)&&(J=Z.window===Z?Z:(J=Z.ownerDocument)?J.defaultView||J.parentWindow:window,Y?(ce=u.relatedTarget||u.toElement,Y=$,ce=ce?Uo(ce):null,ce!==null&&(Ke=o(ce),ve=ce.tag,ce!==Ke||ve!==5&&ve!==27&&ve!==6)&&(ce=null)):(Y=null,ce=$),Y!==ce)){if(ve=Yv,ee="onMouseLeave",j="onMouseEnter",P="mouse",(s==="pointerout"||s==="pointerover")&&(ve=Xv,ee="onPointerLeave",j="onPointerEnter",P="pointer"),Ke=Y==null?J:dl(Y),H=ce==null?J:dl(ce),J=new ve(ee,P+"leave",Y,u,Z),J.target=Ke,J.relatedTarget=H,ee=null,Uo(Z)===$&&(ve=new ve(j,P+"enter",ce,u,Z),ve.target=H,ve.relatedTarget=Ke,ee=ve),Ke=ee,Y&&ce)t:{for(ve=FM,j=Y,P=ce,H=0,ee=j;ee;ee=ve(ee))H++;ee=0;for(var me=P;me;me=ve(me))ee++;for(;0<H-ee;)j=ve(j),H--;for(;0<ee-H;)P=ve(P),ee--;for(;H--;){if(j===P||P!==null&&j===P.alternate){ve=j;break t}j=ve(j),P=ve(P)}ve=null}else ve=null;Y!==null&&Hw(te,J,Y,ve,!1),ce!==null&&Ke!==null&&Hw(te,Ke,ce,ve,!0)}}e:{if(J=$?dl($):window,Y=J.nodeName&&J.nodeName.toLowerCase(),Y==="select"||Y==="input"&&J.type==="file")var ze=sb;else if(rb(J))if(ob)ze=nM;else{ze=eM;var ue=ZR}else Y=J.nodeName,!Y||Y.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?$&&cp($.elementType)&&(ze=sb):ze=tM;if(ze&&(ze=ze(s,$))){ib(te,ze,u,Z);break e}ue&&ue(s,J,$),s==="focusout"&&$&&J.type==="number"&&$.memoizedProps.value!=null&&lp(J,"number",J.value)}switch(ue=$?dl($):window,s){case"focusin":(rb(ue)||ue.contentEditable==="true")&&(Go=ue,Ep=$,xl=null);break;case"focusout":xl=Ep=Go=null;break;case"mousedown":Cp=!0;break;case"contextmenu":case"mouseup":case"dragend":Cp=!1,pb(te,u,Z);break;case"selectionchange":if(iM)break;case"keydown":case"keyup":pb(te,u,Z)}var _e;if(bp)e:{switch(s){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Fo?tb(s,u)&&(Ie="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Ie="onCompositionStart");Ie&&(Qv&&u.locale!=="ko"&&(Fo||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Fo&&(_e=Jv()):(Vi=Z,pp="value"in Vi?Vi.value:Vi.textContent,Fo=!0)),ue=md($,Ie),0<ue.length&&(Ie=new Wv(Ie,s,null,u,Z),te.push({event:Ie,listeners:ue}),_e?Ie.data=_e:(_e=nb(u),_e!==null&&(Ie.data=_e)))),(_e=KR?YR(s,u):WR(s,u))&&(Ie=md($,"onBeforeInput"),0<Ie.length&&(ue=new Wv("onBeforeInput","beforeinput",null,u,Z),te.push({event:ue,listeners:Ie}),ue.data=_e)),qM(te,s,$,u,Z)}jw(te,a)})}function Fl(s,a,u){return{instance:s,listener:a,currentTarget:u}}function md(s,a){for(var u=a+"Capture",h=[];s!==null;){var y=s,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=fl(s,u),y!=null&&h.unshift(Fl(s,y,x)),y=fl(s,a),y!=null&&h.push(Fl(s,y,x))),s.tag===3)return h;s=s.return}return[]}function FM(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Hw(s,a,u,h,y){for(var x=a._reactName,C=[];u!==null&&u!==h;){var k=u,O=k.alternate,$=k.stateNode;if(k=k.tag,O!==null&&O===h)break;k!==5&&k!==26&&k!==27||$===null||(O=$,y?($=fl(u,x),$!=null&&C.unshift(Fl(u,$,O))):y||($=fl(u,x),$!=null&&C.push(Fl(u,$,O)))),u=u.return}C.length!==0&&s.push({event:a,listeners:C})}var GM=/\r\n?/g,JM=/\u0000|\uFFFD/g;function $w(s){return(typeof s=="string"?s:""+s).replace(GM,`
`).replace(JM,"")}function Vw(s,a){return a=$w(a),$w(s)===a}function Je(s,a,u,h,y,x){switch(u){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Ho(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Ho(s,""+h);break;case"className":bu(s,"class",h);break;case"tabIndex":bu(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":bu(s,u,h);break;case"style":Vv(s,h,x);break;case"data":if(a!=="object"){bu(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=wu(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(u==="formAction"?(a!=="input"&&Je(s,a,"name",y.name,y,null),Je(s,a,"formEncType",y.formEncType,y,null),Je(s,a,"formMethod",y.formMethod,y,null),Je(s,a,"formTarget",y.formTarget,y,null)):(Je(s,a,"encType",y.encType,y,null),Je(s,a,"method",y.method,y,null),Je(s,a,"target",y.target,y,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=wu(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=si);break;case"onScroll":h!=null&&Re("scroll",s);break;case"onScrollEnd":h!=null&&Re("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=wu(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":Re("beforetoggle",s),Re("toggle",s),vu(s,"popover",h);break;case"xlinkActuate":ii(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ii(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ii(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ii(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ii(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ii(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ii(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ii(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ii(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":vu(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=wR.get(u)||u,vu(s,u,h))}}function Ym(s,a,u,h,y,x){switch(u){case"style":Vv(s,h,x);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"children":typeof h=="string"?Ho(s,h):(typeof h=="number"||typeof h=="bigint")&&Ho(s,""+h);break;case"onScroll":h!=null&&Re("scroll",s);break;case"onScrollEnd":h!=null&&Re("scrollend",s);break;case"onClick":h!=null&&(s.onclick=si);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lv.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),a=u.slice(2,y?u.length-7:void 0),x=s[bn]||null,x=x!=null?x[u]:null,typeof x=="function"&&s.removeEventListener(a,x,y),typeof h=="function")){typeof x!="function"&&x!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,h,y);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):vu(s,u,h)}}}function Gt(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",s),Re("load",s);var h=!1,y=!1,x;for(x in u)if(u.hasOwnProperty(x)){var C=u[x];if(C!=null)switch(x){case"src":h=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Je(s,a,x,C,u,null)}}y&&Je(s,a,"srcSet",u.srcSet,u,null),h&&Je(s,a,"src",u.src,u,null);return;case"input":Re("invalid",s);var k=x=C=y=null,O=null,$=null;for(h in u)if(u.hasOwnProperty(h)){var Z=u[h];if(Z!=null)switch(h){case"name":y=Z;break;case"type":C=Z;break;case"checked":O=Z;break;case"defaultChecked":$=Z;break;case"value":x=Z;break;case"defaultValue":k=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,a));break;default:Je(s,a,h,Z,u,null)}}jv(s,x,k,O,$,C,y,!1);return;case"select":Re("invalid",s),h=C=x=null;for(y in u)if(u.hasOwnProperty(y)&&(k=u[y],k!=null))switch(y){case"value":x=k;break;case"defaultValue":C=k;break;case"multiple":h=k;default:Je(s,a,y,k,u,null)}a=x,u=C,s.multiple=!!h,a!=null?qo(s,!!h,a,!1):u!=null&&qo(s,!!h,u,!0);return;case"textarea":Re("invalid",s),x=y=h=null;for(C in u)if(u.hasOwnProperty(C)&&(k=u[C],k!=null))switch(C){case"value":h=k;break;case"defaultValue":y=k;break;case"children":x=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:Je(s,a,C,k,u,null)}Hv(s,h,y,x);return;case"option":for(O in u)if(u.hasOwnProperty(O)&&(h=u[O],h!=null))switch(O){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Je(s,a,O,h,u,null)}return;case"dialog":Re("beforetoggle",s),Re("toggle",s),Re("cancel",s),Re("close",s);break;case"iframe":case"object":Re("load",s);break;case"video":case"audio":for(h=0;h<Vl.length;h++)Re(Vl[h],s);break;case"image":Re("error",s),Re("load",s);break;case"details":Re("toggle",s);break;case"embed":case"source":case"link":Re("error",s),Re("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in u)if(u.hasOwnProperty($)&&(h=u[$],h!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Je(s,a,$,h,u,null)}return;default:if(cp(a)){for(Z in u)u.hasOwnProperty(Z)&&(h=u[Z],h!==void 0&&Ym(s,a,Z,h,u,void 0));return}}for(k in u)u.hasOwnProperty(k)&&(h=u[k],h!=null&&Je(s,a,k,h,u,null))}function KM(s,a,u,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,C=null,k=null,O=null,$=null,Z=null;for(Y in u){var te=u[Y];if(u.hasOwnProperty(Y)&&te!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":O=te;default:h.hasOwnProperty(Y)||Je(s,a,Y,null,h,te)}}for(var J in h){var Y=h[J];if(te=u[J],h.hasOwnProperty(J)&&(Y!=null||te!=null))switch(J){case"type":x=Y;break;case"name":y=Y;break;case"checked":$=Y;break;case"defaultChecked":Z=Y;break;case"value":C=Y;break;case"defaultValue":k=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,a));break;default:Y!==te&&Je(s,a,J,Y,h,te)}}ap(s,C,k,O,$,Z,x,y);return;case"select":Y=C=k=J=null;for(x in u)if(O=u[x],u.hasOwnProperty(x)&&O!=null)switch(x){case"value":break;case"multiple":Y=O;default:h.hasOwnProperty(x)||Je(s,a,x,null,h,O)}for(y in h)if(x=h[y],O=u[y],h.hasOwnProperty(y)&&(x!=null||O!=null))switch(y){case"value":J=x;break;case"defaultValue":k=x;break;case"multiple":C=x;default:x!==O&&Je(s,a,y,x,h,O)}a=k,u=C,h=Y,J!=null?qo(s,!!u,J,!1):!!h!=!!u&&(a!=null?qo(s,!!u,a,!0):qo(s,!!u,u?[]:"",!1));return;case"textarea":Y=J=null;for(k in u)if(y=u[k],u.hasOwnProperty(k)&&y!=null&&!h.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Je(s,a,k,null,h,y)}for(C in h)if(y=h[C],x=u[C],h.hasOwnProperty(C)&&(y!=null||x!=null))switch(C){case"value":J=y;break;case"defaultValue":Y=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==x&&Je(s,a,C,y,h,x)}qv(s,J,Y);return;case"option":for(var ce in u)if(J=u[ce],u.hasOwnProperty(ce)&&J!=null&&!h.hasOwnProperty(ce))switch(ce){case"selected":s.selected=!1;break;default:Je(s,a,ce,null,h,J)}for(O in h)if(J=h[O],Y=u[O],h.hasOwnProperty(O)&&J!==Y&&(J!=null||Y!=null))switch(O){case"selected":s.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:Je(s,a,O,J,h,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in u)J=u[ve],u.hasOwnProperty(ve)&&J!=null&&!h.hasOwnProperty(ve)&&Je(s,a,ve,null,h,J);for($ in h)if(J=h[$],Y=u[$],h.hasOwnProperty($)&&J!==Y&&(J!=null||Y!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,a));break;default:Je(s,a,$,J,h,Y)}return;default:if(cp(a)){for(var Ke in u)J=u[Ke],u.hasOwnProperty(Ke)&&J!==void 0&&!h.hasOwnProperty(Ke)&&Ym(s,a,Ke,void 0,h,J);for(Z in h)J=h[Z],Y=u[Z],!h.hasOwnProperty(Z)||J===Y||J===void 0&&Y===void 0||Ym(s,a,Z,J,h,Y);return}}for(var j in u)J=u[j],u.hasOwnProperty(j)&&J!=null&&!h.hasOwnProperty(j)&&Je(s,a,j,null,h,J);for(te in h)J=h[te],Y=u[te],!h.hasOwnProperty(te)||J===Y||J==null&&Y==null||Je(s,a,te,J,h,Y)}function Fw(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function YM(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var y=u[h],x=y.transferSize,C=y.initiatorType,k=y.duration;if(x&&k&&Fw(C)){for(C=0,k=y.responseEnd,h+=1;h<u.length;h++){var O=u[h],$=O.startTime;if($>k)break;var Z=O.transferSize,te=O.initiatorType;Z&&Fw(te)&&(O=O.responseEnd,C+=Z*(O<k?1:(k-$)/(O-$)))}if(--h,a+=8*(x+C)/(y.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Wm=null,Xm=null;function gd(s){return s.nodeType===9?s:s.ownerDocument}function Gw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jw(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Qm(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Zm=null;function WM(){var s=window.event;return s&&s.type==="popstate"?s===Zm?!1:(Zm=s,!0):(Zm=null,!1)}var Kw=typeof setTimeout=="function"?setTimeout:void 0,XM=typeof clearTimeout=="function"?clearTimeout:void 0,Yw=typeof Promise=="function"?Promise:void 0,QM=typeof queueMicrotask=="function"?queueMicrotask:typeof Yw<"u"?function(s){return Yw.resolve(null).then(s).catch(ZM)}:Kw;function ZM(s){setTimeout(function(){throw s})}function ls(s){return s==="head"}function Ww(s,a){var u=a,h=0;do{var y=u.nextSibling;if(s.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"||u==="/&"){if(h===0){s.removeChild(y),ba(a);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")Gl(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,Gl(u);for(var x=u.firstChild;x;){var C=x.nextSibling,k=x.nodeName;x[ul]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&x.rel.toLowerCase()==="stylesheet"||u.removeChild(x),x=C}}else u==="body"&&Gl(s.ownerDocument.body);u=y}while(u);ba(a)}function Xw(s,a){var u=s;s=0;do{var h=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=h}while(u)}function eg(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":eg(u),sp(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function eI(s,a,u,h){for(;s.nodeType===1;){var y=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[ul])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(x=s.getAttribute("rel"),x==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(x!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(x=s.getAttribute("src"),(x!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===x)return s}else return s;if(s=rr(s.nextSibling),s===null)break}return null}function tI(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=rr(s.nextSibling),s===null))return null;return s}function Qw(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=rr(s.nextSibling),s===null))return null;return s}function tg(s){return s.data==="$?"||s.data==="$~"}function ng(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function nI(s,a){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||u.readyState!=="loading")a();else{var h=function(){a(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function rr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var rg=null;function Zw(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(a===0)return rr(s.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}s=s.nextSibling}return null}function eS(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return s;a--}else u!=="/$"&&u!=="/&"||a++}s=s.previousSibling}return null}function tS(s,a,u){switch(a=gd(u),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Gl(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);sp(s)}var ir=new Map,nS=new Set;function yd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var wi=W.d;W.d={f:rI,r:iI,D:sI,C:oI,L:aI,m:lI,X:uI,S:cI,M:dI};function rI(){var s=wi.f(),a=ld();return s||a}function iI(s){var a=Bo(s);a!==null&&a.tag===5&&a.type==="form"?bx(a):wi.r(s)}var ga=typeof document>"u"?null:document;function rS(s,a,u){var h=ga;if(h&&typeof a=="string"&&a){var y=Wn(a);y='link[rel="'+s+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),nS.has(y)||(nS.add(y),s={rel:s,crossOrigin:u,href:a},h.querySelector(y)===null&&(a=h.createElement("link"),Gt(a,"link",s),Ot(a),h.head.appendChild(a)))}}function sI(s){wi.D(s),rS("dns-prefetch",s,null)}function oI(s,a){wi.C(s,a),rS("preconnect",s,a)}function aI(s,a,u){wi.L(s,a,u);var h=ga;if(h&&s&&a){var y='link[rel="preload"][as="'+Wn(a)+'"]';a==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+Wn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+Wn(u.imageSizes)+'"]')):y+='[href="'+Wn(s)+'"]';var x=y;switch(a){case"style":x=ya(s);break;case"script":x=va(s)}ir.has(x)||(s=m({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),ir.set(x,s),h.querySelector(y)!==null||a==="style"&&h.querySelector(Jl(x))||a==="script"&&h.querySelector(Kl(x))||(a=h.createElement("link"),Gt(a,"link",s),Ot(a),h.head.appendChild(a)))}}function lI(s,a){wi.m(s,a);var u=ga;if(u&&s){var h=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+Wn(h)+'"][href="'+Wn(s)+'"]',x=y;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=va(s)}if(!ir.has(x)&&(s=m({rel:"modulepreload",href:s},a),ir.set(x,s),u.querySelector(y)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Kl(x)))return}h=u.createElement("link"),Gt(h,"link",s),Ot(h),u.head.appendChild(h)}}}function cI(s,a,u){wi.S(s,a,u);var h=ga;if(h&&s){var y=zo(h).hoistableStyles,x=ya(s);a=a||"default";var C=y.get(x);if(!C){var k={loading:0,preload:null};if(C=h.querySelector(Jl(x)))k.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":a},u),(u=ir.get(x))&&ig(s,u);var O=C=h.createElement("link");Ot(O),Gt(O,"link",s),O._p=new Promise(function($,Z){O.onload=$,O.onerror=Z}),O.addEventListener("load",function(){k.loading|=1}),O.addEventListener("error",function(){k.loading|=2}),k.loading|=4,vd(C,a,h)}C={type:"stylesheet",instance:C,count:1,state:k},y.set(x,C)}}}function uI(s,a){wi.X(s,a);var u=ga;if(u&&s){var h=zo(u).hoistableScripts,y=va(s),x=h.get(y);x||(x=u.querySelector(Kl(y)),x||(s=m({src:s,async:!0},a),(a=ir.get(y))&&sg(s,a),x=u.createElement("script"),Ot(x),Gt(x,"link",s),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},h.set(y,x))}}function dI(s,a){wi.M(s,a);var u=ga;if(u&&s){var h=zo(u).hoistableScripts,y=va(s),x=h.get(y);x||(x=u.querySelector(Kl(y)),x||(s=m({src:s,async:!0,type:"module"},a),(a=ir.get(y))&&sg(s,a),x=u.createElement("script"),Ot(x),Gt(x,"link",s),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},h.set(y,x))}}function iS(s,a,u,h){var y=(y=ye.current)?yd(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=ya(u.href),u=zo(y).hoistableStyles,h=u.get(a),h||(h={type:"style",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=ya(u.href);var x=zo(y).hoistableStyles,C=x.get(s);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(s,C),(x=y.querySelector(Jl(s)))&&!x._p&&(C.instance=x,C.state.loading=5),ir.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ir.set(s,u),x||fI(y,s,u,C.state))),a&&h===null)throw Error(r(528,""));return C}if(a&&h!==null)throw Error(r(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=va(u),u=zo(y).hoistableScripts,h=u.get(a),h||(h={type:"script",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function ya(s){return'href="'+Wn(s)+'"'}function Jl(s){return'link[rel="stylesheet"]['+s+"]"}function sS(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function fI(s,a,u,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Gt(a,"link",u),Ot(a),s.head.appendChild(a))}function va(s){return'[src="'+Wn(s)+'"]'}function Kl(s){return"script[async]"+s}function oS(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+Wn(u.href)+'"]');if(h)return a.instance=h,Ot(h),h;var y=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Ot(h),Gt(h,"style",y),vd(h,u.precedence,s),a.instance=h;case"stylesheet":y=ya(u.href);var x=s.querySelector(Jl(y));if(x)return a.state.loading|=4,a.instance=x,Ot(x),x;h=sS(u),(y=ir.get(y))&&ig(h,y),x=(s.ownerDocument||s).createElement("link"),Ot(x);var C=x;return C._p=new Promise(function(k,O){C.onload=k,C.onerror=O}),Gt(x,"link",h),a.state.loading|=4,vd(x,u.precedence,s),a.instance=x;case"script":return x=va(u.src),(y=s.querySelector(Kl(x)))?(a.instance=y,Ot(y),y):(h=u,(y=ir.get(x))&&(h=m({},u),sg(h,y)),s=s.ownerDocument||s,y=s.createElement("script"),Ot(y),Gt(y,"link",h),s.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,vd(h,u.precedence,s));return a.instance}function vd(s,a,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=h.length?h[h.length-1]:null,x=y,C=0;C<h.length;C++){var k=h[C];if(k.dataset.precedence===a)x=k;else if(x!==y)break}x?x.parentNode.insertBefore(s,x.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function ig(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function sg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var bd=null;function aS(s,a,u){if(bd===null){var h=new Map,y=bd=new Map;y.set(u,h)}else y=bd,h=y.get(u),h||(h=new Map,y.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),y=0;y<u.length;y++){var x=u[y];if(!(x[ul]||x[Ht]||s==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var C=x.getAttribute(a)||"";C=s+C;var k=h.get(C);k?k.push(x):h.set(C,[x])}}return h}function lS(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function hI(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function cS(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function pI(s,a,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=ya(h.href),x=a.querySelector(Jl(y));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=xd.bind(s),a.then(s,s)),u.state.loading|=4,u.instance=x,Ot(x);return}x=a.ownerDocument||a,h=sS(h),(y=ir.get(y))&&ig(h,y),x=x.createElement("link"),Ot(x);var C=x;C._p=new Promise(function(k,O){C.onload=k,C.onerror=O}),Gt(x,"link",h),u.instance=x}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=xd.bind(s),a.addEventListener("load",u),a.addEventListener("error",u))}}var og=0;function mI(s,a){return s.stylesheets&&s.count===0&&Sd(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var h=setTimeout(function(){if(s.stylesheets&&Sd(s,s.stylesheets),s.unsuspend){var x=s.unsuspend;s.unsuspend=null,x()}},6e4+a);0<s.imgBytes&&og===0&&(og=62500*YM());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Sd(s,s.stylesheets),s.unsuspend)){var x=s.unsuspend;s.unsuspend=null,x()}},(s.imgBytes>og?50:800)+a);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(y)}}:null}function xd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var wd=null;function Sd(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,wd=new Map,a.forEach(gI,s),wd=null,xd.call(s))}function gI(s,a){if(!(a.state.loading&4)){var u=wd.get(s);if(u)var h=u.get(null);else{u=new Map,wd.set(s,u);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var C=y[x];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),h=C)}h&&u.set(null,h)}y=a.instance,C=y.getAttribute("data-precedence"),x=u.get(C)||h,x===h&&u.set(null,y),u.set(C,y),this.count++,h=xd.bind(this),y.addEventListener("load",h),y.addEventListener("error",h),x?x.parentNode.insertBefore(y,x.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),a.state.loading|=4}}var Yl={$$typeof:A,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function yI(s,a,u,h,y,x,C,k,O){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vn(0),this.hiddenUpdates=vn(null),this.identifierPrefix=h,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function uS(s,a,u,h,y,x,C,k,O,$,Z,te){return s=new yI(s,a,u,C,O,$,Z,te,k),a=1,x===!0&&(a|=24),x=In(3,null,null,a),s.current=x,x.stateNode=s,a=zp(),a.refCount++,s.pooledCache=a,a.refCount++,x.memoizedState={element:h,isDehydrated:u,cache:a},$p(x),s}function dS(s){return s?(s=Yo,s):Yo}function fS(s,a,u,h,y,x){y=dS(y),h.context===null?h.context=y:h.pendingContext=y,h=Wi(a),h.payload={element:u},x=x===void 0?null:x,x!==null&&(h.callback=x),u=Xi(s,h,a),u!==null&&(Tn(u,s,a),Al(u,s,a))}function hS(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function ag(s,a){hS(s,a),(s=s.alternate)&&hS(s,a)}function pS(s){if(s.tag===13||s.tag===31){var a=Gs(s,67108864);a!==null&&Tn(a,s,67108864),ag(s,67108864)}}function mS(s){if(s.tag===13||s.tag===31){var a=Un();a=ni(a);var u=Gs(s,a);u!==null&&Tn(u,s,a),ag(s,a)}}var Ed=!0;function vI(s,a,u,h){var y=L.T;L.T=null;var x=W.p;try{W.p=2,lg(s,a,u,h)}finally{W.p=x,L.T=y}}function bI(s,a,u,h){var y=L.T;L.T=null;var x=W.p;try{W.p=8,lg(s,a,u,h)}finally{W.p=x,L.T=y}}function lg(s,a,u,h){if(Ed){var y=cg(h);if(y===null)Km(s,a,h,Cd,u),yS(s,h);else if(wI(y,s,a,u,h))h.stopPropagation();else if(yS(s,h),a&4&&-1<xI.indexOf(s)){for(;y!==null;){var x=Bo(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var C=vt(x.pendingLanes);if(C!==0){var k=x;for(k.pendingLanes|=2,k.entangledLanes|=2;C;){var O=1<<31-tn(C);k.entanglements[1]|=O,C&=~O}jr(x),(He&6)===0&&(od=en()+500,$l(0))}}break;case 31:case 13:k=Gs(x,2),k!==null&&Tn(k,x,2),ld(),ag(x,2)}if(x=cg(h),x===null&&Km(s,a,h,Cd,u),x===y)break;y=x}y!==null&&h.stopPropagation()}else Km(s,a,h,null,u)}}function cg(s){return s=dp(s),ug(s)}var Cd=null;function ug(s){if(Cd=null,s=Uo(s),s!==null){var a=o(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=l(a),s!==null)return s;s=null}else if(u===31){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Cd=s,null}function gS(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tp()){case mu:return 2;case ti:return 8;case mr:case js:return 32;case cl:return 268435456;default:return 32}default:return 32}}var dg=!1,cs=null,us=null,ds=null,Wl=new Map,Xl=new Map,fs=[],xI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yS(s,a){switch(s){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":Wl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(a.pointerId)}}function Ql(s,a,u,h,y,x){return s===null||s.nativeEvent!==x?(s={blockedOn:a,domEventName:u,eventSystemFlags:h,nativeEvent:x,targetContainers:[y]},a!==null&&(a=Bo(a),a!==null&&pS(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),s)}function wI(s,a,u,h,y){switch(a){case"focusin":return cs=Ql(cs,s,a,u,h,y),!0;case"dragenter":return us=Ql(us,s,a,u,h,y),!0;case"mouseover":return ds=Ql(ds,s,a,u,h,y),!0;case"pointerover":var x=y.pointerId;return Wl.set(x,Ql(Wl.get(x)||null,s,a,u,h,y)),!0;case"gotpointercapture":return x=y.pointerId,Xl.set(x,Ql(Xl.get(x)||null,s,a,u,h,y)),!0}return!1}function vS(s){var a=Uo(s.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){s.blockedOn=a,$i(s.priority,function(){mS(u)});return}}else if(a===31){if(a=c(u),a!==null){s.blockedOn=a,$i(s.priority,function(){mS(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Td(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=cg(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);up=h,u.target.dispatchEvent(h),up=null}else return a=Bo(u),a!==null&&pS(a),s.blockedOn=u,!1;a.shift()}return!0}function bS(s,a,u){Td(s)&&u.delete(a)}function SI(){dg=!1,cs!==null&&Td(cs)&&(cs=null),us!==null&&Td(us)&&(us=null),ds!==null&&Td(ds)&&(ds=null),Wl.forEach(bS),Xl.forEach(bS)}function _d(s,a){s.blockedOn===a&&(s.blockedOn=null,dg||(dg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,SI)))}var Ad=null;function xS(s){Ad!==s&&(Ad=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ad===s&&(Ad=null);for(var a=0;a<s.length;a+=3){var u=s[a],h=s[a+1],y=s[a+2];if(typeof h!="function"){if(ug(h||u)===null)continue;break}var x=Bo(u);x!==null&&(s.splice(a,3),a-=3,cm(x,{pending:!0,data:y,method:u.method,action:h},h,y))}}))}function ba(s){function a(O){return _d(O,s)}cs!==null&&_d(cs,s),us!==null&&_d(us,s),ds!==null&&_d(ds,s),Wl.forEach(a),Xl.forEach(a);for(var u=0;u<fs.length;u++){var h=fs[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<fs.length&&(u=fs[0],u.blockedOn===null);)vS(u),u.blockedOn===null&&fs.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var y=u[h],x=u[h+1],C=y[bn]||null;if(typeof x=="function")C||xS(u);else if(C){var k=null;if(x&&x.hasAttribute("formAction")){if(y=x,C=x[bn]||null)k=C.formAction;else if(ug(y)!==null)continue}else k=C.action;typeof k=="function"?u[h+1]=k:(u.splice(h,3),h-=3),xS(u)}}}function wS(){function s(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function a(){y!==null&&(y(),y=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),y!==null&&(y(),y=null)}}}function fg(s){this._internalRoot=s}Nd.prototype.render=fg.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var u=a.current,h=Un();fS(u,h,s,a,null,null)},Nd.prototype.unmount=fg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;fS(s.current,2,null,s,null,null),ld(),a[Po]=null}};function Nd(s){this._internalRoot=s}Nd.prototype.unstable_scheduleHydration=function(s){if(s){var a=yr();s={blockedOn:null,target:s,priority:a};for(var u=0;u<fs.length&&a!==0&&a<fs[u].priority;u++);fs.splice(u,0,s),u===0&&vS(s)}};var SS=e.version;if(SS!=="19.2.0")throw Error(r(527,SS,"19.2.0"));W.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var EI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kd.isDisabled&&kd.supportsFiber)try{qs=kd.inject(EI),an=kd}catch{}}return ec.createRoot=function(s,a){if(!i(s))throw Error(r(299));var u=!1,h="",y=kx,x=Rx,C=Mx;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError)),a=uS(s,1,!1,null,null,u,h,null,y,x,C,wS),s[Po]=a.current,Jm(s),new fg(a)},ec.hydrateRoot=function(s,a,u){if(!i(s))throw Error(r(299));var h=!1,y="",x=kx,C=Rx,k=Mx,O=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(k=u.onRecoverableError),u.formState!==void 0&&(O=u.formState)),a=uS(s,1,!0,a,u??null,h,y,O,x,C,k,wS),a.context=dS(null),u=a.current,h=Un(),h=ni(h),y=Wi(h),y.callback=null,Xi(u,y,h),u=h,a.current.lanes=u,Gn(a,u),jr(a),s[Po]=a.current,Jm(s),new Nd(a)},ec.version="19.2.0",ec}var IS;function II(){if(IS)return mg.exports;IS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),mg.exports=MI(),mg.exports}var DI=II();const OI=m0(DI);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var DS="popstate";function LI(t={}){function e(i,o){let{pathname:l="/",search:c="",hash:d=""}=No(i.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),py("",{pathname:l,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let l=i.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let d=i.location.href,f=d.indexOf("#");c=f===-1?d:d.slice(0,f)}return c+"#"+(typeof o=="string"?o:kc(o))}function r(i,o){Hn(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return UI(e,n,r,t)}function ot(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Hn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PI(){return Math.random().toString(36).substring(2,10)}function OS(t,e){return{usr:t.state,key:t.key,idx:e}}function py(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?No(e):e,state:n,key:e&&e.key||r||PI()}}function kc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function No(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function UI(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,c="POP",d=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function m(){c="POP";let E=p(),T=E==null?null:E-f;f=E,d&&d({action:c,location:S.location,delta:T})}function v(E,T){c="PUSH";let N=py(S.location,E,T);n&&n(N,E),f=p()+1;let A=OS(N,f),I=S.createHref(N);try{l.pushState(A,"",I)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(I)}o&&d&&d({action:c,location:S.location,delta:1})}function b(E,T){c="REPLACE";let N=py(S.location,E,T);n&&n(N,E),f=p();let A=OS(N,f),I=S.createHref(N);l.replaceState(A,"",I),o&&d&&d({action:c,location:S.location,delta:0})}function w(E){return BI(E)}let S={get action(){return c},get location(){return t(i,l)},listen(E){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(DS,m),d=E,()=>{i.removeEventListener(DS,m),d=null}},createHref(E){return e(i,E)},createURL:w,encodeLocation(E){let T=w(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:v,replace:b,go(E){return l.go(E)}};return S}function BI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ot(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:kc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function x1(t,e,n="/"){return zI(t,e,n,!1)}function zI(t,e,n,r){let i=typeof e=="string"?No(e):e,o=Li(i.pathname||"/",n);if(o==null)return null;let l=w1(t);jI(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let f=XI(o);c=YI(l[d],f,r)}return c}function w1(t,e=[],n=[],r="",i=!1){let o=(l,c,d=i,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&d)return;ot(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let m=Ii([r,p.relativePath]),v=n.concat(p);l.children&&l.children.length>0&&(ot(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),w1(l.children,e,v,m,d)),!(l.path==null&&!l.index)&&e.push({path:m,score:JI(m,l.index),routesMeta:v})};return t.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,c);else for(let f of S1(l.path))o(l,c,!0,f)}),e}function S1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=S1(r.join("/")),c=[];return c.push(...l.map(d=>d===""?o:[o,d].join("/"))),i&&c.push(...l),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function jI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:KI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var qI=/^:[\w-]+$/,HI=3,$I=2,VI=1,FI=10,GI=-2,LS=t=>t==="*";function JI(t,e){let n=t.split("/"),r=n.length;return n.some(LS)&&(r+=GI),e&&(r+=$I),n.filter(i=>!LS(i)).reduce((i,o)=>i+(qI.test(o)?HI:o===""?VI:FI),r)}function KI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function YI(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",l=[];for(let c=0;c<r.length;++c){let d=r[c],f=c===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",m=df({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),v=d.route;if(!m&&f&&n&&!r[r.length-1].route.index&&(m=df({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:Ii([o,m.pathname]),pathnameBase:n2(Ii([o,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(o=Ii([o,m.pathnameBase]))}return l}function df(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=WI(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:m},v)=>{if(p==="*"){let w=c[v]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const b=c[v];return m&&!b?f[p]=void 0:f[p]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:t}}function WI(t,e=!1,n=!0){Hn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function XI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Li(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var QI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ZI=t=>QI.test(t);function e2(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?No(t):t,o;if(n)if(ZI(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),Hn(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${n}`)}n.startsWith("/")?o=PS(n.substring(1),"/"):o=PS(n,e)}else o=e;return{pathname:o,search:r2(r),hash:i2(i)}}function PS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function bg(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function t2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function g0(t){let e=t2(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function y0(t,e,n,r=!1){let i;typeof t=="string"?i=No(t):(i={...t},ot(!i.pathname||!i.pathname.includes("?"),bg("?","pathname","search",i)),ot(!i.pathname||!i.pathname.includes("#"),bg("#","pathname","hash",i)),ot(!i.search||!i.search.includes("#"),bg("#","search","hash",i)));let o=t===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=n;else{let m=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}c=m>=0?e[m]:"/"}let d=e2(i,c),f=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var Ii=t=>t.join("/").replace(/\/\/+/g,"/"),n2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),r2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,i2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function s2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var E1=["POST","PUT","PATCH","DELETE"];new Set(E1);var o2=["GET",...E1];new Set(o2);var Za=_.createContext(null);Za.displayName="DataRouter";var yh=_.createContext(null);yh.displayName="DataRouterState";_.createContext(!1);var C1=_.createContext({isTransitioning:!1});C1.displayName="ViewTransition";var a2=_.createContext(new Map);a2.displayName="Fetchers";var l2=_.createContext(null);l2.displayName="Await";var Mr=_.createContext(null);Mr.displayName="Navigation";var eu=_.createContext(null);eu.displayName="Location";var pr=_.createContext({outlet:null,matches:[],isDataRoute:!1});pr.displayName="Route";var v0=_.createContext(null);v0.displayName="RouteError";function c2(t,{relative:e}={}){ot(el(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=_.useContext(Mr),{hash:i,pathname:o,search:l}=nu(t,{relative:e}),c=o;return n!=="/"&&(c=o==="/"?n:Ii([n,o])),r.createHref({pathname:c,search:l,hash:i})}function el(){return _.useContext(eu)!=null}function Ir(){return ot(el(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(eu).location}var T1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _1(t){_.useContext(Mr).static||_.useLayoutEffect(t)}function Pi(){let{isDataRoute:t}=_.useContext(pr);return t?C2():u2()}function u2(){ot(el(),"useNavigate() may be used only in the context of a <Router> component.");let t=_.useContext(Za),{basename:e,navigator:n}=_.useContext(Mr),{matches:r}=_.useContext(pr),{pathname:i}=Ir(),o=JSON.stringify(g0(r)),l=_.useRef(!1);return _1(()=>{l.current=!0}),_.useCallback((d,f={})=>{if(Hn(l.current,T1),!l.current)return;if(typeof d=="number"){n.go(d);return}let p=y0(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ii([e,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[e,n,o,i,t])}var d2=_.createContext(null);function f2(t){let e=_.useContext(pr).outlet;return _.useMemo(()=>e&&_.createElement(d2.Provider,{value:t},e),[e,t])}function tu(){let{matches:t}=_.useContext(pr),e=t[t.length-1];return e?e.params:{}}function nu(t,{relative:e}={}){let{matches:n}=_.useContext(pr),{pathname:r}=Ir(),i=JSON.stringify(g0(n));return _.useMemo(()=>y0(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function h2(t,e){return A1(t,e)}function A1(t,e,n,r,i){var N;ot(el(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=_.useContext(Mr),{matches:l}=_.useContext(pr),c=l[l.length-1],d=c?c.params:{},f=c?c.pathname:"/",p=c?c.pathnameBase:"/",m=c&&c.route;{let A=m&&m.path||"";N1(f,!m||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let v=Ir(),b;if(e){let A=typeof e=="string"?No(e):e;ot(p==="/"||((N=A.pathname)==null?void 0:N.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${A.pathname}" was given in the \`location\` prop.`),b=A}else b=v;let w=b.pathname||"/",S=w;if(p!=="/"){let A=p.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(A.length).join("/")}let E=x1(t,{pathname:S});Hn(m||E!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Hn(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=v2(E&&E.map(A=>Object.assign({},A,{params:Object.assign({},d,A.params),pathname:Ii([p,o.encodeLocation?o.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?p:Ii([p,o.encodeLocation?o.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),l,n,r,i);return e&&T?_.createElement(eu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},T):T}function p2(){let t=E2(),e=s2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:o},"ErrorBoundary")," or"," ",_.createElement("code",{style:o},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:i},n):null,l)}var m2=_.createElement(p2,null),g2=class extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?_.createElement(pr.Provider,{value:this.props.routeContext},_.createElement(v0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function y2({routeContext:t,match:e,children:n}){let r=_.useContext(Za);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(pr.Provider,{value:t},n)}function v2(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=n==null?void 0:n.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);ot(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,d=-1;if(n)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:v,errors:b}=n,w=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!b||b[m.route.id]===void 0);if(m.route.lazy||w){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=n&&r?(p,m)=>{var v,b;r(p,{location:n.location,params:((b=(v=n.matches)==null?void 0:v[0])==null?void 0:b.params)??{},errorInfo:m})}:void 0;return o.reduceRight((p,m,v)=>{let b,w=!1,S=null,E=null;n&&(b=l&&m.route.id?l[m.route.id]:void 0,S=m.route.errorElement||m2,c&&(d<0&&v===0?(N1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,E=null):d===v&&(w=!0,E=m.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,v+1)),N=()=>{let A;return b?A=S:w?A=E:m.route.Component?A=_.createElement(m.route.Component,null):m.route.element?A=m.route.element:A=p,_.createElement(y2,{match:m,routeContext:{outlet:p,matches:T,isDataRoute:n!=null},children:A})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?_.createElement(g2,{location:n.location,revalidation:n.revalidation,component:S,error:b,children:N(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:f}):N()},null)}function b0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function b2(t){let e=_.useContext(Za);return ot(e,b0(t)),e}function x2(t){let e=_.useContext(yh);return ot(e,b0(t)),e}function w2(t){let e=_.useContext(pr);return ot(e,b0(t)),e}function x0(t){let e=w2(t),n=e.matches[e.matches.length-1];return ot(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function S2(){return x0("useRouteId")}function E2(){var r;let t=_.useContext(v0),e=x2("useRouteError"),n=x0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function C2(){let{router:t}=b2("useNavigate"),e=x0("useNavigate"),n=_.useRef(!1);return _1(()=>{n.current=!0}),_.useCallback(async(i,o={})=>{Hn(n.current,T1),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var US={};function N1(t,e,n){!e&&!US[t]&&(US[t]=!0,Hn(!1,n))}_.memo(T2);function T2({routes:t,future:e,state:n,unstable_onError:r}){return A1(t,void 0,n,r,e)}function my({to:t,replace:e,state:n,relative:r}){ot(el(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=_.useContext(Mr);Hn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=_.useContext(pr),{pathname:l}=Ir(),c=Pi(),d=y0(t,g0(o),l,r==="path"),f=JSON.stringify(d);return _.useEffect(()=>{c(JSON.parse(f),{replace:e,state:n,relative:r})},[c,f,r,e,n]),null}function k1(t){return f2(t.context)}function cn(t){ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _2({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){ot(!el(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=_.useMemo(()=>({basename:l,navigator:i,static:o,future:{}}),[l,i,o]);typeof n=="string"&&(n=No(n));let{pathname:d="/",search:f="",hash:p="",state:m=null,key:v="default"}=n,b=_.useMemo(()=>{let w=Li(d,l);return w==null?null:{location:{pathname:w,search:f,hash:p,state:m,key:v},navigationType:r}},[l,d,f,p,m,v,r]);return Hn(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:_.createElement(Mr.Provider,{value:c},_.createElement(eu.Provider,{children:e,value:b}))}function A2({children:t,location:e}){return h2(gy(t),e)}function gy(t,e=[]){let n=[];return _.Children.forEach(t,(r,i)=>{if(!_.isValidElement(r))return;let o=[...e,i];if(r.type===_.Fragment){n.push.apply(n,gy(r.props.children,o));return}ot(r.type===cn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ot(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=gy(r.props.children,o)),n.push(l)}),n}var tf="get",nf="application/x-www-form-urlencoded";function vh(t){return t!=null&&typeof t.tagName=="string"}function N2(t){return vh(t)&&t.tagName.toLowerCase()==="button"}function k2(t){return vh(t)&&t.tagName.toLowerCase()==="form"}function R2(t){return vh(t)&&t.tagName.toLowerCase()==="input"}function M2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function I2(t,e){return t.button===0&&(!e||e==="_self")&&!M2(t)}var Rd=null;function D2(){if(Rd===null)try{new FormData(document.createElement("form"),0),Rd=!1}catch{Rd=!0}return Rd}var O2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xg(t){return t!=null&&!O2.has(t)?(Hn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nf}"`),null):t}function L2(t,e){let n,r,i,o,l;if(k2(t)){let c=t.getAttribute("action");r=c?Li(c,e):null,n=t.getAttribute("method")||tf,i=xg(t.getAttribute("enctype"))||nf,o=new FormData(t)}else if(N2(t)||R2(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||c.getAttribute("action");if(r=d?Li(d,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||tf,i=xg(t.getAttribute("formenctype"))||xg(c.getAttribute("enctype"))||nf,o=new FormData(c,t),!D2()){let{name:f,type:p,value:m}=t;if(p==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,m)}}else{if(vh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=tf,r=null,i=nf,l=t}return o&&i==="text/plain"&&(l=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function w0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function P2(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Li(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function U2(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function B2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function z2(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let l=await U2(o,n);return l.links?l.links():[]}return[]}));return $2(r.flat(1).filter(B2).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function BS(t,e,n,r,i,o){let l=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,c=(d,f)=>{var p;return n[f].pathname!==d.pathname||((p=n[f].route.path)==null?void 0:p.endsWith("*"))&&n[f].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,f)=>l(d,f)||c(d,f)):o==="data"?e.filter((d,f)=>{var m;let p=r.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,f)||c(d,f))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function j2(t,e,{includeHydrateFallback:n}={}){return q2(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function q2(t){return[...new Set(t)]}function H2(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function $2(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(H2(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function R1(){let t=_.useContext(Za);return w0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function V2(){let t=_.useContext(yh);return w0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var S0=_.createContext(void 0);S0.displayName="FrameworkContext";function M1(){let t=_.useContext(S0);return w0(t,"You must render this element inside a <HydratedRouter> element"),t}function F2(t,e){let n=_.useContext(S0),[r,i]=_.useState(!1),[o,l]=_.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:m}=e,v=_.useRef(null);_.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let S=T=>{T.forEach(N=>{l(N.isIntersecting)})},E=new IntersectionObserver(S,{threshold:.5});return v.current&&E.observe(v.current),()=>{E.disconnect()}}},[t]),_.useEffect(()=>{if(r){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[r]);let b=()=>{i(!0)},w=()=>{i(!1),l(!1)};return n?t!=="intent"?[o,v,{}]:[o,v,{onFocus:tc(c,b),onBlur:tc(d,w),onMouseEnter:tc(f,b),onMouseLeave:tc(p,w),onTouchStart:tc(m,b)}]:[!1,v,{}]}function tc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function G2({page:t,...e}){let{router:n}=R1(),r=_.useMemo(()=>x1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?_.createElement(K2,{page:t,matches:r,...e}):null}function J2(t){let{manifest:e,routeModules:n}=M1(),[r,i]=_.useState([]);return _.useEffect(()=>{let o=!1;return z2(t,e,n).then(l=>{o||i(l)}),()=>{o=!0}},[t,e,n]),r}function K2({page:t,matches:e,...n}){let r=Ir(),{manifest:i,routeModules:o}=M1(),{basename:l}=R1(),{loaderData:c,matches:d}=V2(),f=_.useMemo(()=>BS(t,e,d,i,r,"data"),[t,e,d,i,r]),p=_.useMemo(()=>BS(t,e,d,i,r,"assets"),[t,e,d,i,r]),m=_.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,S=!1;if(e.forEach(T=>{var A;let N=i.routes[T.route.id];!N||!N.hasLoader||(!f.some(I=>I.route.id===T.route.id)&&T.route.id in c&&((A=o[T.route.id])!=null&&A.shouldRevalidate)||N.hasClientLoader?S=!0:w.add(T.route.id))}),w.size===0)return[];let E=P2(t,l,"data");return S&&w.size>0&&E.searchParams.set("_routes",e.filter(T=>w.has(T.route.id)).map(T=>T.route.id).join(",")),[E.pathname+E.search]},[l,c,r,i,f,e,t,o]),v=_.useMemo(()=>j2(p,i),[p,i]),b=J2(p);return _.createElement(_.Fragment,null,m.map(w=>_.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),v.map(w=>_.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),b.map(({key:w,link:S})=>_.createElement("link",{key:w,nonce:n.nonce,...S})))}function Y2(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var I1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{I1&&(window.__reactRouterVersion="7.9.6")}catch{}function W2({basename:t,children:e,window:n}){let r=_.useRef();r.current==null&&(r.current=LI({window:n,v5Compat:!0}));let i=r.current,[o,l]=_.useState({action:i.action,location:i.location}),c=_.useCallback(d=>{_.startTransition(()=>l(d))},[l]);return _.useLayoutEffect(()=>i.listen(c),[i,c]),_.createElement(_2,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var D1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qt=_.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:l,state:c,target:d,to:f,preventScrollReset:p,viewTransition:m,...v},b){let{basename:w}=_.useContext(Mr),S=typeof f=="string"&&D1.test(f),E,T=!1;if(typeof f=="string"&&S&&(E=f,I1))try{let z=new URL(window.location.href),F=f.startsWith("//")?new URL(z.protocol+f):new URL(f),Q=Li(F.pathname,w);F.origin===z.origin&&Q!=null?f=Q+F.search+F.hash:T=!0}catch{Hn(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=c2(f,{relative:i}),[A,I,M]=F2(r,v),D=eD(f,{replace:l,state:c,target:d,preventScrollReset:p,relative:i,viewTransition:m});function R(z){e&&e(z),z.defaultPrevented||D(z)}let B=_.createElement("a",{...v,...M,href:E||N,onClick:T||o?e:R,ref:Y2(b,I),target:d,"data-discover":!S&&n==="render"?"true":void 0});return A&&!S?_.createElement(_.Fragment,null,B,_.createElement(G2,{page:N})):B});Qt.displayName="Link";var X2=_.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:l,viewTransition:c,children:d,...f},p){let m=nu(l,{relative:f.relative}),v=Ir(),b=_.useContext(yh),{navigator:w,basename:S}=_.useContext(Mr),E=b!=null&&sD(m)&&c===!0,T=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,N=v.pathname,A=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(N=N.toLowerCase(),A=A?A.toLowerCase():null,T=T.toLowerCase()),A&&S&&(A=Li(A,S)||A);const I=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let M=N===T||!i&&N.startsWith(T)&&N.charAt(I)==="/",D=A!=null&&(A===T||!i&&A.startsWith(T)&&A.charAt(T.length)==="/"),R={isActive:M,isPending:D,isTransitioning:E},B=M?e:void 0,z;typeof r=="function"?z=r(R):z=[r,M?"active":null,D?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let F=typeof o=="function"?o(R):o;return _.createElement(Qt,{...f,"aria-current":B,className:z,ref:p,style:F,to:l,viewTransition:c},typeof d=="function"?d(R):d)});X2.displayName="NavLink";var Q2=_.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:l=tf,action:c,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:m,...v},b)=>{let w=rD(),S=iD(c,{relative:f}),E=l.toLowerCase()==="get"?"get":"post",T=typeof c=="string"&&D1.test(c),N=A=>{if(d&&d(A),A.defaultPrevented)return;A.preventDefault();let I=A.nativeEvent.submitter,M=(I==null?void 0:I.getAttribute("formmethod"))||l;w(I||A.currentTarget,{fetcherKey:e,method:M,navigate:n,replace:i,state:o,relative:f,preventScrollReset:p,viewTransition:m})};return _.createElement("form",{ref:b,method:E,action:S,onSubmit:r?d:N,...v,"data-discover":!T&&t==="render"?"true":void 0})});Q2.displayName="Form";function Z2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O1(t){let e=_.useContext(Za);return ot(e,Z2(t)),e}function eD(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:l}={}){let c=Pi(),d=Ir(),f=nu(t,{relative:o});return _.useCallback(p=>{if(I2(p,e)){p.preventDefault();let m=n!==void 0?n:kc(d)===kc(f);c(t,{replace:m,state:r,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,f,n,r,e,t,i,o,l])}var tD=0,nD=()=>`__${String(++tD)}__`;function rD(){let{router:t}=O1("useSubmit"),{basename:e}=_.useContext(Mr),n=S2();return _.useCallback(async(r,i={})=>{let{action:o,method:l,encType:c,formData:d,body:f}=L2(r,e);if(i.navigate===!1){let p=i.fetcherKey||nD();await t.fetch(p,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:d,body:f,formMethod:i.method||l,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:d,body:f,formMethod:i.method||l,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function iD(t,{relative:e}={}){let{basename:n}=_.useContext(Mr),r=_.useContext(pr);ot(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...nu(t||".",{relative:e})},l=Ir();if(t==null){o.search=l.search;let c=new URLSearchParams(o.search),d=c.getAll("index");if(d.some(p=>p==="")){c.delete("index"),d.filter(m=>m).forEach(m=>c.append("index",m));let p=c.toString();o.search=p?`?${p}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Ii([n,o.pathname])),kc(o)}function sD(t,{relative:e}={}){let n=_.useContext(C1);ot(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=O1("useViewTransitionState"),i=nu(t,{relative:e});if(!n.isTransitioning)return!1;let o=Li(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Li(n.nextLocation.pathname,r)||n.nextLocation.pathname;return df(i.pathname,l)!=null||df(i.pathname,o)!=null}var Cs=b1();const oD=m0(Cs);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lD=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),zS=t=>{const e=lD(t);return e.charAt(0).toUpperCase()+e.slice(1)},L1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),cD=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:l,...c},d)=>_.createElement("svg",{ref:d,...uD,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:L1("lucide",i),...!o&&!cD(c)&&{"aria-hidden":"true"},...c},[...l.map(([f,p])=>_.createElement(f,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=(t,e)=>{const n=_.forwardRef(({className:r,...i},o)=>_.createElement(dD,{ref:o,iconNode:e,className:L1(`lucide-${aD(zS(t))}`,`lucide-${t}`,r),...i}));return n.displayName=zS(t),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],bh=ae("arrow-left",fD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],P1=ae("arrow-right",hD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],fc=ae("award",pD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],gD=ae("bell",mD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],vD=ae("bold",yD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ff=ae("book-open",bD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],yy=ae("book",xD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],SD=ae("chart-no-axes-column-increasing",wD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],E0=ae("check",ED);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],TD=ae("chevron-down",CD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],vy=ae("chevron-left",_D);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hf=ae("chevron-right",AD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],U1=ae("circle-alert",ND);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ha=ae("circle-check-big",kD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],hc=ae("circle-play",RD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Rc=ae("circle-question-mark",MD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],DD=ae("circle-stop",ID);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],B1=ae("circle-x",OD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],PD=ae("clock",LD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],BD=ae("cloud-off",UD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],jD=ae("cloud",zD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],by=ae("code-xml",qD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],z1=ae("code",HD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],VD=ae("copy",$D);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],GD=ae("dollar-sign",FD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],j1=ae("ellipsis",JD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],C0=ae("external-link",KD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],WD=ae("eye-off",YD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],QD=ae("eye",XD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z",key:"1340ok"}],["path",{d:"M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z",key:"1hz3m3"}],["path",{d:"M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z",key:"1oz8n2"}],["path",{d:"M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z",key:"1ff65i"}],["path",{d:"M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z",key:"pdip6e"}]],eO=ae("figma",ZD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],nO=ae("file-code",tO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$a=ae("file-text",rO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],sO=ae("folder-plus",iO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],q1=ae("globe",oO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],xh=ae("grip-vertical",aO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],cO=ae("heading-1",lO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],dO=ae("heading-2",uO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]],hO=ae("heading-3",fO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],wh=ae("image",pO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],gO=ae("infinity",mO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],vO=ae("italic",yO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],xO=ae("keyboard",bO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],H1=ae("link",wO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],EO=ae("list-ordered",SO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],TO=ae("list",CO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],$1=ae("loader-circle",_O);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],V1=ae("lock-open",AO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Mc=ae("lock",NO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],RO=ae("log-out",kO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],IO=ae("mail",MO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],OO=ae("menu",DO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M5 12h14",key:"1ays0h"}]],PO=ae("minus",LO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],lo=ae("panels-top-left",UO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],F1=ae("pencil",BO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Vr=ae("plus",zO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],G1=ae("presentation",jO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],HO=ae("printer",qO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],VO=ae("quote",$O);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],GO=ae("refresh-ccw",FO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],KO=ae("refresh-cw",JO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],WO=ae("save",YO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Sh=ae("search",XO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ZO=ae("send",QO);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tL=ae("settings",eL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],rL=ae("share-2",nL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],sL=ae("shield-check",iL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Fr=ae("sparkles",oL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],lL=ae("square-pen",aL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Na=ae("star",cL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],dL=ae("text-align-center",uL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],hL=ae("text-align-end",fL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],mL=ae("text-align-start",pL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Nn=ae("trash-2",gL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],vL=ae("type",yL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],xL=ae("underline",bL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],SL=ae("upload",wL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],CL=ae("user",EL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],J1=ae("users",TL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],T0=ae("video",_L);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],NL=ae("volume-2",AL);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ko=ae("x",kL);var Er=(t=>(t.STUDENT="STUDENT",t.INSTRUCTOR="INSTRUCTOR",t.ADMIN="ADMIN",t))(Er||{}),it=(t=>(t.VIDEO="VIDEO",t.TEXT="TEXT",t.QUIZ="QUIZ",t.ASSIGNMENT="ASSIGNMENT",t))(it||{});const K1=()=>({pages:[]}),RL=(t,e)=>({id:crypto.randomUUID(),type:t,data:{text:{type:"text",html:""},video:{type:"video",url:"",provider:"youtube"},embed:{type:"embed",provider:"custom",embedUrl:""},quiz:{type:"quiz",questions:[],passingScore:70},code:{type:"code",code:"",language:"javascript",runnable:!1},image:{type:"image",url:"",alt:""},divider:{type:"divider",style:"line"}}[t],order:e}),Y1=t=>typeof t=="object"&&t!==null&&"pages"in t;function Eh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ML(t,e,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(p){try{f(r.next(p))}catch(m){l(m)}}function d(p){try{f(r.throw(p))}catch(m){l(m)}}function f(p){p.done?o(p.value):i(p.value).then(c,d)}f((r=r.apply(t,e||[])).next())})}const IL=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class _0 extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class DL extends _0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class jS extends _0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class qS extends _0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xy;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(xy||(xy={}));class OL{constructor(e,{headers:n={},customFetch:r,region:i=xy.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=IL(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ML(this,arguments,void 0,function*(n,r={}){var i;let o,l;try{const{headers:c,method:d,body:f,signal:p,timeout:m}=r;let v={},{region:b}=r;b||(b=this.region);const w=new URL(`${this.url}/${n}`);b&&b!=="any"&&(v["x-region"]=b,w.searchParams.set("forceFunctionRegion",b));let S;f&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",S=f):typeof f=="string"?(v["Content-Type"]="text/plain",S=f):typeof FormData<"u"&&f instanceof FormData?S=f:(v["Content-Type"]="application/json",S=JSON.stringify(f)):f&&typeof f!="string"&&!(typeof Blob<"u"&&f instanceof Blob)&&!(f instanceof ArrayBuffer)&&!(typeof FormData<"u"&&f instanceof FormData)?S=JSON.stringify(f):S=f;let E=p;m&&(l=new AbortController,o=setTimeout(()=>l.abort(),m),p?(E=l.signal,p.addEventListener("abort",()=>l.abort())):E=l.signal);const T=yield this.fetch(w.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),c),body:S,signal:E}).catch(M=>{throw new DL(M)}),N=T.headers.get("x-relay-error");if(N&&N==="true")throw new jS(T);if(!T.ok)throw new qS(T);let A=((i=T.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),I;return A==="application/json"?I=yield T.json():A==="application/octet-stream"||A==="application/pdf"?I=yield T.blob():A==="text/event-stream"?I=T:A==="multipart/form-data"?I=yield T.formData():I=yield T.text(),{data:I,error:null,response:T}}catch(c){return{data:null,error:c,response:c instanceof qS||c instanceof jS?c.context:void 0}}finally{o&&clearTimeout(o)}})}}var LL=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},PL=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let l=null,c=null,d=null,f=o.status,p=o.statusText;if(o.ok){var m,v;if(n.method!=="HEAD"){var b;const T=await o.text();T===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((b=n.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?c=T:c=JSON.parse(T))}const S=(m=n.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),E=(v=o.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");S&&E&&E.length>1&&(d=parseInt(E[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(c)&&(c.length>1?(l={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,f=406,p="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var w;const S=await o.text();try{l=JSON.parse(S),Array.isArray(l)&&o.status===404&&(c=[],l=null,f=200,p="OK")}catch{o.status===404&&S===""?(f=204,p="No Content"):l={message:S}}if(l&&n.isMaybeSingle&&(!(l==null||(w=l.details)===null||w===void 0)&&w.includes("0 rows"))&&(l=null,f=200,p="OK"),l&&n.shouldThrowOnError)throw new LL(l)}return{error:l,data:c,count:d,status:f,statusText:p}});return this.shouldThrowOnError||(i=i.catch(o=>{var l;let c="";const d=o==null?void 0:o.cause;if(d){var f,p,m,v;const w=(f=d==null?void 0:d.message)!==null&&f!==void 0?f:"",S=(p=d==null?void 0:d.code)!==null&&p!==void 0?p:"";c=`${(m=o==null?void 0:o.name)!==null&&m!==void 0?m:"FetchError"}: ${o==null?void 0:o.message}`,c+=`

Caused by: ${(v=d==null?void 0:d.name)!==null&&v!==void 0?v:"Error"}: ${w}`,S&&(c+=` (${S})`),d!=null&&d.stack&&(c+=`
${d.stack}`)}else{var b;c=(b=o==null?void 0:o.stack)!==null&&b!==void 0?b:""}return{error:{message:`${(l=o==null?void 0:o.name)!==null&&l!==void 0?l:"FetchError"}: ${o==null?void 0:o.message}`,details:c,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},UL=class extends PL{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const HS=new RegExp("[,()]");var ka=class extends UL{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&HS.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&HS.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},BL=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let o=!1;const l=(t??"*").split("").map(f=>/\s/.test(f)&&!o?"":(f==='"'&&(o=!o),f)).join(""),{url:c,headers:d}=this.cloneRequestState();return c.searchParams.set("select",l),r&&d.append("Prefer",`count=${r}`),new ka({method:i,url:c,headers:d,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST",{url:o,headers:l}=this.cloneRequestState();if(e&&l.append("Prefer",`count=${e}`),n||l.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);o.searchParams.set("columns",d.join(","))}}return new ka({method:i,url:o,headers:l,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;const l="POST",{url:c,headers:d}=this.cloneRequestState();if(d.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&c.searchParams.set("on_conflict",e),r&&d.append("Prefer",`count=${r}`),i||d.append("Prefer","missing=default"),Array.isArray(t)){const f=t.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(f.length>0){const p=[...new Set(f)].map(m=>`"${m}"`);c.searchParams.set("columns",p.join(","))}}return new ka({method:l,url:c,headers:d,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var n;const r="PATCH",{url:i,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new ka({method:r,url:i,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new ka({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},zL=class W1{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new BL(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new W1(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){var l;let c;const d=new URL(`${this.url}/rpc/${e}`);let f;const p=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(p)),m=r&&Object.values(n).some(p);m?(c="POST",f=n):r||i?(c=r?"HEAD":"GET",Object.entries(n).filter(([b,w])=>w!==void 0).map(([b,w])=>[b,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([b,w])=>{d.searchParams.append(b,w)})):(c="POST",f=n);const v=new Headers(this.headers);return m?v.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&v.set("Prefer",`count=${o}`),new ka({method:c,url:d,headers:v,schema:this.schemaName,body:f,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class jL{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const qL="2.93.2",HL=`realtime-js/${qL}`,$L="1.0.0",X1="2.0.0",$S=X1,wy=1e4,VL=1e3,FL=100;var gs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(gs||(gs={}));var Mt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Mt||(Mt={}));var Sr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Sr||(Sr={}));var Sy;(function(t){t.websocket="websocket"})(Sy||(Sy={}));var uo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(uo||(uo={}));class GL{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,n,r){var i,o;const l=e.topic,c=(i=e.ref)!==null&&i!==void 0?i:"",d=(o=e.join_ref)!==null&&o!==void 0?o:"",f=e.payload.event,p=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},m=Object.keys(p).length===0?"":JSON.stringify(p);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+c.length+l.length+f.length+m.length,b=new ArrayBuffer(this.HEADER_LENGTH+v);let w=new DataView(b),S=0;w.setUint8(S++,this.KINDS.userBroadcastPush),w.setUint8(S++,d.length),w.setUint8(S++,c.length),w.setUint8(S++,l.length),w.setUint8(S++,f.length),w.setUint8(S++,m.length),w.setUint8(S++,n),Array.from(d,T=>w.setUint8(S++,T.charCodeAt(0))),Array.from(c,T=>w.setUint8(S++,T.charCodeAt(0))),Array.from(l,T=>w.setUint8(S++,T.charCodeAt(0))),Array.from(f,T=>w.setUint8(S++,T.charCodeAt(0))),Array.from(m,T=>w.setUint8(S++,T.charCodeAt(0)));var E=new Uint8Array(b.byteLength+r.byteLength);return E.set(new Uint8Array(b),0),E.set(new Uint8Array(r),b.byteLength),E.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,l,c,d]=r;return n({join_ref:i,ref:o,topic:l,event:c,payload:d})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),l=n.getUint8(3),c=n.getUint8(4);let d=this.HEADER_LENGTH+4;const f=r.decode(e.slice(d,d+i));d=d+i;const p=r.decode(e.slice(d,d+o));d=d+o;const m=r.decode(e.slice(d,d+l));d=d+l;const v=e.slice(d,e.byteLength),b=c===this.JSON_ENCODING?JSON.parse(r.decode(v)):v,w={type:this.BROADCAST_EVENT,event:p,payload:b};return l>0&&(w.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class Q1{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Xe||(Xe={}));const VS=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,l)=>(o[l]=JL(l,t,e,i),o),{}):{}},JL=(t,e,n,r)=>{const i=e.find(c=>c.name===t),o=i==null?void 0:i.type,l=n[t];return o&&!r.includes(o)?Z1(o,l):Ey(l)},Z1=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return XL(e,n)}switch(t){case Xe.bool:return KL(e);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return YL(e);case Xe.json:case Xe.jsonb:return WL(e);case Xe.timestamp:return QL(e);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:return Ey(e);default:return Ey(e)}},Ey=t=>t,KL=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},YL=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},WL=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},XL=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const l=t.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(c=>Z1(e,c))}return t},QL=t=>typeof t=="string"?t.replace(" ","T"):t,e_=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class wg{constructor(e,n,r={},i=wy){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var FS;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(FS||(FS={}));class pc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=pc.syncState(this.state,i,o,l),this.pendingDiffs.forEach(d=>{this.state=pc.syncDiff(this.state,d,o,l)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=pc.syncDiff(this.state,i,o,l),c())}),this.onJoin((i,o,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:l})}),this.onLeave((i,o,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),l=this.transformState(n),c={},d={};return this.map(o,(f,p)=>{l[f]||(d[f]=p)}),this.map(l,(f,p)=>{const m=o[f];if(m){const v=p.map(E=>E.presence_ref),b=m.map(E=>E.presence_ref),w=p.filter(E=>b.indexOf(E.presence_ref)<0),S=m.filter(E=>v.indexOf(E.presence_ref)<0);w.length>0&&(c[f]=w),S.length>0&&(d[f]=S)}else c[f]=p}),this.syncDiff(o,{joins:c,leaves:d},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(c,d)=>{var f;const p=(f=e[c])!==null&&f!==void 0?f:[];if(e[c]=this.cloneDeep(d),p.length>0){const m=e[c].map(b=>b.presence_ref),v=p.filter(b=>m.indexOf(b.presence_ref)<0);e[c].unshift(...v)}r(c,p,d)}),this.map(l,(c,d)=>{let f=e[c];if(!f)return;const p=d.map(m=>m.presence_ref);f=f.filter(m=>p.indexOf(m.presence_ref)<0),e[c]=f,i(c,f,d),f.length===0&&delete e[c]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var GS;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(GS||(GS={}));var mc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(mc||(mc={}));var Ai;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ai||(Ai={}));class La{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Mt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new wg(this,Sr.join,this.params,this.timeout),this.rejoinTimer=new Q1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Mt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Mt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sr.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new pc(this),this.broadcastEndpointURL=e_(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Mt.closed){const{config:{broadcast:l,presence:c,private:d}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(b=>b.filter))!==null&&i!==void 0?i:[],p=!!this.bindings[mc.PRESENCE]&&this.bindings[mc.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,m={},v={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:p}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(b=>e==null?void 0:e(Ai.CHANNEL_ERROR,b)),this._onClose(()=>e==null?void 0:e(Ai.CLOSED)),this.updateJoinPayload(Object.assign({config:v},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){e==null||e(Ai.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,E=(w=S==null?void 0:S.length)!==null&&w!==void 0?w:0,T=[];for(let N=0;N<E;N++){const A=S[N],{filter:{event:I,schema:M,table:D,filter:R}}=A,B=b&&b[N];if(B&&B.event===I&&La.isFilterValueEqual(B.schema,M)&&La.isFilterValueEqual(B.table,D)&&La.isFilterValueEqual(B.filter,R))T.push(Object.assign(Object.assign({},A),{id:B.id}));else{this.unsubscribe(),this.state=Mt.errored,e==null||e(Ai.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(Ai.SUBSCRIBED);return}}).receive("error",b=>{this.state=Mt.errored,e==null||e(Ai.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ai.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Mt.joined&&e===mc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(c.status===202)return{success:!0};let d=c.statusText;try{const f=await c.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=e,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,c,d;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Mt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new wg(this,Sr.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Mt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new wg(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>FL){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const l=e.toLocaleLowerCase(),{close:c,error:d,leave:f,join:p}=Sr;if(r&&[c,d,f,p].indexOf(l)>=0&&r!==this._joinRef())return;let v=this._onMessage(l,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var w,S,E;return((w=b.filter)===null||w===void 0?void 0:w.event)==="*"||((E=(S=b.filter)===null||S===void 0?void 0:S.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(b=>b.callback(v,r)):(o=this.bindings[l])===null||o===void 0||o.filter(b=>{var w,S,E,T,N,A;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const I=b.id,M=(w=b.filter)===null||w===void 0?void 0:w.event;return I&&((S=n.ids)===null||S===void 0?void 0:S.includes(I))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const I=(N=(T=b==null?void 0:b.filter)===null||T===void 0?void 0:T.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return I==="*"||I===((A=n==null?void 0:n.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:S,table:E,commit_timestamp:T,type:N,errors:A}=w;v=Object.assign(Object.assign({},{schema:S,table:E,commit_timestamp:T,eventType:N,new:{},old:{},errors:A}),this._getPayloadRecords(w))}b.callback(v,r)})}_isClosed(){return this.state===Mt.closed}_isJoined(){return this.state===Mt.joined}_isJoining(){return this.state===Mt.joining}_isLeaving(){return this.state===Mt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&La.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Sr.close,{},e)}_onError(e){this._on(Sr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Mt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=VS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=VS(e.columns,e.old_record)),n}}const Sg=()=>{},Md={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ZL=[1e3,2e3,5e3,1e4],eP=1e4,tP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nP{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=wy,this.transport=null,this.heartbeatIntervalMs=Md.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Sg,this.ref=0,this.reconnectTimer=null,this.vsn=$S,this.logger=Sg,this.conn=null,this.sendBuffer=[],this.serializer=new GL,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Sy.websocket}`,this.httpEndpoint=e_(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=jL.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case gs.connecting:return uo.Connecting;case gs.open:return uo.Open;case gs.closing:return uo.Closing;default:return uo.Closed}}isConnected(){return this.connectionState()===uo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new La(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,l=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(VL,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Md.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const f=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",f)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:o,ref:l}=n,c=l?`(${l})`:"",d=o.status||"";this.log("receive",`${d} ${r} ${i} ${c}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===gs.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===gs.open||this.conn.readyState===gs.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Sr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([tP],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:HL};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Sr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Q1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Md.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,l,c,d,f,p,m,v,b;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:wy,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Md.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:Sg,this.vsn=(d=e==null?void 0:e.vsn)!==null&&d!==void 0?d:$S,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e==null?void 0:e.reconnectAfterMs)!==null&&f!==void 0?f:(w=>ZL[w-1]||eP),this.vsn){case $L:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:((w,S)=>S(JSON.stringify(w))),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:((w,S)=>S(JSON.parse(w)));break;case X1:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Ic=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function rP(t,e,n){const r=new URL(e,t);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function iP(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function sP(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:l}){const c=rP(t.baseUrl,r,i),d=await iP(t.auth),f=await e(c,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...d,...l},body:o?JSON.stringify(o):void 0}),p=await f.text(),m=(f.headers.get("content-type")||"").includes("application/json"),v=m&&p?JSON.parse(p):p;if(!f.ok){const b=m?v:void 0,w=b==null?void 0:b.error;throw new Ic((w==null?void 0:w.message)??`Request failed with status ${f.status}`,{status:f.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:b})}return{status:f.status,headers:f.headers,data:v}}}}function Id(t){return t.join("")}var oP=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Id(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Id(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Id(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Id(t.namespace)}`}),!0}catch(e){if(e instanceof Ic&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Ic&&n.status===409)return;throw n}}};function xa(t){return t.join("")}var aP=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xa(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xa(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xa(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xa(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xa(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xa(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Ic&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Ic&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},lP=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=sP({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new oP(this.client,e),this.tableOps=new aP(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Ch=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function Th(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Dd=class extends Ch{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},t_=class extends Ch{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const cP=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),uP=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Cy=t=>{if(Array.isArray(t))return t.map(n=>Cy(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Cy(r)}),e},dP=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Dc(t){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dc(t)}function fP(t,e){if(Dc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hP(t){var e=fP(t,"string");return Dc(e)=="symbol"?e:e+""}function pP(t,e,n){return(e=hP(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JS(Object(n),!0).forEach(function(r){pP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const KS=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},mP=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t,o=i.status||500;if(typeof i.json=="function")i.json().then(l=>{const c=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||o+"";e(new Dd(KS(l),o,c,r))}).catch(()=>{if(r==="vectors"){const l=o+"";e(new Dd(i.statusText||`HTTP ${o} error`,o,l,r))}else{const l=o+"";e(new Dd(i.statusText||`HTTP ${o} error`,o,l,r))}});else{const l=o+"";e(new Dd(i.statusText||`HTTP ${o} error`,o,l,r))}}else e(new t_(KS(t),t,r))},gP=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!r?xe(xe({},i),n):(uP(r)?(i.headers=xe({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),xe(xe({},i),n))};async function nc(t,e,n,r,i,o,l){return new Promise((c,d)=>{t(n,gP(e,r,i,o)).then(f=>{if(!f.ok)throw f;if(r!=null&&r.noResolveJson)return f;if(l==="vectors"){const p=f.headers.get("content-type");if(!p||!p.includes("application/json"))return{}}return f.json()}).then(f=>c(f)).catch(f=>mP(f,d,r,l))})}function yP(t="storage"){return{get:async(e,n,r,i)=>nc(e,"GET",n,r,i,void 0,t),post:async(e,n,r,i,o)=>nc(e,"POST",n,i,o,r,t),put:async(e,n,r,i,o)=>nc(e,"PUT",n,i,o,r,t),head:async(e,n,r,i)=>nc(e,"HEAD",n,xe(xe({},r),{},{noResolveJson:!0}),i,void 0,t),remove:async(e,n,r,i,o)=>nc(e,"DELETE",n,i,o,r,t)}}const vP=yP("storage"),{get:Oc,post:st,put:Ty,head:bP,remove:A0}=vP;var tl=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=cP(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Th(n))return{data:null,error:n};throw n}}},xP=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Th(e))return{data:null,error:e};throw e}}};let n_;n_=Symbol.toStringTag;var wP=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[n_]="BlobDownloadBuilder",this.promise=null}asStream(){return new xP(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Th(e))return{data:null,error:e};throw e}}};const SP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},YS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var EP=class extends tl{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var i=this;return i.handleOperation(async()=>{let o;const l=xe(xe({},YS),r);let c=xe(xe({},i.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",i.encodeMetadata(d)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",l.cacheControl),d&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(d))):(o=n,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,d&&(c["x-metadata"]=i.toBase64(i.encodeMetadata(d))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!l.duplex&&(l.duplex="half")),r!=null&&r.headers&&(c=xe(xe({},c),r.headers));const f=i._removeEmptyFolders(e),p=i._getFinalPath(f),m=await(t=="PUT"?Ty:st)(i.fetch,`${i.url}/object/${p}`,o,xe({headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{path:f,id:m.Id,fullPath:m.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const o=i._removeEmptyFolders(t),l=i._getFinalPath(o),c=new URL(i.url+`/object/upload/sign/${l}`);return c.searchParams.set("token",e),i.handleOperation(async()=>{let d;const f=xe({upsert:YS.upsert},r),p=xe(xe({},i.headers),{"x-upsert":String(f.upsert)});return typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",f.cacheControl)):(d=n,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType),{path:o,fullPath:(await Ty(i.fetch,c.toString(),d,{headers:p})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const i=xe({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const o=await st(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(n.url+o.url),c=l.searchParams.get("token");if(!c)throw new Ch("No token returned by API");return{signedUrl:l.toString(),path:t,token:c}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await st(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await st(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(t),o=await st(r.fetch,`${r.url}/object/sign/${i}`,xe({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${l}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const i=await st(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(l=>xe(xe({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${o}`):null}))})}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",o=this._getFinalPath(t),l=()=>Oc(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new wP(l,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>Cy(await Oc(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await bP(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Th(r)&&r instanceof t_){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${c}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await A0(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const i=xe(xe(xe({},SP),e),{},{prefix:t||""});return await st(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=xe({},t);return await st(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const CP="2.93.2",ru={"X-Client-Info":`storage-js/${CP}`};var TP=class extends tl{constructor(t,e={},n,r){const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const o=i.href.replace(/\/$/,""),l=xe(xe({},ru),e);super(o,l,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await Oc(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Oc(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await st(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await Ty(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await A0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},_P=class extends tl{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=xe(xe({},ru),e);super(r,i,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await Oc(e.fetch,i,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await A0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!dP(t))throw new Ch("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new lP({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){const l=i[o];return typeof l!="function"?l:async(...c)=>{try{return{data:await l.apply(i,c),error:null}}catch(d){if(r)throw d;return{data:null,error:d}}}}})}},AP=class extends tl{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=xe(xe({},ru),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await st(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await st(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},NP=class extends tl{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=xe(xe({},ru),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await st(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await st(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await st(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},kP=class extends tl{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=xe(xe({},ru),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},RP=class extends kP{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new MP(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},MP=class extends AP{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,xe(xe({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,xe(xe({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new IP(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},IP=class extends NP{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,xe(xe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,xe(xe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,xe(xe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,xe(xe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,xe(xe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},DP=class extends TP{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new EP(this.url,this.headers,t,this.fetch)}get vectors(){return new RP(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new _P(this.url+"/iceberg",this.headers,this.fetch)}};const r_="2.93.2",Ra=30*1e3,_y=3,Eg=_y*Ra,OP="http://localhost:9999",LP="supabase.auth.token",PP={"X-Client-Info":`gotrue-js/${r_}`},Ay="X-Supabase-Api-Version",i_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},UP=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,BP=600*1e3;class Lc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function de(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class zP extends Lc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function jP(t){return de(t)&&t.name==="AuthApiError"}class fo extends Lc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ui extends Lc{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Bn extends Ui{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Cg(t){return de(t)&&t.name==="AuthSessionMissingError"}class wa extends Ui{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Od extends Ui{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ld extends Ui{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function qP(t){return de(t)&&t.name==="AuthImplicitGrantRedirectError"}class WS extends Ui{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class HP extends Ui{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ny extends Ui{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Tg(t){return de(t)&&t.name==="AuthRetryableFetchError"}class XS extends Ui{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ky extends Ui{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const pf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),QS=` 	
\r=`.split(""),$P=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<QS.length;e+=1)t[QS[e].charCodeAt(0)]=-2;for(let e=0;e<pf.length;e+=1)t[pf[e].charCodeAt(0)]=e;return t})();function ZS(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(pf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(pf[r]),e.queuedBits-=6}}function s_(t,e,n){const r=$P[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function eE(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=l=>{GP(l,r,n)};for(let l=0;l<t.length;l+=1)s_(t.charCodeAt(l),i,o);return e.join("")}function VP(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function FP(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}VP(r,e)}}function GP(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ua(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)s_(t.charCodeAt(i),n,r);return new Uint8Array(e)}function JP(t){const e=[];return FP(t,n=>e.push(n)),new Uint8Array(e)}function po(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>ZS(i,n,r)),ZS(null,n,r),e.join("")}function KP(t){return Math.round(Date.now()/1e3)+t}function YP(){return Symbol("auth-callback")}const Kt=()=>typeof window<"u"&&typeof document<"u",so={tested:!1,writable:!1},o_=()=>{if(!Kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(so.tested)return so.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),so.tested=!0,so.writable=!0}catch{so.tested=!0,so.writable=!1}return so.writable};function WP(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const a_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),XP=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ma=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},oo=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Jt=async(t,e)=>{await t.removeItem(e)};class _h{constructor(){this.promise=new _h.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}_h.promiseConstructor=Promise;function Pd(t){const e=t.split(".");if(e.length!==3)throw new ky("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!UP.test(e[r]))throw new ky("JWT not in base64url format");return{header:JSON.parse(eE(e[0])),payload:JSON.parse(eE(e[1])),signature:Ua(e[2]),raw:{header:e[0],payload:e[1]}}}async function QP(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ZP(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){i(l);return}}})()})}function eU(t){return("0"+t.toString(16)).substr(-2)}function tU(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,eU).join("")}async function nU(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function rU(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await nU(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sa(t,e,n=!1){const r=tU();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Ma(t,`${e}-code-verifier`,i);const o=await rU(r);return[o,r===o?"plain":"s256"]}const iU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sU(t){const e=t.headers.get(Ay);if(!e||!e.match(iU))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function oU(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function aU(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const lU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ea(t){if(!lU.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _g(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cU(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function tE(t){return JSON.parse(JSON.stringify(t))}const co=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),uU=[502,503,504];async function nE(t){var e;if(!XP(t))throw new Ny(co(t),0);if(uU.includes(t.status))throw new Ny(co(t),t.status);let n;try{n=await t.json()}catch(o){throw new fo(co(o),o)}let r;const i=sU(t);if(i&&i.getTime()>=i_["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new XS(co(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Bn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new XS(co(n),t.status,n.weak_password.reasons);throw new zP(co(n),t.status||500,r)}const dU=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function be(t,e,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[Ay]||(o[Ay]=i_["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await fU(t,e,n+c,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function fU(t,e,n,r,i,o){const l=dU(e,r,i,o);let c;try{c=await t(n,Object.assign({},l))}catch(d){throw console.error(d),new Ny(co(d),0)}if(c.ok||await nE(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(d){await nE(d)}}function wr(t){var e;let n=null;mU(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=KP(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function rE(t){const e=wr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ws(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function hU(t){return{data:t,error:null}}function pU(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,l=Eh(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},d=Object.assign({},l);return{data:{properties:c,user:d},error:null}}function iE(t){return t}function mU(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ag=["global","local","others"];class gU{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=a_(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Ag[0]){if(Ag.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ag.join(", ")}`);try{return await be(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await be(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ws})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Eh(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:pU,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(de(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await be(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ws})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,l,c,d;try{const f={nextPage:null,lastPage:0,total:0},p=await be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:iE});if(p.error)throw p.error;const m=await p.json(),v=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(d=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(w=>{const S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(w.split(";")[1].split("=")[1]);f[`${E}Page`]=S}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(de(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Ea(e);try{return await be(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ws})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ea(e);try{return await be(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ws})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Ea(e);try{return await be(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ws})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ea(e.userId);try{const{data:n,error:r}=await be(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ea(e.userId),Ea(e.id);try{return{data:await be(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,l,c,d;try{const f={nextPage:null,lastPage:0,total:0},p=await be(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:iE});if(p.error)throw p.error;const m=await p.json(),v=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(d=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(w=>{const S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(w.split(";")[1].split("=")[1]);f[`${E}Page`]=S}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(de(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await be(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await be(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await be(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}}function sE(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Ca={debug:!!(globalThis&&o_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class l_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class yU extends l_{}async function vU(t,e,n){Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new yU(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ca.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function bU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function c_(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function xU(t){return parseInt(t,16)}function wU(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function SU(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:l,notBefore:c,requestId:d,resources:f,scheme:p,uri:m,version:v}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=c_(t.address),w=p?`${p}://${r}`:r,S=t.statement?`${t.statement}
`:"",E=`${w} wants you to sign in with your Ethereum account:
${b}

${S}`;let T=`URI: ${m}
Version: ${v}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(i&&(T+=`
Expiration Time: ${i.toISOString()}`),c&&(T+=`
Not Before: ${c.toISOString()}`),d&&(T+=`
Request ID: ${d}`),f){let N=`
Resources:`;for(const A of f){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);N+=`
- ${A}`}T+=N}return`${E}
${T}`}class Tt extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class mf extends Tt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function EU({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Tt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Tt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Tt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Tt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Tt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new Tt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Tt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(u_(l)){if(o.rp.id!==l)return new Tt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Tt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Tt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function CU({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Tt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(u_(r)){if(n.rpId!==r)return new Tt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Tt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class TU{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const _U=new TU;function AU(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Eh(t,["challenge","user","excludeCredentials"]),o=Ua(e).buffer,l=Object.assign(Object.assign({},n),{id:Ua(n.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:o,user:l});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const f=r[d];c.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:Ua(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function NU(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Eh(t,["challenge","allowCredentials"]),i=Ua(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},c),{id:Ua(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function kU(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:po(new Uint8Array(t.response.attestationObject)),clientDataJSON:po(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function RU(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:po(new Uint8Array(i.authenticatorData)),clientDataJSON:po(new Uint8Array(i.clientDataJSON)),signature:po(new Uint8Array(i.signature)),userHandle:i.userHandle?po(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function u_(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function oE(){var t,e;return!!(Kt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function MU(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new mf("Browser returned unexpected credential type",e)}:{data:null,error:new mf("Empty credential response",e)}}catch(e){return{data:null,error:EU({error:e,options:t})}}}async function IU(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new mf("Browser returned unexpected credential type",e)}:{data:null,error:new mf("Empty credential response",e)}}catch(e){return{data:null,error:CU({error:e,options:t})}}}const DU={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},OU={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function gf(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const l=i[o];if(l!==void 0)if(Array.isArray(l))r[o]=l;else if(n(l))r[o]=l;else if(e(l)){const c=r[o];e(c)?r[o]=gf(c,l):r[o]=gf(l)}else r[o]=l}return r}function LU(t,e){return gf(DU,t,e||{})}function PU(t,e){return gf(OU,t,e||{})}class UU{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!l)return{data:null,error:c};const d=i??_U.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=LU(l.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:p,error:m}=await MU({publicKey:f,signal:d});return p?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:p}},error:null}:{data:null,error:m}}case"request":{const f=PU(l.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:p,error:m}=await IU(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:d}));return p?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:p}},error:null}:{data:null,error:m}}}}catch(l){return de(l)?{data:null,error:l}:{data:null,error:new fo("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Lc("rpId is required for WebAuthn authentication")};try{if(!oE())return{data:null,error:new fo("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!l)return{data:null,error:c};const{webauthn:d}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(l){return de(l)?{data:null,error:l}:{data:null,error:new fo("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Lc("rpId is required for WebAuthn registration")};try{if(!oE())return{data:null,error:new fo("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(p=>{var m;return(m=p.data)===null||m===void 0?void 0:m.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:c};const{data:d,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(l){return de(l)?{data:null,error:l}:{data:null,error:new fo("Unexpected error in register",l)}}}}bU();const BU={url:OP,storageKey:LP,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:PP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function aE(t,e,n){return await n()}const Ta={};class Pc{get jwks(){var e,n;return(n=(e=Ta[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ta[this.storageKey]=Object.assign(Object.assign({},Ta[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ta[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ta[this.storageKey]=Object.assign(Object.assign({},Ta[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},BU),e);if(this.storageKey=o.storageKey,this.instanceID=(n=Pc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Pc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Kt()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new gU({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=a_(o.fetch),this.lock=o.lock||aE,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Kt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=vU:this.lock=aE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new UU(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:o_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=sE(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=sE(this.memoryStorage)),Kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}})}this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${r_}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Kt()&&(n=WP(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Kt()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),qP(o)){const d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:l,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return de(n)?this._returnResult({error:n}):this._returnResult({error:new fo("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:wr}),{data:l,error:c}=o;if(c||!l)return this._returnResult({data:{user:null,session:null},error:c});const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(o){if(de(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:p,password:m,options:v}=e;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await Sa(this.storage,this.storageKey)),o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:p,password:m,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:b,code_challenge_method:w},xform:wr})}else if("phone"in e){const{phone:p,password:m,options:v}=e;o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(i=v==null?void 0:v.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:wr})}else throw new Od("You must provide either an email or phone number and a password");const{data:l,error:c}=o;if(c||!l)return await Jt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(o){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),de(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:l,options:c}=e;n=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:rE})}else if("phone"in e){const{phone:o,password:l,options:c}=e;n=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:rE})}else throw new Od("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new wa;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,l,c,d,f,p,m,v;let b,w;if("message"in e)b=e.message,w=e.signature;else{const{chain:S,wallet:E,statement:T,options:N}=e;let A;if(Kt())if(typeof E=="object")A=E;else{const z=window;if("ethereum"in z&&typeof z.ethereum=="object"&&"request"in z.ethereum&&typeof z.ethereum.request=="function")A=z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=E}const I=new URL((n=N==null?void 0:N.url)!==null&&n!==void 0?n:window.location.href),M=await A.request({method:"eth_requestAccounts"}).then(z=>z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const D=c_(M[0]);let R=(r=N==null?void 0:N.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!R){const z=await A.request({method:"eth_chainId"});R=xU(z)}const B={domain:I.host,address:D,statement:T,uri:I.href,version:"1",chainId:R,nonce:(i=N==null?void 0:N.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(o=N==null?void 0:N.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=N==null?void 0:N.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(d=N==null?void 0:N.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=N==null?void 0:N.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(p=N==null?void 0:N.signInWithEthereum)===null||p===void 0?void 0:p.resources};b=SU(B),w=await A.request({method:"personal_sign",params:[wU(b),D]})}try{const{data:S,error:E}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:w},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:wr});if(E)throw E;if(!S||!S.session||!S.user){const T=new wa;return this._returnResult({data:{user:null,session:null},error:T})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:E})}catch(S){if(de(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(e){var n,r,i,o,l,c,d,f,p,m,v,b;let w,S;if("message"in e)w=e.message,S=e.signature;else{const{chain:E,wallet:T,statement:N,options:A}=e;let I;if(Kt())if(typeof T=="object")I=T;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))I=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=T}const M=new URL((n=A==null?void 0:A.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in I&&I.signIn){const D=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A==null?void 0:A.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),N?{statement:N}:null));let R;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")R=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)R=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)w=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),S=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${M.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(i=(r=A==null?void 0:A.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=A==null?void 0:A.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((l=A==null?void 0:A.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((c=A==null?void 0:A.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((d=A==null?void 0:A.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((f=A==null?void 0:A.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((m=(p=A==null?void 0:A.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||m===void 0)&&m.length?["Resources",...A.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const D=await I.signMessage(new TextEncoder().encode(w),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=D}}try{const{data:E,error:T}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:po(S)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:wr});if(T)throw T;if(!E||!E.session||!E.user){const N=new wa;return this._returnResult({data:{user:null,session:null},error:N})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:T})}catch(E){if(de(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const n=await oo(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new HP;const{data:o,error:l}=await be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:wr});if(await Jt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!o||!o.session||!o.user){const c=new wa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:l})}catch(o){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),de(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:l}=e,c=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:wr}),{data:d,error:f}=c;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d||!d.session||!d.user){const p=new wa;return this._returnResult({data:{user:null,session:null},error:p})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:f})}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,l;try{if("email"in e){const{email:c,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Sa(this.storage,this.storageKey));const{error:m}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:c,options:d}=e,{data:f,error:p}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=d==null?void 0:d.data)!==null&&i!==void 0?i:{},create_user:(o=d==null?void 0:d.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p})}throw new Od("You must provide either an email or phone number.")}catch(c){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),de(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:c}=await be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:wr});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(i){if(de(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,l;try{let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Sa(this.storage,this.storageKey));const f=await be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:hU});return!((o=f.data)===null||o===void 0)&&o.url&&Kt()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(c){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),de(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Bn;const{error:i}=await be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(de(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:l}=await be(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:l,error:c}=await be(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c})}throw new Od("You must provide either an email or phone number and a type")}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await oo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Eg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await oo(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=_g()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=cU(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ws}):await this._useSession(async n=>{var r,i,o;const{data:l,error:c}=n;if(c)throw c;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bn}:await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:ws})})}catch(n){if(de(n))return Cg(n)&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Bn;const l=i.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await Sa(this.storage,this.storageKey));const{data:f,error:p}=await be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:l.access_token,xform:ws});if(p)throw p;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),de(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Bn;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:l}=Pd(e.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{data:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(de(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:c}=n;if(c)throw c;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Bn;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Kt())throw new Ld("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ld(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new WS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ld("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new WS("No code detected.");const{data:N,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:l,expires_in:c,expires_at:d,token_type:f}=e;if(!o||!c||!l||!f)throw new Ld("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(c);let v=p+m;d&&(v=parseInt(d));const b=v-p;b*1e3<=Ra&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${m}s`);const w=v-m;p-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,p):p-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,p);const{data:S,error:E}=await this._getUser(o);if(E)throw E;const T={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:m,expires_at:v,refresh_token:l,token_type:f,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:e.type},error:null})}catch(r){if(de(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await oo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o&&!Cg(o))return this._returnResult({error:o});const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(jP(c)&&(c.status===404||c.status===401||c.status===403)||Cg(c)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=YP(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Sa(this.storage,this.storageKey,!0));try{return await be(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),de(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var l,c,d,f,p;const{data:m,error:v}=o;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await be(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Kt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(de(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:l,provider:c,token:d,access_token:f,nonce:p}=e,m=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:d,access_token:f,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:wr}),{data:v,error:b}=m;return b?this._returnResult({data:{user:null,session:null},error:b}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new wa}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:b}))}catch(i){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),de(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)throw l;return await be(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await ZP(async i=>(i>0&&await QP(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:wr})),(i,o)=>{const l=200*Math.pow(2,i);return o&&Tg(o)&&Date.now()+l-r<Ra})}catch(r){if(this._debug(n,"error",r),de(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Kt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await oo(this.storage,this.storageKey);if(i&&this.userStorage){let l=await oo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await Ma(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:_g()}else if(i&&!i.user&&!i.user){const l=await oo(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await Jt(this.storage,this.storageKey+"-user"),await Ma(this.storage,this.storageKey,i)):i.user=_g()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Eg;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Eg}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),Tg(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(i.access_token);!c&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Bn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new _h;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new Bn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={data:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(i,"error",o),de(o)){const l={data:null,error:o};return Tg(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,n)}catch(d){o.push(d)}});if(await Promise.all(l),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Jt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ma(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=tE(i);await Ma(this.storage,this.storageKey,o)}else{const i=tE(n);await Ma(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Jt(this.storage,this.storageKey),await Jt(this.storage,this.storageKey+"-code-verifier"),await Jt(this.storage,this.storageKey+"-user"),this.userStorage&&await Jt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Kt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ra);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ra);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ra}ms, refresh threshold is ${_y} ticks`),i<=_y&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof l_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Kt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await Sa(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(c.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await be(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:f}=await be(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(e.factorType==="totp"&&d.type==="totp"&&(!((i=d==null?void 0:d.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?kU(e.webauthn.credential_response):RU(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:d}=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:d}))})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:AU(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:NU(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,i,o;if(e)try{const{payload:b}=Pd(e);let w=null;b.aal&&(w=b.aal);let S=w;const{data:{user:E},error:T}=await this.getUser(e);if(T)return this._returnResult({data:null,error:T});((r=(n=E==null?void 0:E.factors)===null||n===void 0?void 0:n.filter(I=>I.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(S="aal2");const A=b.amr||[];return{data:{currentLevel:w,nextLevel:S,currentAuthenticationMethods:A},error:null}}catch(b){if(de(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:l},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Pd(l.access_token);let f=null;d.aal&&(f=d.aal);let p=f;((o=(i=l.user.factors)===null||i===void 0?void 0:i.filter(b=>b.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(p="aal2");const v=d.amr||[];return{data:{currentLevel:f,nextLevel:p,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await be(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Bn})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Bn});const l=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Kt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Bn});const l=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Kt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await be(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Bn})})}catch(e){if(de(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await be(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Bn})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(c=>c.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+BP>i)return r;const{data:o,error:l}=await be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:b,error:w}=await this.getSession();if(w||!b.session)return this._returnResult({data:null,error:w});r=b.session.access_token}const{header:i,payload:o,signature:l,raw:{header:c,payload:d}}=Pd(r);n!=null&&n.allowExpired||oU(o.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:o,header:i,signature:l},error:null}}const p=aU(i.alg),m=await crypto.subtle.importKey("jwk",f,p,!0,["verify"]);if(!await crypto.subtle.verify(p,m,l,JP(`${c}.${d}`)))throw new ky("Invalid JWT signature");return{data:{claims:o,header:i,signature:l},error:null}}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}}Pc.nextInstanceID={};const zU=Pc,jU="2.93.2";let oc="";typeof Deno<"u"?oc="deno":typeof document<"u"?oc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?oc="react-native":oc="node";const qU={"X-Client-Info":`supabase-js-${oc}/${jU}`},HU={headers:qU},$U={schema:"public"},VU={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},FU={};function Uc(t){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(t)}function GU(t,e){if(Uc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JU(t){var e=GU(t,"string");return Uc(e)=="symbol"?e:e+""}function KU(t,e,n){return(e=JU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lE(Object(n),!0).forEach(function(r){KU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const YU=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),WU=()=>Headers,XU=(t,e,n)=>{const r=YU(n),i=WU();return async(o,l)=>{var c;const d=(c=await e())!==null&&c!==void 0?c:t;let f=new i(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),r(o,mt(mt({},l),{},{headers:f}))}};function QU(t){return t.endsWith("/")?t:t+"/"}function ZU(t,e){var n,r;const{db:i,auth:o,realtime:l,global:c}=t,{db:d,auth:f,realtime:p,global:m}=e,v={db:mt(mt({},d),i),auth:mt(mt({},f),o),realtime:mt(mt({},p),l),storage:{},global:mt(mt(mt({},m),c),{},{headers:mt(mt({},(n=m==null?void 0:m.headers)!==null&&n!==void 0?n:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function e4(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(QU(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var t4=class extends zU{constructor(t){super(t)}},n4=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const o=e4(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,c={db:$U,realtime:FU,auth:mt(mt({},VU),{},{storageKey:l}),global:HU},d=ZU(n??{},c);if(this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var f;this.auth=this._initSupabaseAuthClient((f=d.auth)!==null&&f!==void 0?f:{},this.headers,d.global.fetch)}this.fetch=XU(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(mt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new zL(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new DP(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new OL(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:l,lock:c,debug:d,throwOnError:f},p,m){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new t4({url:this.authUrl.href,headers:mt(mt({},v),p),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:l,lock:c,debug:d,throwOnError:f,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new nP(this.realtimeUrl.href,mt(mt({},t),{},{params:mt(mt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const r4=(t,e,n)=>new n4(t,e,n);function i4(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}i4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const s4="https://cvsmqxbmemexcbyobgog.supabase.co",o4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN2c21xeGJtZW1leGNieW9iZ29nIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk2MjY1NzgsImV4cCI6MjA4NTIwMjU3OH0.fe3hXcVtuw8OGyU9-ACgGt8rwYshEgJcvpNGZ80lBa8",Te=r4(s4,o4),ht={async getAllCourses(){const{data:t,error:e}=await Te.from("courses").select(`
        *,
        instructor:users!instructor_id(name)
      `).eq("published",!0).order("created_at",{ascending:!1});if(e)throw new Error(e.message);return t.map(n=>({id:n.id,instructorId:n.instructor_id,title:n.title,description:n.description,thumbnailUrl:n.thumbnail_url,instructorName:n.instructor.name,price:n.price,category:n.category,level:n.level,totalStudents:n.total_students,rating:n.rating,sections:[]}))},async getCourseById(t){const{data:e,error:n}=await Te.from("courses").select(`
        *,
        instructor:users!instructor_id(name),
        sections(
          *,
          lessons(*)
        )
      `).eq("id",t).single();if(n){if(n.code==="PGRST116")return;throw new Error(n.message)}const{data:{user:r}}=await Te.auth.getUser();let i=null;if(r){const{data:o}=await Te.from("enrollments").select("*").eq("user_id",r.id).eq("course_id",t).single();i=o}return{id:e.id,instructorId:e.instructor_id,title:e.title,description:e.description,thumbnailUrl:e.thumbnail_url,instructorName:e.instructor.name,price:e.price,category:e.category,level:e.level,totalStudents:e.total_students,rating:e.rating,sections:e.sections.map(o=>({id:o.id,courseId:o.course_id,title:o.title,order:o.order,lessons:o.lessons.map(l=>{var c;return{id:l.id,sectionId:l.section_id,title:l.title,type:l.type,duration:l.duration,content:l.content,isCompleted:((c=i==null?void 0:i.completed_lesson_ids)==null?void 0:c.includes(l.id))||!1,isLocked:l.is_locked,order:l.order}})}))}},async getMyEnrollments(){const{data:t,error:e}=await Te.from("enrollments").select("*").order("enrolled_at",{ascending:!1});if(e)throw new Error(e.message);return t.map(n=>({courseId:n.course_id,progress:n.progress,completedLessonIds:n.completed_lesson_ids||[],lastAccessedLessonId:n.last_accessed_lesson_id||void 0,enrolledAt:new Date(n.enrolled_at)}))},async enrollInCourse(t){const{data:{user:e}}=await Te.auth.getUser();if(!e)throw new Error("Not authenticated");const{data:n,error:r}=await Te.from("enrollments").insert({user_id:e.id,course_id:t,progress:0,completed_lesson_ids:[]}).select().single();if(r)throw new Error(r.message);return await Te.rpc("increment_course_students",{course_id:t}),{courseId:n.course_id,progress:n.progress,completedLessonIds:n.completed_lesson_ids||[],lastAccessedLessonId:n.last_accessed_lesson_id||void 0,enrolledAt:new Date(n.enrolled_at)}},async updateCourse(t){const{data:e,error:n}=await Te.from("courses").update({title:t.title,description:t.description,thumbnail_url:t.thumbnailUrl,price:t.price,category:t.category,level:t.level}).eq("id",t.id).select(`
        *,
        instructor:users!instructor_id(name)
      `).single();if(n)throw new Error(n.message);return{id:e.id,instructorId:e.instructor_id,title:e.title,description:e.description,thumbnailUrl:e.thumbnail_url,instructorName:e.instructor.name,price:e.price,category:e.category,level:e.level,totalStudents:e.total_students,rating:e.rating,sections:[]}},async createCourse(t){const{data:{user:e}}=await Te.auth.getUser();if(!e)throw new Error("Not authenticated");const{data:n,error:r}=await Te.from("courses").insert({instructor_id:e.id,title:t.title,description:t.description,thumbnail_url:t.thumbnailUrl||"https://via.placeholder.com/400x300?text=Course",price:t.price||0,category:t.category||"General",level:t.level||"Beginner",published:!1}).select(`
        *,
        instructor:users!instructor_id(name)
      `).single();if(r)throw new Error(r.message);return{id:n.id,instructorId:n.instructor_id,title:n.title,description:n.description,thumbnailUrl:n.thumbnail_url,instructorName:n.instructor.name,price:n.price,category:n.category,level:n.level,totalStudents:n.total_students,rating:n.rating,sections:[]}},async deleteCourse(t){const{error:e}=await Te.from("courses").delete().eq("id",t);if(e)throw new Error(e.message)},async createSection(t,e){const{data:n}=await Te.from("sections").select("order").eq("course_id",t).order("order",{ascending:!1}).limit(1),r=n&&n.length>0?n[0].order+1:0,{data:i,error:o}=await Te.from("sections").insert({course_id:t,title:e,order:r}).select().single();if(o)throw new Error(o.message);return{id:i.id,courseId:i.course_id,title:i.title,order:i.order,lessons:[]}},async updateSection(t,e){const{data:n,error:r}=await Te.from("sections").update({...e.title!==void 0&&{title:e.title},...e.order!==void 0&&{order:e.order}}).eq("id",t).select("*, lessons(*)").single();if(r)throw new Error(r.message);return{id:n.id,courseId:n.course_id,title:n.title,order:n.order,lessons:(n.lessons||[]).map(i=>({id:i.id,sectionId:i.section_id,title:i.title,type:i.type,duration:i.duration,content:i.content,isCompleted:!1,isLocked:i.is_locked,order:i.order}))}},async deleteSection(t){const{error:e}=await Te.from("sections").delete().eq("id",t);if(e)throw new Error(e.message)},async reorderSections(t,e){var o;const n=e.map((l,c)=>Te.from("sections").update({order:c}).eq("id",l).eq("course_id",t)),i=(o=(await Promise.all(n)).find(l=>l.error))==null?void 0:o.error;if(i)throw new Error(i.message)},async createLesson(t,e,n=it.TEXT){const{data:r}=await Te.from("lessons").select("order").eq("section_id",t).order("order",{ascending:!1}).limit(1),i=r&&r.length>0?r[0].order+1:0,o=K1(),{data:l,error:c}=await Te.from("lessons").insert({section_id:t,title:e,type:n,duration:5,content:o,is_locked:!1,order:i}).select().single();if(c)throw new Error(c.message);return{id:l.id,sectionId:l.section_id,title:l.title,type:l.type,duration:l.duration,content:l.content,isCompleted:!1,isLocked:l.is_locked,order:l.order}},async updateLesson(t,e){const n={};e.title!==void 0&&(n.title=e.title),e.type!==void 0&&(n.type=e.type),e.duration!==void 0&&(n.duration=e.duration),e.content!==void 0&&(n.content=e.content),e.isLocked!==void 0&&(n.is_locked=e.isLocked),e.order!==void 0&&(n.order=e.order);const{data:r,error:i}=await Te.from("lessons").update(n).eq("id",t).select().single();if(i)throw new Error(i.message);return{id:r.id,sectionId:r.section_id,title:r.title,type:r.type,duration:r.duration,content:r.content,isCompleted:!1,isLocked:r.is_locked,order:r.order}},async deleteLesson(t){const{error:e}=await Te.from("lessons").delete().eq("id",t);if(e)throw new Error(e.message)},async reorderLessons(t,e){var o;const n=e.map((l,c)=>Te.from("lessons").update({order:c}).eq("id",l).eq("section_id",t)),i=(o=(await Promise.all(n)).find(l=>l.error))==null?void 0:o.error;if(i)throw new Error(i.message)},async saveLessonContent(t,e){const{error:n}=await Te.from("lessons").update({content:e}).eq("id",t);if(n)throw new Error(n.message)},async publishCourse(t,e){const{error:n}=await Te.from("courses").update({published:e}).eq("id",t);if(n)throw new Error(n.message)},async getInstructorCourses(){const{data:{user:t}}=await Te.auth.getUser();if(!t)throw new Error("Not authenticated");const{data:e,error:n}=await Te.from("courses").select(`
        *,
        instructor:users!instructor_id(name),
        sections(
          *,
          lessons(*)
        )
      `).eq("instructor_id",t.id).order("created_at",{ascending:!1});if(n)throw new Error(n.message);return e.map(r=>({id:r.id,instructorId:r.instructor_id,title:r.title,description:r.description,thumbnailUrl:r.thumbnail_url,instructorName:r.instructor.name,price:r.price,category:r.category,level:r.level,totalStudents:r.total_students,rating:r.rating,published:r.published,sections:(r.sections||[]).sort((i,o)=>i.order-o.order).map(i=>({id:i.id,courseId:i.course_id,title:i.title,order:i.order,lessons:(i.lessons||[]).sort((o,l)=>o.order-l.order).map(o=>({id:o.id,sectionId:o.section_id,title:o.title,type:o.type,duration:o.duration,content:o.content,isCompleted:!1,isLocked:o.is_locked,order:o.order}))}))}))},async completeLesson(t,e){var p;const{data:{user:n}}=await Te.auth.getUser();if(!n)throw new Error("Not authenticated");const{data:r,error:i}=await Te.from("enrollments").select("*").eq("user_id",n.id).eq("course_id",t).single();if(i)throw new Error(i.message);if((p=r.completed_lesson_ids)!=null&&p.includes(e)){const{data:m,error:v}=await Te.from("enrollments").update({last_accessed_lesson_id:e}).eq("user_id",n.id).eq("course_id",t).select().single();if(v)throw new Error(v.message);return{courseId:m.course_id,progress:m.progress,completedLessonIds:m.completed_lesson_ids||[],lastAccessedLessonId:m.last_accessed_lesson_id||void 0,enrolledAt:new Date(m.enrolled_at)}}const o=[...r.completed_lesson_ids||[],e],{data:l}=await Te.from("courses").select("sections(lessons(id))").eq("id",t).single();let c=0;if(l){const m=l.sections.reduce((v,b)=>v+b.lessons.length,0);c=m>0?Math.round(o.length/m*100):0}const{data:d,error:f}=await Te.from("enrollments").update({completed_lesson_ids:o,progress:c,last_accessed_lesson_id:e}).eq("user_id",n.id).eq("course_id",t).select().single();if(f)throw new Error(f.message);return{courseId:d.course_id,progress:d.progress,completedLessonIds:d.completed_lesson_ids||[],lastAccessedLessonId:d.last_accessed_lesson_id||void 0,enrolledAt:new Date(d.enrolled_at)}}},d_=_.createContext(void 0),a4=({children:t})=>{const[e,n]=_.useState([]),[r,i]=_.useState([]),[o,l]=_.useState(!0),[c,d]=_.useState(""),[f,p]=_.useState("All"),m=async()=>{l(!0);try{const[A,I]=await Promise.all([ht.getAllCourses(),ht.getMyEnrollments()]);n(A),i(I)}catch(A){console.error("Failed to fetch data",A)}finally{l(!1)}};_.useEffect(()=>{m()},[]);const v=async A=>{try{const I=await ht.enrollInCourse(A);i(M=>[...M,I])}catch(I){console.error(I)}},b=async(A,I)=>{try{const M=await ht.completeLesson(A,I);i(D=>D.map(R=>R.courseId===A?M:R))}catch(M){console.error(M)}},w=A=>r.find(I=>I.courseId===A),S=(A,I)=>{const M=r.find(D=>D.courseId===A);return M?M.completedLessonIds.includes(I):!1},E=async A=>{try{const I=await ht.createCourse(A);return n(M=>[...M,I]),I}catch(I){return console.error(I),null}},T=async A=>{try{const I=await ht.updateCourse(A);n(M=>M.map(D=>D.id===I.id?I:D))}catch(I){console.error(I)}},N=async A=>{try{await ht.deleteCourse(A),n(I=>I.filter(M=>M.id!==A))}catch(I){console.error(I)}};return g.jsx(d_.Provider,{value:{courses:e,enrollments:r,searchQuery:c,selectedCategory:f,isLoading:o,setSearchQuery:d,setSelectedCategory:p,enrollInCourse:v,completeLesson:b,getEnrollment:w,isLessonCompleted:S,addCourse:E,updateCourse:T,deleteCourse:N,refreshData:m},children:t})},Bi=()=>{const t=_.useContext(d_);if(t===void 0)throw new Error("useCourse must be used within a CourseProvider");return t};async function Ng(t,e=3,n=500){for(let r=0;r<e;r++){const{data:i,error:o}=await Te.from("users").select("*").eq("id",t).single();if(!o)return i;if(r===e-1)throw new Error(`Profile fetch failed after ${e} attempts: ${o.message}`);await new Promise(l=>setTimeout(l,n))}}const kg={async login(t,e){const{data:n,error:r}=await Te.auth.signInWithPassword({email:t,password:e});if(r)throw new Error(r.message);if(!n.user)throw new Error("Login failed");const i=await Ng(n.user.id);return{id:i.id,name:i.name,email:i.email,role:i.role,avatarUrl:i.avatar_url||void 0}},async register(t,e,n,r){const{data:i,error:o}=await Te.auth.signUp({email:e,password:r,options:{data:{name:t,role:n}}});if(o)throw new Error(o.message);if(!i.user)throw new Error("Registration failed");const l=i.user.id;try{const{error:d}=await Te.from("users").insert({id:l,email:e,name:t,role:n,avatar_url:`https://api.dicebear.com/7.x/avataaars/svg?seed=${e}`});if(d&&(console.warn("Insert error (might be duplicate):",d),!d.message.includes("duplicate")))throw d}catch(d){console.error("Error creating user profile:",d)}const c=await Ng(l,3,200);return{id:c.id,name:c.name,email:c.email,role:c.role,avatarUrl:c.avatar_url||void 0}},async logout(){const{error:t}=await Te.auth.signOut();if(t)throw new Error(t.message)},getCurrentUser(){return null},async refreshCurrentUser(){const{data:{session:t},error:e}=await Te.auth.getSession();if(e||!t)return null;try{const n=await Ng(t.user.id,2,300);return{id:n.id,name:n.name,email:n.email,role:n.role,avatarUrl:n.avatar_url||void 0}}catch(n){return console.error("Error refreshing user:",n),null}}},f_=_.createContext(void 0),l4=({children:t})=>{const[e,n]=_.useState(null),[r,i]=_.useState(!0);_.useEffect(()=>{Te.auth.getSession().then(({data:{session:p}})=>{p?o(p.user.id):i(!1)});const{data:{subscription:f}}=Te.auth.onAuthStateChange((p,m)=>{m?o(m.user.id):(n(null),i(!1))});return()=>f.unsubscribe()},[]);const o=async f=>{try{const{data:p,error:m}=await Te.from("users").select("*").eq("id",f).single();if(m)throw console.error("Detailed error loading profile:",{code:m.code,message:m.message,details:m.details,hint:m.hint,userId:f}),m;if(!p){console.warn("No profile data returned for user:",f);return}n({id:p.id,name:p.name,email:p.email,role:p.role,avatarUrl:p.avatar_url||void 0})}catch(p){console.error("Error loading user profile:",p),n(null)}finally{i(!1)}},l=async(f,p)=>{i(!0);try{const m=await kg.login(f,p);n(m)}finally{i(!1)}},c=async(f,p,m,v)=>{i(!0);try{const b=await kg.register(f,p,m,v);n(b)}finally{i(!1)}},d=async()=>{i(!0);try{await kg.logout(),n(null)}finally{i(!1)}};return g.jsx(f_.Provider,{value:{user:e,isAuthenticated:!!e,isLoading:r,login:l,register:c,logout:d},children:t})},nl=()=>{const t=_.useContext(f_);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},c4=()=>{const t=Ir(),e=Pi(),{searchQuery:n,setSearchQuery:r}=Bi(),{user:i,logout:o}=nl(),[l,c]=_.useState(!1),[d,f]=_.useState(!1);_.useEffect(()=>{const w=()=>f(window.scrollY>10);return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)},[]);const p=w=>t.pathname===w,m=w=>{r(w.target.value),t.pathname!=="/"&&w.target.value&&e("/")},v=()=>{r("")},b=()=>{o(),e("/login")};return i?g.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col font-sans",children:[g.jsx("header",{className:`sticky top-0 z-40 transition-all duration-300 border-b border-gray-100 ${d?"bg-white/95 backdrop-blur-md shadow-sm":"bg-white"}`,children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-20 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-10",children:[g.jsxs(Qt,{to:"/",className:"flex items-center gap-2 group",children:[g.jsx("div",{className:"w-10 h-10 bg-primary-900 rounded-lg flex items-center justify-center text-white group-hover:bg-primary-700 transition-colors",children:g.jsx(yy,{className:"h-6 w-6"})}),g.jsx("span",{className:"font-serif font-bold text-xl text-gray-900 tracking-tight",children:"KajabiLite"})]}),g.jsxs("nav",{className:"hidden md:flex items-center gap-8 text-sm font-semibold tracking-wide",children:[g.jsx(Qt,{to:"/",className:`transition-colors py-1 border-b-2 ${p("/")?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-900"}`,children:"Marketplace"}),g.jsx(Qt,{to:"/dashboard",className:`transition-colors py-1 border-b-2 ${p("/dashboard")?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-900"}`,children:"My Library"}),i.role===Er.INSTRUCTOR&&g.jsxs(Qt,{to:"/instructor",className:`transition-colors py-1 border-b-2 flex items-center gap-2 ${t.pathname.startsWith("/instructor")?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-900"}`,children:[g.jsx(G1,{className:"h-4 w-4"})," Instructor"]})]})]}),g.jsxs("div",{className:"flex items-center gap-6",children:[g.jsxs("div",{className:"relative hidden lg:block group",children:[g.jsx(Sh,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-primary-600 transition-colors"}),g.jsx("input",{type:"text",value:n,onChange:m,placeholder:"Find a course...",className:"pl-10 pr-8 py-2.5 text-sm bg-gray-50 border-none rounded-lg w-64 text-gray-900 placeholder-gray-400 focus:ring-2 focus:ring-primary-100 focus:bg-white transition-all"}),n&&g.jsx("button",{onClick:v,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:g.jsx(ko,{className:"h-3 w-3"})})]}),g.jsxs("button",{className:"text-gray-400 hover:text-gray-800 transition-colors relative",children:[g.jsx(gD,{className:"h-5 w-5"}),g.jsx("span",{className:"absolute top-0 right-0 h-2 w-2 bg-red-500 rounded-full border-2 border-white"})]}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>c(!l),className:"flex items-center gap-3 pl-4 border-l border-gray-100 focus:outline-none",children:[g.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[g.jsx("span",{className:"text-sm font-bold text-gray-900 leading-none",children:i.name}),g.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider font-semibold mt-1",children:i.role})]}),g.jsx("img",{src:i.avatarUrl,alt:i.name,className:"h-10 w-10 rounded-lg object-cover bg-gray-200 ring-2 ring-white shadow-sm"})]}),l&&g.jsxs("div",{className:"absolute right-0 mt-4 w-56 bg-white rounded-xl shadow-xl border border-gray-100 py-2 z-50 animate-in fade-in zoom-in-95 duration-100",children:[g.jsxs("div",{className:"px-4 py-3 border-b border-gray-50 md:hidden",children:[g.jsx("p",{className:"font-bold text-gray-900",children:i.name}),g.jsx("p",{className:"text-xs text-gray-500",children:i.email})]}),g.jsx("div",{className:"px-2",children:g.jsxs("button",{onClick:b,className:"w-full text-left px-3 py-2 rounded-lg text-sm text-red-600 hover:bg-red-50 flex items-center gap-2 transition-colors font-medium",children:[g.jsx(RO,{className:"h-4 w-4"})," Sign Out"]})})]})]})]})]})}),g.jsx("main",{className:"flex-1",children:g.jsx(k1,{})}),g.jsx("footer",{className:"bg-white border-t border-gray-200 py-12 mt-auto",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[g.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4 text-gray-900",children:[g.jsx("div",{className:"w-8 h-8 bg-gray-900 rounded-md flex items-center justify-center text-white",children:g.jsx(yy,{className:"h-4 w-4"})}),g.jsx("span",{className:"font-serif font-bold text-lg",children:"KajabiLite"})]}),g.jsx("p",{className:"text-sm text-gray-500",children:" 2024 LMS Platform. Empowering creators everywhere."})]})})]}):null},u4=({course:t})=>g.jsx(Qt,{to:`/course/${t.id}`,className:"group h-full",children:g.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden hover:shadow-card-hover shadow-card transition-all duration-300 flex flex-col h-full transform hover:-translate-y-1 ring-1 ring-gray-100",children:[g.jsxs("div",{className:"relative aspect-[16/9] bg-gray-100 overflow-hidden",children:[g.jsx("img",{src:t.thumbnailUrl,alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-60"}),g.jsx("div",{className:"absolute top-3 right-3 bg-white/95 backdrop-blur px-3 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider text-gray-900 shadow-sm",children:t.level}),g.jsx("div",{className:"absolute bottom-3 left-3 text-white font-medium text-xs flex items-center gap-2",children:g.jsx("span",{className:"bg-primary-600 px-2 py-0.5 rounded text-white font-semibold shadow-sm",children:t.category})})]}),g.jsxs("div",{className:"p-6 flex flex-col flex-1",children:[g.jsx("h3",{className:"font-sans text-xl font-bold text-gray-900 mb-2 leading-snug group-hover:text-primary-600 transition-colors tracking-tight",children:t.title}),g.jsx("p",{className:"text-sm text-gray-600 mb-6 line-clamp-2 leading-relaxed flex-1",children:t.description}),g.jsxs("div",{className:"flex items-center gap-4 text-xs font-semibold text-gray-400 mb-5 border-b border-gray-100 pb-5",children:[g.jsxs("div",{className:"flex items-center gap-1.5 text-gray-700",children:[g.jsx(Na,{className:"h-3.5 w-3.5 text-yellow-500 fill-current"}),g.jsx("span",{children:t.rating})]}),g.jsxs("div",{className:"flex items-center gap-1.5",children:[g.jsx(J1,{className:"h-3.5 w-3.5"}),g.jsx("span",{children:t.totalStudents.toLocaleString()})]}),g.jsxs("div",{className:"flex items-center gap-1.5",children:[g.jsx(ff,{className:"h-3.5 w-3.5"}),g.jsxs("span",{children:[t.sections.length," Modules"]})]})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex flex-col",children:[g.jsx("span",{className:"text-[10px] uppercase text-gray-400 font-bold tracking-wider mb-0.5",children:"Instructor"}),g.jsx("span",{className:"text-xs font-bold text-gray-800",children:t.instructorName})]}),g.jsx("div",{className:"text-right",children:g.jsx("span",{className:"block text-lg font-bold text-primary-700",children:t.price===0?"Free":`R${t.price}`})})]})]})]})}),Ue=({children:t,variant:e="primary",size:n="md",className:r="",isLoading:i,...o})=>{const l="inline-flex items-center justify-center rounded-lg font-semibold tracking-wide transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none active:scale-[0.98]",c={primary:"bg-primary-600 text-white hover:bg-primary-700 hover:shadow-lg hover:shadow-primary-600/20 focus:ring-primary-500 border border-transparent",secondary:"bg-primary-900 text-white hover:bg-gray-800 hover:shadow-lg focus:ring-gray-500 border border-transparent",outline:"border-2 border-gray-200 bg-white text-gray-700 hover:border-primary-600 hover:text-primary-600 focus:ring-primary-500",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-900",danger:"bg-white border-2 border-red-100 text-red-600 hover:bg-red-50 hover:border-red-200"},d={sm:"h-9 px-3 text-xs",md:"h-11 px-5 text-sm",lg:"h-14 px-8 text-base"};return g.jsxs("button",{className:`${l} ${c[e]} ${d[n]} ${r}`,disabled:i||o.disabled,...o,children:[i?g.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,t]})},d4=()=>{const{courses:t,searchQuery:e,setSearchQuery:n,selectedCategory:r,setSelectedCategory:i,isLoading:o}=Bi(),l=_.useMemo(()=>{const d=new Set(t.map(f=>f.category));return["All",...Array.from(d)]},[t]),c=t.filter(d=>{const f=d.title.toLowerCase().includes(e.toLowerCase())||d.description.toLowerCase().includes(e.toLowerCase())||d.instructorName.toLowerCase().includes(e.toLowerCase()),p=r==="All"||d.category===r;return f&&p});return o?g.jsx("div",{className:"max-w-7xl mx-auto px-4 py-20 flex justify-center items-center min-h-[60vh]",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-primary-600"})}):g.jsxs("div",{className:"pb-20",children:[!e&&g.jsx("div",{className:"bg-white border-b border-gray-100",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 md:py-32",children:g.jsxs("div",{className:"max-w-4xl",children:[g.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary-50 border border-primary-100 text-primary-700 px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider mb-8",children:[g.jsx(Fr,{className:"h-3 w-3"}),g.jsx("span",{children:"AI-Powered Learning Platform"})]}),g.jsxs("h1",{className:"font-serif text-5xl md:text-7xl font-bold text-gray-900 mb-8 leading-[1.1] tracking-tight",children:["Master your craft with ",g.jsx("span",{className:"text-primary-600 italic",children:"world-class"})," instruction."]}),g.jsx("p",{className:"text-xl md:text-2xl text-gray-500 mb-12 leading-relaxed max-w-2xl font-light",children:"Join a community of lifelong learners. Access premium courses in design, development, and business powered by next-gen AI tutoring."}),g.jsxs("div",{className:"flex flex-wrap gap-4",children:[g.jsxs(Ue,{size:"lg",className:"rounded-full px-10 text-lg h-14 shadow-xl shadow-primary-900/10 font-bold",children:["Explore Courses ",g.jsx(P1,{className:"ml-2 h-5 w-5"})]}),g.jsx(Ue,{size:"lg",variant:"outline",className:"rounded-full px-10 text-lg h-14 border-gray-300 text-gray-700 hover:text-gray-900 font-semibold bg-white",children:"Become an Instructor"})]})]})})}),g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-12",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"font-sans text-3xl font-bold text-gray-900 mb-2 tracking-tight",children:e?"Search Results":"Featured Collections"}),g.jsx("p",{className:"text-gray-500 text-lg",children:"Hand-picked courses for your career growth"})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(d=>g.jsx("button",{onClick:()=>i(d),className:`px-5 py-2.5 rounded-full text-sm font-semibold transition-all duration-200 border ${r===d?"bg-gray-900 text-white border-gray-900 shadow-lg":"bg-white text-gray-600 border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:d},d))})]}),c.length>0?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-10",children:c.map(d=>g.jsx(u4,{course:d},d.id))}):g.jsxs("div",{className:"text-center py-32 bg-white rounded-3xl border border-dashed border-gray-200",children:[g.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gray-50 mb-6",children:g.jsx(Sh,{className:"h-8 w-8 text-gray-300"})}),g.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No results found"}),g.jsxs("p",{className:"text-gray-500 max-w-md mx-auto mb-8",children:[`We couldn't find any courses matching "`,e,'" in the ',r," category."]}),g.jsx(Ue,{onClick:()=>{i("All"),n("")},variant:"outline",children:"Clear All Filters"})]})]})]})},f4=()=>{const{id:t}=tu(),e=Pi(),{courses:n,enrollInCourse:r,getEnrollment:i,isLessonCompleted:o}=Bi(),l=n.find(m=>m.id===t);if(_.useEffect(()=>{window.scrollTo(0,0)},[t]),!l)return g.jsx("div",{className:"p-20 text-center font-serif text-2xl text-gray-400",children:"Course not found"});const c=i(l.id),d=!!c,f=()=>{var m,v;if(d){const b=c.lastAccessedLessonId||((v=(m=l.sections[0])==null?void 0:m.lessons[0])==null?void 0:v.id);b&&e(`/learn/${l.id}/lesson/${b}`)}else r(l.id),l.sections.length>0&&l.sections[0].lessons.length>0&&e(`/learn/${l.id}/lesson/${l.sections[0].lessons[0].id}`)},p=l.sections.reduce((m,v)=>m+v.lessons.length,0);return g.jsxs("div",{className:"bg-white min-h-screen",children:[g.jsxs("div",{className:"bg-primary-900 text-white pt-20 pb-32 relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 right-0 -mr-20 -mt-20 w-[600px] h-[600px] bg-primary-800 rounded-full opacity-20 blur-3xl"}),g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:g.jsxs("div",{className:"max-w-3xl",children:[g.jsxs("div",{className:"flex gap-3 mb-6",children:[g.jsx("span",{className:"bg-primary-800 text-primary-200 border border-primary-700 px-3 py-1 rounded-full text-[11px] font-bold uppercase tracking-widest",children:l.category}),g.jsx("span",{className:"bg-white/10 text-white border border-white/10 px-3 py-1 rounded-full text-[11px] font-bold uppercase tracking-widest",children:l.level})]}),g.jsx("h1",{className:"font-serif text-4xl md:text-6xl font-bold mb-6 leading-tight",children:l.title}),g.jsx("p",{className:"text-xl text-primary-100 mb-8 leading-relaxed font-light",children:l.description}),g.jsxs("div",{className:"flex items-center gap-8 text-sm text-primary-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-yellow-400 font-bold text-lg",children:l.rating}),g.jsxs("div",{className:"flex text-yellow-400 text-xs gap-0.5",children:[g.jsx(Na,{className:"h-4 w-4 fill-current"}),g.jsx(Na,{className:"h-4 w-4 fill-current"}),g.jsx(Na,{className:"h-4 w-4 fill-current"}),g.jsx(Na,{className:"h-4 w-4 fill-current"}),g.jsx(Na,{className:"h-4 w-4 fill-current"})]}),g.jsxs("span",{className:"ml-1 opacity-75",children:["(",l.totalStudents.toLocaleString()," ratings)"]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(q1,{className:"h-4 w-4"}),g.jsx("span",{children:"English"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"opacity-75",children:"Created by"}),g.jsx("span",{className:"text-white font-semibold underline decoration-primary-500 decoration-2 underline-offset-4",children:l.instructorName})]})]})]})})]}),g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-20 pb-24",children:g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-12",children:[g.jsxs("div",{className:"lg:col-span-8 space-y-12",children:[g.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-gray-100 p-8",children:[g.jsx("h2",{className:"font-sans text-2xl font-bold text-gray-900 mb-6 tracking-tight",children:"What you'll learn"}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2,3,4].map((m,v)=>g.jsxs("div",{className:"flex gap-3 items-start",children:[g.jsx(Ha,{className:"h-5 w-5 text-gray-900 flex-shrink-0 mt-0.5"}),g.jsx("span",{className:"text-gray-600 text-sm leading-relaxed font-medium",children:"Master the fundamental concepts and apply them to real-world projects immediately."})]},v))})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsx("h2",{className:"font-sans text-2xl font-bold text-gray-900 tracking-tight",children:"Course Content"}),g.jsxs("div",{className:"text-sm font-semibold text-gray-500",children:[l.sections.length," Sections  ",p," Lessons"]})]}),g.jsx("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-white shadow-sm",children:l.sections.map((m,v)=>g.jsxs("div",{className:"border-b border-gray-100 last:border-0",children:[g.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-between items-center cursor-default",children:[g.jsxs("span",{className:"font-bold text-gray-900 text-sm flex items-center gap-3",children:[g.jsxs("span",{className:"text-gray-400 font-medium",children:["Section ",v+1]}),m.title]}),g.jsxs("span",{className:"text-xs text-gray-500 font-semibold",children:[m.lessons.length," lessons"]})]}),g.jsx("div",{className:"divide-y divide-gray-50",children:m.lessons.map(b=>{const w=o(l.id,b.id);return g.jsxs("div",{className:"px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 transition-colors group",children:[b.type==="VIDEO"?g.jsx(hc,{className:"h-4 w-4 text-gray-400 group-hover:text-primary-600"}):g.jsx($a,{className:"h-4 w-4 text-gray-400 group-hover:text-primary-600"}),g.jsx("span",{className:"text-sm text-gray-600 font-medium flex-1 group-hover:text-gray-900",children:b.title}),g.jsxs("div",{className:"flex items-center gap-4",children:[w?g.jsx(Ha,{className:"h-4 w-4 text-green-600"}):b.isLocked&&!d&&g.jsx(Mc,{className:"h-3 w-3 text-gray-300"}),g.jsxs("span",{className:"text-xs text-gray-400 w-12 text-right font-medium",children:[b.duration,"m"]})]})]},b.id)})})]},m.id))})]}),g.jsxs("div",{className:"prose prose-lg prose-headings:font-sans prose-headings:font-bold prose-headings:tracking-tight prose-blue text-gray-600 max-w-none",children:[g.jsx("h2",{className:"text-gray-900",children:"Description"}),g.jsx("p",{children:l.description}),g.jsx("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam in dui mauris. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor. Ut in nulla enim. Phasellus molestie magna non est bibendum non venenatis nisl tempor. Suspendisse dictum feugiat nisl ut dapibus."}),g.jsx("h3",{children:"Who this course is for:"}),g.jsxs("ul",{children:[g.jsx("li",{children:"Beginners who want to start their journey"}),g.jsx("li",{children:"Intermediate learners looking to brush up skills"})]})]})]}),g.jsx("div",{className:"lg:col-span-4 relative",children:g.jsxs("div",{className:"sticky top-24 space-y-6",children:[g.jsxs("div",{className:"bg-white rounded-2xl shadow-xl shadow-gray-200/50 border border-gray-100 overflow-hidden",children:[g.jsxs("div",{className:"relative aspect-video",children:[g.jsx("img",{src:l.thumbnailUrl,alt:l.title,className:"w-full h-full object-cover"}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/10 transition-colors hover:bg-black/20 cursor-pointer",children:g.jsx("div",{className:"w-16 h-16 bg-white/90 backdrop-blur rounded-full flex items-center justify-center shadow-lg",children:g.jsx(hc,{className:"h-8 w-8 text-primary-600 ml-1"})})})]}),g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"flex items-end gap-3 mb-8",children:[g.jsx("span",{className:"text-4xl font-bold text-gray-900 tracking-tight font-sans",children:l.price===0?"Free":`R${l.price}`}),l.price>0&&g.jsxs("span",{className:"text-lg text-gray-400 line-through mb-1 font-medium",children:["R",Math.round(l.price*1.2)]})]}),g.jsx(Ue,{onClick:f,size:"lg",className:"w-full py-4 text-base shadow-lg shadow-primary-600/30 mb-4 h-14 font-bold",children:d?"Go to Dashboard":"Enroll Now"}),!d&&g.jsx("p",{className:"text-center text-xs text-gray-500 mb-6 font-semibold",children:"30-Day Money-Back Guarantee"}),g.jsxs("div",{className:"space-y-4 pt-6 border-t border-gray-100",children:[g.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:"This course includes:"}),g.jsxs("ul",{className:"space-y-3 text-sm text-gray-600 font-medium",children:[g.jsxs("li",{className:"flex items-center gap-3",children:[g.jsx(hc,{className:"h-4 w-4 text-gray-900"}),g.jsxs("span",{children:[p*15/60," hours on-demand video"]})]}),g.jsxs("li",{className:"flex items-center gap-3",children:[g.jsx($a,{className:"h-4 w-4 text-gray-900"}),g.jsxs("span",{children:[p," downloadable resources"]})]}),g.jsxs("li",{className:"flex items-center gap-3",children:[g.jsx(gO,{className:"h-4 w-4 text-gray-900"}),g.jsx("span",{children:"Full lifetime access"})]}),g.jsxs("li",{className:"flex items-center gap-3",children:[g.jsx(fc,{className:"h-4 w-4 text-gray-900"}),g.jsx("span",{children:"Certificate of completion"})]})]})]})]})]}),g.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-100 flex items-center justify-center gap-4 text-gray-500 text-sm font-semibold",children:[g.jsx(sL,{className:"h-5 w-5 text-gray-400"}),"Secure Payment via Stripe"]})]})})]})})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cE;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(cE||(cE={}));var uE;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(uE||(uE={}));var dE;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(dE||(dE={}));var pt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(pt||(pt={}));var fE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(fE||(fE={}));var hE;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(hE||(hE={}));var pE;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(pE||(pE={}));var mE;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(mE||(mE={}));var gE;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(gE||(gE={}));var yE;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(yE||(yE={}));var vE;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(vE||(vE={}));var bE;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(bE||(bE={}));var xE;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(xE||(xE={}));var wE;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(wE||(wE={}));var SE;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(SE||(SE={}));var EE;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(EE||(EE={}));var CE;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(CE||(CE={}));var TE;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(TE||(TE={}));var _E;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_E||(_E={}));var Ry;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ry||(Ry={}));var AE;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(AE||(AE={}));var NE;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(NE||(NE={}));var kE;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(kE||(kE={}));var RE;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(RE||(RE={}));var ME;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ME||(ME={}));var IE;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(IE||(IE={}));var DE;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(DE||(DE={}));var OE;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(OE||(OE={}));var LE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(LE||(LE={}));var PE;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(PE||(PE={}));var UE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(UE||(UE={}));var BE;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(BE||(BE={}));var zE;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(zE||(zE={}));var jE;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(jE||(jE={}));var qE;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(qE||(qE={}));var HE;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(HE||(HE={}));var $E;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})($E||($E={}));var VE;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(VE||(VE={}));var FE;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(FE||(FE={}));var GE;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(GE||(GE={}));var JE;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(JE||(JE={}));var KE;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(KE||(KE={}));var YE;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(YE||(YE={}));var WE;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(WE||(WE={}));var XE;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(XE||(XE={}));var QE;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(QE||(QE={}));var ZE;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ZE||(ZE={}));var eC;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(eC||(eC={}));var tC;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(tC||(tC={}));var nC;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(nC||(nC={}));var rC;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(rC||(rC={}));var iC;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(iC||(iC={}));var sC;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(sC||(sC={}));var oC;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(oC||(oC={}));var aC;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(aC||(aC={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var lC;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(lC||(lC={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h4="1.30.0",$F=`google-genai-sdk/${h4}`;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VF=1024*1024*8;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fr=null;try{console.warn("Gemini API Key missing. AI features will be disabled.")}catch(t){console.error("Error initializing Gemini client",t)}const cC=t=>{if(!fr)return null;const e=`You are an expert AI Tutor embedded in a Learning Management System. 
  Your goal is to help students understand the current lesson material.
  
  Current Lesson Context:
  ${t}
  
  Guidelines:
  - Answer the student's question concisely and encouragingly.
  - If the context is a QUIZ, do NOT provide the direct answer (A, B, C, or D). Instead, provide a hint or explain the concept to help the student figure it out.
  - If you use the Google Search tool, ensure you incorporate the findings into your response.
  - Always maintain a helpful and friendly tone.
  `;return fr.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:e,tools:[{googleSearch:{}}]}})},p4=async(t,e)=>{if(!fr)throw new Error("AI Client not initialized");const n=`Create a comprehensive course curriculum for a course about "${t}" designed for "${e}" students.
  
  The output must be a valid JSON object matching the schema provided.
  - Create 3-5 distinct sections.
  - Each section should have 2-4 lessons.
  - Lesson types should be one of: "VIDEO", "TEXT", "QUIZ".
  - For "VIDEO" lessons, provide a relevant YouTube search URL as content (e.g., "https://www.youtube.com/results?search_query=python+intro").
  - For "TEXT" lessons, provide a brief 2-paragraph markdown summary as content.
  - For "QUIZ" lessons, provide a JSON stringified object with 'passingScore' (number) and 'questions' (array of objects with id, question, options, correctAnswerIndex).
  `;try{const r=await fr.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{responseMimeType:"application/json",responseSchema:{type:pt.OBJECT,properties:{title:{type:pt.STRING},description:{type:pt.STRING},category:{type:pt.STRING},sections:{type:pt.ARRAY,items:{type:pt.OBJECT,properties:{title:{type:pt.STRING},lessons:{type:pt.ARRAY,items:{type:pt.OBJECT,properties:{title:{type:pt.STRING},type:{type:pt.STRING},content:{type:pt.STRING}}}}}}}}}}});return JSON.parse(r.text||"{}")}catch(r){throw console.error("Error generating course:",r),new Error("Failed to generate course content")}},m4=async(t,e)=>{if(!fr)throw new Error("AI Client not initialized");const n=`Write comprehensive educational content for a lesson titled "${t}" which is part of the course "${e}".
  
  Format the output as clean Markdown.
  - Include headers (##).
  - Include bullet points where appropriate.
  - Explain concepts clearly with examples.
  - Keep it engaging and approximately 300-500 words.
  `;return(await fr.models.generateContent({model:"gemini-2.5-flash",contents:n})).text},g4=async(t,e)=>{if(!fr)throw new Error("AI Client not initialized");const n=`Generate 5 multiple-choice quiz questions about "${t}" at a "${e}" level.
  
  Return ONLY raw JSON. Structure:
  {
    "questions": [
      {
        "id": 1,
        "question": "Question text",
        "options": ["Option 1", "Option 2", "Option 3", "Option 4"],
        "correctAnswerIndex": 0
      }
    ]
  }
  `,r=await fr.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{responseMimeType:"application/json",responseSchema:{type:pt.OBJECT,properties:{questions:{type:pt.ARRAY,items:{type:pt.OBJECT,properties:{id:{type:pt.INTEGER},question:{type:pt.STRING},options:{type:pt.ARRAY,items:{type:pt.STRING}},correctAnswerIndex:{type:pt.INTEGER}}}}}}}});return JSON.parse(r.text||"{}")},y4=async t=>{var e,n,r,i,o,l;if(!fr)return null;try{const c=t.length>2e3?t.substring(0,2e3)+"...":t,f=(l=(o=(i=(r=(n=(e=(await fr.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:{parts:[{text:c}]},config:{responseModalities:[Ry.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Kore"}}}}})).candidates)==null?void 0:e[0])==null?void 0:n.content)==null?void 0:r.parts)==null?void 0:i[0])==null?void 0:o.inlineData)==null?void 0:l.data;if(!f)return null;const p=atob(f),m=p.length,v=new Uint8Array(m);for(let b=0;b<m;b++)v[b]=p.charCodeAt(b);return v.buffer}catch(c){return console.error("Audio generation failed",c),null}},v4=async t=>{var e,n,r;if(!fr)return null;try{const i=await fr.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:`A high quality, modern, educational course thumbnail image for a course titled: ${t}. Minimalist, professional, vector art style.`}]},config:{imageConfig:{aspectRatio:"4:3"}}});for(const o of((r=(n=(e=i.candidates)==null?void 0:e[0])==null?void 0:n.content)==null?void 0:r.parts)||[])if(o.inlineData)return`data:image/png;base64,${o.inlineData.data}`;return null}catch(i){return console.error("Image generation failed",i),null}},b4=({context:t,isOpen:e,onClose:n})=>{const[r,i]=_.useState([{role:"assistant",text:"Hi! I'm your AI Tutor. Ask me anything about this lesson."}]),[o,l]=_.useState(""),[c,d]=_.useState(!1),f=_.useRef(null),p=_.useRef(null),m=()=>{var w;(w=p.current)==null||w.scrollIntoView({behavior:"smooth"})};_.useEffect(()=>{m()},[r,e]),_.useEffect(()=>{const w=cC(t);f.current=w,i([{role:"assistant",text:"Hi! I'm your AI Tutor. Ask me anything about this lesson."}])},[t]);const v=async()=>{var S,E,T;if(!o.trim()||c)return;const w=o.trim();i(N=>[...N,{role:"user",text:w}]),l(""),d(!0);try{if(f.current){const N=await f.current.sendMessage({message:w}),A=N.text||"I'm not sure how to answer that.",I=[];(T=(E=(S=N.candidates)==null?void 0:S[0])==null?void 0:E.groundingMetadata)!=null&&T.groundingChunks&&N.candidates[0].groundingMetadata.groundingChunks.forEach(M=>{var D;(D=M.web)!=null&&D.uri&&I.push({uri:M.web.uri,title:M.web.title||new URL(M.web.uri).hostname})}),i(M=>[...M,{role:"assistant",text:A,sources:I}])}else await new Promise(N=>setTimeout(N,1e3)),i(N=>[...N,{role:"assistant",text:"AI features are currently unavailable. Please check if the API key is configured."}])}catch(N){console.error("Chat Error",N),i(A=>[...A,{role:"assistant",text:"Sorry, I encountered an error while processing that."}])}finally{d(!1)}},b=()=>{const w=cC(t);f.current=w,i([{role:"assistant",text:"Chat cleared. What else can I help you with?"}])};return e?g.jsxs("div",{className:"fixed bottom-6 right-6 w-96 h-[500px] bg-white rounded-xl shadow-2xl border border-gray-200 flex flex-col z-50 overflow-hidden",children:[g.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-primary-500 p-4 flex justify-between items-center text-white",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Fr,{className:"h-5 w-5"}),g.jsx("h3",{className:"font-semibold",children:"AI Tutor"})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("button",{onClick:b,className:"hover:bg-primary-700 p-1 rounded transition-colors",title:"Reset Chat",children:g.jsx(KO,{className:"h-4 w-4"})}),g.jsx("button",{onClick:n,className:"hover:bg-primary-700 p-1 rounded transition-colors",children:g.jsx(ko,{className:"h-5 w-5"})})]})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[r.map((w,S)=>g.jsxs("div",{className:`flex flex-col ${w.role==="user"?"items-end":"items-start"}`,children:[g.jsx("div",{className:`max-w-[85%] p-3 rounded-lg text-sm ${w.role==="user"?"bg-primary-600 text-white rounded-br-none":"bg-white border border-gray-200 text-gray-800 rounded-bl-none shadow-sm"}`,children:g.jsx("div",{className:"whitespace-pre-wrap",children:w.text})}),w.sources&&w.sources.length>0&&g.jsxs("div",{className:"mt-2 text-xs max-w-[85%] bg-gray-100 p-2 rounded border border-gray-200",children:[g.jsxs("p",{className:"font-semibold text-gray-500 mb-1 flex items-center gap-1",children:[g.jsx(Fr,{className:"h-3 w-3"})," Sources"]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:w.sources.map((E,T)=>g.jsxs("a",{href:E.uri,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 bg-white border border-gray-300 rounded px-2 py-1 text-primary-700 hover:text-primary-900 hover:border-primary-400 transition-colors",children:[g.jsx("span",{className:"truncate max-w-[100px]",children:E.title}),g.jsx(C0,{className:"h-3 w-3"})]},T))})]})]},S)),c&&g.jsx("div",{className:"flex justify-start",children:g.jsxs("div",{className:"bg-white border border-gray-200 p-3 rounded-lg rounded-bl-none shadow-sm flex gap-1",children:[g.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),g.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-100"}),g.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-200"})]})}),g.jsx("div",{ref:p})]}),g.jsx("div",{className:"p-4 bg-white border-t border-gray-100",children:g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",value:o,onChange:w=>l(w.target.value),onKeyDown:w=>w.key==="Enter"&&v(),placeholder:"Ask a question...",className:"flex-1 bg-white text-gray-900 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:c}),g.jsx(Ue,{size:"sm",onClick:v,disabled:c||!o.trim(),children:g.jsx(ZO,{className:"h-4 w-4"})})]})})]}):null},h_=({content:t,onPass:e})=>{const[n,r]=_.useState({}),[i,o]=_.useState(!1),[l,c]=_.useState(0),[d,f]=_.useState(!1),[p,m]=_.useState(null);let v;try{v=JSON.parse(t)}catch{return g.jsx("div",{className:"text-red-500 p-4",children:"Error loading quiz data. Invalid format."})}const b=(E,T)=>{i||r(N=>({...N,[E]:T}))},w=()=>{if(Object.keys(n).length<v.questions.length){m("Please answer all questions before submitting.");return}m(null);let E=0;v.questions.forEach(A=>{n[A.id]===A.correctAnswerIndex&&E++});const T=Math.round(E/v.questions.length*100);c(T),o(!0);const N=T>=v.passingScore;f(N),N&&e()},S=()=>{r({}),o(!1),c(0),f(!1),m(null)};return g.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[g.jsxs("div",{className:"bg-primary-50 border-b border-primary-100 p-6",children:[g.jsx("h2",{className:"text-xl font-bold text-primary-900 mb-2",children:"Knowledge Check"}),g.jsxs("p",{className:"text-primary-700 text-sm",children:["Pass with ",v.passingScore,"% or higher to complete this lesson."]})]}),g.jsx("div",{className:"p-6 md:p-8 space-y-8",children:v.questions.map((E,T)=>g.jsxs("div",{className:"pb-6 border-b border-gray-100 last:border-0",children:[g.jsxs("h3",{className:"font-semibold text-lg text-gray-800 mb-4",children:[T+1,". ",E.question]}),g.jsx("div",{className:"space-y-3",children:E.options.map((N,A)=>{const I=n[E.id]===A,M=E.correctAnswerIndex===A;let D="border-gray-200 hover:bg-gray-50",R=null;return i?M?(D="bg-green-50 border-green-200 text-green-800",R=g.jsx(Ha,{className:"h-5 w-5 text-green-600"})):I&&!M?(D="bg-red-50 border-red-200 text-red-800",R=g.jsx(B1,{className:"h-5 w-5 text-red-600"})):D="opacity-50 border-gray-200":I&&(D="border-primary-500 bg-primary-50 text-primary-900 ring-1 ring-primary-500"),g.jsxs("button",{onClick:()=>b(E.id,A),disabled:i,className:`w-full text-left p-4 rounded-lg border flex items-center justify-between transition-all ${D}`,children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center flex-shrink-0 ${I?"border-primary-600":"border-gray-400"}`,children:I&&g.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-primary-600"})}),g.jsx("span",{children:N})]}),R]},A)})})]},E.id))}),g.jsxs("div",{className:"bg-gray-50 p-6 border-t border-gray-200",children:[p&&g.jsxs("div",{className:"mb-4 flex items-center gap-2 text-red-600 bg-red-50 p-3 rounded-lg text-sm",children:[g.jsx(U1,{className:"h-4 w-4"}),p]}),i?g.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Your Score"}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("span",{className:`text-4xl font-bold ${d?"text-green-600":"text-red-600"}`,children:[l,"%"]}),g.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${d?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:d?"PASSED":"FAILED"})]})]}),g.jsxs("div",{className:"flex gap-3",children:[!d&&g.jsxs(Ue,{variant:"outline",onClick:S,className:"gap-2",children:[g.jsx(GO,{className:"h-4 w-4"})," Retry Quiz"]}),d&&g.jsxs("div",{className:"text-green-700 font-medium flex items-center gap-2 animate-pulse",children:[g.jsx(Ha,{className:"h-5 w-5"})," Lesson Completed!"]})]})]}):g.jsx("div",{className:"flex justify-end",children:g.jsx(Ue,{onClick:w,size:"lg",children:"Submit Quiz"})})]})]})},x4=()=>{const{courseId:t,lessonId:e}=tu(),{courses:n,completeLesson:r,isLessonCompleted:i}=Bi(),[o,l]=_.useState(!0),[c,d]=_.useState(!1),[f,p]=_.useState(null),[m,v]=_.useState(!1),[b,w]=_.useState(!1),S=_.useRef(null),E=_.useRef(null),T=n.find(G=>G.id===t);_.useEffect(()=>{if(N(),T&&e){let G=null;T.sections.forEach(X=>{const q=X.lessons.find(K=>K.id===e);q&&(G=q)}),p(G)}},[t,e,T]),_.useEffect(()=>()=>{N(),S.current&&S.current.close()},[]);const N=()=>{if(E.current){try{E.current.stop()}catch{}E.current=null}w(!1)},A=async()=>{if(b){N();return}if(!(!f||f.type!==it.TEXT)){v(!0);try{const G=await y4(f.content);if(G){S.current||(S.current=new(window.AudioContext||window.webkitAudioContext)),S.current.state==="suspended"&&await S.current.resume();const X=await S.current.decodeAudioData(G),q=S.current.createBufferSource();q.buffer=X,q.connect(S.current.destination),q.onended=()=>w(!1),q.start(0),E.current=q,w(!0)}else alert("Could not generate audio for this lesson.")}catch(G){console.error("Playback error",G),alert("Error playing audio.")}finally{v(!1)}}};if(!T||!f)return g.jsx("div",{className:"p-10 text-center text-white bg-gray-900 h-screen",children:"Lesson not found"});const I=T.sections.flatMap(G=>G.lessons),M=I.findIndex(G=>G.id===e),D=M>0?I[M-1]:null,R=M<I.length-1?I[M+1]:null,B=i(T.id,f.id),z=()=>{t&&e&&f.type!==it.QUIZ&&r(t,e)},F=()=>{t&&e&&r(t,e)},Q=()=>{let G="";return f.type===it.VIDEO?G=`Video Lesson: ${f.title}. URL: ${f.content}`:f.type===it.QUIZ?G=`QUIZ MODE. Data: ${f.content}`:G=f.content,`Course: ${T.title}. Lesson: ${f.title}. Type: ${f.type}. Content: ${G}`};return g.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden font-sans",children:[g.jsxs("div",{className:`${o?"w-80":"w-0"} bg-gray-900 border-r border-gray-800 flex-shrink-0 transition-all duration-300 flex flex-col relative z-20 text-gray-300`,children:[g.jsxs("div",{className:"p-5 border-b border-gray-800 flex items-center justify-between bg-gray-900",children:[g.jsxs("div",{children:[g.jsxs(Qt,{to:"/dashboard",className:"text-xs font-bold text-gray-500 uppercase tracking-widest hover:text-white mb-1 flex items-center gap-1 transition-colors",children:[g.jsx(bh,{className:"h-3 w-3"})," Dashboard"]}),g.jsx("h2",{className:"font-bold text-white text-base leading-tight pr-2",children:T.title})]}),g.jsx("button",{onClick:()=>l(!1),className:"md:hidden text-gray-400",children:g.jsx(ko,{className:"h-5 w-5"})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:T.sections.map(G=>g.jsxs("div",{children:[g.jsx("div",{className:"px-5 py-4 bg-gray-900/50 text-[11px] font-bold text-gray-500 uppercase tracking-wider border-y border-gray-800/50 sticky top-0 backdrop-blur-sm z-10",children:G.title}),g.jsx("div",{children:G.lessons.map(X=>{const q=i(T.id,X.id);let K=$a;X.type===it.VIDEO&&(K=hc),X.type===it.QUIZ&&(K=Rc);const L=X.id===e;return g.jsxs(Qt,{to:`/learn/${t}/lesson/${X.id}`,className:`flex items-center gap-3 px-5 py-3 text-sm border-l-[3px] transition-all ${L?"border-primary-500 bg-gray-800 text-white":"border-transparent hover:bg-gray-800/50 text-gray-400 hover:text-gray-200"}`,children:[g.jsx("div",{className:"flex-shrink-0",children:q?g.jsx(Ha,{className:"h-4 w-4 text-green-500"}):g.jsx(K,{className:`h-4 w-4 ${L?"text-primary-400":"text-gray-600"}`})}),g.jsx("span",{className:"line-clamp-2",children:X.title})]},X.id)})})]},G.id))}),g.jsxs("div",{className:"p-5 border-t border-gray-800 bg-gray-900",children:[g.jsxs("div",{className:"text-xs text-gray-400 mb-2 flex justify-between",children:[g.jsx("span",{children:"Course Progress"}),g.jsx("span",{className:"text-white",children:"35%"})]}),g.jsx("div",{className:"w-full bg-gray-800 rounded-full h-1.5",children:g.jsx("div",{className:"bg-green-500 h-1.5 rounded-full w-[35%]"})})]})]}),g.jsxs("div",{className:"flex-1 flex flex-col h-full relative bg-white",children:[g.jsxs("div",{className:"bg-white border-b border-gray-100 h-16 flex items-center justify-between px-6 shadow-sm z-10",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[!o&&g.jsx("button",{onClick:()=>l(!0),className:"text-gray-400 hover:text-gray-900 transition-colors",children:g.jsx(OO,{className:"h-6 w-6"})}),g.jsx("h1",{className:"text-lg font-bold text-gray-800 line-clamp-1",children:f.title})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[f.type===it.TEXT&&g.jsxs(Ue,{variant:"outline",size:"sm",onClick:A,isLoading:m,className:`gap-2 rounded-full border-gray-200 ${b?"bg-primary-50 text-primary-600 border-primary-200":""}`,children:[b?g.jsx(DD,{className:"h-4 w-4"}):g.jsx(NL,{className:"h-4 w-4"}),b?"Stop":"Listen"]}),g.jsxs(Ue,{variant:"primary",size:"sm",onClick:()=>d(!0),className:"gap-2 bg-gradient-to-r from-indigo-600 to-purple-600 border-none shadow-md hover:shadow-indigo-500/20",children:[g.jsx(Fr,{className:"h-3.5 w-3.5"})," AI Tutor"]})]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50/50 p-6 md:p-12",children:g.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl shadow-card border border-gray-100 p-8 md:p-12 min-h-[60vh]",children:[Y1(f.content)?g.jsx("div",{className:"space-y-6",children:f.content.pages.sort((G,X)=>G.order-X.order).map(G=>g.jsx(w4,{page:G,onQuizPass:F},G.id))}):f.type===it.VIDEO?g.jsx("div",{className:"aspect-video bg-black rounded-xl shadow-2xl overflow-hidden mb-8 ring-4 ring-gray-100",children:g.jsx("iframe",{src:f.content,title:f.title,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):f.type===it.QUIZ?g.jsx("div",{className:"mb-8",children:g.jsx(h_,{content:f.content,onPass:F})}):g.jsx("div",{className:"prose prose-lg prose-slate max-w-none prose-headings:font-serif prose-headings:font-bold prose-img:rounded-xl",children:f.content.split(`
`).map((G,X)=>G.startsWith("# ")?g.jsx("h1",{className:"mb-6",children:G.replace("# ","")},X):G.startsWith("## ")?g.jsx("h2",{className:"mb-4 mt-8",children:G.replace("## ","")},X):g.jsx("p",{className:"mb-4 text-gray-600 leading-relaxed",children:G},X))}),g.jsxs("div",{className:"flex items-center justify-between pt-10 border-t border-gray-100 mt-12",children:[g.jsx("div",{children:D?g.jsx(Qt,{to:`/learn/${t}/lesson/${D.id}`,children:g.jsxs(Ue,{variant:"ghost",className:"gap-2 pl-0 hover:bg-transparent hover:text-primary-600",children:[g.jsx(vy,{className:"h-4 w-4"})," Previous Lesson"]})}):g.jsx("div",{})}),g.jsx("div",{children:R?f.type===it.QUIZ&&!B?g.jsxs(Ue,{disabled:!0,className:"gap-2 opacity-50 cursor-not-allowed bg-gray-300 text-gray-500",children:["Pass Quiz to Continue ",g.jsx(hf,{className:"h-4 w-4"})]}):g.jsx(Qt,{to:`/learn/${t}/lesson/${R.id}`,onClick:z,children:g.jsxs(Ue,{size:"lg",className:"gap-2 shadow-lg shadow-primary-600/20",children:["Next Lesson ",g.jsx(hf,{className:"h-4 w-4"})]})}):g.jsx(Qt,{to:"/dashboard",onClick:z,children:g.jsxs(Ue,{size:"lg",className:`gap-2 ${f.type===it.QUIZ&&!B?"opacity-50 cursor-not-allowed":"bg-green-600 hover:bg-green-700 shadow-lg shadow-green-600/20"}`,disabled:f.type===it.QUIZ&&!B,children:["Complete Course ",g.jsx(Ha,{className:"h-4 w-4"})]})})})]})]})}),g.jsx(b4,{isOpen:c,onClose:()=>d(!1),context:Q()})]})]})};function w4({page:t,onQuizPass:e}){var n;switch(t.data.type){case"text":return g.jsx("div",{className:"prose prose-lg prose-slate max-w-none prose-headings:font-serif prose-headings:font-bold prose-img:rounded-xl",dangerouslySetInnerHTML:{__html:t.data.html}});case"video":{const r=t.data;let i=r.url;if(r.provider==="youtube")r.url.includes("youtu.be/")?i=`https://www.youtube.com/embed/${(n=r.url.split("youtu.be/")[1])==null?void 0:n.split("?")[0]}`:r.url.includes("youtube.com/watch")&&(i=`https://www.youtube.com/embed/${new URLSearchParams(new URL(r.url).search).get("v")}`);else if(r.provider==="vimeo"){const o=r.url.match(/vimeo\.com\/(\d+)/);o&&(i=`https://player.vimeo.com/video/${o[1]}`)}else if(r.provider==="loom"){const o=r.url.match(/loom\.com\/share\/([a-zA-Z0-9]+)/);o&&(i=`https://www.loom.com/embed/${o[1]}`)}return g.jsx("div",{className:"aspect-video bg-black rounded-xl shadow-2xl overflow-hidden ring-4 ring-gray-100",children:g.jsx("iframe",{src:i,title:"Video",className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}case"image":{const r=t.data;return g.jsxs("figure",{className:"my-6",children:[g.jsx("img",{src:r.url,alt:r.alt,className:"w-full max-h-[500px] object-contain rounded-xl shadow-lg"}),r.caption&&g.jsx("figcaption",{className:"text-center text-sm text-gray-500 mt-2 italic",children:r.caption})]})}case"code":{const r=t.data;return g.jsxs("div",{className:"rounded-xl overflow-hidden shadow-lg",children:[g.jsx("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-800 text-gray-400 text-sm",children:g.jsx("span",{className:"capitalize",children:r.language})}),g.jsx("pre",{className:"p-4 bg-gray-900 text-gray-100 font-mono text-sm overflow-x-auto",children:g.jsx("code",{children:r.code})})]})}case"quiz":{const r=t.data,i=JSON.stringify({passingScore:r.passingScore,questions:r.questions});return g.jsx(h_,{content:i,onPass:e})}case"embed":{const r=t.data;return g.jsx("div",{className:"aspect-video bg-gray-100 rounded-xl overflow-hidden shadow-lg",children:g.jsx("iframe",{src:r.embedUrl,className:"w-full h-full border-0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen",allowFullScreen:!0})})}case"divider":{const r=t.data;return r.style==="space"?g.jsx("div",{className:"h-8"}):r.style==="dots"?g.jsxs("div",{className:"flex items-center justify-center py-4",children:[g.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400 mx-1"}),g.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400 mx-1"}),g.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400 mx-1"})]}):g.jsx("hr",{className:"border-gray-200 my-6"})}default:return null}}const S4=()=>{const{courses:t,enrollments:e,isLoading:n}=Bi();if(n)return g.jsx("div",{className:"max-w-7xl mx-auto px-4 py-20 flex justify-center items-center",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});const r=e.map(o=>{const l=t.find(c=>c.id===o.courseId);return l?{...l,progress:o.progress,completedLessonsCount:o.completedLessonIds.length,lastLessonId:o.lastAccessedLessonId}:null}).filter(o=>o!==null),i=r.filter(o=>o.progress===100).length;return g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:[g.jsx("h1",{className:"text-3xl font-bold mb-8",children:"My Dashboard"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[g.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4",children:[g.jsx("div",{className:"bg-blue-50 p-3 rounded-full text-blue-600",children:g.jsx(hc,{className:"h-6 w-6"})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-gray-500 text-sm font-medium mb-1",children:"Courses in Progress"}),g.jsx("div",{className:"text-3xl font-bold text-gray-900",children:r.length-i})]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4",children:[g.jsx("div",{className:"bg-green-50 p-3 rounded-full text-green-600",children:g.jsx(fc,{className:"h-6 w-6"})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-gray-500 text-sm font-medium mb-1",children:"Completed Courses"}),g.jsx("div",{className:"text-3xl font-bold text-gray-900",children:i})]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4",children:[g.jsx("div",{className:"bg-purple-50 p-3 rounded-full text-purple-600",children:g.jsx(SD,{className:"h-6 w-6"})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-gray-500 text-sm font-medium mb-1",children:"Certificates Earned"}),g.jsx("div",{className:"text-3xl font-bold text-gray-900",children:i})]})]})]}),g.jsx("h2",{className:"text-xl font-bold mb-6",children:"Continue Learning"}),g.jsx("div",{className:"space-y-6",children:r.length>0?r.map(o=>{var f,p;const l=o.sections.reduce((m,v)=>m+v.lessons.length,0);let c=`/learn/${o.id}/lesson/${(p=(f=o.sections[0])==null?void 0:f.lessons[0])==null?void 0:p.id}`;o.lastLessonId&&(c=`/learn/${o.id}/lesson/${o.lastLessonId}`);const d=o.progress===100;return g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden flex flex-col md:flex-row",children:[g.jsxs("div",{className:"md:w-64 h-48 md:h-auto relative bg-gray-200 group",children:[g.jsx("img",{src:o.thumbnailUrl,alt:o.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}),d&&g.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:g.jsx(fc,{className:"h-12 w-12 text-white"})})]}),g.jsxs("div",{className:"p-6 flex-1 flex flex-col justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:o.title}),g.jsx("p",{className:"text-sm text-gray-500 mb-4",children:o.instructorName}),g.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2 mb-2",children:g.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-500",style:{width:`${o.progress}%`}})}),g.jsxs("div",{className:"text-xs text-gray-500 flex justify-between",children:[g.jsxs("span",{children:[o.progress,"% Complete"]}),g.jsxs("span",{children:[o.completedLessonsCount,"/",l," Lessons"]})]})]}),g.jsxs("div",{className:"mt-6 flex flex-wrap justify-end gap-3",children:[d&&g.jsx(Qt,{to:`/certificate/${o.id}`,children:g.jsxs(Ue,{variant:"outline",className:"gap-2",children:[g.jsx(fc,{className:"h-4 w-4"})," View Certificate"]})}),g.jsx(Qt,{to:c,children:g.jsx(Ue,{children:o.progress===0?"Start Course":d?"Review Course":"Continue Learning"})})]})]})]},o.id)}):g.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl border border-dashed border-gray-300",children:[g.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't enrolled in any courses yet."}),g.jsx(Qt,{to:"/",children:g.jsx(Ue,{children:"Browse Courses"})})]})})]})},E4=()=>{const{courses:t,addCourse:e,deleteCourse:n}=Bi(),{user:r}=nl(),i=Pi(),[o,l]=_.useState(!1),[c,d]=_.useState(""),[f,p]=_.useState("Beginner"),[m,v]=_.useState(!1),[b,w]=_.useState(!1);if(!r)return null;const S=t.filter(M=>M.instructorId===r.id),E=S.reduce((M,D)=>M+D.totalStudents,0),T=S.reduce((M,D)=>M+D.totalStudents*D.price,0),N=async()=>{w(!0);try{const M={id:"",instructorId:r.id,title:"Untitled Course",description:"Add a description...",thumbnailUrl:"https://picsum.photos/800/600?grayscale",instructorName:r.name,price:0,category:"Uncategorized",level:"Beginner",sections:[],totalStudents:0,rating:0},D=await e(M);D&&i(`/instructor/edit/${D.id}`)}finally{w(!1)}},A=async M=>{if(M.preventDefault(),!!c.trim()){v(!0);try{const D=await p4(c,f),R=`c${Date.now()}`,B=(D.sections||[]).map((Q,G)=>({id:`s${Date.now()}-${G}`,courseId:R,title:Q.title||`Section ${G+1}`,order:G+1,lessons:(Q.lessons||[]).map((X,q)=>({id:`l${Date.now()}-${G}-${q}`,sectionId:`s${Date.now()}-${G}`,title:X.title||`Lesson ${q+1}`,type:["VIDEO","TEXT","QUIZ"].includes(X.type)?X.type:"TEXT",duration:10,content:X.content||"Content pending...",isCompleted:!1,isLocked:!1}))})),z={id:R,instructorId:r.id,title:D.title||c,description:D.description||`A course about ${c}`,thumbnailUrl:`https://picsum.photos/seed/${R}/800/600`,instructorName:r.name,price:0,category:D.category||"Development",level:["Beginner","Intermediate","Advanced"].includes(f)?f:"Beginner",sections:B,totalStudents:0,rating:0},F=await e(z);F&&i(`/instructor/edit/${F.id}`)}catch(D){console.error("Generation failed",D),alert("Failed to generate course. Please try again.")}finally{v(!1),l(!1)}}},I=M=>{window.confirm("Are you sure you want to delete this course? This action cannot be undone.")&&n(M)};return g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 relative",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Instructor Studio"}),g.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your courses and view performance."})]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsxs(Ue,{onClick:N,variant:"outline",className:"gap-2",isLoading:b,disabled:b,children:[!b&&g.jsx(Vr,{className:"h-4 w-4"})," ",b?"Creating...":"Empty Course"]}),g.jsxs(Ue,{onClick:()=>l(!0),className:"gap-2 bg-gradient-to-r from-primary-600 to-primary-500 border-none shadow-lg hover:shadow-primary-500/30",children:[g.jsx(Fr,{className:"h-4 w-4"})," Generate with AI"]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[g.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4",children:[g.jsx("div",{className:"bg-blue-50 p-3 rounded-full text-blue-600",children:g.jsx(ff,{className:"h-6 w-6"})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Active Courses"}),g.jsx("div",{className:"text-2xl font-bold text-gray-900",children:S.length})]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4",children:[g.jsx("div",{className:"bg-green-50 p-3 rounded-full text-green-600",children:g.jsx(J1,{className:"h-6 w-6"})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Total Students"}),g.jsx("div",{className:"text-2xl font-bold text-gray-900",children:E.toLocaleString()})]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4",children:[g.jsx("div",{className:"bg-purple-50 p-3 rounded-full text-purple-600",children:g.jsx(GD,{className:"h-6 w-6"})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Total Revenue"}),g.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R",T.toLocaleString()]})]})]})]}),g.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Your Courses"}),S.length>0?g.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:g.jsxs("table",{className:"w-full text-left border-collapse",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:[g.jsx("th",{className:"px-6 py-4",children:"Course"}),g.jsx("th",{className:"px-6 py-4",children:"Price"}),g.jsx("th",{className:"px-6 py-4",children:"Students"}),g.jsx("th",{className:"px-6 py-4",children:"Rating"}),g.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),g.jsx("tbody",{className:"divide-y divide-gray-100",children:S.map(M=>g.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[g.jsx("td",{className:"px-6 py-4",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("img",{src:M.thumbnailUrl,alt:"",className:"h-10 w-16 object-cover rounded bg-gray-200"}),g.jsxs("div",{children:[g.jsx("div",{className:"font-medium text-gray-900",children:M.title}),g.jsxs("div",{className:"text-xs text-gray-500",children:[M.sections.length," Sections"]})]})]})}),g.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:M.price===0?"Free":`R${M.price}`}),g.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:M.totalStudents.toLocaleString()}),g.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("span",{className:"text-yellow-500",children:""})," ",M.rating]})}),g.jsx("td",{className:"px-6 py-4 text-right",children:g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx(Qt,{to:`/instructor/edit/${M.id}`,children:g.jsxs(Ue,{variant:"outline",size:"sm",className:"gap-2",children:[g.jsx(lL,{className:"h-3 w-3"})," Edit"]})}),g.jsx(Ue,{variant:"ghost",size:"sm",onClick:()=>I(M.id),className:"text-gray-400 hover:text-red-600",children:g.jsx(Nn,{className:"h-4 w-4"})})]})})]},M.id))})]})}):g.jsxs("div",{className:"text-center py-20 bg-gray-50 rounded-xl border border-dashed border-gray-300",children:[g.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't created any courses yet."}),g.jsxs("div",{className:"flex justify-center gap-4",children:[g.jsx(Ue,{onClick:N,variant:"outline",isLoading:b,disabled:b,children:b?"Creating...":"Create Empty Course"}),g.jsxs(Ue,{onClick:()=>l(!0),className:"gap-2",children:[g.jsx(Fr,{className:"h-4 w-4"})," Generate with AI"]})]})]}),o&&g.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6 shadow-2xl animate-in fade-in zoom-in duration-200",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsxs("div",{className:"flex items-center gap-2 text-primary-600",children:[g.jsx(Fr,{className:"h-5 w-5"}),g.jsx("h3",{className:"font-bold text-lg",children:"AI Course Generator"})]}),g.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600",children:g.jsx(ko,{className:"h-5 w-5"})})]}),g.jsxs("form",{onSubmit:A,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would you like to teach?"}),g.jsx("input",{type:"text",value:c,onChange:M=>d(M.target.value),placeholder:"e.g. Advanced Pottery, Intro to Astrophysics...",className:"w-full bg-white text-gray-900 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary-500 outline-none placeholder-gray-400",autoFocus:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Audience Level"}),g.jsxs("select",{value:f,onChange:M=>p(M.target.value),className:"w-full bg-white text-gray-900 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary-500 outline-none",children:[g.jsx("option",{value:"Beginner",children:"Beginner"}),g.jsx("option",{value:"Intermediate",children:"Intermediate"}),g.jsx("option",{value:"Advanced",children:"Advanced"})]})]}),g.jsxs("div",{className:"pt-4",children:[g.jsxs(Ue,{type:"submit",className:"w-full h-12 text-lg gap-2",disabled:m||!c,isLoading:m,children:[m?"Generating Curriculum...":"Generate Course",!m&&g.jsx(Fr,{className:"h-4 w-4"})]}),g.jsx("p",{className:"text-xs text-center text-gray-500 mt-3",children:"AI will generate a title, description, and full lesson plan."})]})]})]})})]})},C4=()=>{const{id:t}=tu(),e=Pi(),{courses:n,updateCourse:r}=Bi(),[i,o]=_.useState(null),[l,c]=_.useState("details"),[d,f]=_.useState(!1),[p,m]=_.useState(null),[v,b]=_.useState(!1);if(_.useEffect(()=>{const z=n.find(F=>F.id===t);z&&o(JSON.parse(JSON.stringify(z)))},[t,n]),!i)return g.jsx("div",{className:"p-10 text-center",children:"Loading..."});const w=()=>{f(!0),setTimeout(()=>{r(i),f(!1)},600)},S=async()=>{if(i.title){b(!0);try{const z=await v4(i.title);z&&o({...i,thumbnailUrl:z})}catch{alert("Failed to generate image.")}finally{b(!1)}}},E=()=>{const z={id:`s${Date.now()}`,courseId:i.id,title:"New Section",order:i.sections.length+1,lessons:[]};o({...i,sections:[...i.sections,z]})},T=z=>{const F=[...i.sections];F.splice(z,1),o({...i,sections:F})},N=(z,F)=>{const Q=[...i.sections];Q[z].title=F,o({...i,sections:Q})},A=z=>{const F=i.sections[z],Q={id:`l${Date.now()}`,sectionId:F.id,title:"New Lesson",type:it.TEXT,duration:5,content:"",isCompleted:!1,isLocked:!1},G=[...i.sections];G[z].lessons.push(Q),o({...i,sections:G})},I=(z,F,Q,G)=>{const X=[...i.sections],q={...X[z].lessons[F],[Q]:G};X[z].lessons[F]=q,o({...i,sections:X})},M=(z,F)=>{const Q=[...i.sections];Q[z].lessons.splice(F,1),o({...i,sections:Q})},D=async(z,F)=>{const Q=i.sections[z].lessons[F];if(!Q.title){alert("Please enter a lesson title first.");return}m(Q.id);try{const G=await m4(Q.title,i.title);G&&I(z,F,"content",G)}catch{alert("Failed to generate content. Please check your API key.")}finally{m(null)}},R=async(z,F,Q)=>{const G=i.sections[z].lessons[F];if(!G.title){alert("Please enter a lesson title first to generate relevant questions.");return}m(G.id);try{const X=await g4(G.title,i.level);if(X&&X.questions){const q={...Q,questions:[...Q.questions,...X.questions]};I(z,F,"content",JSON.stringify(q))}}catch{alert("Failed to generate quiz questions.")}finally{m(null)}},B=(z,F,Q)=>{const G=i.sections[z].lessons[F].id;let X;try{if(X=JSON.parse(Q),!Array.isArray(X.questions))throw new Error}catch{X={passingScore:80,questions:[]}}const q=V=>{I(z,F,"content",JSON.stringify(V))},K=()=>{const V={id:Date.now(),question:"New Question",options:["Option 1","Option 2"],correctAnswerIndex:0};q({...X,questions:[...X.questions,V]})},L=V=>{const ne=[...X.questions];ne.splice(V,1),q({...X,questions:ne})},W=(V,ne)=>{const se=[...X.questions];se[V].question=ne,q({...X,questions:se})},oe=V=>{const ne=[...X.questions];ne[V].options.push(`Option ${ne[V].options.length+1}`),q({...X,questions:ne})},fe=(V,ne,se)=>{const he=[...X.questions];he[V].options[ne]=se,q({...X,questions:he})},Ne=(V,ne)=>{const se=[...X.questions];se[V].correctAnswerIndex=ne,q({...X,questions:se})},U=(V,ne)=>{const se=[...X.questions];se[V].options.splice(ne,1),se[V].correctAnswerIndex>=ne&&se[V].correctAnswerIndex>0&&se[V].correctAnswerIndex--,q({...X,questions:se})};return g.jsxs("div",{className:"mt-4 border-t border-gray-100 pt-4",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[g.jsxs("div",{className:"flex items-center gap-4 bg-blue-50 p-3 rounded-lg border border-blue-100",children:[g.jsx("label",{className:"text-sm font-semibold text-blue-900",children:"Passing Score (%)"}),g.jsx("input",{type:"number",min:"0",max:"100",value:X.passingScore,onChange:V=>q({...X,passingScore:parseInt(V.target.value)||0}),className:"w-20 px-2 py-1 rounded border border-blue-200 text-sm bg-white text-gray-900"})]}),g.jsxs(Ue,{size:"sm",variant:"outline",className:"text-primary-600 border-primary-200 hover:bg-primary-50 gap-2",onClick:()=>R(z,F,X),isLoading:p===G,children:[g.jsx(Fr,{className:"h-4 w-4"})," AI Generate Questions"]})]}),g.jsx("div",{className:"space-y-4",children:X.questions.map((V,ne)=>g.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[g.jsxs("div",{className:"flex justify-between items-start mb-3",children:[g.jsxs("div",{className:"flex-1 mr-4",children:[g.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:["Question ",ne+1]}),g.jsx("input",{type:"text",value:V.question,onChange:se=>W(ne,se.target.value),className:"w-full bg-white text-gray-900 border border-gray-300 rounded px-3 py-2 text-sm focus:ring-1 focus:ring-primary-500 outline-none",placeholder:"Enter question text..."})]}),g.jsx("button",{onClick:()=>L(ne),className:"text-gray-400 hover:text-red-500 p-1",children:g.jsx(Nn,{className:"h-4 w-4"})})]}),g.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-gray-200",children:[V.options.map((se,he)=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"radio",name:`correct-${V.id}`,checked:V.correctAnswerIndex===he,onChange:()=>Ne(ne,he),className:"text-primary-600 focus:ring-primary-500 cursor-pointer"}),g.jsx("input",{type:"text",value:se,onChange:ye=>fe(ne,he,ye.target.value),className:`flex-1 border rounded px-2 py-1 text-sm outline-none bg-white text-gray-900 ${V.correctAnswerIndex===he?"border-green-400 bg-green-50":"border-gray-300"}`}),V.options.length>2&&g.jsx("button",{onClick:()=>U(ne,he),className:"text-gray-400 hover:text-red-500",children:g.jsx(B1,{className:"h-4 w-4"})})]},he)),g.jsxs("button",{onClick:()=>oe(ne),className:"text-xs text-primary-600 font-medium hover:underline mt-2 flex items-center gap-1",children:[g.jsx(Vr,{className:"h-3 w-3"})," Add Option"]})]})]},V.id))}),g.jsxs(Ue,{onClick:K,variant:"outline",size:"sm",className:"mt-4 w-full border-dashed",children:[g.jsx(Vr,{className:"h-4 w-4 mr-2"})," Add Manual Question"]})]})};return g.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[g.jsxs("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-30 px-4 h-16 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx(Ue,{variant:"ghost",onClick:()=>e("/instructor"),className:"text-gray-500",children:g.jsx(bh,{className:"h-5 w-5"})}),g.jsx("div",{className:"h-6 w-px bg-gray-300"}),g.jsxs("h1",{className:"font-bold text-lg text-gray-800 truncate max-w-xs md:max-w-md",children:["Editing: ",i.title]})]}),g.jsxs(Ue,{onClick:w,isLoading:d,className:"gap-2",children:[g.jsx(WO,{className:"h-4 w-4"})," Save Changes"]})]}),g.jsx("div",{className:"bg-white border-b border-gray-200 px-4 md:px-8",children:g.jsxs("div",{className:"flex gap-8",children:[g.jsx("button",{onClick:()=>c("details"),className:`py-4 text-sm font-medium border-b-2 transition-colors ${l==="details"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Course Details"}),g.jsx("button",{onClick:()=>c("curriculum"),className:`py-4 text-sm font-medium border-b-2 transition-colors ${l==="curriculum"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Curriculum"})]})}),g.jsxs("div",{className:"flex-1 max-w-5xl mx-auto w-full p-4 md:p-8",children:[l==="details"&&g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Title"}),g.jsx("input",{type:"text",value:i.title,onChange:z=>o({...i,title:z.target.value}),className:"w-full bg-white text-gray-900 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),g.jsx("textarea",{rows:4,value:i.description,onChange:z=>o({...i,description:z.target.value}),className:"w-full bg-white text-gray-900 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),g.jsxs("select",{value:i.category,onChange:z=>o({...i,category:z.target.value}),className:"w-full bg-white text-gray-900 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary-500 outline-none",children:[g.jsx("option",{value:"Development",children:"Development"}),g.jsx("option",{value:"Business",children:"Business"}),g.jsx("option",{value:"Design",children:"Design"}),g.jsx("option",{value:"Marketing",children:"Marketing"}),g.jsx("option",{value:"Web Development",children:"Web Development"}),g.jsx("option",{value:"Data Science",children:"Data Science"}),g.jsx("option",{value:"Uncategorized",children:"Uncategorized"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level"}),g.jsxs("select",{value:i.level,onChange:z=>o({...i,level:z.target.value}),className:"w-full bg-white text-gray-900 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary-500 outline-none",children:[g.jsx("option",{value:"Beginner",children:"Beginner"}),g.jsx("option",{value:"Intermediate",children:"Intermediate"}),g.jsx("option",{value:"Advanced",children:"Advanced"})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (R)"}),g.jsx("input",{type:"number",min:"0",value:i.price,onChange:z=>o({...i,price:parseInt(z.target.value)||0}),className:"w-full bg-white text-gray-900 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Thumbnail URL"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",value:i.thumbnailUrl,onChange:z=>o({...i,thumbnailUrl:z.target.value}),className:"flex-1 bg-white text-gray-900 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary-500 outline-none"}),g.jsxs(Ue,{variant:"outline",onClick:S,isLoading:v,className:"flex-shrink-0 gap-2",children:[g.jsx(wh,{className:"h-4 w-4"})," AI Generate"]})]}),i.thumbnailUrl&&g.jsx("div",{className:"mt-2 h-32 w-48 rounded overflow-hidden bg-gray-100 border border-gray-200",children:g.jsx("img",{src:i.thumbnailUrl,alt:"Preview",className:"w-full h-full object-cover"})})]})]})]}),l==="curriculum"&&g.jsxs("div",{className:"space-y-6",children:[i.sections.map((z,F)=>g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[g.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200 flex items-center gap-4",children:[g.jsx(xh,{className:"h-5 w-5 text-gray-400 cursor-move"}),g.jsx("div",{className:"flex-1",children:g.jsx("input",{type:"text",value:z.title,onChange:Q=>N(F,Q.target.value),className:"bg-transparent font-bold text-gray-700 focus:outline-none focus:bg-white focus:ring-2 focus:ring-primary-500 rounded px-2 py-1 w-full"})}),g.jsx("button",{onClick:()=>T(F),className:"text-gray-400 hover:text-red-500",children:g.jsx(Nn,{className:"h-5 w-5"})})]}),g.jsxs("div",{className:"p-4 space-y-4 bg-white",children:[z.lessons.map((Q,G)=>g.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-white hover:border-primary-200 transition-colors",children:g.jsxs("div",{className:"flex flex-col gap-3",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsxs("div",{className:"text-xs font-bold text-gray-400",children:["Lesson ",G+1]}),g.jsx("button",{onClick:()=>M(F,G),className:"ml-auto text-gray-400 hover:text-red-500",children:g.jsx(Nn,{className:"h-4 w-4"})})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Title"}),g.jsx("input",{type:"text",value:Q.title,onChange:X=>I(F,G,"title",X.target.value),className:"w-full bg-white text-gray-900 border border-gray-300 rounded px-3 py-1.5 text-sm focus:ring-1 focus:ring-primary-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Type"}),g.jsxs("select",{value:Q.type,onChange:X=>{let q="";X.target.value==="QUIZ"?q=JSON.stringify({passingScore:80,questions:[]}):X.target.value==="TEXT"?q="":q="https://www.youtube.com/embed/...";const K=[...i.sections];K[F].lessons[G]={...K[F].lessons[G],type:X.target.value,content:q},o({...i,sections:K})},className:"w-full bg-white text-gray-900 border border-gray-300 rounded px-3 py-1.5 text-sm focus:ring-1 focus:ring-primary-500 outline-none",children:[g.jsx("option",{value:"VIDEO",children:"Video"}),g.jsx("option",{value:"TEXT",children:"Text"}),g.jsx("option",{value:"QUIZ",children:"Quiz"})]})]})]}),g.jsx("div",{children:Q.type==="QUIZ"?B(F,G,Q.content):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsx("label",{className:"text-xs text-gray-500 block",children:Q.type==="VIDEO"?"Video URL / Embed Link":"Content (Markdown)"}),Q.type==="TEXT"&&g.jsx("button",{onClick:()=>D(F,G),disabled:p===Q.id,className:"text-xs flex items-center gap-1 text-primary-600 hover:text-primary-700 font-medium",children:p===Q.id?g.jsx("span",{className:"animate-pulse",children:"Writing..."}):g.jsxs(g.Fragment,{children:[g.jsx(Fr,{className:"h-3 w-3"})," Write with AI"]})})]}),g.jsx("textarea",{rows:Q.type==="TEXT"?5:1,value:Q.content,onChange:X=>I(F,G,"content",X.target.value),className:"w-full bg-white text-gray-900 border border-gray-300 rounded px-3 py-1.5 text-sm focus:ring-1 focus:ring-primary-500 outline-none font-mono text-xs",placeholder:Q.type==="VIDEO"?"https://...":"Enter content or use AI to generate..."})]})})]})},Q.id)),g.jsxs(Ue,{variant:"outline",size:"sm",onClick:()=>A(F),className:"w-full border-dashed border-2",children:[g.jsx(Vr,{className:"h-4 w-4 mr-2"})," Add Lesson"]})]})]},z.id)),g.jsxs(Ue,{onClick:E,size:"lg",className:"w-full py-4 bg-gray-100 text-gray-700 hover:bg-gray-200 border-2 border-dashed border-gray-300 shadow-none",children:[g.jsx(Vr,{className:"h-5 w-5 mr-2"})," Add Section"]})]})]})]})};function T4(t){const[e,n]=_.useState(null),[r,i]=_.useState([]),[o,l]=_.useState(null),[c,d]=_.useState("idle"),[f,p]=_.useState(null),[m,v]=_.useState(!0),b=_.useRef(new Map),w=_.useRef(null);_.useEffect(()=>{(async()=>{try{v(!0),p(null);const K=await ht.getCourseById(t);K?(n(K),i(K.sections||[])):p("Course not found")}catch(K){p(K.message)}finally{v(!1)}})()},[t]);const S=o&&r.flatMap(q=>q.lessons).find(q=>q.id===o)||null,E=_.useCallback(()=>{w.current&&clearTimeout(w.current),d("saving"),w.current=setTimeout(async()=>{try{const q=Array.from(b.current.entries());await Promise.all(q.map(([K,L])=>ht.saveLessonContent(K,L))),b.current.clear(),d("saved"),setTimeout(()=>d("idle"),2e3)}catch(q){d("error"),p(q.message)}},1500)},[]);_.useEffect(()=>()=>{w.current&&clearTimeout(w.current)},[]),_.useEffect(()=>{const q=K=>{b.current.size>0&&(K.preventDefault(),K.returnValue="")};return window.addEventListener("beforeunload",q),()=>window.removeEventListener("beforeunload",q)},[]);const T=_.useCallback(async q=>{if(e){d("saving");try{const K={...e,...q};await ht.updateCourse(K),n(K),d("saved"),setTimeout(()=>d("idle"),2e3)}catch(K){d("error"),p(K.message)}}},[e]),N=_.useCallback(async q=>{if(e){d("saving");try{await ht.publishCourse(e.id,q),n(K=>K?{...K,published:q}:null),d("saved"),setTimeout(()=>d("idle"),2e3)}catch(K){d("error"),p(K.message)}}},[e]),A=_.useCallback(async(q="New Section")=>{try{d("saving");const K=await ht.createSection(t,q);i(L=>[...L,K]),d("saved"),setTimeout(()=>d("idle"),2e3)}catch(K){d("error"),p(K.message)}},[t]),I=_.useCallback(async(q,K)=>{try{d("saving"),await ht.updateSection(q,{title:K}),i(L=>L.map(W=>W.id===q?{...W,title:K}:W)),d("saved"),setTimeout(()=>d("idle"),2e3)}catch(L){d("error"),p(L.message)}},[]),M=_.useCallback(async q=>{try{if(d("saving"),await ht.deleteSection(q),i(K=>K.filter(L=>L.id!==q)),o){const K=r.find(L=>L.id===q);K!=null&&K.lessons.some(L=>L.id===o)&&l(null)}d("saved"),setTimeout(()=>d("idle"),2e3)}catch(K){d("error"),p(K.message)}},[r,o]),D=_.useCallback(async q=>{i(K=>{const L=new Map(K.map(W=>[W.id,W]));return q.map((W,oe)=>({...L.get(W),order:oe}))});try{await ht.reorderSections(t,q)}catch(K){p(K.message);const L=await ht.getCourseById(t);L&&i(L.sections||[])}},[t]),R=_.useCallback(async(q,K="New Lesson")=>{try{d("saving");const L=await ht.createLesson(q,K,it.TEXT);i(W=>W.map(oe=>oe.id===q?{...oe,lessons:[...oe.lessons,L]}:oe)),l(L.id),d("saved"),setTimeout(()=>d("idle"),2e3)}catch(L){d("error"),p(L.message)}},[]),B=_.useCallback(async(q,K)=>{try{d("saving");const L={};K.title!==void 0&&(L.title=K.title),K.type!==void 0&&(L.type=K.type),K.duration!==void 0&&(L.duration=K.duration),K.content!==void 0&&(L.content=K.content),K.isLocked!==void 0&&(L.isLocked=K.isLocked),K.order!==void 0&&(L.order=K.order),await ht.updateLesson(q,L),i(W=>W.map(oe=>({...oe,lessons:oe.lessons.map(fe=>fe.id===q?{...fe,...K}:fe)}))),d("saved"),setTimeout(()=>d("idle"),2e3)}catch(L){d("error"),p(L.message)}},[]),z=_.useCallback(async q=>{try{d("saving"),await ht.deleteLesson(q),i(K=>K.map(L=>({...L,lessons:L.lessons.filter(W=>W.id!==q)}))),o===q&&l(null),d("saved"),setTimeout(()=>d("idle"),2e3)}catch(K){d("error"),p(K.message)}},[o]),F=_.useCallback(async(q,K)=>{i(L=>L.map(W=>{if(W.id!==q)return W;const oe=new Map(W.lessons.map(fe=>[fe.id,fe]));return{...W,lessons:K.map((fe,Ne)=>({...oe.get(fe),order:Ne}))}}));try{await ht.reorderLessons(q,K)}catch(L){p(L.message);const W=await ht.getCourseById(t);W&&i(W.sections||[])}},[t]),Q=_.useCallback(q=>{l(q)},[]),G=_.useCallback((q,K)=>{i(L=>L.map(W=>({...W,lessons:W.lessons.map(oe=>oe.id===q?{...oe,content:K}:oe)}))),b.current.set(q,K),E()},[E]),X=_.useCallback(async()=>{if(w.current&&clearTimeout(w.current),b.current.size!==0){d("saving");try{const q=Array.from(b.current.entries());await Promise.all(q.map(([K,L])=>ht.saveLessonContent(K,L))),b.current.clear(),d("saved"),setTimeout(()=>d("idle"),2e3)}catch(q){d("error"),p(q.message)}}},[]);return{course:e,sections:r,selectedLessonId:o,selectedLesson:S,saveStatus:c,error:f,isLoading:m,updateCourseDetails:T,publishCourse:N,addSection:A,updateSection:I,deleteSection:M,reorderSections:D,addLesson:R,updateLesson:B,deleteLesson:z,reorderLessons:F,selectLesson:Q,updateLessonContent:G,forceSave:X}}function _4({status:t}){const n={idle:{icon:jD,text:"All changes saved",className:"text-gray-400"},saving:{icon:$1,text:"Saving...",className:"text-blue-500"},saved:{icon:E0,text:"Saved",className:"text-green-500"},error:{icon:BD,text:"Error saving",className:"text-red-500"}}[t],r=n.icon;return g.jsxs("div",{className:`flex items-center gap-1.5 text-sm ${n.className} transition-colors duration-200`,children:[g.jsx(r,{className:`w-4 h-4 ${t==="saving"?"animate-spin":""}`}),g.jsx("span",{children:n.text})]})}function A4(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return _.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const Ah=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function N0(t){return"nodeType"in t}function pn(t){var e,n;return t?rl(t)?t:N0(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function k0(t){const{Document:e}=pn(t);return t instanceof e}function iu(t){return rl(t)?!1:t instanceof pn(t).HTMLElement}function p_(t){return t instanceof pn(t).SVGElement}function il(t){return t?rl(t)?t.document:N0(t)?k0(t)?t:iu(t)||p_(t)?t.ownerDocument:document:document:document}const Ar=Ah?_.useLayoutEffect:_.useEffect;function Nh(t){const e=_.useRef(t);return Ar(()=>{e.current=t}),_.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function N4(){const t=_.useRef(null),e=_.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=_.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Bc(t,e){e===void 0&&(e=[t]);const n=_.useRef(t);return Ar(()=>{n.current!==t&&(n.current=t)},e),n}function su(t,e){const n=_.useRef();return _.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function yf(t){const e=Nh(t),n=_.useRef(null),r=_.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function vf(t){const e=_.useRef();return _.useEffect(()=>{e.current=t},[t]),e.current}let Rg={};function ou(t,e){return _.useMemo(()=>{if(e)return e;const n=Rg[t]==null?0:Rg[t]+1;return Rg[t]=n,t+"-"+n},[t,e])}function m_(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>{const c=Object.entries(l);for(const[d,f]of c){const p=o[d];p!=null&&(o[d]=p+t*f)}return o},{...e})}}const Ba=m_(1),zc=m_(-1);function k4(t){return"clientX"in t&&"clientY"in t}function kh(t){if(!t)return!1;const{KeyboardEvent:e}=pn(t.target);return e&&t instanceof e}function R4(t){if(!t)return!1;const{TouchEvent:e}=pn(t.target);return e&&t instanceof e}function bf(t){if(R4(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return k4(t)?{x:t.clientX,y:t.clientY}:null}const Yr=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Yr.Translate.toString(t),Yr.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),uC="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function M4(t){return t.matches(uC)?t:t.querySelector(uC)}const I4={display:"none"};function D4(t){let{id:e,value:n}=t;return Be.createElement("div",{id:e,style:I4},n)}function O4(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Be.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function L4(){const[t,e]=_.useState("");return{announce:_.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const g_=_.createContext(null);function P4(t){const e=_.useContext(g_);_.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function U4(){const[t]=_.useState(()=>new Set),e=_.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[_.useCallback(r=>{let{type:i,event:o}=r;t.forEach(l=>{var c;return(c=l[i])==null?void 0:c.call(l,o)})},[t]),e]}const B4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},z4={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function j4(t){let{announcements:e=z4,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=B4}=t;const{announce:o,announcement:l}=L4(),c=ou("DndLiveRegion"),[d,f]=_.useState(!1);if(_.useEffect(()=>{f(!0)},[]),P4(_.useMemo(()=>({onDragStart(m){let{active:v}=m;o(e.onDragStart({active:v}))},onDragMove(m){let{active:v,over:b}=m;e.onDragMove&&o(e.onDragMove({active:v,over:b}))},onDragOver(m){let{active:v,over:b}=m;o(e.onDragOver({active:v,over:b}))},onDragEnd(m){let{active:v,over:b}=m;o(e.onDragEnd({active:v,over:b}))},onDragCancel(m){let{active:v,over:b}=m;o(e.onDragCancel({active:v,over:b}))}}),[o,e])),!d)return null;const p=Be.createElement(Be.Fragment,null,Be.createElement(D4,{id:r,value:i.draggable}),Be.createElement(O4,{id:c,announcement:l}));return n?Cs.createPortal(p,n):p}var It;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(It||(It={}));function xf(){}function wf(t,e){return _.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function y_(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return _.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Nr=Object.freeze({x:0,y:0});function v_(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function q4(t,e){const n=bf(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function b_(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function H4(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function dC(t){let{left:e,top:n,height:r,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+r},{x:e+i,y:n+r}]}function x_(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function fC(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const w_=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=fC(e,e.left,e.top),o=[];for(const l of r){const{id:c}=l,d=n.get(c);if(d){const f=v_(fC(d),i);o.push({id:c,data:{droppableContainer:l,value:f}})}}return o.sort(b_)},$4=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=dC(e),o=[];for(const l of r){const{id:c}=l,d=n.get(c);if(d){const f=dC(d),p=i.reduce((v,b,w)=>v+v_(f[w],b),0),m=Number((p/4).toFixed(4));o.push({id:c,data:{droppableContainer:l,value:m}})}}return o.sort(b_)};function V4(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),l=i-r,c=o-n;if(r<i&&n<o){const d=e.width*e.height,f=t.width*t.height,p=l*c,m=p/(d+f-p);return Number(m.toFixed(4))}return 0}const F4=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const o of r){const{id:l}=o,c=n.get(l);if(c){const d=V4(c,e);d>0&&i.push({id:l,data:{droppableContainer:o,value:d}})}}return i.sort(H4)};function G4(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function S_(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Nr}function J4(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((l,c)=>({...l,top:l.top+t*c.y,bottom:l.bottom+t*c.y,left:l.left+t*c.x,right:l.right+t*c.x}),{...n})}}const K4=J4(1);function E_(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Y4(t,e,n){const r=E_(e);if(!r)return t;const{scaleX:i,scaleY:o,x:l,y:c}=r,d=t.left-l-(1-i)*parseFloat(n),f=t.top-c-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),p=i?t.width/i:t.width,m=o?t.height/o:t.height;return{width:p,height:m,top:f,right:d+p,bottom:f+m,left:d}}const W4={ignoreTransform:!1};function sl(t,e){e===void 0&&(e=W4);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:f,transformOrigin:p}=pn(t).getComputedStyle(t);f&&(n=Y4(n,f,p))}const{top:r,left:i,width:o,height:l,bottom:c,right:d}=n;return{top:r,left:i,width:o,height:l,bottom:c,right:d}}function hC(t){return sl(t,{ignoreTransform:!0})}function X4(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Q4(t,e){return e===void 0&&(e=pn(t).getComputedStyle(t)),e.position==="fixed"}function Z4(t,e){e===void 0&&(e=pn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=e[i];return typeof o=="string"?n.test(o):!1})}function Rh(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(k0(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!iu(i)||p_(i)||n.includes(i))return n;const o=pn(t).getComputedStyle(i);return i!==t&&Z4(i,o)&&n.push(i),Q4(i,o)?n:r(i.parentNode)}return t?r(t):n}function C_(t){const[e]=Rh(t,1);return e??null}function Mg(t){return!Ah||!t?null:rl(t)?t:N0(t)?k0(t)||t===il(t).scrollingElement?window:iu(t)?t:null:null}function T_(t){return rl(t)?t.scrollX:t.scrollLeft}function __(t){return rl(t)?t.scrollY:t.scrollTop}function My(t){return{x:T_(t),y:__(t)}}var Pt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Pt||(Pt={}));function A_(t){return!Ah||!t?!1:t===document.scrollingElement}function N_(t){const e={x:0,y:0},n=A_(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,l=t.scrollTop>=r.y,c=t.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:l,isRight:c,maxScroll:r,minScroll:e}}const e3={x:.2,y:.2};function t3(t,e,n,r,i){let{top:o,left:l,right:c,bottom:d}=n;r===void 0&&(r=10),i===void 0&&(i=e3);const{isTop:f,isBottom:p,isLeft:m,isRight:v}=N_(t),b={x:0,y:0},w={x:0,y:0},S={height:e.height*i.y,width:e.width*i.x};return!f&&o<=e.top+S.height?(b.y=Pt.Backward,w.y=r*Math.abs((e.top+S.height-o)/S.height)):!p&&d>=e.bottom-S.height&&(b.y=Pt.Forward,w.y=r*Math.abs((e.bottom-S.height-d)/S.height)),!v&&c>=e.right-S.width?(b.x=Pt.Forward,w.x=r*Math.abs((e.right-S.width-c)/S.width)):!m&&l<=e.left+S.width&&(b.x=Pt.Backward,w.x=r*Math.abs((e.left+S.width-l)/S.width)),{direction:b,speed:w}}function n3(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function k_(t){return t.reduce((e,n)=>Ba(e,My(n)),Nr)}function r3(t){return t.reduce((e,n)=>e+T_(n),0)}function i3(t){return t.reduce((e,n)=>e+__(n),0)}function R_(t,e){if(e===void 0&&(e=sl),!t)return;const{top:n,left:r,bottom:i,right:o}=e(t);C_(t)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const s3=[["x",["left","right"],r3],["y",["top","bottom"],i3]];class R0{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Rh(n),i=k_(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,l,c]of s3)for(const d of l)Object.defineProperty(this,d,{get:()=>{const f=c(r),p=i[o]-f;return this.rect[d]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class gc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function o3(t){const{EventTarget:e}=pn(t);return t instanceof e?t:il(t)}function Ig(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var ar;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ar||(ar={}));function pC(t){t.preventDefault()}function a3(t){t.stopPropagation()}var Le;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Le||(Le={}));const M_={start:[Le.Space,Le.Enter],cancel:[Le.Esc],end:[Le.Space,Le.Enter,Le.Tab]},l3=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Le.Right:return{...n,x:n.x+25};case Le.Left:return{...n,x:n.x-25};case Le.Down:return{...n,y:n.y+25};case Le.Up:return{...n,y:n.y-25}}};class Mh{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new gc(il(n)),this.windowListeners=new gc(pn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ar.Resize,this.handleCancel),this.windowListeners.add(ar.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ar.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&R_(r),n(Nr)}handleKeyDown(e){if(kh(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=M_,coordinateGetter:l=l3,scrollBehavior:c="smooth"}=i,{code:d}=e;if(o.end.includes(d)){this.handleEnd(e);return}if(o.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:f}=r.current,p=f?{x:f.left,y:f.top}:Nr;this.referenceCoordinates||(this.referenceCoordinates=p);const m=l(e,{active:n,context:r.current,currentCoordinates:p});if(m){const v=zc(m,p),b={x:0,y:0},{scrollableAncestors:w}=r.current;for(const S of w){const E=e.code,{isTop:T,isRight:N,isLeft:A,isBottom:I,maxScroll:M,minScroll:D}=N_(S),R=n3(S),B={x:Math.min(E===Le.Right?R.right-R.width/2:R.right,Math.max(E===Le.Right?R.left:R.left+R.width/2,m.x)),y:Math.min(E===Le.Down?R.bottom-R.height/2:R.bottom,Math.max(E===Le.Down?R.top:R.top+R.height/2,m.y))},z=E===Le.Right&&!N||E===Le.Left&&!A,F=E===Le.Down&&!I||E===Le.Up&&!T;if(z&&B.x!==m.x){const Q=S.scrollLeft+v.x,G=E===Le.Right&&Q<=M.x||E===Le.Left&&Q>=D.x;if(G&&!v.y){S.scrollTo({left:Q,behavior:c});return}G?b.x=S.scrollLeft-Q:b.x=E===Le.Right?S.scrollLeft-M.x:S.scrollLeft-D.x,b.x&&S.scrollBy({left:-b.x,behavior:c});break}else if(F&&B.y!==m.y){const Q=S.scrollTop+v.y,G=E===Le.Down&&Q<=M.y||E===Le.Up&&Q>=D.y;if(G&&!v.x){S.scrollTo({top:Q,behavior:c});return}G?b.y=S.scrollTop-Q:b.y=E===Le.Down?S.scrollTop-M.y:S.scrollTop-D.y,b.y&&S.scrollBy({top:-b.y,behavior:c});break}}this.handleMove(e,Ba(zc(m,this.referenceCoordinates),b))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Mh.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=M_,onActivation:i}=e,{active:o}=n;const{code:l}=t.nativeEvent;if(r.start.includes(l)){const c=o.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function mC(t){return!!(t&&"distance"in t)}function gC(t){return!!(t&&"delay"in t)}class M0{constructor(e,n,r){var i;r===void 0&&(r=o3(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:l}=o;this.props=e,this.events=n,this.document=il(l),this.documentListeners=new gc(this.document),this.listeners=new gc(r),this.windowListeners=new gc(pn(l)),this.initialCoordinates=(i=bf(o))!=null?i:Nr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ar.Resize,this.handleCancel),this.windowListeners.add(ar.DragStart,pC),this.windowListeners.add(ar.VisibilityChange,this.handleCancel),this.windowListeners.add(ar.ContextMenu,pC),this.documentListeners.add(ar.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(gC(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(mC(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(ar.Click,a3,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ar.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:l,options:{activationConstraint:c}}=o;if(!i)return;const d=(n=bf(e))!=null?n:Nr,f=zc(i,d);if(!r&&c){if(mC(c)){if(c.tolerance!=null&&Ig(f,c.tolerance))return this.handleCancel();if(Ig(f,c.distance))return this.handleStart()}if(gC(c)&&Ig(f,c.tolerance))return this.handleCancel();this.handlePending(c,f);return}e.cancelable&&e.preventDefault(),l(d)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Le.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const c3={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ih extends M0{constructor(e){const{event:n}=e,r=il(n.target);super(e,c3,r)}}Ih.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const u3={move:{name:"mousemove"},end:{name:"mouseup"}};var Iy;(function(t){t[t.RightClick=2]="RightClick"})(Iy||(Iy={}));class d3 extends M0{constructor(e){super(e,u3,il(e.event.target))}}d3.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Iy.RightClick?!1:(r==null||r({event:n}),!0)}}];const Dg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class f3 extends M0{constructor(e){super(e,Dg)}static setup(){return window.addEventListener(Dg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Dg.move.name,e)};function e(){}}}f3.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var yc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(yc||(yc={}));var Sf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Sf||(Sf={}));function h3(t){let{acceleration:e,activator:n=yc.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:l=5,order:c=Sf.TreeOrder,pointerCoordinates:d,scrollableAncestors:f,scrollableAncestorRects:p,delta:m,threshold:v}=t;const b=m3({delta:m,disabled:!o}),[w,S]=N4(),E=_.useRef({x:0,y:0}),T=_.useRef({x:0,y:0}),N=_.useMemo(()=>{switch(n){case yc.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case yc.DraggableRect:return i}},[n,i,d]),A=_.useRef(null),I=_.useCallback(()=>{const D=A.current;if(!D)return;const R=E.current.x*T.current.x,B=E.current.y*T.current.y;D.scrollBy(R,B)},[]),M=_.useMemo(()=>c===Sf.TreeOrder?[...f].reverse():f,[c,f]);_.useEffect(()=>{if(!o||!f.length||!N){S();return}for(const D of M){if((r==null?void 0:r(D))===!1)continue;const R=f.indexOf(D),B=p[R];if(!B)continue;const{direction:z,speed:F}=t3(D,B,N,e,v);for(const Q of["x","y"])b[Q][z[Q]]||(F[Q]=0,z[Q]=0);if(F.x>0||F.y>0){S(),A.current=D,w(I,l),E.current=F,T.current=z;return}}E.current={x:0,y:0},T.current={x:0,y:0},S()},[e,I,r,S,o,l,JSON.stringify(N),JSON.stringify(b),w,f,M,p,JSON.stringify(v)])}const p3={x:{[Pt.Backward]:!1,[Pt.Forward]:!1},y:{[Pt.Backward]:!1,[Pt.Forward]:!1}};function m3(t){let{delta:e,disabled:n}=t;const r=vf(e);return su(i=>{if(n||!r||!i)return p3;const o={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Pt.Backward]:i.x[Pt.Backward]||o.x===-1,[Pt.Forward]:i.x[Pt.Forward]||o.x===1},y:{[Pt.Backward]:i.y[Pt.Backward]||o.y===-1,[Pt.Forward]:i.y[Pt.Forward]||o.y===1}}},[n,e,r])}function g3(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return su(i=>{var o;return e==null?null:(o=r??i)!=null?o:null},[r,e])}function y3(t,e){return _.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,r)}));return[...n,...o]},[]),[t,e])}var jc;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(jc||(jc={}));var Dy;(function(t){t.Optimized="optimized"})(Dy||(Dy={}));const yC=new Map;function v3(t,e){let{dragging:n,dependencies:r,config:i}=e;const[o,l]=_.useState(null),{frequency:c,measure:d,strategy:f}=i,p=_.useRef(t),m=E(),v=Bc(m),b=_.useCallback(function(T){T===void 0&&(T=[]),!v.current&&l(N=>N===null?T:N.concat(T.filter(A=>!N.includes(A))))},[v]),w=_.useRef(null),S=su(T=>{if(m&&!n)return yC;if(!T||T===yC||p.current!==t||o!=null){const N=new Map;for(let A of t){if(!A)continue;if(o&&o.length>0&&!o.includes(A.id)&&A.rect.current){N.set(A.id,A.rect.current);continue}const I=A.node.current,M=I?new R0(d(I),I):null;A.rect.current=M,M&&N.set(A.id,M)}return N}return T},[t,o,n,m,d]);return _.useEffect(()=>{p.current=t},[t]),_.useEffect(()=>{m||b()},[n,m]),_.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),_.useEffect(()=>{m||typeof c!="number"||w.current!==null||(w.current=setTimeout(()=>{b(),w.current=null},c))},[c,m,b,...r]),{droppableRects:S,measureDroppableContainers:b,measuringScheduled:o!=null};function E(){switch(f){case jc.Always:return!1;case jc.BeforeDragging:return n;default:return!n}}}function I0(t,e){return su(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function b3(t,e){return I0(t,e)}function x3(t){let{callback:e,disabled:n}=t;const r=Nh(e),i=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return _.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Dh(t){let{callback:e,disabled:n}=t;const r=Nh(e),i=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return _.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function w3(t){return new R0(sl(t),t)}function vC(t,e,n){e===void 0&&(e=w3);const[r,i]=_.useState(null);function o(){i(d=>{if(!t)return null;if(t.isConnected===!1){var f;return(f=d??n)!=null?f:null}const p=e(t);return JSON.stringify(d)===JSON.stringify(p)?d:p})}const l=x3({callback(d){if(t)for(const f of d){const{type:p,target:m}=f;if(p==="childList"&&m instanceof HTMLElement&&m.contains(t)){o();break}}}}),c=Dh({callback:o});return Ar(()=>{o(),t?(c==null||c.observe(t),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),l==null||l.disconnect())},[t]),r}function S3(t){const e=I0(t);return S_(t,e)}const bC=[];function E3(t){const e=_.useRef(t),n=su(r=>t?r&&r!==bC&&t&&e.current&&t.parentNode===e.current.parentNode?r:Rh(t):bC,[t]);return _.useEffect(()=>{e.current=t},[t]),n}function C3(t){const[e,n]=_.useState(null),r=_.useRef(t),i=_.useCallback(o=>{const l=Mg(o.target);l&&n(c=>c?(c.set(l,My(l)),new Map(c)):null)},[]);return _.useEffect(()=>{const o=r.current;if(t!==o){l(o);const c=t.map(d=>{const f=Mg(d);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,My(f)]):null}).filter(d=>d!=null);n(c.length?new Map(c):null),r.current=t}return()=>{l(t),l(o)};function l(c){c.forEach(d=>{const f=Mg(d);f==null||f.removeEventListener("scroll",i)})}},[i,t]),_.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,l)=>Ba(o,l),Nr):k_(t):Nr,[t,e])}function xC(t,e){e===void 0&&(e=[]);const n=_.useRef(null);return _.useEffect(()=>{n.current=null},e),_.useEffect(()=>{const r=t!==Nr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?zc(t,n.current):Nr}function T3(t){_.useEffect(()=>{if(!Ah)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function _3(t,e){return _.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=l=>{o(l,e)},n},{}),[t,e])}function I_(t){return _.useMemo(()=>t?X4(t):null,[t])}const wC=[];function A3(t,e){e===void 0&&(e=sl);const[n]=t,r=I_(n?pn(n):null),[i,o]=_.useState(wC);function l(){o(()=>t.length?t.map(d=>A_(d)?r:new R0(e(d),d)):wC)}const c=Dh({callback:l});return Ar(()=>{c==null||c.disconnect(),l(),t.forEach(d=>c==null?void 0:c.observe(d))},[t]),i}function D_(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return iu(e)?e:t}function N3(t){let{measure:e}=t;const[n,r]=_.useState(null),i=_.useCallback(f=>{for(const{target:p}of f)if(iu(p)){r(m=>{const v=e(p);return m?{...m,width:v.width,height:v.height}:v});break}},[e]),o=Dh({callback:i}),l=_.useCallback(f=>{const p=D_(f);o==null||o.disconnect(),p&&(o==null||o.observe(p)),r(p?e(p):null)},[e,o]),[c,d]=yf(l);return _.useMemo(()=>({nodeRef:c,rect:n,setRef:d}),[n,c,d])}const k3=[{sensor:Ih,options:{}},{sensor:Mh,options:{}}],R3={current:{}},rf={draggable:{measure:hC},droppable:{measure:hC,strategy:jc.WhileDragging,frequency:Dy.Optimized},dragOverlay:{measure:sl}};class vc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const M3={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new vc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:xf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:rf,measureDroppableContainers:xf,windowRect:null,measuringScheduled:!1},O_={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:xf,draggableNodes:new Map,over:null,measureDroppableContainers:xf},au=_.createContext(O_),L_=_.createContext(M3);function I3(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new vc}}}function D3(t,e){switch(e.type){case It.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case It.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case It.DragEnd:case It.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case It.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new vc(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case It.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const l=new vc(t.droppable.containers);return l.set(n,{...o,disabled:i}),{...t,droppable:{...t.droppable,containers:l}}}case It.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new vc(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function O3(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=_.useContext(au),o=vf(r),l=vf(n==null?void 0:n.id);return _.useEffect(()=>{if(!e&&!r&&o&&l!=null){if(!kh(o)||document.activeElement===o.target)return;const c=i.get(l);if(!c)return;const{activatorNode:d,node:f}=c;if(!d.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[d.current,f.current]){if(!p)continue;const m=M4(p);if(m){m.focus();break}}})}},[r,e,i,l,o]),null}function P_(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,o)=>o({transform:i,...r}),n):n}function L3(t){return _.useMemo(()=>({draggable:{...rf.draggable,...t==null?void 0:t.draggable},droppable:{...rf.droppable,...t==null?void 0:t.droppable},dragOverlay:{...rf.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function P3(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const o=_.useRef(!1),{x:l,y:c}=typeof i=="boolean"?{x:i,y:i}:i;Ar(()=>{if(!l&&!c||!e){o.current=!1;return}if(o.current||!r)return;const f=e==null?void 0:e.node.current;if(!f||f.isConnected===!1)return;const p=n(f),m=S_(p,r);if(l||(m.x=0),c||(m.y=0),o.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const v=C_(f);v&&v.scrollBy({top:m.y,left:m.x})}},[e,l,c,r,n])}const Oh=_.createContext({...Nr,scaleX:1,scaleY:1});var ys;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ys||(ys={}));const U_=_.memo(function(e){var n,r,i,o;let{id:l,accessibility:c,autoScroll:d=!0,children:f,sensors:p=k3,collisionDetection:m=F4,measuring:v,modifiers:b,...w}=e;const S=_.useReducer(D3,void 0,I3),[E,T]=S,[N,A]=U4(),[I,M]=_.useState(ys.Uninitialized),D=I===ys.Initialized,{draggable:{active:R,nodes:B,translate:z},droppable:{containers:F}}=E,Q=R!=null?B.get(R):null,G=_.useRef({initial:null,translated:null}),X=_.useMemo(()=>{var yt;return R!=null?{id:R,data:(yt=Q==null?void 0:Q.data)!=null?yt:R3,rect:G}:null},[R,Q]),q=_.useRef(null),[K,L]=_.useState(null),[W,oe]=_.useState(null),fe=Bc(w,Object.values(w)),Ne=ou("DndDescribedBy",l),U=_.useMemo(()=>F.getEnabled(),[F]),V=L3(v),{droppableRects:ne,measureDroppableContainers:se,measuringScheduled:he}=v3(U,{dragging:D,dependencies:[z.x,z.y],config:V.droppable}),ye=g3(B,R),De=_.useMemo(()=>W?bf(W):null,[W]),nt=Lo(),qe=b3(ye,V.draggable.measure);P3({activeNode:R!=null?B.get(R):null,config:nt.layoutShiftCompensation,initialRect:qe,measure:V.draggable.measure});const Pe=vC(ye,V.draggable.measure,qe),Dr=vC(ye?ye.parentElement:null),mn=_.useRef({activatorEvent:null,active:null,activeNode:ye,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:B,draggingNode:null,draggingNodeRect:null,droppableContainers:F,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ei=F.getNodeFor((n=mn.current.over)==null?void 0:n.id),qt=N3({measure:V.dragOverlay.measure}),Or=(r=qt.nodeRef.current)!=null?r:ye,Lr=D?(i=qt.rect)!=null?i:Pe:null,hu=!!(qt.nodeRef.current&&qt.rect),ll=S3(hu?null:Pe),zs=I_(Or?pn(Or):null),Vn=E3(D?ei??ye:null),Hi=A3(Vn),Do=P_(b,{transform:{x:z.x-ll.x,y:z.y-ll.y,scaleX:1,scaleY:1},activatorEvent:W,active:X,activeNodeRect:Pe,containerNodeRect:Dr,draggingNodeRect:Lr,over:mn.current.over,overlayNodeRect:qt.rect,scrollableAncestors:Vn,scrollableAncestorRects:Hi,windowRect:zs}),pu=De?Ba(De,z):null,en=C3(Vn),tp=xC(en),mu=xC(en,[Pe]),ti=Ba(Do,tp),mr=Lr?K4(Lr,Do):null,js=X&&mr?m({active:X,collisionRect:mr,droppableRects:ne,droppableContainers:U,pointerCoordinates:pu}):null,cl=x_(js,"id"),[Pr,gu]=_.useState(null),qs=hu?Do:Ba(Do,mu),an=G4(qs,(o=Pr==null?void 0:Pr.rect)!=null?o:null,Pe),Fn=_.useRef(null),tn=_.useCallback((yt,vt)=>{let{sensor:Dt,options:gn}=vt;if(q.current==null)return;const yn=B.get(q.current);if(!yn)return;const nn=yt.nativeEvent,vn=new Dt({active:q.current,activeNode:yn,event:nn,options:gn,context:mn,onAbort(kt){if(!B.get(kt))return;const{onDragAbort:Rn}=fe.current,Jn={id:kt};Rn==null||Rn(Jn),N({type:"onDragAbort",event:Jn})},onPending(kt,gr,Rn,Jn){if(!B.get(kt))return;const{onDragPending:ri}=fe.current,yr={id:kt,constraint:gr,initialCoordinates:Rn,offset:Jn};ri==null||ri(yr),N({type:"onDragPending",event:yr})},onStart(kt){const gr=q.current;if(gr==null)return;const Rn=B.get(gr);if(!Rn)return;const{onDragStart:Jn}=fe.current,ni={activatorEvent:nn,active:{id:gr,data:Rn.data,rect:G}};Cs.unstable_batchedUpdates(()=>{Jn==null||Jn(ni),M(ys.Initializing),T({type:It.DragStart,initialCoordinates:kt,active:gr}),N({type:"onDragStart",event:ni}),L(Fn.current),oe(nn)})},onMove(kt){T({type:It.DragMove,coordinates:kt})},onEnd:Gn(It.DragEnd),onCancel:Gn(It.DragCancel)});Fn.current=vn;function Gn(kt){return async function(){const{active:Rn,collisions:Jn,over:ni,scrollAdjustedTranslate:ri}=mn.current;let yr=null;if(Rn&&ri){const{cancelDrop:$i}=fe.current;yr={activatorEvent:nn,active:Rn,collisions:Jn,delta:ri,over:ni},kt===It.DragEnd&&typeof $i=="function"&&await Promise.resolve($i(yr))&&(kt=It.DragCancel)}q.current=null,Cs.unstable_batchedUpdates(()=>{T({type:kt}),M(ys.Uninitialized),gu(null),L(null),oe(null),Fn.current=null;const $i=kt===It.DragEnd?"onDragEnd":"onDragCancel";if(yr){const Kn=fe.current[$i];Kn==null||Kn(yr),N({type:$i,event:yr})}})}}},[B]),np=_.useCallback((yt,vt)=>(Dt,gn)=>{const yn=Dt.nativeEvent,nn=B.get(gn);if(q.current!==null||!nn||yn.dndKit||yn.defaultPrevented)return;const vn={active:nn};yt(Dt,vt.options,vn)===!0&&(yn.dndKit={capturedBy:vt.sensor},q.current=gn,tn(Dt,vt))},[B,tn]),yu=y3(p,np);T3(p),Ar(()=>{Pe&&I===ys.Initializing&&M(ys.Initialized)},[Pe,I]),_.useEffect(()=>{const{onDragMove:yt}=fe.current,{active:vt,activatorEvent:Dt,collisions:gn,over:yn}=mn.current;if(!vt||!Dt)return;const nn={active:vt,activatorEvent:Dt,collisions:gn,delta:{x:ti.x,y:ti.y},over:yn};Cs.unstable_batchedUpdates(()=>{yt==null||yt(nn),N({type:"onDragMove",event:nn})})},[ti.x,ti.y]),_.useEffect(()=>{const{active:yt,activatorEvent:vt,collisions:Dt,droppableContainers:gn,scrollAdjustedTranslate:yn}=mn.current;if(!yt||q.current==null||!vt||!yn)return;const{onDragOver:nn}=fe.current,vn=gn.get(cl),Gn=vn&&vn.rect.current?{id:vn.id,rect:vn.rect.current,data:vn.data,disabled:vn.disabled}:null,kt={active:yt,activatorEvent:vt,collisions:Dt,delta:{x:yn.x,y:yn.y},over:Gn};Cs.unstable_batchedUpdates(()=>{gu(Gn),nn==null||nn(kt),N({type:"onDragOver",event:kt})})},[cl]),Ar(()=>{mn.current={activatorEvent:W,active:X,activeNode:ye,collisionRect:mr,collisions:js,droppableRects:ne,draggableNodes:B,draggingNode:Or,draggingNodeRect:Lr,droppableContainers:F,over:Pr,scrollableAncestors:Vn,scrollAdjustedTranslate:ti},G.current={initial:Lr,translated:mr}},[X,ye,js,mr,B,Or,Lr,ne,F,Pr,Vn,ti]),h3({...nt,delta:z,draggingRect:mr,pointerCoordinates:pu,scrollableAncestors:Vn,scrollableAncestorRects:Hi});const rp=_.useMemo(()=>({active:X,activeNode:ye,activeNodeRect:Pe,activatorEvent:W,collisions:js,containerNodeRect:Dr,dragOverlay:qt,draggableNodes:B,droppableContainers:F,droppableRects:ne,over:Pr,measureDroppableContainers:se,scrollableAncestors:Vn,scrollableAncestorRects:Hi,measuringConfiguration:V,measuringScheduled:he,windowRect:zs}),[X,ye,Pe,W,js,Dr,qt,B,F,ne,Pr,se,Vn,Hi,V,he,zs]),Oo=_.useMemo(()=>({activatorEvent:W,activators:yu,active:X,activeNodeRect:Pe,ariaDescribedById:{draggable:Ne},dispatch:T,draggableNodes:B,over:Pr,measureDroppableContainers:se}),[W,yu,X,Pe,T,Ne,B,Pr,se]);return Be.createElement(g_.Provider,{value:A},Be.createElement(au.Provider,{value:Oo},Be.createElement(L_.Provider,{value:rp},Be.createElement(Oh.Provider,{value:an},f)),Be.createElement(O3,{disabled:(c==null?void 0:c.restoreFocus)===!1})),Be.createElement(j4,{...c,hiddenTextDescribedById:Ne}));function Lo(){const yt=(K==null?void 0:K.autoScrollEnabled)===!1,vt=typeof d=="object"?d.enabled===!1:d===!1,Dt=D&&!yt&&!vt;return typeof d=="object"?{...d,enabled:Dt}:{enabled:Dt}}}),U3=_.createContext(null),SC="button",B3="Draggable";function z3(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const o=ou(B3),{activators:l,activatorEvent:c,active:d,activeNodeRect:f,ariaDescribedById:p,draggableNodes:m,over:v}=_.useContext(au),{role:b=SC,roleDescription:w="draggable",tabIndex:S=0}=i??{},E=(d==null?void 0:d.id)===e,T=_.useContext(E?Oh:U3),[N,A]=yf(),[I,M]=yf(),D=_3(l,e),R=Bc(n);Ar(()=>(m.set(e,{id:e,key:o,node:N,activatorNode:I,data:R}),()=>{const z=m.get(e);z&&z.key===o&&m.delete(e)}),[m,e]);const B=_.useMemo(()=>({role:b,tabIndex:S,"aria-disabled":r,"aria-pressed":E&&b===SC?!0:void 0,"aria-roledescription":w,"aria-describedby":p.draggable}),[r,b,S,E,w,p.draggable]);return{active:d,activatorEvent:c,activeNodeRect:f,attributes:B,isDragging:E,listeners:r?void 0:D,node:N,over:v,setNodeRef:A,setActivatorNodeRef:M,transform:T}}function B_(){return _.useContext(L_)}const j3="Droppable",q3={timeout:25};function H3(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const o=ou(j3),{active:l,dispatch:c,over:d,measureDroppableContainers:f}=_.useContext(au),p=_.useRef({disabled:n}),m=_.useRef(!1),v=_.useRef(null),b=_.useRef(null),{disabled:w,updateMeasurementsFor:S,timeout:E}={...q3,...i},T=Bc(S??r),N=_.useCallback(()=>{if(!m.current){m.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{f(Array.isArray(T.current)?T.current:[T.current]),b.current=null},E)},[E]),A=Dh({callback:N,disabled:w||!l}),I=_.useCallback((B,z)=>{A&&(z&&(A.unobserve(z),m.current=!1),B&&A.observe(B))},[A]),[M,D]=yf(I),R=Bc(e);return _.useEffect(()=>{!A||!M.current||(A.disconnect(),m.current=!1,A.observe(M.current))},[M,A]),_.useEffect(()=>(c({type:It.RegisterDroppable,element:{id:r,key:o,disabled:n,node:M,rect:v,data:R}}),()=>c({type:It.UnregisterDroppable,key:o,id:r})),[r]),_.useEffect(()=>{n!==p.current.disabled&&(c({type:It.SetDroppableDisabled,id:r,key:o,disabled:n}),p.current.disabled=n)},[r,o,n,c]),{active:l,rect:v,isOver:(d==null?void 0:d.id)===r,node:M,over:d,setNodeRef:D}}function $3(t){let{animation:e,children:n}=t;const[r,i]=_.useState(null),[o,l]=_.useState(null),c=vf(n);return!n&&!r&&c&&i(c),Ar(()=>{if(!o)return;const d=r==null?void 0:r.key,f=r==null?void 0:r.props.id;if(d==null||f==null){i(null);return}Promise.resolve(e(f,o)).then(()=>{i(null)})},[e,r,o]),Be.createElement(Be.Fragment,null,n,r?_.cloneElement(r,{ref:l}):null)}const V3={x:0,y:0,scaleX:1,scaleY:1};function F3(t){let{children:e}=t;return Be.createElement(au.Provider,{value:O_},Be.createElement(Oh.Provider,{value:V3},e))}const G3={position:"fixed",touchAction:"none"},J3=t=>kh(t)?"transform 250ms ease":void 0,K3=_.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:i,children:o,className:l,rect:c,style:d,transform:f,transition:p=J3}=t;if(!c)return null;const m=i?f:{...f,scaleX:1,scaleY:1},v={...G3,width:c.width,height:c.height,top:c.top,left:c.left,transform:Yr.Transform.toString(m),transformOrigin:i&&r?q4(r,c):void 0,transition:typeof p=="function"?p(r):p,...d};return Be.createElement(n,{className:l,style:v,ref:e},o)}),Y3=t=>e=>{let{active:n,dragOverlay:r}=e;const i={},{styles:o,className:l}=t;if(o!=null&&o.active)for(const[c,d]of Object.entries(o.active))d!==void 0&&(i[c]=n.node.style.getPropertyValue(c),n.node.style.setProperty(c,d));if(o!=null&&o.dragOverlay)for(const[c,d]of Object.entries(o.dragOverlay))d!==void 0&&r.node.style.setProperty(c,d);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(const[d,f]of Object.entries(i))n.node.style.setProperty(d,f);l!=null&&l.active&&n.node.classList.remove(l.active)}},W3=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Yr.Transform.toString(e)},{transform:Yr.Transform.toString(n)}]},X3={duration:250,easing:"ease",keyframes:W3,sideEffects:Y3({styles:{active:{opacity:"0"}}})};function Q3(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=t;return Nh((o,l)=>{if(e===null)return;const c=n.get(o);if(!c)return;const d=c.node.current;if(!d)return;const f=D_(l);if(!f)return;const{transform:p}=pn(l).getComputedStyle(l),m=E_(p);if(!m)return;const v=typeof e=="function"?e:Z3(e);return R_(d,i.draggable.measure),v({active:{id:o,data:c.data,node:d,rect:i.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:l,rect:i.dragOverlay.measure(f)},droppableContainers:r,measuringConfiguration:i,transform:m})})}function Z3(t){const{duration:e,easing:n,sideEffects:r,keyframes:i}={...X3,...t};return o=>{let{active:l,dragOverlay:c,transform:d,...f}=o;if(!e)return;const p={x:c.rect.left-l.rect.left,y:c.rect.top-l.rect.top},m={scaleX:d.scaleX!==1?l.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?l.rect.height*d.scaleY/c.rect.height:1},v={x:d.x-p.x,y:d.y-p.y,...m},b=i({...f,active:l,dragOverlay:c,transform:{initial:d,final:v}}),[w]=b,S=b[b.length-1];if(JSON.stringify(w)===JSON.stringify(S))return;const E=r==null?void 0:r({active:l,dragOverlay:c,...f}),T=c.node.animate(b,{duration:e,easing:n,fill:"forwards"});return new Promise(N=>{T.onfinish=()=>{E==null||E(),N()}})}}let EC=0;function e5(t){return _.useMemo(()=>{if(t!=null)return EC++,EC},[t])}const z_=Be.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:i,transition:o,modifiers:l,wrapperElement:c="div",className:d,zIndex:f=999}=t;const{activatorEvent:p,active:m,activeNodeRect:v,containerNodeRect:b,draggableNodes:w,droppableContainers:S,dragOverlay:E,over:T,measuringConfiguration:N,scrollableAncestors:A,scrollableAncestorRects:I,windowRect:M}=B_(),D=_.useContext(Oh),R=e5(m==null?void 0:m.id),B=P_(l,{activatorEvent:p,active:m,activeNodeRect:v,containerNodeRect:b,draggingNodeRect:E.rect,over:T,overlayNodeRect:E.rect,scrollableAncestors:A,scrollableAncestorRects:I,transform:D,windowRect:M}),z=I0(v),F=Q3({config:r,draggableNodes:w,droppableContainers:S,measuringConfiguration:N}),Q=z?E.setRef:void 0;return Be.createElement(F3,null,Be.createElement($3,{animation:F},m&&R?Be.createElement(K3,{key:R,id:m.id,ref:Q,as:c,activatorEvent:p,adjustScale:e,className:d,transition:o,rect:z,style:{zIndex:f,...i},transform:B},n):null))});function j_(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function t5(t,e){return t.reduce((n,r,i)=>{const o=e.get(r);return o&&(n[i]=o),n},Array(t.length))}function Ud(t){return t!==null&&t>=0}function n5(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function r5(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const q_=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const o=j_(e,r,n),l=e[i],c=o[i];return!c||!l?null:{x:c.left-l.left,y:c.top-l.top,scaleX:c.width/l.width,scaleY:c.height/l.height}},Bd={scaleX:1,scaleY:1},D0=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:l}=t;const c=(e=o[n])!=null?e:r;if(!c)return null;if(i===n){const f=o[l];return f?{x:0,y:n<l?f.top+f.height-(c.top+c.height):f.top-c.top,...Bd}:null}const d=i5(o,i,n);return i>n&&i<=l?{x:0,y:-c.height-d,...Bd}:i<n&&i>=l?{x:0,y:c.height+d,...Bd}:{x:0,y:0,...Bd}};function i5(t,e,n){const r=t[e],i=t[e-1],o=t[e+1];return r?n<e?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const H_="Sortable",$_=Be.createContext({activeIndex:-1,containerId:H_,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:q_,disabled:{draggable:!1,droppable:!1}});function O0(t){let{children:e,id:n,items:r,strategy:i=q_,disabled:o=!1}=t;const{active:l,dragOverlay:c,droppableRects:d,over:f,measureDroppableContainers:p}=B_(),m=ou(H_,n),v=c.rect!==null,b=_.useMemo(()=>r.map(D=>typeof D=="object"&&"id"in D?D.id:D),[r]),w=l!=null,S=l?b.indexOf(l.id):-1,E=f?b.indexOf(f.id):-1,T=_.useRef(b),N=!n5(b,T.current),A=E!==-1&&S===-1||N,I=r5(o);Ar(()=>{N&&w&&p(b)},[N,b,w,p]),_.useEffect(()=>{T.current=b},[b]);const M=_.useMemo(()=>({activeIndex:S,containerId:m,disabled:I,disableTransforms:A,items:b,overIndex:E,useDragOverlay:v,sortedRects:t5(b,d),strategy:i}),[S,m,I.draggable,I.droppable,A,b,E,d,v,i]);return Be.createElement($_.Provider,{value:M},e)}const s5=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return j_(n,r,i).indexOf(e)},o5=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:o,newIndex:l,previousItems:c,previousContainerId:d,transition:f}=t;return!f||!r||c!==o&&i===l?!1:n?!0:l!==i&&e===d},a5={duration:200,easing:"ease"},V_="transform",l5=Yr.Transition.toString({property:V_,duration:0,easing:"linear"}),c5={roleDescription:"sortable"};function u5(t){let{disabled:e,index:n,node:r,rect:i}=t;const[o,l]=_.useState(null),c=_.useRef(n);return Ar(()=>{if(!e&&n!==c.current&&r.current){const d=i.current;if(d){const f=sl(r.current,{ignoreTransform:!0}),p={x:d.left-f.left,y:d.top-f.top,scaleX:d.width/f.width,scaleY:d.height/f.height};(p.x||p.y)&&l(p)}}n!==c.current&&(c.current=n)},[e,n,r,i]),_.useEffect(()=>{o&&l(null)},[o]),o}function L0(t){let{animateLayoutChanges:e=o5,attributes:n,disabled:r,data:i,getNewIndex:o=s5,id:l,strategy:c,resizeObserverConfig:d,transition:f=a5}=t;const{items:p,containerId:m,activeIndex:v,disabled:b,disableTransforms:w,sortedRects:S,overIndex:E,useDragOverlay:T,strategy:N}=_.useContext($_),A=d5(r,b),I=p.indexOf(l),M=_.useMemo(()=>({sortable:{containerId:m,index:I,items:p},...i}),[m,i,I,p]),D=_.useMemo(()=>p.slice(p.indexOf(l)),[p,l]),{rect:R,node:B,isOver:z,setNodeRef:F}=H3({id:l,data:M,disabled:A.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...d}}),{active:Q,activatorEvent:G,activeNodeRect:X,attributes:q,setNodeRef:K,listeners:L,isDragging:W,over:oe,setActivatorNodeRef:fe,transform:Ne}=z3({id:l,data:M,attributes:{...c5,...n},disabled:A.draggable}),U=A4(F,K),V=!!Q,ne=V&&!w&&Ud(v)&&Ud(E),se=!T&&W,he=se&&ne?Ne:null,De=ne?he??(c??N)({rects:S,activeNodeRect:X,activeIndex:v,overIndex:E,index:I}):null,nt=Ud(v)&&Ud(E)?o({id:l,items:p,activeIndex:v,overIndex:E}):I,qe=Q==null?void 0:Q.id,Pe=_.useRef({activeId:qe,items:p,newIndex:nt,containerId:m}),Dr=p!==Pe.current.items,mn=e({active:Q,containerId:m,isDragging:W,isSorting:V,id:l,index:I,items:p,newIndex:Pe.current.newIndex,previousItems:Pe.current.items,previousContainerId:Pe.current.containerId,transition:f,wasDragging:Pe.current.activeId!=null}),ei=u5({disabled:!mn,index:I,node:B,rect:R});return _.useEffect(()=>{V&&Pe.current.newIndex!==nt&&(Pe.current.newIndex=nt),m!==Pe.current.containerId&&(Pe.current.containerId=m),p!==Pe.current.items&&(Pe.current.items=p)},[V,nt,m,p]),_.useEffect(()=>{if(qe===Pe.current.activeId)return;if(qe!=null&&Pe.current.activeId==null){Pe.current.activeId=qe;return}const Or=setTimeout(()=>{Pe.current.activeId=qe},50);return()=>clearTimeout(Or)},[qe]),{active:Q,activeIndex:v,attributes:q,data:M,rect:R,index:I,newIndex:nt,items:p,isOver:z,isSorting:V,isDragging:W,listeners:L,node:B,overIndex:E,over:oe,setNodeRef:U,setActivatorNodeRef:fe,setDroppableNodeRef:F,setDraggableNodeRef:K,transform:ei??De,transition:qt()};function qt(){if(ei||Dr&&Pe.current.newIndex===I)return l5;if(!(se&&!kh(G)||!f)&&(V||mn))return Yr.Transition.toString({...f,property:V_})}}function d5(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Ef(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const f5=[Le.Down,Le.Right,Le.Up,Le.Left],F_=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:o,over:l,scrollableAncestors:c}}=e;if(f5.includes(t.code)){if(t.preventDefault(),!n||!r)return;const d=[];o.getEnabled().forEach(m=>{if(!m||m!=null&&m.disabled)return;const v=i.get(m.id);if(v)switch(t.code){case Le.Down:r.top<v.top&&d.push(m);break;case Le.Up:r.top>v.top&&d.push(m);break;case Le.Left:r.left>v.left&&d.push(m);break;case Le.Right:r.left<v.left&&d.push(m);break}});const f=$4({collisionRect:r,droppableRects:i,droppableContainers:d});let p=x_(f,"id");if(p===(l==null?void 0:l.id)&&f.length>1&&(p=f[1].id),p!=null){const m=o.get(n.id),v=o.get(p),b=v?i.get(v.id):null,w=v==null?void 0:v.node.current;if(w&&b&&m&&v){const E=Rh(w).some((D,R)=>c[R]!==D),T=G_(m,v),N=h5(m,v),A=E||!T?{x:0,y:0}:{x:N?r.width-b.width:0,y:N?r.height-b.height:0},I={x:b.left,y:b.top};return A.x&&A.y?I:zc(I,A)}}}};function G_(t,e){return!Ef(t)||!Ef(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function h5(t,e){return!Ef(t)||!Ef(e)||!G_(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const p5={[it.TEXT]:$a,[it.VIDEO]:T0,[it.QUIZ]:Rc,[it.ASSIGNMENT]:z1},m5={[it.TEXT]:"text-blue-500",[it.VIDEO]:"text-purple-500",[it.QUIZ]:"text-amber-500",[it.ASSIGNMENT]:"text-green-500"};function g5({lesson:t,isSelected:e,onSelect:n,onUpdate:r,onDelete:i}){const[o,l]=_.useState(!1),[c,d]=_.useState(t.title),[f,p]=_.useState(!1),m=_.useRef(null),v=_.useRef(null),{attributes:b,listeners:w,setNodeRef:S,transform:E,transition:T,isDragging:N}=L0({id:t.id}),A={transform:Yr.Transform.toString(E),transition:T,opacity:N?.5:1},I=p5[t.type],M=m5[t.type];_.useEffect(()=>{o&&m.current&&(m.current.focus(),m.current.select())},[o]),_.useEffect(()=>{const B=z=>{v.current&&!v.current.contains(z.target)&&p(!1)};return f&&document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[f]);const D=()=>{c.trim()&&c!==t.title?r({title:c.trim()}):d(t.title),l(!1)},R=B=>{B.key==="Enter"?D():B.key==="Escape"&&(d(t.title),l(!1))};return g.jsxs("div",{ref:S,style:A,className:`group flex items-center gap-1 px-2 py-1.5 my-0.5 rounded-md transition-colors cursor-pointer ${e?"bg-blue-100 border border-blue-300":N?"bg-blue-50":"hover:bg-gray-100"}`,onClick:n,children:[g.jsx("button",{...b,...w,onClick:B=>B.stopPropagation(),className:"p-0.5 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-100",children:g.jsx(xh,{className:"w-3 h-3"})}),g.jsx(I,{className:`w-4 h-4 ${M} flex-shrink-0`}),g.jsx("div",{className:"flex-1 min-w-0",children:o?g.jsx("input",{ref:m,type:"text",value:c,onChange:B=>d(B.target.value),onBlur:D,onKeyDown:R,onClick:B=>B.stopPropagation(),className:"w-full px-1 py-0.5 text-sm border border-blue-400 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}):g.jsx("span",{className:"block truncate text-sm text-gray-700",children:t.title})}),g.jsxs("span",{className:"text-xs text-gray-400 mr-1",children:[t.duration,"m"]}),t.isLocked&&g.jsx(Mc,{className:"w-3 h-3 text-gray-400"}),g.jsxs("div",{className:"relative",ref:v,children:[g.jsx("button",{onClick:B=>{B.stopPropagation(),p(!f)},className:"p-0.5 text-gray-400 hover:text-gray-600 opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(j1,{className:"w-4 h-4"})}),f&&g.jsxs("div",{className:"absolute right-0 top-full mt-1 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-20 py-1",children:[g.jsxs("button",{onClick:B=>{B.stopPropagation(),p(!1),l(!0)},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[g.jsx(F1,{className:"w-4 h-4"}),"Rename"]}),g.jsx("button",{onClick:B=>{B.stopPropagation(),p(!1),r({isLocked:!t.isLocked})},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100",children:t.isLocked?g.jsxs(g.Fragment,{children:[g.jsx(V1,{className:"w-4 h-4"}),"Unlock"]}):g.jsxs(g.Fragment,{children:[g.jsx(Mc,{className:"w-4 h-4"}),"Lock"]})}),g.jsx("hr",{className:"my-1"}),g.jsxs("button",{onClick:B=>{B.stopPropagation(),p(!1),confirm("Delete this lesson?")&&i()},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:[g.jsx(Nn,{className:"w-4 h-4"}),"Delete"]})]})]})]})}function y5({section:t,isExpanded:e,selectedLessonId:n,onToggle:r,onUpdate:i,onDelete:o,onAddLesson:l,onSelectLesson:c,onUpdateLesson:d,onDeleteLesson:f,onReorderLessons:p}){const[m,v]=_.useState(!1),[b,w]=_.useState(t.title),[S,E]=_.useState(!1),T=_.useRef(null),N=_.useRef(null),{attributes:A,listeners:I,setNodeRef:M,transform:D,transition:R,isDragging:B}=L0({id:t.id}),z={transform:Yr.Transform.toString(D),transition:R,opacity:B?.5:1};_.useEffect(()=>{m&&T.current&&(T.current.focus(),T.current.select())},[m]),_.useEffect(()=>{const G=X=>{N.current&&!N.current.contains(X.target)&&E(!1)};return S&&document.addEventListener("mousedown",G),()=>document.removeEventListener("mousedown",G)},[S]);const F=()=>{b.trim()&&b!==t.title?i(b.trim()):w(t.title),v(!1)},Q=G=>{G.key==="Enter"?F():G.key==="Escape"&&(w(t.title),v(!1))};return g.jsxs("div",{ref:M,style:z,className:"mb-2",children:[g.jsxs("div",{className:`group flex items-center gap-1 px-2 py-2 rounded-lg transition-colors ${B?"bg-blue-50":"hover:bg-gray-50"}`,children:[g.jsx("button",{...A,...I,className:"p-1 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing",children:g.jsx(xh,{className:"w-4 h-4"})}),g.jsx("button",{onClick:r,className:"p-1 text-gray-500 hover:text-gray-700",children:e?g.jsx(TD,{className:"w-4 h-4"}):g.jsx(hf,{className:"w-4 h-4"})}),g.jsx("div",{className:"flex-1 min-w-0",children:m?g.jsx("input",{ref:T,type:"text",value:b,onChange:G=>w(G.target.value),onBlur:F,onKeyDown:Q,className:"w-full px-2 py-1 text-sm font-medium border border-blue-400 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}):g.jsx("span",{className:"block truncate text-sm font-medium text-gray-900 cursor-pointer",onDoubleClick:()=>v(!0),children:t.title})}),g.jsx("span",{className:"text-xs text-gray-400 mr-1",children:t.lessons.length}),g.jsxs("div",{className:"relative",ref:N,children:[g.jsx("button",{onClick:()=>E(!S),className:"p-1 text-gray-400 hover:text-gray-600 opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(j1,{className:"w-4 h-4"})}),S&&g.jsxs("div",{className:"absolute right-0 top-full mt-1 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-20 py-1",children:[g.jsxs("button",{onClick:()=>{E(!1),v(!0)},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[g.jsx(F1,{className:"w-4 h-4"}),"Rename"]}),g.jsxs("button",{onClick:()=>{E(!1),l()},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[g.jsx(Vr,{className:"w-4 h-4"}),"Add Lesson"]}),g.jsx("hr",{className:"my-1"}),g.jsxs("button",{onClick:()=>{E(!1),confirm("Delete this section and all its lessons?")&&o()},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:[g.jsx(Nn,{className:"w-4 h-4"}),"Delete"]})]})]})]}),e&&g.jsxs("div",{className:"ml-6 pl-2 border-l border-gray-200",children:[g.jsx(O0,{items:t.lessons.map(G=>G.id),strategy:D0,children:t.lessons.map(G=>g.jsx(g5,{lesson:G,isSelected:n===G.id,onSelect:()=>c(G.id),onUpdate:X=>d(G.id,X),onDelete:()=>f(G.id)},G.id))}),t.lessons.length===0&&g.jsx("div",{className:"py-3 text-center",children:g.jsx("button",{onClick:l,className:"text-xs text-gray-400 hover:text-blue-600 transition-colors",children:"+ Add first lesson"})})]})]})}function v5({sections:t,selectedLessonId:e,onSelectLesson:n,onAddSection:r,onUpdateSection:i,onDeleteSection:o,onReorderSections:l,onAddLesson:c,onUpdateLesson:d,onDeleteLesson:f,onReorderLessons:p}){const[m,v]=_.useState(null),[b,w]=_.useState(null),[S,E]=_.useState(new Set(t.map(D=>D.id))),T=y_(wf(Ih,{activationConstraint:{distance:8}}),wf(Mh,{coordinateGetter:F_})),N=D=>{E(R=>{const B=new Set(R);return B.has(D)?B.delete(D):B.add(D),B})},A=D=>{const{active:R}=D,B=R.id,z=t.find(Q=>Q.id===B);if(z){v(z);return}const F=t.flatMap(Q=>Q.lessons).find(Q=>Q.id===B);F&&w(F)},I=D=>{const{active:R,over:B}=D;if(v(null),w(null),!B)return;const z=R.id,F=B.id;if(z===F)return;const Q=t.findIndex(X=>X.id===z);if(Q!==-1){const X=t.findIndex(q=>q.id===F);if(X!==-1){const q=[...t],[K]=q.splice(Q,1);q.splice(X,0,K),l(q.map(L=>L.id))}return}const G=t.find(X=>X.lessons.some(q=>q.id===z));if(G){const X=G.lessons.findIndex(K=>K.id===z),q=G.lessons.findIndex(K=>K.id===F);if(q!==-1){const K=[...G.lessons],[L]=K.splice(X,1);K.splice(q,0,L),p(G.id,K.map(W=>W.id))}}},M=t.reduce((D,R)=>D+R.lessons.length,0);return g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(ff,{className:"w-5 h-5 text-gray-600"}),g.jsx("h2",{className:"font-semibold text-gray-900",children:"Curriculum"})]}),g.jsxs("span",{className:"text-xs text-gray-500",children:[t.length," sections, ",M," lessons"]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:g.jsxs(U_,{sensors:T,collisionDetection:w_,onDragStart:A,onDragEnd:I,children:[g.jsx(O0,{items:t.map(D=>D.id),strategy:D0,children:t.length===0?g.jsxs("div",{className:"text-center py-12 text-gray-500",children:[g.jsx(ff,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),g.jsx("p",{className:"text-sm",children:"No sections yet"}),g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Add a section to get started"})]}):t.map(D=>g.jsx(y5,{section:D,isExpanded:S.has(D.id),selectedLessonId:e,onToggle:()=>N(D.id),onUpdate:R=>i(D.id,R),onDelete:()=>o(D.id),onAddLesson:()=>c(D.id),onSelectLesson:n,onUpdateLesson:d,onDeleteLesson:f,onReorderLessons:R=>p(D.id,R)},D.id))}),g.jsxs(z_,{children:[m&&g.jsx("div",{className:"bg-white border border-blue-300 rounded-lg p-3 shadow-lg opacity-90",children:g.jsx("span",{className:"font-medium",children:m.title})}),b&&g.jsx("div",{className:"bg-white border border-blue-300 rounded-lg p-2 shadow-lg opacity-90",children:g.jsx("span",{className:"text-sm",children:b.title})})]})]})}),g.jsx("div",{className:"p-3 border-t border-gray-200",children:g.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[g.jsx(Vr,{className:"w-4 h-4"}),"Add Section"]})})]})}var Og={exports:{}},Lg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CC;function b5(){if(CC)return Lg;CC=1;var t=Zc();function e(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function c(m,v){var b=v(),w=r({inst:{value:b,getSnapshot:v}}),S=w[0].inst,E=w[1];return o(function(){S.value=b,S.getSnapshot=v,d(S)&&E({inst:S})},[m,b,v]),i(function(){return d(S)&&E({inst:S}),m(function(){d(S)&&E({inst:S})})},[m]),l(b),b}function d(m){var v=m.getSnapshot;m=m.value;try{var b=v();return!n(m,b)}catch{return!0}}function f(m,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return Lg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Lg}var TC;function J_(){return TC||(TC=1,Og.exports=b5()),Og.exports}var K_=J_();function Yt(t){this.content=t}Yt.prototype={constructor:Yt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Yt(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Yt(n)},addToStart:function(t,e){return new Yt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Yt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Yt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Yt.from(t),t.size?new Yt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Yt.from(t),t.size?new Yt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Yt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Yt.from=function(t){if(t instanceof Yt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Yt(e)};function Y_(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let l=0;i.text[l]==o.text[l];l++)n++;return n}if(i.content.size||o.content.size){let l=Y_(i.content,o.content,n+1);if(l!=null)return l}n+=i.nodeSize}}function W_(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let l=t.child(--i),c=e.child(--o),d=l.nodeSize;if(l==c){n-=d,r-=d;continue}if(!l.sameMarkup(c))return{a:n,b:r};if(l.isText&&l.text!=c.text){let f=0,p=Math.min(l.text.length,c.text.length);for(;f<p&&l.text[l.text.length-f-1]==c.text[c.text.length-f-1];)f++,n--,r--;return{a:n,b:r}}if(l.content.size||c.content.size){let f=W_(l.content,c.content,n-1,r-1);if(f)return f}n-=d,r-=d}}class re{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let l=0,c=0;c<n;l++){let d=this.content[l],f=c+d.nodeSize;if(f>e&&r(d,i+c,o||null,l)!==!1&&d.content.size){let p=c+1;d.nodesBetween(Math.max(0,e-p),Math.min(d.content.size,n-p),r,i+p)}c=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",l=!0;return this.nodesBetween(e,n,(c,d)=>{let f=c.isText?c.text.slice(Math.max(e,d)-d,n-d):c.isLeaf?i?typeof i=="function"?i(c):i:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&f||c.isTextblock)&&r&&(l?l=!1:o+=r),o+=f},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new re(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,l=0;l<n;o++){let c=this.content[o],d=l+c.nodeSize;d>e&&((l<e||d>n)&&(c.isText?c=c.cut(Math.max(0,e-l),Math.min(c.text.length,n-l)):c=c.cut(Math.max(0,e-l-1),Math.min(c.content.size,n-l-1))),r.push(c),i+=c.nodeSize),l=d}return new re(r,i)}cutByIndex(e,n){return e==n?re.empty:e==0&&n==this.content.length?this:new re(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new re(i,o)}addToStart(e){return new re([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new re(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Y_(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return W_(this,e,n,r)}findIndex(e){if(e==0)return zd(0,e);if(e==this.size)return zd(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e?zd(n+1,o):zd(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return re.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new re(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return re.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new re(n||e,r)}static from(e){if(!e)return re.empty;if(e instanceof re)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new re([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}re.empty=new re([],0);const Pg={index:0,offset:0};function zd(t,e){return Pg.index=t,Pg.offset=e,Pg}function Cf(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Cf(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Cf(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let We=class Oy{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Cf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Oy.none;if(e instanceof Oy)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};We.none=[];class Tf extends Error{}class le{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Q_(this.content,e+this.openStart,n);return r&&new le(r,this.openStart,this.openEnd)}removeBetween(e,n){return new le(X_(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return le.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new le(re.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new le(e,r,i)}}le.empty=new le(re.empty,0,0);function X_(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:l,offset:c}=t.findIndex(n);if(i==e||o.isText){if(c!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(X_(o.content,e-i-1,n-i-1)))}function Q_(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),l=t.maybeChild(i);if(o==e||l.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let c=Q_(l.content,e-o-1,n,l);return c&&t.replaceChild(i,l.copy(c))}function x5(t,e,n){if(n.openStart>t.depth)throw new Tf("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Tf("Inconsistent open depths");return Z_(t,e,n,0)}function Z_(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let l=Z_(t,e,n,r+1);return o.copy(o.content.replaceChild(i,l))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let l=t.parent,c=l.content;return bo(l,c.cut(0,t.parentOffset).append(n.content).append(c.cut(e.parentOffset)))}else{let{start:l,end:c}=w5(n,t);return bo(o,tA(t,l,c,e,r))}else return bo(o,_f(t,e,r))}function eA(t,e){if(!e.type.compatibleContent(t.type))throw new Tf("Cannot join "+e.type.name+" onto "+t.type.name)}function Ly(t,e,n){let r=t.node(n);return eA(r,e.node(n)),r}function vo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function bc(t,e,n,r){let i=(e||t).node(n),o=0,l=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(vo(t.nodeAfter,r),o++));for(let c=o;c<l;c++)vo(i.child(c),r);e&&e.depth==n&&e.textOffset&&vo(e.nodeBefore,r)}function bo(t,e){return t.type.checkContent(e),t.copy(e)}function tA(t,e,n,r,i){let o=t.depth>i&&Ly(t,e,i+1),l=r.depth>i&&Ly(n,r,i+1),c=[];return bc(null,t,i,c),o&&l&&e.index(i)==n.index(i)?(eA(o,l),vo(bo(o,tA(t,e,n,r,i+1)),c)):(o&&vo(bo(o,_f(t,e,i+1)),c),bc(e,n,i,c),l&&vo(bo(l,_f(n,r,i+1)),c)),bc(r,null,i,c),new re(c)}function _f(t,e,n){let r=[];if(bc(null,t,n,r),t.depth>n){let i=Ly(t,e,n+1);vo(bo(i,_f(t,e,n+1)),r)}return bc(e,null,n,r),new re(r)}function w5(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(re.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class qc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return We.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let c=r;r=i,i=c}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!i||!o[l].isInSet(i.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Af(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let l=e;;){let{index:c,offset:d}=l.content.findIndex(o),f=o-d;if(r.push(l,c,i+d),!f||(l=l.child(c),l.isText))break;o=f-1,i+=d+1}return new qc(n,r,o)}static resolveCached(e,n){let r=_C.get(e);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==n)return l}else _C.set(e,r=new S5);let i=r.elts[r.i]=qc.resolve(e,n);return r.i=(r.i+1)%E5,i}}class S5{constructor(){this.elts=[],this.i=0}}const E5=12,_C=new WeakMap;class Af{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const C5=Object.create(null);let Ns=class Py{constructor(e,n,r,i=We.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||re.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Cf(this.attrs,n||e.defaultAttrs||C5)&&We.sameSet(this.marks,r||We.none)}copy(e=null){return e==this.content?this:new Py(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Py(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return le.empty;let i=this.resolve(e),o=this.resolve(n),l=r?0:i.sharedDepth(n),c=i.start(l),f=i.node(l).content.cut(i.pos-c,o.pos-c);return new le(f,i.depth-l,o.depth-l)}replace(e,n,r){return x5(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return qc.resolveCached(this,e)}resolveNoCache(e){return qc.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),nA(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=re.empty,i=0,o=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,i,o),c=l&&l.matchFragment(this.content,n);if(!c||!c.validEnd)return!1;for(let d=i;d<o;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),l=o&&o.matchFragment(this.content,n);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=We.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!We.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=re.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};Ns.prototype.text=void 0;class Nf extends Ns{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):nA(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Nf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Nf(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function nA(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Eo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new T5(e,n);if(r.next==null)return Eo.empty;let i=rA(r);r.next&&r.err("Unexpected trailing text");let o=I5(M5(i));return D5(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(l,c){let d=l.matchFragment(e,r);if(d&&(!n||d.validEnd))return re.from(c.map(f=>f.createAndFill()));for(let f=0;f<l.next.length;f++){let{type:p,next:m}=l.next[f];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(m)==-1){i.push(m);let v=o(m,c.concat(p));if(v)return v}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let l=[];for(let c=i;c.type;c=c.via)l.push(c.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:c,next:d}=o.next[l];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in n)&&(!i.type||d.validEnd)&&(r.push({match:c.contentMatch,type:c,via:i}),n[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return o}).join(`
`)}}Eo.empty=new Eo(!0);class T5{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function rA(t){let e=[];do e.push(_5(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function _5(t){let e=[];do e.push(A5(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function A5(t){let e=R5(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=N5(t,e);else break;return e}function AC(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function N5(t,e){let n=AC(t),r=n;return t.eat(",")&&(t.next!="}"?r=AC(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function k5(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let l=n[o];l.isInGroup(e)&&i.push(l)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function R5(t){if(t.eat("(")){let e=rA(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=k5(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function M5(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(l,c,d){let f={term:d,to:c};return e[l].push(f),f}function i(l,c){l.forEach(d=>d.to=c)}function o(l,c){if(l.type=="choice")return l.exprs.reduce((d,f)=>d.concat(o(f,c)),[]);if(l.type=="seq")for(let d=0;;d++){let f=o(l.exprs[d],c);if(d==l.exprs.length-1)return f;i(f,c=n())}else if(l.type=="star"){let d=n();return r(c,d),i(o(l.expr,d),d),[r(d)]}else if(l.type=="plus"){let d=n();return i(o(l.expr,c),d),i(o(l.expr,d),d),[r(d)]}else{if(l.type=="opt")return[r(c)].concat(o(l.expr,c));if(l.type=="range"){let d=c;for(let f=0;f<l.min;f++){let p=n();i(o(l.expr,d),p),d=p}if(l.max==-1)i(o(l.expr,d),d);else for(let f=l.min;f<l.max;f++){let p=n();r(d,p),i(o(l.expr,d),p),d=p}return[r(d)]}else{if(l.type=="name")return[r(c,void 0,l.value)];throw new Error("Unknown expr type")}}}}function iA(t,e){return e-t}function NC(t,e){let n=[];return r(e),n.sort(iA);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let l=0;l<o.length;l++){let{term:c,to:d}=o[l];!c&&n.indexOf(d)==-1&&r(d)}}}function I5(t){let e=Object.create(null);return n(NC(t,0));function n(r){let i=[];r.forEach(l=>{t[l].forEach(({term:c,to:d})=>{if(!c)return;let f;for(let p=0;p<i.length;p++)i[p][0]==c&&(f=i[p][1]);NC(t,d).forEach(p=>{f||i.push([c,f=[]]),f.indexOf(p)==-1&&f.push(p)})})});let o=e[r.join(",")]=new Eo(r.indexOf(t.length-1)>-1);for(let l=0;l<i.length;l++){let c=i[l][1].sort(iA);o.next.push({type:i[l][0],next:e[c.join(",")]||n(c)})}return o}}function D5(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,l=[];for(let c=0;c<i.next.length;c++){let{type:d,next:f}=i.next[c];l.push(d.name),o&&!(d.isText||d.hasRequiredAttrs())&&(o=!1),r.indexOf(f)==-1&&r.push(f)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function sA(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function oA(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function aA(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function lA(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new L5(t,r,e[r]);return n}let kC=class cA{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=lA(e,r.attrs),this.defaultAttrs=sA(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Eo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:oA(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ns(this,this.computeAttrs(e),re.from(n),We.setFrom(r))}createChecked(e=null,n,r){return n=re.from(n),this.checkContent(n),new Ns(this,this.computeAttrs(e),n,We.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=re.from(n),n.size){let l=this.contentMatch.fillBefore(n);if(!l)return null;n=l.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(re.empty,!0);return o?new Ns(this,e,n.append(o),We.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){aA(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:We.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,l)=>r[o]=new cA(o,n,l));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function O5(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class L5{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?O5(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Lh{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=lA(e,i.attrs),this.excluded=null;let o=sA(this.attrs);this.instance=o?new We(this,o):null}create(e=null){return!e&&this.instance?this.instance:new We(this,oA(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,l)=>r[o]=new Lh(o,i++,n,l)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){aA(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class uA{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Yt.from(e.nodes),n.marks=Yt.from(e.marks||{}),this.nodes=kC.compile(this.spec.nodes,this),this.marks=Lh.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],l=o.spec.content||"",c=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=Eo.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=c=="_"?null:c?RC(this,c.split(" ")):c==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:RC(this,l.split(" "))}this.nodeFromJSON=i=>Ns.fromJSON(this,i),this.markFromJSON=i=>We.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof kC){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Nf(r,r.defaultAttrs,e,We.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function RC(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],l=o;if(o)n.push(o);else for(let c in t.marks){let d=t.marks[c];(i=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(i)>-1)&&n.push(l=d)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function P5(t){return t.tag!=null}function U5(t){return t.style!=null}class ks{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(P5(i))this.tags.push(i);else if(U5(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new IC(this,n,!1);return r.addAll(e,We.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new IC(this,n,!0);return r.addAll(e,We.none,n.from,n.to),le.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(j5(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let l=this.styles[o],c=l.style;if(!(c.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||c.length>e.length&&(c.charCodeAt(e.length)!=61||c.slice(e.length+1)!=n))){if(l.getAttrs){let d=l.getAttrs(n);if(d===!1)continue;l.attrs=d||void 0}return l}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,l=0;for(;l<n.length;l++){let c=n[l];if((c.priority==null?50:c.priority)<o)break}n.splice(l,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(l=>{r(l=DC(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(l=>{r(l=DC(l)),l.node||l.ignore||l.mark||(l.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ks(e,ks.schemaRules(e)))}}const dA={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},B5={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},fA={ol:!0,ul:!0},Hc=1,Uy=2,xc=4;function MC(t,e,n){return e!=null?(e?Hc:0)|(e==="full"?Uy:0):t&&t.whitespace=="pre"?Hc|Uy:n&~xc}class jd{constructor(e,n,r,i,o,l){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=l,this.content=[],this.activeMarks=We.none,this.match=o||(l&xc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(re.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Hc)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=re.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(re.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!dA.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class IC{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,l=MC(null,n.preserveWhitespace,0)|(r?xc:0);i?o=new jd(i.type,i.attrs,We.none,!0,n.topMatch||i.type.contentMatch,l):r?o=new jd(null,null,We.none,!0,null,l):o=new jd(e.schema.topNodeType,null,We.none,!0,null,l),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&Uy?"full":this.localPreserveWS||(i.options&Hc)>0,{schema:l}=this.parser;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(l.linebreakReplacement.create())){let c=r.split(/\r?\n|\r/);for(let d=0;d<c.length;d++)d&&this.insertNode(l.linebreakReplacement.create(),n,!0),c[d]&&this.insertNode(l.text(c[d]),n,!/\S/.test(c[d]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let c=i.content[i.content.length-1],d=e.previousSibling;(!c||d&&d.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(r=r.slice(1))}r&&this.insertNode(l.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),c;fA.hasOwnProperty(l)&&this.parser.normalizeLists&&z5(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(c=this.parser.matchTag(e,this,r));e:if(d?d.ignore:B5.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,n);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let f,p=this.needsBlock;if(dA.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),f=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let m=d&&d.skip?n:this.readStyles(e,n);m&&this.addAll(e,m),f&&this.sync(o),this.needsBlock=p}else{let f=this.readStyles(e,n);f&&this.addElementByRule(e,d,f,d.consuming===!1?c:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],l=r.getPropertyValue(o);if(l)for(let c=void 0;;){let d=this.parser.matchStyle(o,l,this,c);if(!d)break;if(d.ignore)return null;if(d.clearMark?n=n.filter(f=>!d.clearMark(f)):n=n.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)c=d;else break}}return n}addElementByRule(e,n,r,i){let o,l;if(n.node)if(l=this.parser.schema.nodes[n.node],l.isLeaf)this.insertNode(l.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(l,n.attrs||null,r,n.preserveWhitespace);d&&(o=!0,r=d)}else{let d=this.parser.schema.marks[n.mark];r=r.concat(d.create(n.attrs))}let c=this.top;if(l&&l.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof n.contentElement=="string"?d=e.querySelector(n.contentElement):typeof n.contentElement=="function"?d=n.contentElement(e):n.contentElement&&(d=n.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}o&&this.sync(c)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let l=r?e.childNodes[r]:e.firstChild,c=i==null?null:e.childNodes[i];l!=c;l=l.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(l,n);this.findAtPoint(e,o)}findPlace(e,n,r){let i,o;for(let l=this.open,c=0;l>=0;l--){let d=this.nodes[l],f=d.findWrapping(e);if(f&&(!i||i.length>f.length+c)&&(i=f,o=d,!f.length))break;if(d.solid){if(r)break;c+=2}}if(!i)return null;this.sync(o);for(let l=0;l<i.length;l++)n=this.enterInner(i[l],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let l=We.none;for(let c of i.concat(e.marks))(o.type?o.type.allowsMarkType(c.type):OC(c.type,e.type))&&(l=c.addToSet(l));return o.content.push(e.mark(l)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let c=MC(e,o,l.options);l.options&xc&&l.content.length==0&&(c|=xc);let d=We.none;return r=r.filter(f=>(l.type?l.type.allowsMarkType(f.type):OC(f.type,e))?(d=f.addToSet(d),!1):!0),this.nodes.push(new jd(e,n,d,i,null,c)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Hc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),l=(c,d)=>{for(;c>=0;c--){let f=n[c];if(f==""){if(c==n.length-1||c==0)continue;for(;d>=o;d--)if(l(c-1,d))return!0;return!1}else{let p=d>0||d==0&&i?this.nodes[d].type:r&&d>=o?r.node(d-o).type:null;if(!p||p.name!=f&&!p.isInGroup(f))return!1;d--}}return!0};return l(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function z5(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&fA.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function j5(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function DC(t){let e={};for(let n in t)e[n]=t[n];return e}function OC(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],l=c=>{o.push(c);for(let d=0;d<c.edgeCount;d++){let{type:f,next:p}=c.edge(d);if(f==e||o.indexOf(p)<0&&l(p))return!0}};if(l(i.contentMatch))return!0}}class Ro{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Ug(n).createDocumentFragment());let i=r,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let c=0,d=0;for(;c<o.length&&d<l.marks.length;){let f=l.marks[d];if(!this.marks[f.type.name]){d++;continue}if(!f.eq(o[c][0])||f.type.spec.spanning===!1)break;c++,d++}for(;c<o.length;)i=o.pop()[1];for(;d<l.marks.length;){let f=l.marks[d++],p=this.serializeMark(f,l.isInline,n);p&&(o.push([f,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(l,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=sf(Ug(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&sf(Ug(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return sf(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ro(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=LC(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return LC(e.marks)}}function LC(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Ug(t){return t.document||window.document}const PC=new WeakMap;function q5(t){let e=PC.get(t);return e===void 0&&PC.set(t,e=H5(t)),e}function H5(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function sf(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=q5(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=i.indexOf(" ");l>0&&(n=i.slice(0,l),i=i.slice(l+1));let c,d=n?t.createElementNS(n,i):t.createElement(i),f=e[1],p=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){p=2;for(let m in f)if(f[m]!=null){let v=m.indexOf(" ");v>0?d.setAttributeNS(m.slice(0,v),m.slice(v+1),f[m]):m=="style"&&d.style?d.style.cssText=f[m]:d.setAttribute(m,f[m])}}for(let m=p;m<e.length;m++){let v=e[m];if(v===0){if(m<e.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:b,contentDOM:w}=sf(t,v,n,r);if(d.appendChild(b),w){if(c)throw new RangeError("Multiple content holes");c=w}}}return{dom:d,contentDOM:c}}const hA=65535,pA=Math.pow(2,16);function $5(t,e){return t+e*pA}function UC(t){return t&hA}function V5(t){return(t-(t&hA))/pA}const mA=1,gA=2,of=4,yA=8;class By{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&yA)>0}get deletedBefore(){return(this.delInfo&(mA|of))>0}get deletedAfter(){return(this.delInfo&(gA|of))>0}get deletedAcross(){return(this.delInfo&of)>0}}class zn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&zn.empty)return zn.empty}recover(e){let n=0,r=UC(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+V5(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?i:0);if(d>e)break;let f=this.ranges[c+o],p=this.ranges[c+l],m=d+f;if(e<=m){let v=f?e==d?-1:e==m?1:n:n,b=d+i+(v<0?0:p);if(r)return b;let w=e==(n<0?d:m)?null:$5(c/3,e-d),S=e==d?gA:e==m?mA:of;return(n<0?e!=d:e!=m)&&(S|=yA),new By(b,S,w)}i+=p-f}return r?e+i:new By(e+i,0,null)}touches(e,n){let r=0,i=UC(n),o=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?r:0);if(d>e)break;let f=this.ranges[c+o],p=d+f;if(e<=p&&c==i*3)return!0;r+=this.ranges[c+l]-f}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let l=this.ranges[i],c=l-(this.inverted?o:0),d=l+(this.inverted?0:o),f=this.ranges[i+n],p=this.ranges[i+r];e(c,c+f,d,d+p),o+=p-f}}invert(){return new zn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?zn.empty:new zn(e<0?[0,-e,0]:[0,0,e])}}zn.empty=new zn([]);class $c{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new $c(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new $c;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],c=l.mapResult(e,n);if(c.recover!=null){let d=this.getMirror(o);if(d!=null&&d>o&&d<this.to){o=d,e=this._maps[d].recover(c.recover);continue}}i|=c.delInfo,e=c.pos}return r?e:new By(e,i,null)}}const Bg=Object.create(null);class on{getMap(){return zn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Bg[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Bg)throw new RangeError("Duplicate use of step JSON ID "+e);return Bg[e]=n,n.prototype.jsonID=e,n}}class _t{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new _t(e,null)}static fail(e){return new _t(null,e)}static fromReplace(e,n,r,i){try{return _t.ok(e.replace(n,r,i))}catch(o){if(o instanceof Tf)return _t.fail(o.message);throw o}}}function P0(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(P0(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return re.fromArray(r)}class Ts extends on{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new le(P0(n.content,(l,c)=>!l.isAtom||!c.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),n.openStart,n.openEnd);return _t.fromReplace(e,this.from,this.to,o)}invert(){return new Tr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ts(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ts&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ts(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ts(n.from,n.to,e.markFromJSON(n.mark))}}on.jsonID("addMark",Ts);class Tr extends on{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new le(P0(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return _t.fromReplace(e,this.from,this.to,r)}invert(){return new Ts(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Tr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Tr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Tr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Tr(n.from,n.to,e.markFromJSON(n.mark))}}on.jsonID("removeMark",Tr);class _s extends on{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return _t.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return _t.fromReplace(e,this.pos,this.pos+1,new le(re.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new _s(this.pos,n.marks[i]);return new _s(this.pos,this.mark)}}return new Co(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new _s(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new _s(n.pos,e.markFromJSON(n.mark))}}on.jsonID("addNodeMark",_s);class Co extends on{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return _t.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return _t.fromReplace(e,this.pos,this.pos+1,new le(re.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new _s(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Co(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Co(n.pos,e.markFromJSON(n.mark))}}on.jsonID("removeNodeMark",Co);class Ut extends on{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&zy(e,this.from,this.to)?_t.fail("Structure replace would overwrite content"):_t.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new zn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ut(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ut(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ut)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?le.empty:new le(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ut(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?le.empty:new le(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ut(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ut(n.from,n.to,le.fromJSON(e,n.slice),!!n.structure)}}on.jsonID("replace",Ut);class zt extends on{constructor(e,n,r,i,o,l,c=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=l,this.structure=c}apply(e){if(this.structure&&(zy(e,this.from,this.gapFrom)||zy(e,this.gapTo,this.to)))return _t.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return _t.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?_t.fromReplace(e,this.from,this.to,r):_t.fail("Content does not fit in gap")}getMap(){return new zn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new zt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new zt(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new zt(n.from,n.to,n.gapFrom,n.gapTo,le.fromJSON(e,n.slice),n.insert,!!n.structure)}}on.jsonID("replaceAround",zt);function zy(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function F5(t,e,n,r){let i=[],o=[],l,c;t.doc.nodesBetween(e,n,(d,f,p)=>{if(!d.isInline)return;let m=d.marks;if(!r.isInSet(m)&&p.type.allowsMarkType(r.type)){let v=Math.max(f,e),b=Math.min(f+d.nodeSize,n),w=r.addToSet(m);for(let S=0;S<m.length;S++)m[S].isInSet(w)||(l&&l.to==v&&l.mark.eq(m[S])?l.to=b:i.push(l=new Tr(v,b,m[S])));c&&c.to==v?c.to=b:o.push(c=new Ts(v,b,r))}}),i.forEach(d=>t.step(d)),o.forEach(d=>t.step(d))}function G5(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(l,c)=>{if(!l.isInline)return;o++;let d=null;if(r instanceof Lh){let f=l.marks,p;for(;p=r.isInSet(f);)(d||(d=[])).push(p),f=p.removeFromSet(f)}else r?r.isInSet(l.marks)&&(d=[r]):d=l.marks;if(d&&d.length){let f=Math.min(c+l.nodeSize,n);for(let p=0;p<d.length;p++){let m=d[p],v;for(let b=0;b<i.length;b++){let w=i[b];w.step==o-1&&m.eq(i[b].style)&&(v=w)}v?(v.to=f,v.step=o):i.push({style:m,from:Math.max(c,e),to:f,step:o})}}}),i.forEach(l=>t.step(new Tr(l.from,l.to,l.style)))}function U0(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),l=[],c=e+1;for(let d=0;d<o.childCount;d++){let f=o.child(d),p=c+f.nodeSize,m=r.matchType(f.type);if(!m)l.push(new Ut(c,p,le.empty));else{r=m;for(let v=0;v<f.marks.length;v++)n.allowsMarkType(f.marks[v].type)||t.step(new Tr(c,p,f.marks[v]));if(i&&f.isText&&n.whitespace!="pre"){let v,b=/\r?\n|\r/g,w;for(;v=b.exec(f.text);)w||(w=new le(re.from(n.schema.text(" ",n.allowedMarks(f.marks))),0,0)),l.push(new Ut(c+v.index,c+v.index+v[0].length,w))}}c=p}if(!r.validEnd){let d=r.fillBefore(re.empty,!0);t.replace(c,c,new le(d,0,0))}for(let d=l.length-1;d>=0;d--)t.step(l[d])}function J5(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ol(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,o=0;;--r){let l=t.$from.node(r),c=t.$from.index(r)+i,d=t.$to.indexAfter(r)-o;if(r<t.depth&&l.canReplace(c,d,n))return r;if(r==0||l.type.spec.isolating||!J5(l,c,d))break;c&&(i=1),d<l.childCount&&(o=1)}return null}function K5(t,e,n){let{$from:r,$to:i,depth:o}=e,l=r.before(o+1),c=i.after(o+1),d=l,f=c,p=re.empty,m=0;for(let w=o,S=!1;w>n;w--)S||r.index(w)>0?(S=!0,p=re.from(r.node(w).copy(p)),m++):d--;let v=re.empty,b=0;for(let w=o,S=!1;w>n;w--)S||i.after(w+1)<i.end(w)?(S=!0,v=re.from(i.node(w).copy(v)),b++):f++;t.step(new zt(d,f,l,c,new le(p.append(v),m,b),p.size-m,!0))}function B0(t,e,n=null,r=t){let i=Y5(t,e),o=i&&W5(r,e);return o?i.map(BC).concat({type:e,attrs:n}).concat(o.map(BC)):null}function BC(t){return{type:t,attrs:null}}function Y5(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return n.canReplaceWith(r,i,l)?o:null}function W5(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let d=(l.length?l[l.length-1]:e).contentMatch;for(let f=r;d&&f<i;f++)d=d.matchType(n.child(f).type);return!d||!d.validEnd?null:l}function X5(t,e,n){let r=re.empty;for(let l=n.length-1;l>=0;l--){if(r.size){let c=n[l].type.contentMatch.matchFragment(r);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=re.from(n[l].type.create(n[l].attrs,r))}let i=e.start,o=e.end;t.step(new zt(i,o,i,o,new le(r,0,0),n.length,!0))}function Q5(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(l,c)=>{let d=typeof i=="function"?i(l):i;if(l.isTextblock&&!l.hasMarkup(r,d)&&Z5(t.doc,t.mapping.slice(o).map(c),r)){let f=null;if(r.schema.linebreakReplacement){let b=r.whitespace=="pre",w=!!r.contentMatch.matchType(r.schema.linebreakReplacement);b&&!w?f=!1:!b&&w&&(f=!0)}f===!1&&bA(t,l,c,o),U0(t,t.mapping.slice(o).map(c,1),r,void 0,f===null);let p=t.mapping.slice(o),m=p.map(c,1),v=p.map(c+l.nodeSize,1);return t.step(new zt(m,v,m+1,v-1,new le(re.from(r.create(d,null,l.marks)),0,0),1,!0)),f===!0&&vA(t,l,c,o),!1}})}function vA(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let l,c=/\r?\n|\r/g;for(;l=c.exec(i.text);){let d=t.mapping.slice(r).map(n+1+o+l.index);t.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function bA(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let l=t.mapping.slice(r).map(n+1+o);t.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function Z5(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function eB(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let l=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,l);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new zt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new le(re.from(l),0,0),1,!0))}function Di(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,l=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let f=i.depth-1,p=n-2;f>o;f--,p--){let m=i.node(f),v=i.index(f);if(m.type.spec.isolating)return!1;let b=m.content.cutByIndex(v,m.childCount),w=r&&r[p+1];w&&(b=b.replaceChild(0,w.type.create(w.attrs)));let S=r&&r[p]||m;if(!m.canReplace(v+1,m.childCount)||!S.type.validContent(b))return!1}let c=i.indexAfter(o),d=r&&r[0];return i.node(o).canReplaceWith(c,c,d?d.type:i.node(o+1).type)}function tB(t,e,n=1,r){let i=t.doc.resolve(e),o=re.empty,l=re.empty;for(let c=i.depth,d=i.depth-n,f=n-1;c>d;c--,f--){o=re.from(i.node(c).copy(o));let p=r&&r[f];l=re.from(p?p.type.create(p.attrs,l):i.node(c).copy(l))}t.step(new Ut(e,e,new le(o.append(l),n,n),!0))}function Ps(t,e){let n=t.resolve(e),r=n.index();return xA(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function nB(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),l=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(l),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function xA(t,e){return!!(t&&e&&!t.isLeaf&&nB(t,e))}function Ph(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,l,c=r.index(i);if(i==r.depth?(o=r.nodeBefore,l=r.nodeAfter):n>0?(o=r.node(i+1),c++,l=r.node(i).maybeChild(c)):(o=r.node(i).maybeChild(c-1),l=r.node(i+1)),o&&!o.isTextblock&&xA(o,l)&&r.node(i).canReplace(c,c+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function rB(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),l=o.node().type;if(i&&l.inlineContent){let p=l.whitespace=="pre",m=!!l.contentMatch.matchType(i);p&&!m?r=!1:!p&&m&&(r=!0)}let c=t.steps.length;if(r===!1){let p=t.doc.resolve(e+n);bA(t,p.node(),p.before(),c)}l.inlineContent&&U0(t,e+n-1,l,o.node().contentMatchAt(o.index()),r==null);let d=t.mapping.slice(c),f=d.map(e-n);if(t.step(new Ut(f,d.map(e+n,-1),le.empty,!0)),r===!0){let p=t.doc.resolve(f);vA(t,p.node(),p.before(),t.steps.length)}return t}function iB(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function wA(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let l=r.depth;l>=0;l--){let c=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,d=r.index(l)+(c>0?1:0),f=r.node(l),p=!1;if(o==1)p=f.canReplace(d,d,i);else{let m=f.contentMatchAt(d).findWrapping(i.firstChild.type);p=m&&f.canReplaceWith(d,d,m[0])}if(p)return c==0?r.pos:c<0?r.before(l+1):r.after(l+1)}return null}function Uh(t,e,n=e,r=le.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return SA(i,o,r)?new Ut(e,n,r):new sB(i,o,r).fit()}function SA(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class sB{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=re.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=re.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,l=r.depth,c=i.depth;for(;l&&c&&o.childCount==1;)o=o.firstChild.content,l--,c--;let d=new le(o,l,c);return e>-1?new zt(r.pos,e,this.$to.pos,this.$to.end(),d,n):d.size||r.pos!=this.$to.pos?new Ut(r.pos,i.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=zg(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let l=i.firstChild;for(let c=this.depth;c>=0;c--){let{type:d,match:f}=this.frontier[c],p,m=null;if(n==1&&(l?f.matchType(l.type)||(m=f.fillBefore(re.from(l),!1)):o&&d.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:c,parent:o,inject:m};if(n==2&&l&&(p=f.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:c,parent:o,wrap:p};if(o&&f.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=zg(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new le(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=zg(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new le(ac(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new le(ac(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let S=0;S<o.length;S++)this.openFrontierNode(o[S]);let l=this.unplaced,c=r?r.content:l.content,d=l.openStart-e,f=0,p=[],{match:m,type:v}=this.frontier[n];if(i){for(let S=0;S<i.childCount;S++)p.push(i.child(S));m=m.matchFragment(i)}let b=c.size+e-(l.content.size-l.openEnd);for(;f<c.childCount;){let S=c.child(f),E=m.matchType(S.type);if(!E)break;f++,(f>1||d==0||S.content.size)&&(m=E,p.push(EA(S.mark(v.allowedMarks(S.marks)),f==1?d:0,f==c.childCount?b:-1)))}let w=f==c.childCount;w||(b=-1),this.placed=lc(this.placed,n,re.from(p)),this.frontier[n].match=m,w&&b<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,E=c;S<b;S++){let T=E.lastChild;this.frontier.push({type:T.type,match:T.contentMatchAt(T.childCount)}),E=T.content}this.unplaced=w?e==0?le.empty:new le(ac(l.content,e-1,1),e-1,b<0?l.openEnd:e-1):new le(ac(l.content,e,f),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!jg(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),l=jg(e,n,i,r,o);if(l){for(let c=n-1;c>=0;c--){let{match:d,type:f}=this.frontier[c],p=jg(e,c,f,d,!0);if(!p||p.childCount)continue e}return{depth:n,fit:l,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=lc(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=lc(this.placed,this.depth,re.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(re.empty,!0);n.childCount&&(this.placed=lc(this.placed,this.frontier.length,n))}}function ac(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ac(t.firstChild.content,e-1,n)))}function lc(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(lc(t.lastChild.content,e-1,n)))}function zg(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function EA(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,EA(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(re.empty,!0)))),t.copy(r)}function jg(t,e,n,r,i){let o=t.node(e),l=i?t.indexAfter(e):t.index(e);if(l==o.childCount&&!n.compatibleContent(o.type))return null;let c=r.fillBefore(o.content,!0,l);return c&&!oB(n,o.content,l)?c:null}function oB(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function aB(t){return t.spec.defining||t.spec.definingForContent}function lB(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(SA(i,o,r))return t.step(new Ut(e,n,r));let l=TA(i,o);l[l.length-1]==0&&l.pop();let c=-(i.depth+1);l.unshift(c);for(let v=i.depth,b=i.pos-1;v>0;v--,b--){let w=i.node(v).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;l.indexOf(v)>-1?c=v:i.before(v)==b&&l.splice(1,0,-v)}let d=l.indexOf(c),f=[],p=r.openStart;for(let v=r.content,b=0;;b++){let w=v.firstChild;if(f.push(w),b==r.openStart)break;v=w.content}for(let v=p-1;v>=0;v--){let b=f[v],w=aB(b.type);if(w&&!b.sameMarkup(i.node(Math.abs(c)-1)))p=v;else if(w||!b.type.isTextblock)break}for(let v=r.openStart;v>=0;v--){let b=(v+p+1)%(r.openStart+1),w=f[b];if(w)for(let S=0;S<l.length;S++){let E=l[(S+d)%l.length],T=!0;E<0&&(T=!1,E=-E);let N=i.node(E-1),A=i.index(E-1);if(N.canReplaceWith(A,A,w.type,w.marks))return t.replace(i.before(E),T?o.after(E):n,new le(CA(r.content,0,r.openStart,b),b,r.openEnd))}}let m=t.steps.length;for(let v=l.length-1;v>=0&&(t.replace(e,n,r),!(t.steps.length>m));v--){let b=l[v];b<0||(e=i.before(b),n=o.after(b))}}function CA(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(CA(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),l=o.fillBefore(t).append(t);t=l.append(o.matchFragment(l).fillBefore(re.empty,!0))}return t}function cB(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=iB(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new le(re.from(r),0,0))}function uB(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=TA(r,i);for(let l=0;l<o.length;l++){let c=o[l],d=l==o.length-1;if(d&&c==0||r.node(c).type.contentMatch.validEnd)return t.delete(r.start(c),i.end(c));if(c>0&&(d||r.node(c-1).canReplace(r.index(c-1),i.indexAfter(c-1))))return t.delete(r.before(c),i.after(c))}for(let l=1;l<=r.depth&&l<=i.depth;l++)if(e-r.start(l)==r.depth-l&&n>r.end(l)&&i.end(l)-n!=i.depth-l&&r.start(l-1)==i.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),i.index(l-1)))return t.delete(r.before(l),n);t.delete(e,n)}function TA(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class za extends on{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return _t.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return _t.fromReplace(e,this.pos,this.pos+1,new le(re.from(i),0,n.isLeaf?0:1))}getMap(){return zn.empty}invert(e){return new za(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new za(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new za(n.pos,n.attr,n.value)}}on.jsonID("attr",za);class Vc extends on{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return _t.ok(r)}getMap(){return zn.empty}invert(e){return new Vc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Vc(n.attr,n.value)}}on.jsonID("docAttr",Vc);let Va=class extends Error{};Va=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Va.prototype=Object.create(Error.prototype);Va.prototype.constructor=Va;Va.prototype.name="TransformError";class _A{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new $c}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Va(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(e=i.map(e,1),n=i.map(n,-1)),i.forEach((o,l,c,d)=>{e=Math.min(e,c),n=Math.max(n,d)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=le.empty){let i=Uh(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new le(re.from(r),0,0))}delete(e,n){return this.replace(e,n,le.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return lB(this,e,n,r),this}replaceRangeWith(e,n,r){return cB(this,e,n,r),this}deleteRange(e,n){return uB(this,e,n),this}lift(e,n){return K5(this,e,n),this}join(e,n=1){return rB(this,e,n),this}wrap(e,n){return X5(this,e,n),this}setBlockType(e,n=e,r,i=null){return Q5(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return eB(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new za(e,n,r)),this}setDocAttribute(e,n){return this.step(new Vc(e,n)),this}addNodeMark(e,n){return this.step(new _s(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof We)n.isInSet(r.marks)&&this.step(new Co(e,n));else{let i=r.marks,o,l=[];for(;o=n.isInSet(i);)l.push(new Co(e,o)),i=o.removeFromSet(i);for(let c=l.length-1;c>=0;c--)this.step(l[c])}return this}split(e,n=1,r){return tB(this,e,n,r),this}addMark(e,n,r){return F5(this,e,n,r),this}removeMark(e,n,r){return G5(this,e,n,r),this}clearIncompatible(e,n,r){return U0(this,e,n,r),this}}const qg=Object.create(null);class we{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new AA(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=le.empty){let r=n.content.lastChild,i=null;for(let c=0;c<n.openEnd;c++)i=r,r=r.lastChild;let o=e.steps.length,l=this.ranges;for(let c=0;c<l.length;c++){let{$from:d,$to:f}=l[c],p=e.mapping.slice(o);e.replaceRange(p.map(d.pos),p.map(f.pos),c?le.empty:n),c==0&&qC(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:l,$to:c}=i[o],d=e.mapping.slice(r),f=d.map(l.pos),p=d.map(c.pos);o?e.deleteRange(f,p):(e.replaceRangeWith(f,p,n),qC(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Se(e):Ia(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let l=n<0?Ia(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Ia(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(l)return l}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new jn(e.node(0))}static atStart(e){return Ia(e,e,0,0,1)||new jn(e)}static atEnd(e){return Ia(e,e,e.content.size,e.childCount,-1)||new jn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=qg[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in qg)throw new RangeError("Duplicate use of selection JSON ID "+e);return qg[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Se.between(this.$anchor,this.$head).getBookmark()}}we.prototype.visible=!0;class AA{constructor(e,n){this.$from=e,this.$to=n}}let zC=!1;function jC(t){!zC&&!t.parent.inlineContent&&(zC=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Se extends we{constructor(e,n=e){jC(e),jC(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return we.near(r);let i=e.resolve(n.map(this.anchor));return new Se(i.parent.inlineContent?i:r,r)}replace(e,n=le.empty){if(super.replace(e,n),n==le.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Se&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Bh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Se(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=we.findFrom(n,r,!0)||we.findFrom(n,-r,!0);if(o)n=o.$head;else return we.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(we.findFrom(e,-r,!0)||we.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Se(e,n)}}we.jsonID("text",Se);class Bh{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Bh(e.map(this.anchor),e.map(this.head))}resolve(e){return Se.between(e.resolve(this.anchor),e.resolve(this.head))}}class ge extends we{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?we.near(o):new ge(o)}content(){return new le(re.from(this.node),0,0)}eq(e){return e instanceof ge&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new z0(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ge(e.resolve(n.anchor))}static create(e,n){return new ge(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ge.prototype.visible=!1;we.jsonID("node",ge);class z0{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Bh(r,r):new z0(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&ge.isSelectable(r)?new ge(n):we.near(n)}}class jn extends we{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=le.empty){if(n==le.empty){e.delete(0,e.doc.content.size);let r=we.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new jn(e)}map(e){return new jn(e)}eq(e){return e instanceof jn}getBookmark(){return dB}}we.jsonID("all",jn);const dB={map(){return this},resolve(t){return new jn(t)}};function Ia(t,e,n,r,i,o=!1){if(e.inlineContent)return Se.create(t,n);for(let l=r-(i>0?0:1);i>0?l<e.childCount:l>=0;l+=i){let c=e.child(l);if(c.isAtom){if(!o&&ge.isSelectable(c))return ge.create(t,n-(i<0?c.nodeSize:0))}else{let d=Ia(t,c,n+i,i<0?c.childCount:0,i,o);if(d)return d}n+=c.nodeSize*i}return null}function qC(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ut||i instanceof zt))return;let o=t.mapping.maps[r],l;o.forEach((c,d,f,p)=>{l==null&&(l=p)}),t.setSelection(we.near(t.doc.resolve(l),n))}const HC=1,qd=2,$C=4;class fB extends _A{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|HC)&~qd,this.storedMarks=null,this}get selectionSet(){return(this.updated&HC)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=qd,this}ensureMarks(e){return We.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&qd)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~qd,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||We.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let l=this.doc.resolve(n);o=r==n?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(we.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=$C,this}get scrolledIntoView(){return(this.updated&$C)>0}}function VC(t,e){return!e||!t?t:t.bind(e)}class cc{constructor(e,n,r){this.name=e,this.init=VC(n.init,r),this.apply=VC(n.apply,r)}}const hB=[new cc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new cc("selection",{init(t,e){return t.selection||we.atStart(e.doc)},apply(t){return t.selection}}),new cc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new cc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Hg{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=hB.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new cc(r.key,r.spec.state,r))})}}class Pa{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let c=this.config.plugins[l];if(c.spec.appendTransaction){let d=i?i[l].n:0,f=i?i[l].state:this,p=d<n.length&&c.spec.appendTransaction.call(c,d?n.slice(d):n,f,r);if(p&&r.filterTransaction(p,l)){if(p.setMeta("appendedTransaction",e),!i){i=[];for(let m=0;m<this.config.plugins.length;m++)i.push(m<l?{state:r,n:n.length}:{state:this,n:0})}n.push(p),r=r.applyInner(p),o=!0}i&&(i[l]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Pa(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new fB(this)}static create(e){let n=new Hg(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Pa(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Hg(this.schema,e.plugins),r=n.fields,i=new Pa(n);for(let o=0;o<r.length;o++){let l=r[o].name;i[l]=this.hasOwnProperty(l)?this[l]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Hg(e.schema,e.plugins),o=new Pa(i);return i.fields.forEach(l=>{if(l.name=="doc")o.doc=Ns.fromJSON(e.schema,n.doc);else if(l.name=="selection")o.selection=we.fromJSON(o.doc,n.selection);else if(l.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let c in r){let d=r[c],f=d.spec.state;if(d.key==l.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(n,c)){o[l.name]=f.fromJSON.call(d,e,n[c],o);return}}o[l.name]=l.init(e,o)}}),o}}function NA(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=NA(i,e,{})),n[r]=i}return n}class tt{constructor(e){this.spec=e,this.props={},e.props&&NA(e.props,this,this.props),this.key=e.key?e.key.key:kA("plugin")}getState(e){return e[this.key]}}const $g=Object.create(null);function kA(t){return t in $g?t+"$"+ ++$g[t]:($g[t]=0,t+"$")}class at{constructor(e="key"){this.key=kA(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const j0=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function RA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const MA=(t,e,n)=>{let r=RA(t,n);if(!r)return!1;let i=q0(r);if(!i){let l=r.blockRange(),c=l&&ol(l);return c==null?!1:(e&&e(t.tr.lift(l,c).scrollIntoView()),!0)}let o=i.nodeBefore;if(jA(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Fa(o,"end")||ge.isSelectable(o)))for(let l=r.depth;;l--){let c=Uh(t.doc,r.before(l),r.after(l),le.empty);if(c&&c.slice.size<c.to-c.from){if(e){let d=t.tr.step(c);d.setSelection(Fa(o,"end")?we.findFrom(d.doc.resolve(d.mapping.map(i.pos,-1)),-1):ge.create(d.doc,i.pos-o.nodeSize)),e(d.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},pB=(t,e,n)=>{let r=RA(t,n);if(!r)return!1;let i=q0(r);return i?IA(t,i,e):!1},mB=(t,e,n)=>{let r=OA(t,n);if(!r)return!1;let i=H0(r);return i?IA(t,i,e):!1};function IA(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let l=e.nodeAfter,c=l,d=e.pos+1;for(;!c.isTextblock;d++){if(c.type.spec.isolating)return!1;let p=c.firstChild;if(!p)return!1;c=p}let f=Uh(t.doc,o,d,le.empty);if(!f||f.from!=o||f instanceof Ut&&f.slice.size>=d-o)return!1;if(n){let p=t.tr.step(f);p.setSelection(Se.create(p.doc,o)),n(p.scrollIntoView())}return!0}function Fa(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const DA=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=q0(r)}let l=o&&o.nodeBefore;return!l||!ge.isSelectable(l)?!1:(e&&e(t.tr.setSelection(ge.create(t.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function q0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function OA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const LA=(t,e,n)=>{let r=OA(t,n);if(!r)return!1;let i=H0(r);if(!i)return!1;let o=i.nodeAfter;if(jA(t,i,e,1))return!0;if(r.parent.content.size==0&&(Fa(o,"start")||ge.isSelectable(o))){let l=Uh(t.doc,r.before(),r.after(),le.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=t.tr.step(l);c.setSelection(Fa(o,"start")?we.findFrom(c.doc.resolve(c.mapping.map(i.pos)),1):ge.create(c.doc,c.mapping.map(i.pos))),e(c.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},PA=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=H0(r)}let l=o&&o.nodeAfter;return!l||!ge.isSelectable(l)?!1:(e&&e(t.tr.setSelection(ge.create(t.doc,o.pos)).scrollIntoView()),!0)};function H0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const gB=(t,e)=>{let n=t.selection,r=n instanceof ge,i;if(r){if(n.node.isTextblock||!Ps(t.doc,n.from))return!1;i=n.from}else if(i=Ph(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(ge.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},yB=(t,e)=>{let n=t.selection,r;if(n instanceof ge){if(n.node.isTextblock||!Ps(t.doc,n.to))return!1;r=n.to}else if(r=Ph(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},vB=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&ol(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},UA=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function $0(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const bB=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),l=$0(i.contentMatchAt(o));if(!l||!i.canReplaceWith(o,o,l))return!1;if(e){let c=n.after(),d=t.tr.replaceWith(c,c,l.createAndFill());d.setSelection(we.near(d.doc.resolve(c),1)),e(d.scrollIntoView())}return!0},BA=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof jn||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=$0(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,c=t.tr.insert(l,o.createAndFill());c.setSelection(Se.create(c.doc,l+1)),e(c.scrollIntoView())}return!0},zA=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Di(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&ol(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function xB(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof ge&&e.selection.node.isBlock)return!r.parentOffset||!Di(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,c,d=!1,f=!1;for(let b=r.depth;;b--)if(r.node(b).isBlock){d=r.end(b)==r.pos+(r.depth-b),f=r.start(b)==r.pos-(r.depth-b),c=$0(r.node(b-1).contentMatchAt(r.indexAfter(b-1))),o.unshift(d&&c?{type:c}:null),l=b;break}else{if(b==1)return!1;o.unshift(null)}let p=e.tr;(e.selection instanceof Se||e.selection instanceof jn)&&p.deleteSelection();let m=p.mapping.map(r.pos),v=Di(p.doc,m,o.length,o);if(v||(o[0]=c?{type:c}:null,v=Di(p.doc,m,o.length,o)),!v)return!1;if(p.split(m,o.length,o),!d&&f&&r.node(l).type!=c){let b=p.mapping.map(r.before(l)),w=p.doc.resolve(b);c&&r.node(l-1).canReplaceWith(w.index(),w.index()+1,c)&&p.setNodeMarkup(p.mapping.map(r.before(l)),c)}return n&&n(p.scrollIntoView()),!0}}const wB=xB(),SB=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(ge.create(t.doc,i))),!0)};function EB(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Ps(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function jA(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,l,c,d=i.type.spec.isolating||o.type.spec.isolating;if(!d&&EB(t,e,n))return!0;let f=!d&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(l=(c=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&c.matchType(l[0]||o.type).validEnd){if(n){let b=e.pos+o.nodeSize,w=re.empty;for(let T=l.length-1;T>=0;T--)w=re.from(l[T].create(null,w));w=re.from(i.copy(w));let S=t.tr.step(new zt(e.pos-1,b,e.pos,b,new le(w,1,0),l.length,!0)),E=S.doc.resolve(b+2*l.length);E.nodeAfter&&E.nodeAfter.type==i.type&&Ps(S.doc,E.pos)&&S.join(E.pos),n(S.scrollIntoView())}return!0}let p=o.type.spec.isolating||r>0&&d?null:we.findFrom(e,1),m=p&&p.$from.blockRange(p.$to),v=m&&ol(m);if(v!=null&&v>=e.depth)return n&&n(t.tr.lift(m,v).scrollIntoView()),!0;if(f&&Fa(o,"start",!0)&&Fa(i,"end")){let b=i,w=[];for(;w.push(b),!b.isTextblock;)b=b.lastChild;let S=o,E=1;for(;!S.isTextblock;S=S.firstChild)E++;if(b.canReplace(b.childCount,b.childCount,S.content)){if(n){let T=re.empty;for(let A=w.length-1;A>=0;A--)T=re.from(w[A].copy(T));let N=t.tr.step(new zt(e.pos-w.length,e.pos+o.nodeSize,e.pos+E,e.pos+o.nodeSize-E,new le(T,w.length,0),0,!0));n(N.scrollIntoView())}return!0}}return!1}function qA(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(Se.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const CB=qA(-1),TB=qA(1);function _B(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,l=i.blockRange(o),c=l&&B0(l,t,e);return c?(r&&r(n.tr.wrap(l,c).scrollIntoView()),!0):!1}}function FC(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:l},$to:{pos:c}}=n.selection.ranges[o];n.doc.nodesBetween(l,c,(d,f)=>{if(i)return!1;if(!(!d.isTextblock||d.hasMarkup(t,e)))if(d.type==t)i=!0;else{let p=n.doc.resolve(f),m=p.index();i=p.parent.canReplaceWith(m,m+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let l=0;l<n.selection.ranges.length;l++){let{$from:{pos:c},$to:{pos:d}}=n.selection.ranges[l];o.setBlockType(c,d,t,e)}r(o.scrollIntoView())}return!0}}function V0(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}V0(j0,MA,DA);V0(j0,LA,PA);V0(UA,BA,zA,wB);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function AB(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,l=i.blockRange(o);if(!l)return!1;let c=r?n.tr:null;return NB(c,l,t,e)?(r&&r(c.scrollIntoView()),!0):!1}}function NB(t,e,n,r=null){let i=!1,o=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=l.resolve(e.start-2);o=new Af(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Af(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let c=B0(o,n,r,e);return c?(t&&kB(t,e,c,i,n),!0):!1}function kB(t,e,n,r,i){let o=re.empty;for(let p=n.length-1;p>=0;p--)o=re.from(n[p].type.create(n[p].attrs,o));t.step(new zt(e.start-(r?2:0),e.end,e.start,e.end,new le(o,0,0),n.length,!0));let l=0;for(let p=0;p<n.length;p++)n[p].type==i&&(l=p+1);let c=n.length-l,d=e.start+n.length-(r?2:0),f=e.parent;for(let p=e.startIndex,m=e.endIndex,v=!0;p<m;p++,v=!1)!v&&Di(t.doc,d,c)&&(t.split(d,c),d+=2*c),d+=f.child(p).nodeSize;return t}function RB(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?MB(e,n,t,o):IB(e,n,o):!0:!1}}function MB(t,e,n,r){let i=t.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(i.step(new zt(o-1,l,o,l,new le(re.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Af(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const c=ol(r);if(c==null)return!1;i.lift(r,c);let d=i.doc.resolve(i.mapping.map(o,-1)-1);return Ps(i.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&i.join(d.pos),e(i.scrollIntoView()),!0}function IB(t,e,n){let r=t.tr,i=n.parent;for(let b=n.end,w=n.endIndex-1,S=n.startIndex;w>S;w--)b-=i.child(w).nodeSize,r.delete(b-1,b+1);let o=r.doc.resolve(n.start),l=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let c=n.startIndex==0,d=n.endIndex==i.childCount,f=o.node(-1),p=o.index(-1);if(!f.canReplace(p+(c?0:1),p+1,l.content.append(d?re.empty:re.from(i))))return!1;let m=o.pos,v=m+l.nodeSize;return r.step(new zt(m-(c?1:0),v+(d?1:0),m+1,v-1,new le((c?re.empty:re.from(i.copy(re.empty))).append(d?re.empty:re.from(i.copy(re.empty))),c?0:1,d?0:1),c?0:1)),e(r.scrollIntoView()),!0}function DB(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,f=>f.childCount>0&&f.firstChild.type==t);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let c=o.parent,d=c.child(l-1);if(d.type!=t)return!1;if(n){let f=d.lastChild&&d.lastChild.type==c.type,p=re.from(f?t.create():null),m=new le(re.from(t.create(null,re.from(c.type.create(null,p)))),f?3:1,0),v=o.start,b=o.end;n(e.tr.step(new zt(v-(f?3:1),b,v,b,m,1,!0)).scrollIntoView())}return!0}}const Wt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ga=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let jy=null;const Ni=function(t,e,n){let r=jy||(jy=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},OB=function(){jy=null},To=function(t,e,n,r){return n&&(GC(t,e,n,r,-1)||GC(t,e,n,r,1))},LB=/^(img|br|input|textarea|hr)$/i;function GC(t,e,n,r,i){for(var o;;){if(t==n&&e==r)return!0;if(e==(i<0?0:cr(t))){let l=t.parentNode;if(!l||l.nodeType!=1||lu(t)||LB.test(t.nodeName)||t.contentEditable=="false")return!1;e=Wt(t)+(i<0?0:1),t=l}else if(t.nodeType==1){let l=t.childNodes[e+(i<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((o=l.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else t=l,e=i<0?cr(t):0}else return!1}}function cr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function PB(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=cr(t)}else if(t.parentNode&&!lu(t))e=Wt(t),t=t.parentNode;else return null}}function UB(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!lu(t))e=Wt(t)+1,t=t.parentNode;else return null}}function BB(t,e,n){for(let r=e==0,i=e==cr(t);r||i;){if(t==n)return!0;let o=Wt(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==cr(t)}}function lu(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const zh=function(t){return t.focusNode&&To(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ho(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function zB(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function jB(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(cr(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(cr(r.startContainer),r.startOffset)}}}const Wr=typeof navigator<"u"?navigator:null,JC=typeof document<"u"?document:null,Us=Wr&&Wr.userAgent||"",qy=/Edge\/(\d+)/.exec(Us),HA=/MSIE \d/.exec(Us),Hy=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Us),kn=!!(HA||Hy||qy),Rs=HA?document.documentMode:Hy?+Hy[1]:qy?+qy[1]:0,ur=!kn&&/gecko\/(\d+)/i.test(Us);ur&&+(/Firefox\/(\d+)/.exec(Us)||[0,0])[1];const $y=!kn&&/Chrome\/(\d+)/.exec(Us),Bt=!!$y,$A=$y?+$y[1]:0,Zt=!kn&&!!Wr&&/Apple Computer/.test(Wr.vendor),Ja=Zt&&(/Mobile\/\w+/.test(Us)||!!Wr&&Wr.maxTouchPoints>2),lr=Ja||(Wr?/Mac/.test(Wr.platform):!1),VA=Wr?/Win/.test(Wr.platform):!1,Ri=/Android \d/.test(Us),cu=!!JC&&"webkitFontSmoothing"in JC.documentElement.style,qB=cu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function HB(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Si(t,e){return typeof t=="number"?t:t[e]}function $B(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function KC(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let l=n||t.dom;l;){if(l.nodeType!=1){l=Ga(l);continue}let c=l,d=c==o.body,f=d?HB(o):$B(c),p=0,m=0;if(e.top<f.top+Si(r,"top")?m=-(f.top-e.top+Si(i,"top")):e.bottom>f.bottom-Si(r,"bottom")&&(m=e.bottom-e.top>f.bottom-f.top?e.top+Si(i,"top")-f.top:e.bottom-f.bottom+Si(i,"bottom")),e.left<f.left+Si(r,"left")?p=-(f.left-e.left+Si(i,"left")):e.right>f.right-Si(r,"right")&&(p=e.right-f.right+Si(i,"right")),p||m)if(d)o.defaultView.scrollBy(p,m);else{let b=c.scrollLeft,w=c.scrollTop;m&&(c.scrollTop+=m),p&&(c.scrollLeft+=p);let S=c.scrollLeft-b,E=c.scrollTop-w;e={left:e.left-S,top:e.top-E,right:e.right-S,bottom:e.bottom-E}}let v=d?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(v))break;l=v=="absolute"?l.offsetParent:Ga(l)}}function VB(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,l=n+1;l<Math.min(innerHeight,e.bottom);l+=5){let c=t.root.elementFromPoint(o,l);if(!c||c==t.dom||!t.dom.contains(c))continue;let d=c.getBoundingClientRect();if(d.top>=n-20){r=c,i=d.top;break}}return{refDOM:r,refTop:i,stack:FA(t.dom)}}function FA(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Ga(r));return e}function FB({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;GA(n,r==0?0:r-e)}function GA(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let _a=null;function GB(t){if(t.setActive)return t.setActive();if(_a)return t.focus(_a);let e=FA(t);t.focus(_a==null?{get preventScroll(){return _a={preventScroll:!0},!0}}:void 0),_a||(_a=!1,GA(e,0))}function JA(t,e){let n,r=2e8,i,o=0,l=e.top,c=e.top,d,f;for(let p=t.firstChild,m=0;p;p=p.nextSibling,m++){let v;if(p.nodeType==1)v=p.getClientRects();else if(p.nodeType==3)v=Ni(p).getClientRects();else continue;for(let b=0;b<v.length;b++){let w=v[b];if(w.top<=l&&w.bottom>=c){l=Math.max(w.bottom,l),c=Math.min(w.top,c);let S=w.left>e.left?w.left-e.left:w.right<e.left?e.left-w.right:0;if(S<r){n=p,r=S,i=S&&n.nodeType==3?{left:w.right<e.left?w.right:w.left,top:e.top}:e,p.nodeType==1&&S&&(o=m+(e.left>=(w.left+w.right)/2?1:0));continue}}else w.top>e.top&&!d&&w.left<=e.left&&w.right>=e.left&&(d=p,f={left:Math.max(w.left,Math.min(w.right,e.left)),top:w.top});!n&&(e.left>=w.right&&e.top>=w.top||e.left>=w.left&&e.top>=w.bottom)&&(o=m+1)}}return!n&&d&&(n=d,i=f,r=0),n&&n.nodeType==3?JB(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:JA(n,i)}function JB(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let l=ms(r,1);if(l.top!=l.bottom&&F0(e,l)){i={node:t,offset:o+(e.left>=(l.left+l.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function F0(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function KB(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function YB(t,e,n){let{node:r,offset:i}=JA(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();o=l.left!=l.right&&n.left>(l.left+l.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function WB(t,e,n,r){let i=-1;for(let o=e,l=!1;o!=t.dom;){let c=t.docView.nearestDesc(o,!0),d;if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent||!c.contentDOM)&&((d=c.dom.getBoundingClientRect()).width||d.height)&&(c.node.isBlock&&c.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(c.dom.nodeName)&&(!l&&d.left>r.left||d.top>r.top?i=c.posBefore:(!l&&d.right<r.left||d.bottom<r.top)&&(i=c.posAfter),l=!0),!c.contentDOM&&i<0&&!c.node.isText))return(c.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?c.posBefore:c.posAfter;o=c.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function KA(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let l=t.childNodes[o];if(l.nodeType==1){let c=l.getClientRects();for(let d=0;d<c.length;d++){let f=c[d];if(F0(e,f))return KA(l,e,f)}}if((o=(o+1)%r)==i)break}return t}function XB(t,e){let n=t.dom.ownerDocument,r,i=0,o=jB(n,e.left,e.top);o&&({node:r,offset:i}=o);let l=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),c;if(!l||!t.dom.contains(l.nodeType!=1?l.parentNode:l)){let f=t.dom.getBoundingClientRect();if(!F0(e,f)||(l=KA(t.dom,e,f),!l))return null}if(Zt)for(let f=l;r&&f;f=Ga(f))f.draggable&&(r=void 0);if(l=KB(l,e),r){if(ur&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let p=r.childNodes[i],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&i++}let f;cu&&i&&r.nodeType==1&&(f=r.childNodes[i-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?c=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(c=WB(t,r,i,e))}c==null&&(c=YB(t,l,e));let d=t.docView.nearestDesc(l,!0);return{pos:c,inside:d?d.posAtStart-d.border:-1}}function YC(t){return t.top<t.bottom||t.left<t.right}function ms(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(YC(r))return r}return Array.prototype.find.call(n,YC)||t.getBoundingClientRect()}const QB=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function YA(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),l=cu||ur;if(r.nodeType==3)if(l&&(QB.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let d=ms(Ni(r,i,i),n);if(ur&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let f=ms(Ni(r,i-1,i-1),-1);if(f.top==d.top){let p=ms(Ni(r,i,i+1),-1);if(p.top!=d.top)return rc(p,p.left<f.left)}}return d}else{let d=i,f=i,p=n<0?1:-1;return n<0&&!i?(f++,p=-1):n>=0&&i==r.nodeValue.length?(d--,p=1):n<0?d--:f++,rc(ms(Ni(r,d,f),p),p<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==cr(r))){let d=r.childNodes[i-1];if(d.nodeType==1)return Vg(d.getBoundingClientRect(),!1)}if(o==null&&i<cr(r)){let d=r.childNodes[i];if(d.nodeType==1)return Vg(d.getBoundingClientRect(),!0)}return Vg(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==cr(r))){let d=r.childNodes[i-1],f=d.nodeType==3?Ni(d,cr(d)-(l?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(f)return rc(ms(f,1),!1)}if(o==null&&i<cr(r)){let d=r.childNodes[i];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let f=d?d.nodeType==3?Ni(d,0,l?0:1):d.nodeType==1?d:null:null;if(f)return rc(ms(f,-1),!0)}return rc(ms(r.nodeType==3?Ni(r):r,-n),n>=0)}function rc(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Vg(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function WA(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function ZB(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return WA(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let c=t.docView.nearestDesc(o,!0);if(!c)break;if(c.node.isBlock){o=c.contentDOM||c.dom;break}o=c.dom.parentNode}let l=YA(t,i.pos,1);for(let c=o.firstChild;c;c=c.nextSibling){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=Ni(c,0,c.nodeValue.length).getClientRects();else continue;for(let f=0;f<d.length;f++){let p=d[f];if(p.bottom>p.top+1&&(n=="up"?l.top-p.top>(p.bottom-l.top)*2:p.bottom-l.bottom>(l.bottom-p.top)*2))return!1}}return!0})}const ez=/[\u0590-\u08ac]/;function tz(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,l=i==r.parent.content.size,c=t.domSelection();return c?!ez.test(r.parent.textContent)||!c.modify?n=="left"||n=="backward"?o:l:WA(t,e,()=>{let{focusNode:d,focusOffset:f,anchorNode:p,anchorOffset:m}=t.domSelectionRange(),v=c.caretBidiLevel;c.modify("move",n,"character");let b=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:w,focusOffset:S}=t.domSelectionRange(),E=w&&!b.contains(w.nodeType==1?w:w.parentNode)||d==w&&f==S;try{c.collapse(p,m),d&&(d!=p||f!=m)&&c.extend&&c.extend(d,f)}catch{}return v!=null&&(c.caretBidiLevel=v),E}):r.pos==r.start()||r.pos==r.end()}let WC=null,XC=null,QC=!1;function nz(t,e,n){return WC==e&&XC==n?QC:(WC=e,XC=n,QC=n=="up"||n=="down"?ZB(t,e,n):tz(t,e,n))}const dr=0,ZC=1,mo=2,Xr=3;class uu{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=dr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,l;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Wt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),l;if(o&&(!n||o.node))if(r&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let l=0;l<i.children.length;l++){let c=i.children[l];if(c.size){i=c;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let l=this.children[r],c=o+l.size;if(c>e||l instanceof QA){i=e-o;break}o=c}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof XA&&o.side>=0;r--);if(n<=0){let o,l=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,l=!1);return o&&n&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Wt(o.dom)+1:0}}else{let o,l=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Wt(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let l=r,c=0;;c++){let d=this.children[c],f=l+d.size;if(i==-1&&e<=f){let p=l+d.border;if(e>=p&&n<=f-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,n,p);e=l;for(let m=c;m>0;m--){let v=this.children[m-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){i=Wt(v.dom)+1;break}e-=v.size}i==-1&&(i=0)}if(i>-1&&(f>n||c==this.children.length-1)){n=f;for(let p=c+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){o=Wt(m.dom);break}n+=m.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=f}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),l=Math.max(e,n);for(let b=0,w=0;b<this.children.length;b++){let S=this.children[b],E=w+S.size;if(o>w&&l<E)return S.setSelection(e-w-S.border,n-w-S.border,r,i);w=E}let c=this.domFromPos(e,e?-1:1),d=n==e?c:this.domFromPos(n,n?-1:1),f=r.root.getSelection(),p=r.domSelectionRange(),m=!1;if((ur||Zt)&&e==n){let{node:b,offset:w}=c;if(b.nodeType==3){if(m=!!(w&&b.nodeValue[w-1]==`
`),m&&w==b.nodeValue.length)for(let S=b,E;S;S=S.parentNode){if(E=S.nextSibling){E.nodeName=="BR"&&(c=d={node:E.parentNode,offset:Wt(E)+1});break}let T=S.pmViewDesc;if(T&&T.node&&T.node.isBlock)break}}else{let S=b.childNodes[w-1];m=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(ur&&p.focusNode&&p.focusNode!=d.node&&p.focusNode.nodeType==1){let b=p.focusNode.childNodes[p.focusOffset];b&&b.contentEditable=="false"&&(i=!0)}if(!(i||m&&Zt)&&To(c.node,c.offset,p.anchorNode,p.anchorOffset)&&To(d.node,d.offset,p.focusNode,p.focusOffset))return;let v=!1;if((f.extend||e==n)&&!(m&&ur)){f.collapse(c.node,c.offset);try{e!=n&&f.extend(d.node,d.offset),v=!0}catch{}}if(!v){if(e>n){let w=c;c=d,d=w}let b=document.createRange();b.setEnd(d.node,d.offset),b.setStart(c.node,c.offset),f.removeAllRanges(),f.addRange(b)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],l=r+o.size;if(r==l?e<=l&&n>=r:e<l&&n>r){let c=r+o.border,d=l-o.border;if(e>=c&&n<=d){this.dirty=e==r||n==l?mo:ZC,e==c&&n==d&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Xr:o.markDirty(e-c,n-c);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?mo:Xr}r=l}this.dirty=mo}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?mo:ZC;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class XA extends uu{constructor(e,n,r,i){let o,l=n.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(l.nodeType!=1){let c=document.createElement("span");c.appendChild(l),l=c}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==dr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class rz extends uu{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class _o extends uu{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],l=o&&o(n,i,r);return(!l||!l.dom)&&(l=Ro.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new _o(e,n,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&Xr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Xr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=dr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=dr}}slice(e,n,r){let i=_o.create(this.parent,this.mark,!0,r),o=this.children,l=this.size;n<l&&(o=Fy(o,n,l,r)),e>0&&(o=Fy(o,0,e,r));for(let c=0;c<o.length;c++)o[c].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ms extends uu{constructor(e,n,r,i,o,l,c,d,f){super(e,[],o,l),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=c}static create(e,n,r,i,o,l){let c=o.nodeViews[n.type.name],d,f=c&&c(n,o,()=>{if(!d)return l;if(d.parent)return d.parent.posBeforeChild(d)},r,i),p=f&&f.dom,m=f&&f.contentDOM;if(n.isText){if(!p)p=document.createTextNode(n.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=Ro.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!m&&!n.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),n.type.spec.draggable&&(p.draggable=!0));let v=p;return p=tN(p,r,n),f?d=new iz(e,n,r,i,p,m||null,v,f,o,l+1):n.isText?new jh(e,n,r,i,p,v,o):new Ms(e,n,r,i,p,m||null,v,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>re.empty)}return e}matchesNode(e,n,r){return this.dirty==dr&&e.eq(this.node)&&kf(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,l=o&&o.pos>-1?o:null,c=o&&o.pos<0,d=new oz(this,l&&l.node,e);cz(this.node,this.innerDeco,(f,p,m)=>{f.spec.marks?d.syncToMarks(f.spec.marks,r,e,p):f.type.side>=0&&!m&&d.syncToMarks(p==this.node.childCount?We.none:this.node.child(p).marks,r,e,p),d.placeWidget(f,e,i)},(f,p,m,v)=>{d.syncToMarks(f.marks,r,e,v);let b;d.findNodeMatch(f,p,m,v)||c&&e.state.selection.from>i&&e.state.selection.to<i+f.nodeSize&&(b=d.findIndexWithChild(o.node))>-1&&d.updateNodeAt(f,p,m,b,e)||d.updateNextNode(f,p,m,e,v,i)||d.addNode(f,p,m,e,i),i+=f.nodeSize}),d.syncToMarks([],r,e,0),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==mo)&&(l&&this.protectLocalComposition(e,l),ZA(this.contentDOM,this.children,e),Ja&&uz(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Se)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,c=dz(this.node.content,l,r-n,i-n);return c<0?null:{node:o,pos:c,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new rz(this,o,n,i);e.input.compositionNodes.push(l),this.children=Fy(this.children,r,r+i.length,e,l)}update(e,n,r,i){return this.dirty==Xr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=dr}updateOuterDeco(e){if(kf(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=eN(this.dom,this.nodeDOM,Vy(this.outerDeco,this.node,n),Vy(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function eT(t,e,n,r,i){tN(r,e,t);let o=new Ms(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class jh extends Ms{constructor(e,n,r,i,o,l,c){super(e,n,r,i,o,null,l,c,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Xr||this.dirty!=dr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=dr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=dr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new jh(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Xr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class QA extends uu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==dr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class iz extends Ms{constructor(e,n,r,i,o,l,c,d,f,p){super(e,n,r,i,o,l,c,f,p),this.spec=d}update(e,n,r,i){if(this.dirty==Xr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function ZA(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let l=e[o],c=l.dom;if(c.parentNode==t){for(;c!=r;)r=tT(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(c,r);if(l instanceof _o){let d=r?r.previousSibling:t.lastChild;ZA(l.contentDOM,l.children,n),r=d?d.nextSibling:t.firstChild}}for(;r;)r=tT(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const wc=function(t){t&&(this.nodeName=t)};wc.prototype=Object.create(null);const go=[new wc];function Vy(t,e,n){if(t.length==0)return go;let r=n?go[0]:new wc,i=[r];for(let o=0;o<t.length;o++){let l=t[o].type.attrs;if(l){l.nodeName&&i.push(r=new wc(l.nodeName));for(let c in l){let d=l[c];d!=null&&(n&&i.length==1&&i.push(r=new wc(e.isInline?"span":"div")),c=="class"?r.class=(r.class?r.class+" ":"")+d:c=="style"?r.style=(r.style?r.style+";":"")+d:c!="nodeName"&&(r[c]=d))}}}return i}function eN(t,e,n,r){if(n==go&&r==go)return e;let i=e;for(let o=0;o<r.length;o++){let l=r[o],c=n[o];if(o){let d;c&&c.nodeName==l.nodeName&&i!=t&&(d=i.parentNode)&&d.nodeName.toLowerCase()==l.nodeName||(d=document.createElement(l.nodeName),d.pmIsDeco=!0,d.appendChild(i),c=go[0]),i=d}sz(i,c||go[0],l)}return i}function sz(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function tN(t,e,n){return eN(t,t,go,Vy(e,n,t.nodeType!=1))}function kf(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function tT(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class oz{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=az(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,i){let o=0,l=this.stack.length>>1,c=Math.min(l,e.length);for(;o<c&&(o==l-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<l;)this.destroyRest(),this.top.dirty=dr,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let d=-1,f=this.top.children.length;i<this.preMatch.index&&(f=Math.min(this.index+3,f));for(let p=this.index;p<f;p++){let m=this.top.children[p];if(m.matchesMark(e[l])&&!this.isLocked(m.dom)){d=p;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let p=_o.create(this.top,e[l],n,r);this.top.children.splice(this.index,0,p),this.top=p,this.changed=!0}this.index=0,l++}}findNodeMatch(e,n,r,i){let o=-1,l;if(i>=this.preMatch.index&&(l=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&l.matchesNode(e,n,r))o=this.top.children.indexOf(l,this.index);else for(let c=this.index,d=Math.min(this.top.children.length,c+5);c<d;c++){let f=this.top.children[c];if(f.matchesNode(e,n,r)&&!this.preMatch.matched.has(f)){o=c;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let l=this.top.children[i];return l.dirty==Xr&&l.dom==l.contentDOM&&(l.dirty=mo),l.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,l){for(let c=this.index;c<this.top.children.length;c++){let d=this.top.children[c];if(d instanceof Ms){let f=this.preMatch.matched.get(d);if(f!=null&&f!=o)return!1;let p=d.dom,m,v=this.isLocked(p)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=Xr&&kf(n,d.outerDeco));if(!v&&d.update(e,n,r,i))return this.destroyBetween(this.index,c),d.dom!=p&&(this.changed=!0),this.index++,!0;if(!v&&(m=this.recreateWrapper(d,e,n,r,i,l)))return this.destroyBetween(this.index,c),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=mo,m.updateChildren(i,l+1),m.dirty=dr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,l){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!kf(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let c=Ms.create(this.top,n,r,i,o,l);if(c.contentDOM){c.children=e.children,e.children=[];for(let d of c.children)d.parent=c}return e.destroy(),c}addNode(e,n,r,i,o){let l=Ms.create(this.top,e,n,r,i,o);l.contentDOM&&l.updateChildren(i,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new XA(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof _o;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof jh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Zt||Bt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new QA(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function az(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,l=[];e:for(;i>0;){let c;for(;;)if(r){let f=n.children[r-1];if(f instanceof _o)n=f,r=f.children.length;else{c=f,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let d=c.node;if(d){if(d!=t.child(i-1))break;--i,o.set(c,i),l.push(c)}}return{index:i,matched:o,matches:l.reverse()}}function lz(t,e){return t.type.side-e.type.side}function cz(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let f=0;f<t.childCount;f++){let p=t.child(f);r(p,i,e.forChild(o,p),f),o+=p.nodeSize}return}let l=0,c=[],d=null;for(let f=0;;){let p,m;for(;l<i.length&&i[l].to==o;){let E=i[l++];E.widget&&(p?(m||(m=[p])).push(E):p=E)}if(p)if(m){m.sort(lz);for(let E=0;E<m.length;E++)n(m[E],f,!!d)}else n(p,f,!!d);let v,b;if(d)b=-1,v=d,d=null;else if(f<t.childCount)b=f,v=t.child(f++);else break;for(let E=0;E<c.length;E++)c[E].to<=o&&c.splice(E--,1);for(;l<i.length&&i[l].from<=o&&i[l].to>o;)c.push(i[l++]);let w=o+v.nodeSize;if(v.isText){let E=w;l<i.length&&i[l].from<E&&(E=i[l].from);for(let T=0;T<c.length;T++)c[T].to<E&&(E=c[T].to);E<w&&(d=v.cut(E-o),v=v.cut(0,E-o),w=E,b=-1)}else for(;l<i.length&&i[l].to<w;)l++;let S=v.isInline&&!v.isLeaf?c.filter(E=>!E.inline):c.slice();r(v,S,e.forChild(o,v),b),o=w}}function uz(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function dz(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let l=t.child(i++),c=o;if(o+=l.nodeSize,!l.isText)continue;let d=l.text;for(;i<t.childCount;){let f=t.child(i++);if(o+=f.nodeSize,!f.isText)break;d+=f.text}if(o>=n){if(o>=r&&d.slice(r-e.length-c,r-c)==e)return r-e.length;let f=c<r?d.lastIndexOf(e,r-c-1):-1;if(f>=0&&f+e.length+c>=n)return c+f;if(n==r&&d.length>=r+e.length-c&&d.slice(r-c,r-c+e.length)==e)return r}}return-1}function Fy(t,e,n,r,i){let o=[];for(let l=0,c=0;l<t.length;l++){let d=t[l],f=c,p=c+=d.size;f>=n||p<=e?o.push(d):(f<e&&o.push(d.slice(0,e-f,r)),i&&(o.push(i),i=void 0),p>n&&o.push(d.slice(n-f,d.size,r)))}return o}function G0(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,l=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let c=r.resolve(l),d,f;if(zh(n)){for(d=l;i&&!i.node;)i=i.parent;let m=i.node;if(i&&m.isAtom&&ge.isSelectable(m)&&i.parent&&!(m.isInline&&BB(n.focusNode,n.focusOffset,i.dom))){let v=i.posBefore;f=new ge(l==v?c:r.resolve(v))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let m=l,v=l;for(let b=0;b<n.rangeCount;b++){let w=n.getRangeAt(b);m=Math.min(m,t.docView.posFromDOM(w.startContainer,w.startOffset,1)),v=Math.max(v,t.docView.posFromDOM(w.endContainer,w.endOffset,-1))}if(m<0)return null;[d,l]=v==t.state.selection.anchor?[v,m]:[m,v],c=r.resolve(l)}else d=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(d<0)return null}let p=r.resolve(d);if(!f){let m=e=="pointer"||t.state.selection.head<c.pos&&!o?1:-1;f=J0(t,p,c,m)}return f}function nN(t){return t.editable?t.hasFocus():iN(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Oi(t,e=!1){let n=t.state.selection;if(rN(t,n),!!nN(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Bt){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&To(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)hz(t);else{let{anchor:r,head:i}=n,o,l;nT&&!(n instanceof Se)&&(n.$from.parent.inlineContent||(o=rT(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(l=rT(t,n.to))),t.docView.setSelection(r,i,t,e),nT&&(o&&iT(o),l&&iT(l)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&fz(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const nT=Zt||Bt&&$A<63;function rT(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Zt&&i&&i.contentEditable=="false")return Fg(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Fg(i);if(o)return Fg(o)}}function Fg(t){return t.contentEditable="true",Zt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function iT(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function fz(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!nN(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function hz(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Wt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&kn&&Rs<=11&&(n.disabled=!0,n.disabled=!1)}function rN(t,e){if(e instanceof ge){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(sT(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else sT(t)}function sT(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function J0(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Se.between(e,n,r)}function oT(t){return t.editable&&!t.hasFocus()?!1:iN(t)}function iN(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function pz(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return To(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Gy(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&we.findFrom(o,e)}function vs(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function aT(t,e,n){let r=t.state.selection;if(r instanceof Se)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return vs(t,new Se(r.$anchor,l))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Gy(t.state,e);return i&&i instanceof ge?vs(t,i):!1}else if(!(lr&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,l;if(!o||o.isText)return!1;let c=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(l=t.docView.descAt(c))&&!l.contentDOM?ge.isSelectable(o)?vs(t,new ge(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):cu?vs(t,new Se(t.state.doc.resolve(e<0?c:c+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ge&&r.node.isInline)return vs(t,new Se(e>0?r.$to:r.$from));{let i=Gy(t.state,e);return i?vs(t,i):!1}}}function Rf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Sc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Aa(t,e){return e<0?mz(t):gz(t)}function mz(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,l=!1;for(ur&&n.nodeType==1&&r<Rf(n)&&Sc(n.childNodes[r],-1)&&(l=!0);;)if(r>0){if(n.nodeType!=1)break;{let c=n.childNodes[r-1];if(Sc(c,-1))i=n,o=--r;else if(c.nodeType==3)n=c,r=n.nodeValue.length;else break}}else{if(sN(n))break;{let c=n.previousSibling;for(;c&&Sc(c,-1);)i=n.parentNode,o=Wt(c),c=c.previousSibling;if(c)n=c,r=Rf(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}l?Jy(t,n,r):i&&Jy(t,i,o)}function gz(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Rf(n),o,l;for(;;)if(r<i){if(n.nodeType!=1)break;let c=n.childNodes[r];if(Sc(c,1))o=n,l=++r;else break}else{if(sN(n))break;{let c=n.nextSibling;for(;c&&Sc(c,1);)o=c.parentNode,l=Wt(c)+1,c=c.nextSibling;if(c)n=c,r=0,i=Rf(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&Jy(t,o,l)}function sN(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function yz(t,e){for(;t&&e==t.childNodes.length&&!lu(t);)e=Wt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function vz(t,e){for(;t&&!e&&!lu(t);)e=Wt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Jy(t,e,n){if(e.nodeType!=3){let o,l;(l=yz(e,n))?(e=l,n=0):(o=vz(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(zh(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Oi(t)},50)}function lT(t,e){let n=t.state.doc.resolve(e);if(!(Bt||VA)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function cT(t,e,n){let r=t.state.selection;if(r instanceof Se&&!r.empty||n.indexOf("s")>-1||lr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let l=Gy(t.state,e);if(l&&l instanceof ge)return vs(t,l)}if(!i.parent.inlineContent){let l=e<0?i:o,c=r instanceof jn?we.near(l,e):we.findFrom(l,e);return c?vs(t,c):!1}return!1}function uT(t,e){if(!(t.state.selection instanceof Se))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let l=t.state.tr;return e<0?l.delete(n.pos-o.nodeSize,n.pos):l.delete(n.pos,n.pos+o.nodeSize),t.dispatch(l),!0}return!1}function dT(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function bz(t){if(!Zt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;dT(t,r,"true"),setTimeout(()=>dT(t,r,"false"),20)}return!1}function xz(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function wz(t,e){let n=e.keyCode,r=xz(e);if(n==8||lr&&n==72&&r=="c")return uT(t,-1)||Aa(t,-1);if(n==46&&!e.shiftKey||lr&&n==68&&r=="c")return uT(t,1)||Aa(t,1);if(n==13||n==27)return!0;if(n==37||lr&&n==66&&r=="c"){let i=n==37?lT(t,t.state.selection.from)=="ltr"?-1:1:-1;return aT(t,i,r)||Aa(t,i)}else if(n==39||lr&&n==70&&r=="c"){let i=n==39?lT(t,t.state.selection.from)=="ltr"?1:-1:1;return aT(t,i,r)||Aa(t,i)}else{if(n==38||lr&&n==80&&r=="c")return cT(t,-1,r)||Aa(t,-1);if(n==40||lr&&n==78&&r=="c")return bz(t)||cT(t,1,r)||Aa(t,1);if(r==(lr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function K0(t,e){t.someProp("transformCopied",b=>{e=b(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let b=r.firstChild;n.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),r=b.content}let l=t.someProp("clipboardSerializer")||Ro.fromSchema(t.state.schema),c=dN(),d=c.createElement("div");d.appendChild(l.serializeFragment(r,{document:c}));let f=d.firstChild,p,m=0;for(;f&&f.nodeType==1&&(p=uN[f.nodeName.toLowerCase()]);){for(let b=p.length-1;b>=0;b--){let w=c.createElement(p[b]);for(;d.firstChild;)w.appendChild(d.firstChild);d.appendChild(w),m++}f=d.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${i} ${o}${m?` -${m}`:""} ${JSON.stringify(n)}`);let v=t.someProp("clipboardTextSerializer",b=>b(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:v,slice:e}}function oN(t,e,n,r,i){let o=i.parent.type.spec.code,l,c;if(!n&&!e)return null;let d=!!e&&(r||o||!n);if(d){if(t.someProp("transformPastedText",v=>{e=v(e,o||r,t)}),o)return c=new le(re.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",v=>{c=v(c,t,!0)}),c;let m=t.someProp("clipboardTextParser",v=>v(e,i,r,t));if(m)c=m;else{let v=i.marks(),{schema:b}=t.state,w=Ro.fromSchema(b);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(S=>{let E=l.appendChild(document.createElement("p"));S&&E.appendChild(w.serializeNode(b.text(S,v)))})}}else t.someProp("transformPastedHTML",m=>{n=m(n,t)}),l=Tz(n),cu&&_z(l);let f=l&&l.querySelector("[data-pm-slice]"),p=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let v=l.firstChild;for(;v&&v.nodeType!=1;)v=v.nextSibling;if(!v)break;l=v}if(c||(c=(t.someProp("clipboardParser")||t.someProp("domParser")||ks.fromSchema(t.state.schema)).parseSlice(l,{preserveWhitespace:!!(d||p),context:i,ruleFromNode(v){return v.nodeName=="BR"&&!v.nextSibling&&v.parentNode&&!Sz.test(v.parentNode.nodeName)?{ignore:!0}:null}})),p)c=Az(fT(c,+p[1],+p[2]),p[4]);else if(c=le.maxOpen(Ez(c.content,i),!0),c.openStart||c.openEnd){let m=0,v=0;for(let b=c.content.firstChild;m<c.openStart&&!b.type.spec.isolating;m++,b=b.firstChild);for(let b=c.content.lastChild;v<c.openEnd&&!b.type.spec.isolating;v++,b=b.lastChild);c=fT(c,m,v)}return t.someProp("transformPasted",m=>{c=m(c,t,d)}),c}const Sz=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Ez(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,l=[];if(t.forEach(c=>{if(!l)return;let d=i.findWrapping(c.type),f;if(!d)return l=null;if(f=l.length&&o.length&&lN(d,o,c,l[l.length-1],0))l[l.length-1]=f;else{l.length&&(l[l.length-1]=cN(l[l.length-1],o.length));let p=aN(c,d);l.push(p),i=i.matchType(p.type),o=d}}),l)return re.from(l)}return t}function aN(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,re.from(t));return t}function lN(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=lN(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(re.from(aN(n,t,i+1))))}}function cN(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,cN(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(re.empty,!0);return t.copy(n.append(r))}function Ky(t,e,n,r,i,o){let l=e<0?t.firstChild:t.lastChild,c=l.content;return t.childCount>1&&(o=0),i<r-1&&(c=Ky(c,e,n,r,i+1,o)),i>=n&&(c=e<0?l.contentMatchAt(0).fillBefore(c,o<=i).append(c):c.append(l.contentMatchAt(l.childCount).fillBefore(re.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,l.copy(c))}function fT(t,e,n){return e<t.openStart&&(t=new le(Ky(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new le(Ky(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const uN={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let hT=null;function dN(){return hT||(hT=document.implementation.createHTMLDocument("title"))}let Gg=null;function Cz(t){let e=window.trustedTypes;return e?(Gg||(Gg=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Gg.createHTML(t)):t}function Tz(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=dN().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&uN[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=Cz(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function _z(t){let e=t.querySelectorAll(Bt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Az(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:l}=t;for(let c=r.length-2;c>=0;c-=2){let d=n.nodes[r[c]];if(!d||d.hasRequiredAttrs())break;i=re.from(d.create(r[c+1],i)),o++,l++}return new le(i,o,l)}const fn={},hn={},Nz={touchstart:!0,touchmove:!0};class kz{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Rz(t){for(let e in fn){let n=fn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Iz(t,r)&&!Y0(t,r)&&(t.editable||!(r.type in hn))&&n(t,r)},Nz[e]?{passive:!0}:void 0)}Zt&&t.dom.addEventListener("input",()=>null),Yy(t)}function As(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Mz(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Yy(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Y0(t,r))})}function Y0(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Iz(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Dz(t,e){!Y0(t,e)&&fn[e.type]&&(t.editable||!(e.type in hn))&&fn[e.type](t,e)}hn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!hN(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Ri&&Bt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Ja&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,ho(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||wz(t,n)?n.preventDefault():As(t,"key")};hn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};hn.keypress=(t,e)=>{let n=e;if(hN(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||lr&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Se)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",l=>l(t,r.$from.pos,r.$to.pos,i,o))&&t.dispatch(o()),n.preventDefault()}};function qh(t){return{left:t.clientX,top:t.clientY}}function Oz(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function W0(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(t.someProp(e,c=>l>o.depth?c(t,n,o.nodeAfter,o.before(l),i,!0):c(t,n,o.node(l),o.before(l),i,!1)))return!0;return!1}function ja(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Lz(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&ge.isSelectable(r)?(ja(t,new ge(n)),!0):!1}function Pz(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof ge&&(r=n.node);let o=t.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let c=l>o.depth?o.nodeAfter:o.node(l);if(ge.isSelectable(c)){r&&n.$from.depth>0&&l>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(l);break}}return i!=null?(ja(t,ge.create(t.state.doc,i)),!0):!1}function Uz(t,e,n,r,i){return W0(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?Pz(t,n):Lz(t,n))}function Bz(t,e,n,r){return W0(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function zz(t,e,n,r){return W0(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||jz(t,n,r)}function jz(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ja(t,Se.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o),c=i.before(o);if(l.inlineContent)ja(t,Se.create(r,c+1,c+1+l.content.size));else if(ge.isSelectable(l))ja(t,ge.create(r,c));else continue;return!0}}function X0(t){return Mf(t)}const fN=lr?"metaKey":"ctrlKey";fn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=X0(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&Oz(n,t.input.lastClick)&&!n[fN]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let l=t.posAtCoords(qh(n));l&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new qz(t,l,n,!!r)):(o=="doubleClick"?Bz:zz)(t,l.pos,l.inside,n)?n.preventDefault():As(t,"pointer"))};class qz{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[fN],this.allowDefault=r.shiftKey;let o,l;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),l=n.inside;else{let p=e.state.doc.resolve(n.pos);o=p.parent,l=p.depth?p.before():0}const c=i?null:r.target,d=c?e.docView.nearestDesc(c,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:f}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||f instanceof ge&&f.from<=l&&f.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ur&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),As(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Oi(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(qh(e))),this.updateAllowDefault(e),this.allowDefault||!n?As(this.view,"pointer"):Uz(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Zt&&this.mightDrag&&!this.mightDrag.node.isAtom||Bt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ja(this.view,we.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):As(this.view,"pointer")}move(e){this.updateAllowDefault(e),As(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}fn.touchstart=t=>{t.input.lastTouch=Date.now(),X0(t),As(t,"pointer")};fn.touchmove=t=>{t.input.lastTouch=Date.now(),As(t,"pointer")};fn.contextmenu=t=>X0(t);function hN(t,e){return t.composing?!0:Zt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Hz=Ri?5e3:-1;hn.compositionstart=hn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Se&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Bt&&VA&&$z(t)))t.markCursor=t.state.storedMarks||n.marks(),Mf(t,!0),t.markCursor=null;else if(Mf(t,!e.selection.empty),ur&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let l=o<0?i.lastChild:i.childNodes[o-1];if(!l)break;if(l.nodeType==3){let c=t.domSelection();c&&c.collapse(l,l.nodeValue.length);break}else i=l,o=-1}}t.input.composing=!0}pN(t,Hz)};function $z(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}hn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,pN(t,20))};function pN(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Mf(t),e))}function mN(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Fz());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Vz(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=PB(e.focusNode,e.focusOffset),r=UB(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let l=n.pmViewDesc;if(!(!l||!l.isText(n.nodeValue)))return r}}return n||r}function Fz(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Mf(t,e=!1){if(!(Ri&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),mN(t),e||t.docView&&t.docView.dirty){let n=G0(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Gz(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Fc=kn&&Rs<15||Ja&&qB<604;fn.copy=hn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Fc?null:n.clipboardData,l=r.content(),{dom:c,text:d}=K0(t,l);o?(n.preventDefault(),o.clearData(),o.setData("text/html",c.innerHTML),o.setData("text/plain",d)):Gz(t,c),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Jz(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Kz(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Gc(t,r.value,null,i,e):Gc(t,r.textContent,r.innerHTML,i,e)},50)}function Gc(t,e,n,r,i){let o=oN(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",d=>d(t,i,o||le.empty)))return!0;if(!o)return!1;let l=Jz(o),c=l?t.state.tr.replaceSelectionWith(l,r):t.state.tr.replaceSelection(o);return t.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function gN(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}hn.paste=(t,e)=>{let n=e;if(t.composing&&!Ri)return;let r=Fc?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Gc(t,gN(r),r.getData("text/html"),i,n)?n.preventDefault():Kz(t,n)};class yN{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Yz=lr?"altKey":"ctrlKey";function vN(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[Yz]}fn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(qh(n)),l;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof ge?i.to-1:i.to))){if(r&&r.mightDrag)l=ge.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let m=t.docView.nearestDesc(n.target,!0);m&&m.node.type.spec.draggable&&m!=t.docView&&(l=ge.create(t.state.doc,m.posBefore))}}let c=(l||t.state.selection).content(),{dom:d,text:f,slice:p}=K0(t,c);(!n.dataTransfer.files.length||!Bt||$A>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Fc?"Text":"text/html",d.innerHTML),n.dataTransfer.effectAllowed="copyMove",Fc||n.dataTransfer.setData("text/plain",f),t.dragging=new yN(p,vN(t,n),l)};fn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};hn.dragover=hn.dragenter=(t,e)=>e.preventDefault();hn.drop=(t,e)=>{try{Wz(t,e,t.dragging)}finally{t.dragging=null}};function Wz(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(qh(e));if(!r)return;let i=t.state.doc.resolve(r.pos),o=n&&n.slice;o?t.someProp("transformPasted",b=>{o=b(o,t,!1)}):o=oN(t,gN(e.dataTransfer),Fc?null:e.dataTransfer.getData("text/html"),!1,i);let l=!!(n&&vN(t,e));if(t.someProp("handleDrop",b=>b(t,e,o||le.empty,l))){e.preventDefault();return}if(!o)return;e.preventDefault();let c=o?wA(t.state.doc,i.pos,o):i.pos;c==null&&(c=i.pos);let d=t.state.tr;if(l){let{node:b}=n;b?b.replace(d):d.deleteSelection()}let f=d.mapping.map(c),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,m=d.doc;if(p?d.replaceRangeWith(f,f,o.content.firstChild):d.replaceRange(f,f,o),d.doc.eq(m))return;let v=d.doc.resolve(f);if(p&&ge.isSelectable(o.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new ge(v));else{let b=d.mapping.map(c);d.mapping.maps[d.mapping.maps.length-1].forEach((w,S,E,T)=>b=T),d.setSelection(J0(t,v,d.doc.resolve(b)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))}fn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Oi(t)},20))};fn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};fn.beforeinput=(t,e)=>{if(Bt&&Ri&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,ho(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in hn)fn[t]=hn[t];function Jc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class If{constructor(e,n){this.toDOM=e,this.spec=n||xo,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:l}=e.mapResult(n.from+i,this.side<0?-1:1);return l?null:new dn(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof If&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Jc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Is{constructor(e,n){this.attrs=e,this.spec=n||xo}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,l=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new dn(o,l,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Is&&Jc(this.attrs,e.attrs)&&Jc(this.spec,e.spec)}static is(e){return e.type instanceof Is}destroy(){}}class Q0{constructor(e,n){this.attrs=e,this.spec=n||xo}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let l=e.mapResult(n.to+i,-1);return l.deleted||l.pos<=o.pos?null:new dn(o.pos-r,l.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof Q0&&Jc(this.attrs,e.attrs)&&Jc(this.spec,e.spec)}destroy(){}}class dn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new dn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new dn(e,e,new If(n,r))}static inline(e,n,r,i){return new dn(e,n,new Is(r,i))}static node(e,n,r,i){return new dn(e,n,new Q0(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Is}get widget(){return this.type instanceof If}}const Da=[],xo={};class ct{constructor(e,n){this.local=e.length?e:Da,this.children=n.length?n:Da}static create(e,n){return n.length?Df(n,e,0,xo):sn}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let l=0;l<this.local.length;l++){let c=this.local[l];c.from<=n&&c.to>=e&&(!o||o(c.spec))&&r.push(c.copy(c.from+i,c.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<n&&this.children[l+1]>e){let c=this.children[l]+1;this.children[l+2].findInner(e-c,n-c,r,i+c,o)}}map(e,n,r){return this==sn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||xo)}mapInner(e,n,r,i,o){let l;for(let c=0;c<this.local.length;c++){let d=this.local[c].map(e,r,i);d&&d.type.valid(n,d)?(l||(l=[])).push(d):o.onRemove&&o.onRemove(this.local[c].spec)}return this.children.length?Xz(this.children,l||[],e,n,r,i,o):l?new ct(l.sort(wo),Da):sn}add(e,n){return n.length?this==sn?ct.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((c,d)=>{let f=d+r,p;if(p=xN(n,c,f)){for(i||(i=this.children.slice());o<i.length&&i[o]<d;)o+=3;i[o]==d?i[o+2]=i[o+2].addInner(c,p,f+1):i.splice(o,0,d,d+c.nodeSize,Df(p,c,f+1,xo)),o+=3}});let l=bN(o?wN(n):n,-r);for(let c=0;c<l.length;c++)l[c].type.valid(e,l[c])||l.splice(c--,1);return new ct(l.length?this.local.concat(l).sort(wo):this.local,i||this.children)}remove(e){return e.length==0||this==sn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let l,c=r[o]+n,d=r[o+1]+n;for(let p=0,m;p<e.length;p++)(m=e[p])&&m.from>c&&m.to<d&&(e[p]=null,(l||(l=[])).push(m));if(!l)continue;r==this.children&&(r=this.children.slice());let f=r[o+2].removeInner(l,c+1);f!=sn?r[o+2]=f:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let c=0;c<i.length;c++)i[c].eq(l,n)&&(i==this.local&&(i=this.local.slice()),i.splice(c--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new ct(i,r):sn}forChild(e,n){if(this==sn)return this;if(n.isLeaf)return ct.empty;let r,i;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=e){this.children[c]==e&&(r=this.children[c+2]);break}let o=e+1,l=o+n.content.size;for(let c=0;c<this.local.length;c++){let d=this.local[c];if(d.from<l&&d.to>o&&d.type instanceof Is){let f=Math.max(o,d.from)-o,p=Math.min(l,d.to)-o;f<p&&(i||(i=[])).push(d.copy(f,p))}}if(i){let c=new ct(i.sort(wo),Da);return r?new Ss([c,r]):c}return r||sn}eq(e){if(this==e)return!0;if(!(e instanceof ct)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Z0(this.localsInner(e))}localsInner(e){if(this==sn)return Da;if(e.inlineContent||!this.local.some(Is.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Is||n.push(this.local[r]);return n}forEachSet(e){e(this)}}ct.empty=new ct([],[]);ct.removeOverlap=Z0;const sn=ct.empty;class Ss{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,xo));return Ss.from(r)}forChild(e,n){if(n.isLeaf)return ct.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=sn&&(o instanceof Ss?r=r.concat(o.members):r.push(o))}return Ss.from(r)}eq(e){if(!(e instanceof Ss)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let l=0;l<o.length;l++)n.push(o[l])}}return n?Z0(r?n:n.sort(wo)):Da}static from(e){switch(e.length){case 0:return sn;case 1:return e[0];default:return new Ss(e.every(n=>n instanceof ct)?e:e.reduce((n,r)=>n.concat(r instanceof ct?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function Xz(t,e,n,r,i,o,l){let c=t.slice();for(let f=0,p=o;f<n.maps.length;f++){let m=0;n.maps[f].forEach((v,b,w,S)=>{let E=S-w-(b-v);for(let T=0;T<c.length;T+=3){let N=c[T+1];if(N<0||v>N+p-m)continue;let A=c[T]+p-m;b>=A?c[T+1]=v<=A?-2:-1:v>=p&&E&&(c[T]+=E,c[T+1]+=E)}m+=E}),p=n.maps[f].map(p,-1)}let d=!1;for(let f=0;f<c.length;f+=3)if(c[f+1]<0){if(c[f+1]==-2){d=!0,c[f+1]=-1;continue}let p=n.map(t[f]+o),m=p-i;if(m<0||m>=r.content.size){d=!0;continue}let v=n.map(t[f+1]+o,-1),b=v-i,{index:w,offset:S}=r.content.findIndex(m),E=r.maybeChild(w);if(E&&S==m&&S+E.nodeSize==b){let T=c[f+2].mapInner(n,E,p+1,t[f]+o+1,l);T!=sn?(c[f]=m,c[f+1]=b,c[f+2]=T):(c[f+1]=-2,d=!0)}else d=!0}if(d){let f=Qz(c,t,e,n,i,o,l),p=Df(f,r,0,l);e=p.local;for(let m=0;m<c.length;m+=3)c[m+1]<0&&(c.splice(m,3),m-=3);for(let m=0,v=0;m<p.children.length;m+=3){let b=p.children[m];for(;v<c.length&&c[v]<b;)v+=3;c.splice(v,0,p.children[m],p.children[m+1],p.children[m+2])}}return new ct(e.sort(wo),c)}function bN(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new dn(i.from+e,i.to+e,i.type))}return n}function Qz(t,e,n,r,i,o,l){function c(d,f){for(let p=0;p<d.local.length;p++){let m=d.local[p].map(r,i,f);m?n.push(m):l.onRemove&&l.onRemove(d.local[p].spec)}for(let p=0;p<d.children.length;p+=3)c(d.children[p+2],d.children[p]+f+1)}for(let d=0;d<t.length;d+=3)t[d+1]==-1&&c(t[d+2],e[d]+o+1);return n}function xN(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,l;o<t.length;o++)(l=t[o])&&l.from>n&&l.to<r&&((i||(i=[])).push(l),t[o]=null);return i}function wN(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Df(t,e,n,r){let i=[],o=!1;e.forEach((c,d)=>{let f=xN(t,c,d+n);if(f){o=!0;let p=Df(f,c,n+d+1,r);p!=sn&&i.push(d,d+c.nodeSize,p)}});let l=bN(o?wN(t):t,-n).sort(wo);for(let c=0;c<l.length;c++)l[c].type.valid(e,l[c])||(r.onRemove&&r.onRemove(l[c].spec),l.splice(c--,1));return l.length||i.length?new ct(l,i):sn}function wo(t,e){return t.from-e.from||t.to-e.to}function Z0(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),pT(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),pT(e,i,r.copy(o.from,r.to)));break}}}return e}function pT(t,e,n){for(;e<t.length&&wo(n,t[e])>0;)e++;t.splice(e,0,n)}function Jg(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=sn&&e.push(r)}),t.cursorWrapper&&e.push(ct.create(t.state.doc,[t.cursorWrapper.deco])),Ss.from(e)}const Zz={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ej=kn&&Rs<=11;class tj{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class nj{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new tj,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);kn&&Rs<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():Zt&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),ej&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Zz)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(oT(this.view)){if(this.suppressingSelectionUpdates)return Oi(this.view);if(kn&&Rs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&To(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=Ga(o))n.add(o);for(let o=e.anchorNode;o;o=Ga(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&oT(e)&&!this.ignoreSelectionChange(r),o=-1,l=-1,c=!1,d=[];if(e.editable)for(let p=0;p<n.length;p++){let m=this.registerMutation(n[p],d);m&&(o=o<0?m.from:Math.min(m.from,o),l=l<0?m.to:Math.max(m.to,l),m.typeOver&&(c=!0))}if(ur&&d.length){let p=d.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,v]=p;m.parentNode&&m.parentNode.parentNode==v.parentNode?v.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let v of p){let b=v.parentNode;b&&b.nodeName=="LI"&&(!m||sj(e,m)!=b)&&v.remove()}}}else if((Bt||Zt)&&d.some(p=>p.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let p of d)if(p.nodeName=="BR"&&p.parentNode){let m=p.nextSibling;m&&m.nodeType==1&&m.contentEditable=="false"&&p.parentNode.removeChild(p)}}let f=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&zh(r)&&(f=G0(e))&&f.eq(we.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Oi(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,l),rj(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,oj(e,d)),this.handleDOMChange(o,l,c,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Oi(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let m=e.addedNodes[p];n.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(kn&&Rs<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:m,nextSibling:v}=e.addedNodes[p];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(i=m),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(o=v)}let l=i&&i.parentNode==e.target?Wt(i)+1:0,c=r.localPosFromDOM(e.target,l,-1),d=o&&o.parentNode==e.target?Wt(o):e.target.childNodes.length,f=r.localPosFromDOM(e.target,d,1);return{from:c,to:f}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let mT=new WeakMap,gT=!1;function rj(t){if(!mT.has(t)&&(mT.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ur,gT)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),gT=!0}}function yT(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,l=t.domAtPos(t.state.selection.anchor);return To(l.node,l.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function ij(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return yT(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?yT(t,n):null}function sj(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function oj(t,e){var n;let{focusNode:r,focusOffset:i}=t.domSelectionRange();for(let o of e)if(((n=o.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let l=o.nextSibling;for(;l&&l.nodeName!="TD"&&l.nodeName!="TH";)l=l.nextSibling;if(l){let c=l;for(;;){let d=c.firstChild;if(!d||d.nodeType!=1||d.contentEditable=="false"||/^(BR|IMG)$/.test(d.nodeName))break;c=d}c.insertBefore(o,c.firstChild),r==o&&t.domSelection().collapse(o,i)}else o.parentNode.removeChild(o)}}function aj(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:l,to:c}=t.docView.parseRange(e,n),d=t.domSelectionRange(),f,p=d.anchorNode;if(p&&t.dom.contains(p.nodeType==1?p:p.parentNode)&&(f=[{node:p,offset:d.anchorOffset}],zh(d)||f.push({node:d.focusNode,offset:d.focusOffset})),Bt&&t.input.lastKeyCode===8)for(let E=o;E>i;E--){let T=r.childNodes[E-1],N=T.pmViewDesc;if(T.nodeName=="BR"&&!N){o=E;break}if(!N||N.size)break}let m=t.state.doc,v=t.someProp("domParser")||ks.fromSchema(t.state.schema),b=m.resolve(l),w=null,S=v.parse(r,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:i,to:o,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:lj,context:b});if(f&&f[0].pos!=null){let E=f[0].pos,T=f[1]&&f[1].pos;T==null&&(T=E),w={anchor:E+l,head:T+l}}return{doc:S,sel:w,from:l,to:c}}function lj(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Zt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Zt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const cj=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function uj(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let R=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,B=G0(t,R);if(B&&!t.state.selection.eq(B)){if(Bt&&Ri&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",F=>F(t,ho(13,"Enter"))))return;let z=t.state.tr.setSelection(B);R=="pointer"?z.setMeta("pointer",!0):R=="key"&&z.scrollIntoView(),o&&z.setMeta("composition",o),t.dispatch(z)}return}let l=t.state.doc.resolve(e),c=l.sharedDepth(n);e=l.before(c+1),n=t.state.doc.resolve(n).after(c+1);let d=t.state.selection,f=aj(t,e,n),p=t.state.doc,m=p.slice(f.from,f.to),v,b;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(v=t.state.selection.to,b="end"):(v=t.state.selection.from,b="start"),t.input.lastKeyCode=null;let w=hj(m.content,f.doc.content,f.from,v,b);if(w&&t.input.domChangeCount++,(Ja&&t.input.lastIOSEnter>Date.now()-225||Ri)&&i.some(R=>R.nodeType==1&&!cj.test(R.nodeName))&&(!w||w.endA>=w.endB)&&t.someProp("handleKeyDown",R=>R(t,ho(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!w)if(r&&d instanceof Se&&!d.empty&&d.$head.sameParent(d.$anchor)&&!t.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))w={start:d.from,endA:d.to,endB:d.to};else{if(f.sel){let R=vT(t,t.state.doc,f.sel);if(R&&!R.eq(t.state.selection)){let B=t.state.tr.setSelection(R);o&&B.setMeta("composition",o),t.dispatch(B)}}return}t.state.selection.from<t.state.selection.to&&w.start==w.endB&&t.state.selection instanceof Se&&(w.start>t.state.selection.from&&w.start<=t.state.selection.from+2&&t.state.selection.from>=f.from?w.start=t.state.selection.from:w.endA<t.state.selection.to&&w.endA>=t.state.selection.to-2&&t.state.selection.to<=f.to&&(w.endB+=t.state.selection.to-w.endA,w.endA=t.state.selection.to)),kn&&Rs<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>f.from&&f.doc.textBetween(w.start-f.from-1,w.start-f.from+1)==" "&&(w.start--,w.endA--,w.endB--);let S=f.doc.resolveNoCache(w.start-f.from),E=f.doc.resolveNoCache(w.endB-f.from),T=p.resolve(w.start),N=S.sameParent(E)&&S.parent.inlineContent&&T.end()>=w.endA;if((Ja&&t.input.lastIOSEnter>Date.now()-225&&(!N||i.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!N&&S.pos<f.doc.content.size&&(!S.sameParent(E)||!S.parent.inlineContent)&&S.pos<E.pos&&!/\S/.test(f.doc.textBetween(S.pos,E.pos,"","")))&&t.someProp("handleKeyDown",R=>R(t,ho(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>w.start&&fj(p,w.start,w.endA,S,E)&&t.someProp("handleKeyDown",R=>R(t,ho(8,"Backspace")))){Ri&&Bt&&t.domObserver.suppressSelectionUpdates();return}Bt&&w.endB==w.start&&(t.input.lastChromeDelete=Date.now()),Ri&&!N&&S.start()!=E.start()&&E.parentOffset==0&&S.depth==E.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==w.endA&&(w.endB-=2,E=f.doc.resolveNoCache(w.endB-f.from),setTimeout(()=>{t.someProp("handleKeyDown",function(R){return R(t,ho(13,"Enter"))})},20));let A=w.start,I=w.endA,M=R=>{let B=R||t.state.tr.replace(A,I,f.doc.slice(w.start-f.from,w.endB-f.from));if(f.sel){let z=vT(t,B.doc,f.sel);z&&!(Bt&&t.composing&&z.empty&&(w.start!=w.endB||t.input.lastChromeDelete<Date.now()-100)&&(z.head==A||z.head==B.mapping.map(I)-1)||kn&&z.empty&&z.head==A)&&B.setSelection(z)}return o&&B.setMeta("composition",o),B.scrollIntoView()},D;if(N)if(S.pos==E.pos){kn&&Rs<=11&&S.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Oi(t),20));let R=M(t.state.tr.delete(A,I)),B=p.resolve(w.start).marksAcross(p.resolve(w.endA));B&&R.ensureMarks(B),t.dispatch(R)}else if(w.endA==w.endB&&(D=dj(S.parent.content.cut(S.parentOffset,E.parentOffset),T.parent.content.cut(T.parentOffset,w.endA-T.start())))){let R=M(t.state.tr);D.type=="add"?R.addMark(A,I,D.mark):R.removeMark(A,I,D.mark),t.dispatch(R)}else if(S.parent.child(S.index()).isText&&S.index()==E.index()-(E.textOffset?0:1)){let R=S.parent.textBetween(S.parentOffset,E.parentOffset),B=()=>M(t.state.tr.insertText(R,A,I));t.someProp("handleTextInput",z=>z(t,A,I,R,B))||t.dispatch(B())}else t.dispatch(M());else t.dispatch(M())}function vT(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:J0(t,e.resolve(n.anchor),e.resolve(n.head))}function dj(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,l,c,d;for(let p=0;p<r.length;p++)i=r[p].removeFromSet(i);for(let p=0;p<n.length;p++)o=n[p].removeFromSet(o);if(i.length==1&&o.length==0)c=i[0],l="add",d=p=>p.mark(c.addToSet(p.marks));else if(i.length==0&&o.length==1)c=o[0],l="remove",d=p=>p.mark(c.removeFromSet(p.marks));else return null;let f=[];for(let p=0;p<e.childCount;p++)f.push(d(e.child(p)));if(re.from(f).eq(t))return{mark:c,type:l}}function fj(t,e,n,r,i){if(n-e<=i.pos-r.pos||Kg(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let c=o.nodeAfter;return c!=null&&n==e+c.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=t.resolve(Kg(o,!0,!0));return!l.parent.isTextblock||l.pos>n||Kg(l,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function Kg(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function hj(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:l,b:c}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let d=Math.max(0,o-Math.min(l,c));r-=l+d-o}if(l<o&&t.size<e.size){let d=r<=o&&r>=l?o-r:0;o-=d,o&&o<e.size&&bT(e.textBetween(o-1,o+1))&&(o+=d?1:-1),c=o+(c-l),l=o}else if(c<o){let d=r<=o&&r>=c?o-r:0;o-=d,o&&o<t.size&&bT(t.textBetween(o-1,o+1))&&(o+=d?1:-1),l=o+(l-c),c=o}return{start:o,endA:l,endB:c}}function bT(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class SN{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new kz,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(CT),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=ST(this),wT(this),this.nodeViews=ET(this),this.docView=eT(this.state.doc,xT(this),Jg(this),this.dom,this),this.domObserver=new nj(this,(r,i,o,l)=>uj(this,r,i,o,l)),this.domObserver.start(),Rz(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Yy(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(CT),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(mN(this),l=!0),this.state=e;let c=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(c||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let b=ET(this);mj(b,this.nodeViews)&&(this.nodeViews=b,o=!0)}(c||n.handleDOMEvents!=this._props.handleDOMEvents)&&Yy(this),this.editable=ST(this),wT(this);let d=Jg(this),f=xT(this),p=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",m=o||!this.docView.matchesNode(e.doc,f,d);(m||!e.selection.eq(i.selection))&&(l=!0);let v=p=="preserve"&&l&&this.dom.style.overflowAnchor==null&&VB(this);if(l){this.domObserver.stop();let b=m&&(kn||Bt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&pj(i.selection,e.selection);if(m){let w=Bt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Vz(this)),(o||!this.docView.update(e.doc,f,d,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=eT(e.doc,f,d,this.dom,this)),w&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(b=!0)}b||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&pz(this))?Oi(this,b):(rN(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():v&&FB(v)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ge){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&KC(this,n.getBoundingClientRect(),e)}else KC(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new yN(e.slice,e.move,i<0?void 0:ge.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let l=0;l<this.directPlugins.length;l++){let c=this.directPlugins[l].props[e];if(c!=null&&(i=n?n(c):c))return i}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let c=o[l].props[e];if(c!=null&&(i=n?n(c):c))return i}}hasFocus(){if(kn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&GB(this.dom),Oi(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return XB(this,e)}coordsAtPos(e,n=1){return YA(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return nz(this,n||this.state,e)}pasteHTML(e,n){return Gc(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Gc(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return K0(this,e)}destroy(){this.docView&&(Mz(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Jg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,OB())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Dz(this,e)}domSelectionRange(){let e=this.domSelection();return e?Zt&&this.root.nodeType===11&&zB(this.dom.ownerDocument)==this.dom&&ij(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}SN.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function xT(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[dn.node(0,t.state.doc.content.size,e)]}function wT(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:dn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function ST(t){return!t.someProp("editable",e=>e(t.state)===!1)}function pj(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function ET(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function mj(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function CT(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ds={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Of={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},gj=typeof navigator<"u"&&/Mac/.test(navigator.platform),yj=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Xt=0;Xt<10;Xt++)Ds[48+Xt]=Ds[96+Xt]=String(Xt);for(var Xt=1;Xt<=24;Xt++)Ds[Xt+111]="F"+Xt;for(var Xt=65;Xt<=90;Xt++)Ds[Xt]=String.fromCharCode(Xt+32),Of[Xt]=String.fromCharCode(Xt);for(var Yg in Ds)Of.hasOwnProperty(Yg)||(Of[Yg]=Ds[Yg]);function vj(t){var e=gj&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||yj&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Of:Ds)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const bj=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),xj=typeof navigator<"u"&&/Win/.test(navigator.platform);function wj(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,l;for(let c=0;c<e.length-1;c++){let d=e[c];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))bj?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),l&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function Sj(t){let e=Object.create(null);for(let n in t)e[wj(n)]=t[n];return e}function Wg(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Ej(t){return new tt({props:{handleKeyDown:ev(t)}})}function ev(t){let e=Sj(t);return function(n,r){let i=vj(r),o,l=e[Wg(i,r)];if(l&&l(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let c=e[Wg(i,r,!1)];if(c&&c(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(xj&&r.ctrlKey&&r.altKey)&&(o=Ds[r.keyCode])&&o!=i){let c=e[Wg(o,r)];if(c&&c(n.state,n.dispatch,n))return!0}}return!1}}var Cj=Object.defineProperty,tv=(t,e)=>{for(var n in e)Cj(t,n,{get:e[n],enumerable:!0})};function Hh(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}var $h=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...f)=>{const p=c(...f)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,l=[],c=!!t,d=t||i.tr,f=()=>(!c&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(d),l.every(m=>m===!0)),p={...Object.fromEntries(Object.entries(n).map(([m,v])=>[m,(...w)=>{const S=this.buildProps(d,e),E=v(...w)(S);return l.push(E),p}])),run:f};return p}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,o=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([c,d])=>[c,(...f)=>d(...f)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,l={tr:t,editor:r,view:o,state:Hh({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([c,d])=>[c,(...f)=>d(...f)(l)]))}};return l}},EN={};tv(EN,{blur:()=>Tj,clearContent:()=>_j,clearNodes:()=>Aj,command:()=>Nj,createParagraphNear:()=>kj,cut:()=>Rj,deleteCurrentNode:()=>Mj,deleteNode:()=>Ij,deleteRange:()=>Dj,deleteSelection:()=>Oj,enter:()=>Lj,exitCode:()=>Pj,extendMarkRange:()=>Uj,first:()=>Bj,focus:()=>jj,forEach:()=>qj,insertContent:()=>Hj,insertContentAt:()=>Fj,joinBackward:()=>Kj,joinDown:()=>Jj,joinForward:()=>Yj,joinItemBackward:()=>Wj,joinItemForward:()=>Xj,joinTextblockBackward:()=>Qj,joinTextblockForward:()=>Zj,joinUp:()=>Gj,keyboardShortcut:()=>tq,lift:()=>nq,liftEmptyBlock:()=>rq,liftListItem:()=>iq,newlineInCode:()=>sq,resetAttributes:()=>oq,scrollIntoView:()=>aq,selectAll:()=>lq,selectNodeBackward:()=>cq,selectNodeForward:()=>uq,selectParentNode:()=>dq,selectTextblockEnd:()=>fq,selectTextblockStart:()=>hq,setContent:()=>pq,setMark:()=>Dq,setMeta:()=>Oq,setNode:()=>Lq,setNodeSelection:()=>Pq,setTextDirection:()=>Uq,setTextSelection:()=>Bq,sinkListItem:()=>zq,splitBlock:()=>jq,splitListItem:()=>qq,toggleList:()=>Hq,toggleMark:()=>$q,toggleNode:()=>Vq,toggleWrap:()=>Fq,undoInputRule:()=>Gq,unsetAllMarks:()=>Jq,unsetMark:()=>Kq,unsetTextDirection:()=>Yq,updateAttributes:()=>Wq,wrapIn:()=>Xq,wrapInList:()=>Qq});var Tj=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),_j=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),Aj=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:l})=>{t.doc.nodesBetween(o.pos,l.pos,(c,d)=>{if(c.type.isText)return;const{doc:f,mapping:p}=e,m=f.resolve(p.map(d)),v=f.resolve(p.map(d+c.nodeSize)),b=m.blockRange(v);if(!b)return;const w=ol(b);if(c.type.isTextblock){const{defaultType:S}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(b.start,S)}(w||w===0)&&e.lift(b,w)})}),!0},Nj=t=>e=>t(e),kj=()=>({state:t,dispatch:e})=>BA(t,e),Rj=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const l=r.mapping.map(e);return r.insert(l,o.content),r.setSelection(new Se(r.doc.resolve(Math.max(l-1,0)))),!0},Mj=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const c=i.before(o),d=i.after(o);t.delete(c,d).scrollIntoView()}return!0}return!1};function At(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var Ij=t=>({tr:e,state:n,dispatch:r})=>{const i=At(t,n.schema),o=e.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===i){if(r){const d=o.before(l),f=o.after(l);e.delete(d,f).scrollIntoView()}return!0}return!1},Dj=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},Oj=()=>({state:t,dispatch:e})=>j0(t,e),Lj=()=>({commands:t})=>t.keyboardShortcut("Enter"),Pj=()=>({state:t,dispatch:e})=>bB(t,e);function nv(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Lf(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:nv(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function CN(t,e,n={}){return t.find(r=>r.type===e&&Lf(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function TT(t,e,n={}){return!!CN(t,e,n)}function rv(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(p=>p.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(p=>p.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!CN([...i.node.marks],e,n)))return;let l=i.index,c=t.start()+i.offset,d=l+1,f=c+i.node.nodeSize;for(;l>0&&TT([...t.parent.child(l-1).marks],e,n);)l-=1,c-=t.parent.child(l).nodeSize;for(;d<t.parent.childCount&&TT([...t.parent.child(d).marks],e,n);)f+=t.parent.child(d).nodeSize,d+=1;return{from:c,to:f}}function zi(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var Uj=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=zi(t,r.schema),{doc:l,selection:c}=n,{$from:d,from:f,to:p}=c;if(i){const m=rv(d,o,e);if(m&&m.from<=f&&m.to>=p){const v=Se.create(l,m.from,m.to);n.setSelection(v)}}return!0},Bj=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function iv(t){return t instanceof Se}function Mi(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function TN(t,e=null){if(!e)return null;const n=we.atStart(t),r=we.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?Se.create(t,Mi(0,i,o),Mi(t.content.size,i,o)):Se.create(t,Mi(e,i,o),Mi(e,i,o))}function _T(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Pf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function zj(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var jj=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const l=()=>{(Pf()||_T())&&r.dom.focus(),zj()&&!Pf()&&!_T()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&t===null||t===!1)return!0}catch{return!1}if(o&&t===null&&!iv(n.state.selection))return l(),!0;const c=TN(i.doc,t)||n.state.selection,d=n.state.selection.eq(c);return o&&(d||i.setSelection(c),d&&i.storedMarks&&i.setStoredMarks(i.storedMarks),l()),!0},qj=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),Hj=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),_N=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&_N(r)}return t};function Hd(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return _N(n)}function Kc(t,e,n){if(t instanceof Ns||t instanceof re)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return re.fromArray(t.map(c=>e.nodeFromJSON(c)));const l=e.nodeFromJSON(t);return n.errorOnInvalidContent&&l.check(),l}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Kc("",e,n)}if(i){if(n.errorOnInvalidContent){let l=!1,c="";const d=new uA({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(l=!0,c=typeof f=="string"?f:f.outerHTML,null)}]}})});if(n.slice?ks.fromSchema(d).parseSlice(Hd(t),n.parseOptions):ks.fromSchema(d).parse(Hd(t),n.parseOptions),n.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const o=ks.fromSchema(e);return n.slice?o.parseSlice(Hd(t),n.parseOptions).content:o.parse(Hd(t),n.parseOptions)}return Kc("",e,n)}function $j(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ut||i instanceof zt))return;const o=t.mapping.maps[r];let l=0;o.forEach((c,d,f,p)=>{l===0&&(l=p)}),t.setSelection(we.near(t.doc.resolve(l),n))}var Vj=t=>!("type"in t),Fj=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var l;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let c;const d=E=>{o.emit("contentError",{editor:o,error:E,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Kc(e,o.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(E){d(E)}try{c=Kc(e,o.schema,{parseOptions:f,errorOnInvalidContent:(l=n.errorOnInvalidContent)!=null?l:o.options.enableContentCheck})}catch(E){return d(E),!1}let{from:p,to:m}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},v=!0,b=!0;if((Vj(c)?c:[c]).forEach(E=>{E.check(),v=v?E.isText&&E.marks.length===0:!1,b=b?E.isBlock:!1}),p===m&&b){const{parent:E}=r.doc.resolve(p);E.isTextblock&&!E.type.spec.code&&!E.childCount&&(p-=1,m+=1)}let S;if(v){if(Array.isArray(e))S=e.map(E=>E.text||"").join("");else if(e instanceof re){let E="";e.forEach(T=>{T.text&&(E+=T.text)}),S=E}else typeof e=="object"&&e&&e.text?S=e.text:S=e;r.insertText(S,p,m)}else{S=c;const E=r.doc.resolve(p),T=E.node(),N=E.parentOffset===0,A=T.isText||T.isTextblock,I=T.content.size>0;N&&A&&I&&(p=Math.max(0,p-1)),r.replaceWith(p,m,S)}n.updateSelection&&$j(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:S}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:S})}return!0},Gj=()=>({state:t,dispatch:e})=>gB(t,e),Jj=()=>({state:t,dispatch:e})=>yB(t,e),Kj=()=>({state:t,dispatch:e})=>MA(t,e),Yj=()=>({state:t,dispatch:e})=>LA(t,e),Wj=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ph(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Xj=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ph(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Qj=()=>({state:t,dispatch:e})=>pB(t,e),Zj=()=>({state:t,dispatch:e})=>mB(t,e);function AN(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function eq(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,l;for(let c=0;c<e.length-1;c+=1){const d=e[c];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))Pf()||AN()?l=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),l&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var tq=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=eq(t).split(/-(?!$)/),l=o.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),c=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{n.someProp("handleKeyDown",f=>f(n,c))});return d==null||d.steps.forEach(f=>{const p=f.map(r.mapping);p&&i&&r.maybeStep(p)}),!0};function Os(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,l=e?At(e,t.schema):null,c=[];t.doc.nodesBetween(r,i,(m,v)=>{if(m.isText)return;const b=Math.max(r,v),w=Math.min(i,v+m.nodeSize);c.push({node:m,from:b,to:w})});const d=i-r,f=c.filter(m=>l?l.name===m.node.type.name:!0).filter(m=>Lf(m.node.attrs,n,{strict:!1}));return o?!!f.length:f.reduce((m,v)=>m+v.to-v.from,0)>=d}var nq=(t,e={})=>({state:n,dispatch:r})=>{const i=At(t,n.schema);return Os(n,i,e)?vB(n,r):!1},rq=()=>({state:t,dispatch:e})=>zA(t,e),iq=t=>({state:e,dispatch:n})=>{const r=At(t,e.schema);return RB(r)(e,n)},sq=()=>({state:t,dispatch:e})=>UA(t,e);function Vh(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function AT(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var oq=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,l=null;const c=Vh(typeof t=="string"?t:t.name,r.schema);if(!c)return!1;c==="node"&&(o=At(t,r.schema)),c==="mark"&&(l=zi(t,r.schema));let d=!1;return n.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(p,m)=>{o&&o===p.type&&(d=!0,i&&n.setNodeMarkup(m,void 0,AT(p.attrs,e))),l&&p.marks.length&&p.marks.forEach(v=>{l===v.type&&(d=!0,i&&n.addMark(m,m+p.nodeSize,l.create(AT(v.attrs,e))))})})}),d},aq=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),lq=()=>({tr:t,dispatch:e})=>{if(e){const n=new jn(t.doc);t.setSelection(n)}return!0},cq=()=>({state:t,dispatch:e})=>DA(t,e),uq=()=>({state:t,dispatch:e})=>PA(t,e),dq=()=>({state:t,dispatch:e})=>SB(t,e),fq=()=>({state:t,dispatch:e})=>TB(t,e),hq=()=>({state:t,dispatch:e})=>CB(t,e);function Wy(t,e,n={},r={}){return Kc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var pq=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:o,dispatch:l,commands:c})=>{const{doc:d}=o;if(r.preserveWhitespace!=="full"){const f=Wy(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return l&&o.replaceWith(0,d.content.size,f).setMeta("preventUpdate",!n),!0}return l&&o.setMeta("preventUpdate",!n),c.insertContentAt({from:0,to:d.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function NN(t,e){const n=zi(e,t.schema),{from:r,to:i,empty:o}=t.selection,l=[];o?(t.storedMarks&&l.push(...t.storedMarks),l.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,d=>{l.push(...d.marks)});const c=l.find(d=>d.type.name===n.name);return c?{...c.attrs}:{}}function kN(t,e){const n=new _A(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function mq(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function gq(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function yq(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Fh(t){return e=>yq(e.$from,t)}function pe(t,e,n){return t.config[e]===void 0&&t.parent?pe(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?pe(t.parent,e,n):null}):t.config[e]}function sv(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=pe(e,"addExtensions",n);return r?[e,...sv(r())]:e}).flat(10)}function ov(t,e){const n=Ro.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function RN(t){return typeof t=="function"}function Fe(t,e=void 0,...n){return RN(t)?e?t.bind(e)(...n):t(...n):t}function vq(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ka(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function MN(t){const e=[],{nodeExtensions:n,markExtensions:r}=Ka(t),i=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(l=>{const c={name:l.name,options:l.options,storage:l.storage,extensions:i},d=pe(l,"addGlobalAttributes",c);if(!d)return;d().forEach(p=>{p.types.forEach(m=>{Object.entries(p.attributes).forEach(([v,b])=>{e.push({type:m,name:v,attribute:{...o,...b}})})})})}),i.forEach(l=>{const c={name:l.name,options:l.options,storage:l.storage},d=pe(l,"addAttributes",c);if(!d)return;const f=d();Object.entries(f).forEach(([p,m])=>{const v={...o,...m};typeof(v==null?void 0:v.default)=="function"&&(v.default=v.default()),v!=null&&v.isRequired&&(v==null?void 0:v.default)===void 0&&delete v.default,e.push({type:l.name,name:p,attribute:v})})}),e}function Nt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const c=o?String(o).split(" "):[],d=r[i]?r[i].split(" "):[],f=c.filter(p=>!d.includes(p));r[i]=[...d,...f].join(" ")}else if(i==="style"){const c=o?o.split(";").map(p=>p.trim()).filter(Boolean):[],d=r[i]?r[i].split(";").map(p=>p.trim()).filter(Boolean):[],f=new Map;d.forEach(p=>{const[m,v]=p.split(":").map(b=>b.trim());f.set(m,v)}),c.forEach(p=>{const[m,v]=p.split(":").map(b=>b.trim());f.set(m,v)}),r[i]=Array.from(f.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else r[i]=o}),r},{})}function Yc(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Nt(n,r),{})}function bq(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function NT(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,l)=>{const c=l.attribute.parseHTML?l.attribute.parseHTML(n):bq(n.getAttribute(l.name));return c==null?o:{...o,[l.name]:c}},{});return{...r,...i}}}}function kT(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&vq(n)?!1:n!=null))}function RT(t){var e,n;const r={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(r.default=t.attribute.default),((n=t==null?void 0:t.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function xq(t,e){var n;const r=MN(t),{nodeExtensions:i,markExtensions:o}=Ka(t),l=(n=i.find(f=>pe(f,"topNode")))==null?void 0:n.name,c=Object.fromEntries(i.map(f=>{const p=r.filter(T=>T.type===f.name),m={name:f.name,options:f.options,storage:f.storage,editor:e},v=t.reduce((T,N)=>{const A=pe(N,"extendNodeSchema",m);return{...T,...A?A(f):{}}},{}),b=kT({...v,content:Fe(pe(f,"content",m)),marks:Fe(pe(f,"marks",m)),group:Fe(pe(f,"group",m)),inline:Fe(pe(f,"inline",m)),atom:Fe(pe(f,"atom",m)),selectable:Fe(pe(f,"selectable",m)),draggable:Fe(pe(f,"draggable",m)),code:Fe(pe(f,"code",m)),whitespace:Fe(pe(f,"whitespace",m)),linebreakReplacement:Fe(pe(f,"linebreakReplacement",m)),defining:Fe(pe(f,"defining",m)),isolating:Fe(pe(f,"isolating",m)),attrs:Object.fromEntries(p.map(RT))}),w=Fe(pe(f,"parseHTML",m));w&&(b.parseDOM=w.map(T=>NT(T,p)));const S=pe(f,"renderHTML",m);S&&(b.toDOM=T=>S({node:T,HTMLAttributes:Yc(T,p)}));const E=pe(f,"renderText",m);return E&&(b.toText=E),[f.name,b]})),d=Object.fromEntries(o.map(f=>{const p=r.filter(E=>E.type===f.name),m={name:f.name,options:f.options,storage:f.storage,editor:e},v=t.reduce((E,T)=>{const N=pe(T,"extendMarkSchema",m);return{...E,...N?N(f):{}}},{}),b=kT({...v,inclusive:Fe(pe(f,"inclusive",m)),excludes:Fe(pe(f,"excludes",m)),group:Fe(pe(f,"group",m)),spanning:Fe(pe(f,"spanning",m)),code:Fe(pe(f,"code",m)),attrs:Object.fromEntries(p.map(RT))}),w=Fe(pe(f,"parseHTML",m));w&&(b.parseDOM=w.map(E=>NT(E,p)));const S=pe(f,"renderHTML",m);return S&&(b.toDOM=E=>S({mark:E,HTMLAttributes:Yc(E,p)})),[f.name,b]}));return new uA({topNode:l,nodes:c,marks:d})}function wq(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function Uf(t){return t.sort((n,r)=>{const i=pe(n,"priority")||100,o=pe(r,"priority")||100;return i>o?-1:i<o?1:0})}function IN(t){const e=Uf(sv(t)),n=wq(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function DN(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:l={}}=n||{};let c="";return t.nodesBetween(r,i,(d,f,p,m)=>{var v;d.isBlock&&f>r&&(c+=o);const b=l==null?void 0:l[d.type.name];if(b)return p&&(c+=b({node:d,pos:f,parent:p,index:m,range:e})),!1;d.isText&&(c+=(v=d==null?void 0:d.text)==null?void 0:v.slice(Math.max(r,f)-f,i-f))}),c}function ON(t,e){const n={from:0,to:t.content.size};return DN(t,n,e)}function av(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function Sq(t,e){const n=At(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,c=>{o.push(c)});const l=o.reverse().find(c=>c.type.name===n.name);return l?{...l.attrs}:{}}function LN(t,e){const n=Vh(typeof e=="string"?e:e.name,t.schema);return n==="node"?Sq(t,e):n==="mark"?NN(t,e):{}}function Eq(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function Cq(t){const e=Eq(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,l)=>l!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function PN(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const l=[];if(i.ranges.length)i.forEach((c,d)=>{l.push({from:c,to:d})});else{const{from:c,to:d}=n[o];if(c===void 0||d===void 0)return;l.push({from:c,to:d})}l.forEach(({from:c,to:d})=>{const f=e.slice(o).map(c,-1),p=e.slice(o).map(d),m=e.invert().map(f,-1),v=e.invert().map(p);r.push({oldRange:{from:m,to:v},newRange:{from:f,to:p}})})}),Cq(r)}function lv(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),l=rv(o,i.type);l&&r.push({mark:i,...l})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(l=>({from:o,to:o+i.nodeSize,mark:l})))}),r}var Tq=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let o=r,l=null;for(;o>0&&l===null;){const c=i.node(o);(c==null?void 0:c.type.name)===e?l=c:o-=1}return[l,o]};function $d(t,e){return e.nodes[t]||e.marks[t]||null}function af(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}var _q=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,l,c)=>{var d,f;const p=((f=(d=i.type.spec).toText)==null?void 0:f.call(d,{node:i,pos:o,parent:l,index:c}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?p:p.slice(0,Math.max(0,r-o))}),n};function Xy(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?zi(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(m=>o?o.name===m.type.name:!0).find(m=>Lf(m.attrs,n,{strict:!1}));let l=0;const c=[];if(i.forEach(({$from:m,$to:v})=>{const b=m.pos,w=v.pos;t.doc.nodesBetween(b,w,(S,E)=>{if(!S.isText&&!S.marks.length)return;const T=Math.max(b,E),N=Math.min(w,E+S.nodeSize),A=N-T;l+=A,c.push(...S.marks.map(I=>({mark:I,from:T,to:N})))})}),l===0)return!1;const d=c.filter(m=>o?o.name===m.mark.type.name:!0).filter(m=>Lf(m.mark.attrs,n,{strict:!1})).reduce((m,v)=>m+v.to-v.from,0),f=c.filter(m=>o?m.mark.type!==o&&m.mark.type.excludes(o):!0).reduce((m,v)=>m+v.to-v.from,0);return(d>0?d+f:d)>=l}function Aq(t,e,n={}){if(!e)return Os(t,null,n)||Xy(t,null,n);const r=Vh(e,t.schema);return r==="node"?Os(t,e,n):r==="mark"?Xy(t,e,n):!1}var Nq=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const o=Fh(c=>c.type.name===e)(t.selection);if(!o)return!1;const l=t.doc.resolve(o.pos+1);return i.pos+1===l.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},kq=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function MT(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function IT(t,e){const{nodeExtensions:n}=Ka(e),r=n.find(l=>l.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Fe(pe(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function Gh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(Gh(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function UN(t){return t instanceof ge}var BN=class zN{constructor(e){this.position=e}static fromJSON(e){return new zN(e.position)}toJSON(){return{position:this.position}}};function Rq(t,e){const n=e.mapping.mapResult(t.position);return{position:new BN(n.pos),mapResult:n}}function Mq(t){return new BN(t)}function jN(t,e,n){const i=t.state.doc.content.size,o=Mi(e,0,i),l=Mi(n,0,i),c=t.coordsAtPos(o),d=t.coordsAtPos(l,-1),f=Math.min(c.top,d.top),p=Math.max(c.bottom,d.bottom),m=Math.min(c.left,d.left),v=Math.max(c.right,d.right),b=v-m,w=p-f,T={top:f,bottom:p,left:m,right:v,width:b,height:w,x:m,y:f};return{...T,toJSON:()=>T}}function Iq(t,e,n){var r;const{selection:i}=e;let o=null;if(iv(i)&&(o=i.$cursor),o){const c=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(c)||!c.some(f=>f.type.excludes(n)))}const{ranges:l}=i;return l.some(({$from:c,$to:d})=>{let f=c.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(c.pos,d.pos,(p,m,v)=>{if(f)return!1;if(p.isInline){const b=!v||v.type.allowsMarkType(n),w=!!n.isInSet(p.marks)||!p.marks.some(S=>S.type.excludes(n));f=b&&w}return!f}),f})}var Dq=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:l,ranges:c}=o,d=zi(t,r.schema);if(i)if(l){const f=NN(r,d);n.addStoredMark(d.create({...f,...e}))}else c.forEach(f=>{const p=f.$from.pos,m=f.$to.pos;r.doc.nodesBetween(p,m,(v,b)=>{const w=Math.max(b,p),S=Math.min(b+v.nodeSize,m);v.marks.find(T=>T.type===d)?v.marks.forEach(T=>{d===T.type&&n.addMark(w,S,d.create({...T.attrs,...e}))}):n.addMark(w,S,d.create(e))})});return Iq(r,n,d)},Oq=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),Lq=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=At(t,n.schema);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:c})=>FC(o,{...l,...e})(n)?!0:c.clearNodes()).command(({state:c})=>FC(o,{...l,...e})(c,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Pq=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Mi(t,0,r.content.size),o=ge.create(r,i);e.setSelection(o)}return!0},Uq=(t,e)=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=r;let l,c;return typeof e=="number"?(l=e,c=e):e&&"from"in e&&"to"in e?(l=e.from,c=e.to):(l=o.from,c=o.to),i&&n.doc.nodesBetween(l,c,(d,f)=>{d.isText||n.setNodeMarkup(f,void 0,{...d.attrs,dir:t})}),!0},Bq=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,l=Se.atStart(r).from,c=Se.atEnd(r).to,d=Mi(i,l,c),f=Mi(o,l,c),p=Se.create(r,d,f);e.setSelection(p)}return!0},zq=t=>({state:e,dispatch:n})=>{const r=At(t,e.schema);return DB(r)(e,n)};function DT(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}var jq=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:l}=e,{$from:c,$to:d}=o,f=i.extensionManager.attributes,p=af(f,c.node().type.name,c.node().attrs);if(o instanceof ge&&o.node.isBlock)return!c.parentOffset||!Di(l,c.pos)?!1:(r&&(t&&DT(n,i.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const m=d.parentOffset===d.parent.content.size,v=c.depth===0?void 0:mq(c.node(-1).contentMatchAt(c.indexAfter(-1)));let b=m&&v?[{type:v,attrs:p}]:void 0,w=Di(e.doc,e.mapping.map(c.pos),1,b);if(!b&&!w&&Di(e.doc,e.mapping.map(c.pos),1,v?[{type:v}]:void 0)&&(w=!0,b=v?[{type:v,attrs:p}]:void 0),r){if(w&&(o instanceof Se&&e.deleteSelection(),e.split(e.mapping.map(c.pos),1,b),v&&!m&&!c.parentOffset&&c.parent.type!==v)){const S=e.mapping.map(c.before()),E=e.doc.resolve(S);c.node(-1).canReplaceWith(E.index(),E.index()+1,v)&&e.setNodeMarkup(e.mapping.map(c.before()),v)}t&&DT(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return w},qq=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var l;const c=At(t,r.schema),{$from:d,$to:f}=r.selection,p=r.selection.node;if(p&&p.isBlock||d.depth<2||!d.sameParent(f))return!1;const m=d.node(-1);if(m.type!==c)return!1;const v=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==c||d.index(-2)!==d.node(-2).childCount-1)return!1;if(i){let T=re.empty;const N=d.index(-1)?1:d.index(-2)?2:3;for(let B=d.depth-N;B>=d.depth-3;B-=1)T=re.from(d.node(B).copy(T));const A=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,I={...af(v,d.node().type.name,d.node().attrs),...e},M=((l=c.contentMatch.defaultType)==null?void 0:l.createAndFill(I))||void 0;T=T.append(re.from(c.createAndFill(null,M)||void 0));const D=d.before(d.depth-(N-1));n.replace(D,d.after(-A),new le(T,4-N,0));let R=-1;n.doc.nodesBetween(D,n.doc.content.size,(B,z)=>{if(R>-1)return!1;B.isTextblock&&B.content.size===0&&(R=z+1)}),R>-1&&n.setSelection(Se.near(n.doc.resolve(R))),n.scrollIntoView()}return!0}const b=f.pos===d.end()?m.contentMatchAt(0).defaultType:null,w={...af(v,m.type.name,m.attrs),...e},S={...af(v,d.node().type.name,d.node().attrs),...e};n.delete(d.pos,f.pos);const E=b?[{type:c,attrs:w},{type:b,attrs:S}]:[{type:c,attrs:w}];if(!Di(n.doc,d.pos,2))return!1;if(i){const{selection:T,storedMarks:N}=r,{splittableMarks:A}=o.extensionManager,I=N||T.$to.parentOffset&&T.$from.marks();if(n.split(d.pos,2,E).scrollIntoView(),!I||!i)return!0;const M=I.filter(D=>A.includes(D.type.name));n.ensureMarks(M)}return!0},Xg=(t,e)=>{const n=Fh(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Ps(t.doc,n.pos)&&t.join(n.pos),!0},Qg=(t,e)=>{const n=Fh(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Ps(t.doc,r)&&t.join(r),!0},Hq=(t,e,n,r={})=>({editor:i,tr:o,state:l,dispatch:c,chain:d,commands:f,can:p})=>{const{extensions:m,splittableMarks:v}=i.extensionManager,b=At(t,l.schema),w=At(e,l.schema),{selection:S,storedMarks:E}=l,{$from:T,$to:N}=S,A=T.blockRange(N),I=E||S.$to.parentOffset&&S.$from.marks();if(!A)return!1;const M=Fh(D=>IT(D.type.name,m))(S);if(A.depth>=1&&M&&A.depth-M.depth<=1){if(M.node.type===b)return f.liftListItem(w);if(IT(M.node.type.name,m)&&b.validContent(M.node.content)&&c)return d().command(()=>(o.setNodeMarkup(M.pos,b),!0)).command(()=>Xg(o,b)).command(()=>Qg(o,b)).run()}return!n||!I||!c?d().command(()=>p().wrapInList(b,r)?!0:f.clearNodes()).wrapInList(b,r).command(()=>Xg(o,b)).command(()=>Qg(o,b)).run():d().command(()=>{const D=p().wrapInList(b,r),R=I.filter(B=>v.includes(B.type.name));return o.ensureMarks(R),D?!0:f.clearNodes()}).wrapInList(b,r).command(()=>Xg(o,b)).command(()=>Qg(o,b)).run()},$q=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,l=zi(t,r.schema);return Xy(r,l,e)?i.unsetMark(l,{extendEmptyMarkRange:o}):i.setMark(l,e)},Vq=(t,e,n={})=>({state:r,commands:i})=>{const o=At(t,r.schema),l=At(e,r.schema),c=Os(r,o,n);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),c?i.setNode(l,d):i.setNode(o,{...d,...n})},Fq=(t,e={})=>({state:n,commands:r})=>{const i=At(t,n.schema);return Os(n,i,e)?r.lift(i):r.wrapIn(i,e)},Gq=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const l=t.tr,c=o.transform;for(let d=c.steps.length-1;d>=0;d-=1)l.step(c.steps[d].invert(c.docs[d]));if(o.text){const d=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,t.schema.text(o.text,d))}else l.delete(o.from,o.to)}return!0}}return!1},Jq=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},Kq=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:l=!1}=e,{selection:c}=n,d=zi(t,r.schema),{$from:f,empty:p,ranges:m}=c;if(!i)return!0;if(p&&l){let{from:v,to:b}=c;const w=(o=f.marks().find(E=>E.type===d))==null?void 0:o.attrs,S=rv(f,d,w);S&&(v=S.from,b=S.to),n.removeMark(v,b,d)}else m.forEach(v=>{n.removeMark(v.$from.pos,v.$to.pos,d)});return n.removeStoredMark(d),!0},Yq=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n;let o,l;return typeof t=="number"?(o=t,l=t):t&&"from"in t&&"to"in t?(o=t.from,l=t.to):(o=i.from,l=i.to),r&&e.doc.nodesBetween(o,l,(c,d)=>{if(c.isText)return;const f={...c.attrs};delete f.dir,e.setNodeMarkup(d,void 0,f)}),!0},Wq=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,l=null;const c=Vh(typeof t=="string"?t:t.name,r.schema);if(!c)return!1;c==="node"&&(o=At(t,r.schema)),c==="mark"&&(l=zi(t,r.schema));let d=!1;return n.selection.ranges.forEach(f=>{const p=f.$from.pos,m=f.$to.pos;let v,b,w,S;n.selection.empty?r.doc.nodesBetween(p,m,(E,T)=>{o&&o===E.type&&(d=!0,w=Math.max(T,p),S=Math.min(T+E.nodeSize,m),v=T,b=E)}):r.doc.nodesBetween(p,m,(E,T)=>{T<p&&o&&o===E.type&&(d=!0,w=Math.max(T,p),S=Math.min(T+E.nodeSize,m),v=T,b=E),T>=p&&T<=m&&(o&&o===E.type&&(d=!0,i&&n.setNodeMarkup(T,void 0,{...E.attrs,...e})),l&&E.marks.length&&E.marks.forEach(N=>{if(l===N.type&&(d=!0,i)){const A=Math.max(T,p),I=Math.min(T+E.nodeSize,m);n.addMark(A,I,l.create({...N.attrs,...e}))}}))}),b&&(v!==void 0&&i&&n.setNodeMarkup(v,void 0,{...b.attrs,...e}),l&&b.marks.length&&b.marks.forEach(E=>{l===E.type&&i&&n.addMark(w,S,l.create({...E.attrs,...e}))}))}),d},Xq=(t,e={})=>({state:n,dispatch:r})=>{const i=At(t,n.schema);return _B(i,e)(n,r)},Qq=(t,e={})=>({state:n,dispatch:r})=>{const i=At(t,n.schema);return AB(i,e)(n,r)},Zq=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},Jh=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},eH=(t,e)=>{if(nv(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Vd(t){var e;const{editor:n,from:r,to:i,text:o,rules:l,plugin:c}=t,{view:d}=n;if(d.composing)return!1;const f=d.state.doc.resolve(r);if(f.parent.type.spec.code||(e=f.nodeBefore||f.nodeAfter)!=null&&e.marks.find(v=>v.type.spec.code))return!1;let p=!1;const m=_q(f)+o;return l.forEach(v=>{if(p)return;const b=eH(m,v.find);if(!b)return;const w=d.state.tr,S=Hh({state:d.state,transaction:w}),E={from:r-(b[0].length-o.length),to:i},{commands:T,chain:N,can:A}=new $h({editor:n,state:S});v.handler({state:S,range:E,match:b,commands:T,chain:N,can:A})===null||!w.steps.length||(v.undoable&&w.setMeta(c,{transform:w,from:r,to:i,text:o}),d.dispatch(w),p=!0)}),p}function tH(t){const{editor:e,rules:n}=t,r=new tt({state:{init(){return null},apply(i,o,l){const c=i.getMeta(r);if(c)return c;const d=i.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:p}=d;typeof p=="string"?p=p:p=ov(re.from(p),l.schema);const{from:m}=d,v=m+p.length;Vd({editor:e,from:m,to:v,text:p,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,l,c){return Vd({editor:e,from:o,to:l,text:c,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Vd({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:l}=i.state.selection;return l?Vd({editor:e,from:l.pos,to:l.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function nH(t){return Object.prototype.toString.call(t).slice(8,-1)}function Fd(t){return nH(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function qN(t,e){const n={...t};return Fd(t)&&Fd(e)&&Object.keys(e).forEach(r=>{Fd(e[r])&&Fd(t[r])?n[r]=qN(t[r],e[r]):n[r]=e[r]}),n}var cv=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Fe(pe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Fe(pe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>qN(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Mo=class HN extends cv{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new HN(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const l=i.marks();if(!!!l.find(f=>(f==null?void 0:f.type.name)===n.name))return!1;const d=l.find(f=>(f==null?void 0:f.type.name)===n.name);return d&&r.removeStoredMark(d),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function rH(t){return typeof t=="number"}var iH=class{constructor(t){this.find=t.find,this.handler=t.handler}},sH=(t,e,n)=>{if(nv(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function oH(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:l,dropEvent:c}=t,{commands:d,chain:f,can:p}=new $h({editor:e,state:n}),m=[];return n.doc.nodesBetween(r,i,(b,w)=>{var S,E,T,N,A;if((E=(S=b.type)==null?void 0:S.spec)!=null&&E.code||!(b.isText||b.isTextblock||b.isInline))return;const I=(A=(N=(T=b.content)==null?void 0:T.size)!=null?N:b.nodeSize)!=null?A:0,M=Math.max(r,w),D=Math.min(i,w+I);if(M>=D)return;const R=b.isText?b.text||"":b.textBetween(M-w,D-w,void 0,"");sH(R,o.find,l).forEach(z=>{if(z.index===void 0)return;const F=M+z.index+1,Q=F+z[0].length,G={from:n.tr.mapping.map(F),to:n.tr.mapping.map(Q)},X=o.handler({state:n,range:G,match:z,commands:d,chain:f,can:p,pasteEvent:l,dropEvent:c});m.push(X)})}),m.every(b=>b!==null)}var Gd=null,aH=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function lH(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,c;try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}const d=({state:p,from:m,to:v,rule:b,pasteEvt:w})=>{const S=p.tr,E=Hh({state:p,transaction:S});if(!(!oH({editor:e,state:E,from:Math.max(m-1,0),to:v.b-1,rule:b,pasteEvent:w,dropEvent:c})||!S.steps.length)){try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return n.map(p=>new tt({view(m){const v=w=>{var S;r=(S=m.dom.parentElement)!=null&&S.contains(w.target)?m.dom.parentElement:null,r&&(Gd=e)},b=()=>{Gd&&(Gd=null)};return window.addEventListener("dragstart",v),window.addEventListener("dragend",b),{destroy(){window.removeEventListener("dragstart",v),window.removeEventListener("dragend",b)}}},props:{handleDOMEvents:{drop:(m,v)=>{if(o=r===m.dom.parentElement,c=v,!o){const b=Gd;b!=null&&b.isEditable&&setTimeout(()=>{const w=b.state.selection;w&&b.commands.deleteRange({from:w.from,to:w.to})},10)}return!1},paste:(m,v)=>{var b;const w=(b=v.clipboardData)==null?void 0:b.getData("text/html");return l=v,i=!!(w!=null&&w.includes("data-pm-slice")),!1}}},appendTransaction:(m,v,b)=>{const w=m[0],S=w.getMeta("uiEvent")==="paste"&&!i,E=w.getMeta("uiEvent")==="drop"&&!o,T=w.getMeta("applyPasteRules"),N=!!T;if(!S&&!E&&!N)return;if(N){let{text:M}=T;typeof M=="string"?M=M:M=ov(re.from(M),b.schema);const{from:D}=T,R=D+M.length,B=aH(M);return d({rule:p,state:b,from:D,to:{b:R},pasteEvt:B})}const A=v.doc.content.findDiffStart(b.doc.content),I=v.doc.content.findDiffEnd(b.doc.content);if(!(!rH(A)||!I||A===I.b))return d({rule:p,state:b,from:A,to:I,pasteEvt:l})}}))}var Kh=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=IN(t),this.schema=xq(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:$d(e.name,this.schema)},r=pe(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return Uf([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:$d(r.name,this.schema)},o=[],l=pe(r,"addKeyboardShortcuts",i);let c={};if(r.type==="mark"&&pe(r,"exitable",i)&&(c.ArrowRight=()=>Mo.handleExit({editor:t,mark:r})),l){const v=Object.fromEntries(Object.entries(l()).map(([b,w])=>[b,()=>w({editor:t})]));c={...c,...v}}const d=Ej(c);o.push(d);const f=pe(r,"addInputRules",i);if(MT(r,t.options.enableInputRules)&&f){const v=f();if(v&&v.length){const b=tH({editor:t,rules:v}),w=Array.isArray(b)?b:[b];o.push(...w)}}const p=pe(r,"addPasteRules",i);if(MT(r,t.options.enablePasteRules)&&p){const v=p();if(v&&v.length){const b=lH({editor:t,rules:v});o.push(...b)}}const m=pe(r,"addProseMirrorPlugins",i);if(m){const v=m();o.push(...v)}return o})}get attributes(){return MN(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ka(this.extensions);return Object.fromEntries(e.filter(n=>!!pe(n,"addNodeView")).map(n=>{const r=this.attributes.filter(d=>d.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:At(n.name,this.schema)},o=pe(n,"addNodeView",i);if(!o)return[];const l=o();if(!l)return[];const c=(d,f,p,m,v)=>{const b=Yc(d,r);return l({node:d,view:f,getPos:p,decorations:m,innerDecorations:v,editor:t,extension:n,HTMLAttributes:b})};return[n.name,c]}))}dispatchTransaction(t){const{editor:e}=this;return Uf([...this.extensions].reverse()).reduceRight((r,i)=>{const o={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:$d(i.name,this.schema)},l=pe(i,"dispatchTransaction",o);return l?c=>{l.call(o,{transaction:c,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Ka(this.extensions);return Object.fromEntries(e.filter(n=>!!pe(n,"addMarkView")).map(n=>{const r=this.attributes.filter(c=>c.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:zi(n.name,this.schema)},o=pe(n,"addMarkView",i);if(!o)return[];const l=(c,d,f)=>{const p=Yc(c,r);return o()({mark:c,view:d,inline:f,editor:t,extension:n,HTMLAttributes:p,updateAttributes:m=>{SH(c,t,m)}})};return[n.name,l]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:$d(e.name,this.schema)};e.type==="mark"&&((n=Fe(pe(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=pe(e,"onBeforeCreate",r),o=pe(e,"onCreate",r),l=pe(e,"onUpdate",r),c=pe(e,"onSelectionUpdate",r),d=pe(e,"onTransaction",r),f=pe(e,"onFocus",r),p=pe(e,"onBlur",r),m=pe(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),l&&this.editor.on("update",l),c&&this.editor.on("selectionUpdate",c),d&&this.editor.on("transaction",d),f&&this.editor.on("focus",f),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}};Kh.resolve=IN;Kh.sort=Uf;Kh.flatten=sv;var cH={};tv(cH,{ClipboardTextSerializer:()=>VN,Commands:()=>FN,Delete:()=>GN,Drop:()=>JN,Editable:()=>KN,FocusEvents:()=>WN,Keymap:()=>XN,Paste:()=>QN,Tabindex:()=>ZN,TextDirection:()=>ek,focusEventsPluginKey:()=>YN});var lt=class $N extends cv{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new $N(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},VN=lt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new tt({key:new at("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,l=Math.min(...o.map(p=>p.$from.pos)),c=Math.max(...o.map(p=>p.$to.pos)),d=av(n);return DN(r,{from:l,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),FN=lt.create({name:"commands",addCommands(){return{...EN}}}),GN=lt.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const o=()=>{var l,c,d,f;if((f=(d=(c=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:c.filterTransaction)==null?void 0:d.call(c,t))!=null?f:t.getMeta("y-sync$"))return;const p=kN(t.before,[t,...e]);PN(p).forEach(b=>{p.mapping.mapResult(b.oldRange.from).deletedAfter&&p.mapping.mapResult(b.oldRange.to).deletedBefore&&p.before.nodesBetween(b.oldRange.from,b.oldRange.to,(w,S)=>{const E=S+w.nodeSize-2,T=b.oldRange.from<=S&&E<=b.oldRange.to;this.editor.emit("delete",{type:"node",node:w,from:S,to:E,newFrom:p.mapping.map(S),newTo:p.mapping.map(E),deletedRange:b.oldRange,newRange:b.newRange,partial:!T,editor:this.editor,transaction:t,combinedTransform:p})})});const v=p.mapping;p.steps.forEach((b,w)=>{var S,E;if(b instanceof Tr){const T=v.slice(w).map(b.from,-1),N=v.slice(w).map(b.to),A=v.invert().map(T,-1),I=v.invert().map(N),M=(S=p.doc.nodeAt(T-1))==null?void 0:S.marks.some(R=>R.eq(b.mark)),D=(E=p.doc.nodeAt(N))==null?void 0:E.marks.some(R=>R.eq(b.mark));this.editor.emit("delete",{type:"mark",mark:b.mark,from:b.from,to:b.to,deletedRange:{from:A,to:I},newRange:{from:T,to:N},partial:!!(D||M),editor:this.editor,transaction:t,combinedTransform:p})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(o,0):o()}}),JN=lt.create({name:"drop",addProseMirrorPlugins(){return[new tt({key:new at("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),KN=lt.create({name:"editable",addProseMirrorPlugins(){return[new tt({key:new at("editable"),props:{editable:()=>this.editor.options.editable}})]}}),YN=new at("focusEvents"),WN=lt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new tt({key:YN,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),XN=lt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:c})=>{const{selection:d,doc:f}=c,{empty:p,$anchor:m}=d,{pos:v,parent:b}=m,w=m.parent.isTextblock&&v>0?c.doc.resolve(v-1):m,S=w.parent.type.spec.isolating,E=m.pos-m.parentOffset,T=S&&w.parent.childCount===1?E===m.pos:we.atStart(f).from===v;return!p||!b.type.isTextblock||b.textContent.length||!T||T&&m.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Pf()||AN()?o:i},addProseMirrorPlugins(){return[new tt({key:new at("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(S=>S.getMeta("composition")))return;const r=t.some(S=>S.docChanged)&&!e.doc.eq(n.doc),i=t.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:l,to:c}=e.selection,d=we.atStart(e.doc).from,f=we.atEnd(e.doc).to;if(o||!(l===d&&c===f)||!Gh(n.doc))return;const v=n.tr,b=Hh({state:n,transaction:v}),{commands:w}=new $h({editor:this.editor,state:b});if(w.clearNodes(),!!v.steps.length)return v}})]}}),QN=lt.create({name:"paste",addProseMirrorPlugins(){return[new tt({key:new at("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),ZN=lt.create({name:"tabindex",addProseMirrorPlugins(){return[new tt({key:new at("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),ek=lt.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Ka(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new tt({key:new at("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),uH=class uc{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new uc(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new uc(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new uc(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,l=n.isInline,c=this.pos+r+(o?0:1);if(c<0||c>this.resolvedPos.doc.nodeSize-2)return;const d=this.resolvedPos.doc.resolve(c);if(!i&&!l&&d.depth<=this.depth)return;const f=new uc(d,this.editor,i,i||l?n:null);i&&(f.actualDepth=this.depth+1),e.push(f)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,l=Object.keys(n);for(let c=0;c<l.length;c+=1){const d=l[c];if(o[d]!==n[d])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(l=>{r&&i.length>0||(l.node.type.name===e&&o.every(d=>n[d]===l.node.attrs[d])&&i.push(l),!(r&&i.length>0)&&(i=i.concat(l.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},dH=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function fH(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var hH=class extends Zq{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:Rq,createMappablePosition:Mq},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:o})=>this.options.onDrop(r,i,o)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=TN(e,this.options.autofocus);this.editorState=Pa.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=fH(dH,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=RN(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;n=n.filter(l=>!l.key.startsWith(o))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[KN,VN.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),FN,WN,XN,ZN,JN,QN,GN,ek.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Kh(r,this)}createCommandManager(){this.commandManager=new $h({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Wy(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Wy(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new SN(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.prependClass(),this.injectCSS();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(f=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(f)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const l=n.findLast(f=>f.getMeta("focus")||f.getMeta("blur")),c=l==null?void 0:l.getMeta("focus"),d=l==null?void 0:l.getMeta("blur");c&&this.emit("focus",{editor:this,event:c.event,transaction:l}),d&&this.emit("blur",{editor:this,event:d.event,transaction:l}),!(t.getMeta("preventUpdate")||!n.some(f=>f.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return LN(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return Aq(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return ov(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return ON(this.state.doc,{blockSeparator:e,textSerializers:{...av(this.schema),...n}})}get isEmpty(){return Gh(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new uH(e,this)}get $doc(){return this.$pos(0)}};function Ya(t){return new Jh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Fe(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,l=r[r.length-1],c=r[0];if(l){const d=c.search(/\S/),f=n.from+c.indexOf(l),p=f+l.length;if(lv(n.from,n.to,e.doc).filter(b=>b.mark.type.excluded.find(S=>S===t.type&&S!==b.mark.type)).filter(b=>b.to>f).length)return null;p<n.to&&o.delete(p,n.to),f>n.from&&o.delete(n.from+d,f);const v=n.from+d+l.length;o.addMark(n.from+d,v,t.type.create(i||{})),o.removeStoredMark(t.type)}},undoable:t.undoable})}function pH(t){return new Jh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Fe(t.getAttributes,void 0,r)||{},{tr:o}=e,l=n.from;let c=n.to;const d=t.type.create(i);if(r[1]){const f=r[0].lastIndexOf(r[1]);let p=l+f;p>c?p=c:c=p+r[1].length;const m=r[0][r[0].length-1];o.insertText(m,l+r[0].length-1),o.replaceWith(p,c,d)}else if(r[0]){const f=t.type.isInline?l:l-1;o.insert(f,t.type.create(i)).delete(o.mapping.map(l),o.mapping.map(c))}o.scrollIntoView()},undoable:t.undoable})}function Qy(t){return new Jh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=Fe(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)},undoable:t.undoable})}function Wa(t){return new Jh({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=Fe(t.getAttributes,void 0,r)||{},l=e.tr.delete(n.from,n.to),d=l.doc.resolve(n.from).blockRange(),f=d&&B0(d,t.type,o);if(!f)return null;if(l.wrap(d,f),t.keepMarks&&t.editor){const{selection:m,storedMarks:v}=e,{splittableMarks:b}=t.editor.extensionManager,w=v||m.$to.parentOffset&&m.$from.marks();if(w){const S=w.filter(E=>b.includes(E.type.name));l.ensureMarks(S)}}if(t.keepAttributes){const m=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(m,o).run()}const p=l.doc.resolve(n.from-1).nodeBefore;p&&p.type===t.type&&Ps(l.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,p))&&l.join(n.from-1)},undoable:t.undoable})}function mH(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof ge){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let i=r.depth;for(;i>=0;){const o=r.index(i);if(r.node(i).contentMatchAt(o).matchType(e))return!0;i-=1}return!1}var gH={};tv(gH,{createAtomBlockMarkdownSpec:()=>yH,createBlockMarkdownSpec:()=>vH,createInlineMarkdownSpec:()=>wH,parseAttributes:()=>uv,parseIndentedBlocks:()=>Zy,renderNestedMarkdownContent:()=>fv,serializeAttributes:()=>dv});function uv(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,f=>(n.push(f),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const f=i.map(p=>p.trim().slice(1));e.class=f.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const l=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(l)).forEach(([,f,p])=>{var m;const v=parseInt(((m=p.match(/__QUOTED_(\d+)__/))==null?void 0:m[1])||"0",10),b=n[v];b&&(e[f]=b.slice(1,-1))});const d=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(p=>{p.match(/^[a-zA-Z][\w-]*$/)&&(e[p]=!0)}),e}function dv(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function yH(t){const{nodeName:e,name:n,parseAttributes:r=uv,serializeAttributes:i=dv,defaultAttributes:o={},requiredAttributes:l=[],allowedAttributes:c}=t,d=n||e,f=p=>{if(!c)return p;const m={};return c.forEach(v=>{v in p&&(m[v]=p[v])}),m};return{parseMarkdown:(p,m)=>{const v={...o,...p.attributes};return m.createNode(e,v,[])},markdownTokenizer:{name:e,level:"block",start(p){var m;const v=new RegExp(`^:::${d}(?:\\s|$)`,"m"),b=(m=p.match(v))==null?void 0:m.index;return b!==void 0?b:-1},tokenize(p,m,v){const b=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),w=p.match(b);if(!w)return;const S=w[1]||"",E=r(S);if(!l.find(N=>!(N in E)))return{type:e,raw:w[0],attributes:E}}},renderMarkdown:p=>{const m=f(p.attrs||{}),v=i(m),b=v?` {${v}}`:"";return`:::${d}${b} :::`}}}function vH(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=uv,serializeAttributes:o=dv,defaultAttributes:l={},content:c="block",allowedAttributes:d}=t,f=n||e,p=m=>{if(!d)return m;const v={};return d.forEach(b=>{b in m&&(v[b]=m[b])}),v};return{parseMarkdown:(m,v)=>{let b;if(r){const S=r(m);b=typeof S=="string"?[{type:"text",text:S}]:S}else c==="block"?b=v.parseChildren(m.tokens||[]):b=v.parseInline(m.tokens||[]);const w={...l,...m.attributes};return v.createNode(e,w,b)},markdownTokenizer:{name:e,level:"block",start(m){var v;const b=new RegExp(`^:::${f}`,"m"),w=(v=m.match(b))==null?void 0:v.index;return w!==void 0?w:-1},tokenize(m,v,b){var w;const S=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),E=m.match(S);if(!E)return;const[T,N=""]=E,A=i(N);let I=1;const M=T.length;let D="";const R=/^:::([\w-]*)(\s.*)?/gm,B=m.slice(M);for(R.lastIndex=0;;){const z=R.exec(B);if(z===null)break;const F=z.index,Q=z[1];if(!((w=z[2])!=null&&w.endsWith(":::"))){if(Q)I+=1;else if(I-=1,I===0){const G=B.slice(0,F);D=G.trim();const X=m.slice(0,M+F+z[0].length);let q=[];if(D)if(c==="block")for(q=b.blockTokens(G),q.forEach(K=>{K.text&&(!K.tokens||K.tokens.length===0)&&(K.tokens=b.inlineTokens(K.text))});q.length>0;){const K=q[q.length-1];if(K.type==="paragraph"&&(!K.text||K.text.trim()===""))q.pop();else break}else q=b.inlineTokens(D);return{type:e,raw:X,attributes:A,content:D,tokens:q}}}}}},renderMarkdown:(m,v)=>{const b=p(m.attrs||{}),w=o(b),S=w?` {${w}}`:"",E=v.renderChildren(m.content||[],`

`);return`:::${f}${S}

${E}

:::`}}}function bH(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,o,l]=r;e[i]=o||l,r=n.exec(t)}return e}function xH(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function wH(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=bH,serializeAttributes:o=xH,defaultAttributes:l={},selfClosing:c=!1,allowedAttributes:d}=t,f=n||e,p=v=>{if(!d)return v;const b={};return d.forEach(w=>{const S=typeof w=="string"?w:w.name,E=typeof w=="string"?void 0:w.skipIfDefault;if(S in v){const T=v[S];if(E!==void 0&&T===E)return;b[S]=T}}),b},m=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(v,b)=>{const w={...l,...v.attributes};if(c)return b.createNode(e,w);const S=r?r(v):v.content||"";return S?b.createNode(e,w,[b.createTextNode(S)]):b.createNode(e,w,[])},markdownTokenizer:{name:e,level:"inline",start(v){const b=c?new RegExp(`\\[${m}\\s*[^\\]]*\\]`):new RegExp(`\\[${m}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${m}\\]`),w=v.match(b),S=w==null?void 0:w.index;return S!==void 0?S:-1},tokenize(v,b,w){const S=c?new RegExp(`^\\[${m}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${m}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${m}\\]`),E=v.match(S);if(!E)return;let T="",N="";if(c){const[,I]=E;N=I}else{const[,I,M]=E;N=I,T=M||""}const A=i(N.trim());return{type:e,raw:E[0],content:T.trim(),attributes:A}}},renderMarkdown:v=>{let b="";r?b=r(v):v.content&&v.content.length>0&&(b=v.content.filter(T=>T.type==="text").map(T=>T.text).join(""));const w=p(v.attrs||{}),S=o(w),E=S?` ${S}`:"";return c?`[${f}${E}]`:`[${f}${E}]${b}[/${f}]`}}}function Zy(t,e,n){var r,i,o,l;const c=t.split(`
`),d=[];let f="",p=0;const m=e.baseIndentSize||2;for(;p<c.length;){const v=c[p],b=v.match(e.itemPattern);if(!b){if(d.length>0)break;if(v.trim()===""){p+=1,f=`${f}${v}
`;continue}else return}const w=e.extractItemData(b),{indentLevel:S,mainContent:E}=w;f=`${f}${v}
`;const T=[E];for(p+=1;p<c.length;){const M=c[p];if(M.trim()===""){const R=c.slice(p+1).findIndex(F=>F.trim()!=="");if(R===-1)break;if((((i=(r=c[p+1+R].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>S){T.push(M),f=`${f}${M}
`,p+=1;continue}else break}if((((l=(o=M.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:l.length)||0)>S)T.push(M),f=`${f}${M}
`,p+=1;else break}let N;const A=T.slice(1);if(A.length>0){const M=A.map(D=>D.slice(S+m)).join(`
`);M.trim()&&(e.customNestedParser?N=e.customNestedParser(M):N=n.blockTokens(M))}const I=e.createToken(w,N);d.push(I)}if(d.length!==0)return{items:d,raw:f}}function fv(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[o,...l]=t.content,c=e.renderChildren([o]),d=[`${i}${c}`];return l&&l.length>0&&l.forEach(f=>{const p=e.renderChildren([f]);if(p){const m=p.split(`
`).map(v=>v?e.indent(v):"").join(`
`);d.push(m)}}),d.join(`
`)}function SH(t,e,n={}){const{state:r}=e,{doc:i,tr:o}=r,l=t;i.descendants((c,d)=>{const f=o.mapping.map(d),p=o.mapping.map(d)+c.nodeSize;let m=null;if(c.marks.forEach(b=>{if(b!==l)return!1;m=b}),!m)return;let v=!1;if(Object.keys(n).forEach(b=>{n[b]!==m.attrs[b]&&(v=!0)}),v){const b=t.type.create({...t.attrs,...n});o.removeMark(f,p,t.type),o.addMark(f,p,b)}}),o.docChanged&&e.view.dispatch(o)}var $n=class tk extends cv{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new tk(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Ao(t){return new iH({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=Fe(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:l}=e,c=r[r.length-1],d=r[0];let f=n.to;if(c){const p=d.search(/\S/),m=n.from+d.indexOf(c),v=m+c.length;if(lv(n.from,n.to,e.doc).filter(w=>w.mark.type.excluded.find(E=>E===t.type&&E!==w.mark.type)).filter(w=>w.to>m).length)return null;v<n.to&&l.delete(v,n.to),m>n.from&&l.delete(n.from+p,m),f=n.from+p+c.length,l.addMark(n.from+p,f,t.type.create(o||{})),l.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:EH,getOwnPropertySymbols:CH}=Object,{hasOwnProperty:TH}=Object.prototype;function Zg(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function Jd(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:o}=i,l=o.get(n),c=o.get(r);if(l&&c)return l===r&&c===n;o.set(n,r),o.set(r,n);const d=t(n,r,i);return o.delete(n),o.delete(r),d}}function _H(t){return t!=null?t[Symbol.toStringTag]:void 0}function OT(t){return EH(t).concat(CH(t))}const AH=Object.hasOwn||((t,e)=>TH.call(t,e));function Io(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const NH="__v",kH="__o",RH="_owner",{getOwnPropertyDescriptor:LT,keys:PT}=Object;function MH(t,e){return t.byteLength===e.byteLength&&Bf(new Uint8Array(t),new Uint8Array(e))}function IH(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function DH(t,e){return t.byteLength===e.byteLength&&Bf(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function OH(t,e){return Io(t.getTime(),e.getTime())}function LH(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function PH(t,e){return t===e}function UT(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.entries();let l,c,d=0;for(;(l=o.next())&&!l.done;){const f=e.entries();let p=!1,m=0;for(;(c=f.next())&&!c.done;){if(i[m]){m++;continue}const v=l.value,b=c.value;if(n.equals(v[0],b[0],d,m,t,e,n)&&n.equals(v[1],b[1],v[0],b[0],t,e,n)){p=i[m]=!0;break}m++}if(!p)return!1;d++}return!0}const UH=Io;function BH(t,e,n){const r=PT(t);let i=r.length;if(PT(e).length!==i)return!1;for(;i-- >0;)if(!nk(t,e,n,r[i]))return!1;return!0}function ic(t,e,n){const r=OT(t);let i=r.length;if(OT(e).length!==i)return!1;let o,l,c;for(;i-- >0;)if(o=r[i],!nk(t,e,n,o)||(l=LT(t,o),c=LT(e,o),(l||c)&&(!l||!c||l.configurable!==c.configurable||l.enumerable!==c.enumerable||l.writable!==c.writable)))return!1;return!0}function zH(t,e){return Io(t.valueOf(),e.valueOf())}function jH(t,e){return t.source===e.source&&t.flags===e.flags}function BT(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.values();let l,c;for(;(l=o.next())&&!l.done;){const d=e.values();let f=!1,p=0;for(;(c=d.next())&&!c.done;){if(!i[p]&&n.equals(l.value,c.value,l.value,c.value,t,e,n)){f=i[p]=!0;break}p++}if(!f)return!1}return!0}function Bf(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function qH(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function nk(t,e,n,r){return(r===RH||r===kH||r===NH)&&(t.$$typeof||e.$$typeof)?!0:AH(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const HH="[object ArrayBuffer]",$H="[object Arguments]",VH="[object Boolean]",FH="[object DataView]",GH="[object Date]",JH="[object Error]",KH="[object Map]",YH="[object Number]",WH="[object Object]",XH="[object RegExp]",QH="[object Set]",ZH="[object String]",e6={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},t6="[object URL]",n6=Object.prototype.toString;function r6({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:o,areMapsEqual:l,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:f,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:v,areUrlsEqual:b,unknownTagComparators:w}){return function(E,T,N){if(E===T)return!0;if(E==null||T==null)return!1;const A=typeof E;if(A!==typeof T)return!1;if(A!=="object")return A==="number"?c(E,T,N):A==="function"?o(E,T,N):!1;const I=E.constructor;if(I!==T.constructor)return!1;if(I===Object)return d(E,T,N);if(Array.isArray(E))return e(E,T,N);if(I===Date)return r(E,T,N);if(I===RegExp)return p(E,T,N);if(I===Map)return l(E,T,N);if(I===Set)return m(E,T,N);const M=n6.call(E);if(M===GH)return r(E,T,N);if(M===XH)return p(E,T,N);if(M===KH)return l(E,T,N);if(M===QH)return m(E,T,N);if(M===WH)return typeof E.then!="function"&&typeof T.then!="function"&&d(E,T,N);if(M===t6)return b(E,T,N);if(M===JH)return i(E,T,N);if(M===$H)return d(E,T,N);if(e6[M])return v(E,T,N);if(M===HH)return t(E,T,N);if(M===FH)return n(E,T,N);if(M===VH||M===YH||M===ZH)return f(E,T,N);if(w){let D=w[M];if(!D){const R=_H(E);R&&(D=w[R])}if(D)return D(E,T,N)}return!1}}function i6({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:MH,areArraysEqual:n?ic:IH,areDataViewsEqual:DH,areDatesEqual:OH,areErrorsEqual:LH,areFunctionsEqual:PH,areMapsEqual:n?Zg(UT,ic):UT,areNumbersEqual:UH,areObjectsEqual:n?ic:BH,arePrimitiveWrappersEqual:zH,areRegExpsEqual:jH,areSetsEqual:n?Zg(BT,ic):BT,areTypedArraysEqual:n?Zg(Bf,ic):Bf,areUrlsEqual:qH,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=Jd(r.areArraysEqual),o=Jd(r.areMapsEqual),l=Jd(r.areObjectsEqual),c=Jd(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return r}function s6(t){return function(e,n,r,i,o,l,c){return t(e,n,c)}}function o6({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(c,d){const{cache:f=t?new WeakMap:void 0,meta:p}=n();return e(c,d,{cache:f,equals:r,meta:p,strict:i})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const o={cache:void 0,equals:r,meta:void 0,strict:i};return function(c,d){return e(c,d,o)}}const a6=Bs();Bs({strict:!0});Bs({circular:!0});Bs({circular:!0,strict:!0});Bs({createInternalComparator:()=>Io});Bs({strict:!0,createInternalComparator:()=>Io});Bs({circular:!0,createInternalComparator:()=>Io});Bs({circular:!0,createInternalComparator:()=>Io,strict:!0});function Bs(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,o=i6(t),l=r6(o),c=n?n(l):s6(l);return o6({circular:e,comparator:l,createState:r,equals:c,strict:i})}var ey={exports:{}},ty={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT;function l6(){if(zT)return ty;zT=1;var t=Zc(),e=J_();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,l=t.useEffect,c=t.useMemo,d=t.useDebugValue;return ty.useSyncExternalStoreWithSelector=function(f,p,m,v,b){var w=o(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=c(function(){function T(D){if(!N){if(N=!0,A=D,D=v(D),b!==void 0&&S.hasValue){var R=S.value;if(b(R,D))return I=R}return I=D}if(R=I,r(A,D))return R;var B=v(D);return b!==void 0&&b(R,B)?(A=D,R):(A=D,I=B)}var N=!1,A,I,M=m===void 0?null:m;return[function(){return T(p())},M===null?void 0:function(){return T(M())}]},[p,m,v,b]);var E=i(f,w[0],w[1]);return l(function(){S.hasValue=!0,S.value=E},[E]),d(E),E},ty}var jT;function c6(){return jT||(jT=1,ey.exports=l6()),ey.exports}var u6=c6();const rk=["top","right","bottom","left"],qT=["start","end"],HT=rk.reduce((t,e)=>t.concat(e,e+"-"+qT[0],e+"-"+qT[1]),[]),Qr=Math.min,un=Math.max,zf=Math.round,Jr=t=>({x:t,y:t}),d6={left:"right",right:"left",bottom:"top",top:"bottom"},f6={start:"end",end:"start"};function e0(t,e,n){return un(t,Qr(e,n))}function ji(t,e){return typeof t=="function"?t(e):t}function hr(t){return t.split("-")[0]}function _r(t){return t.split("-")[1]}function ik(t){return t==="x"?"y":"x"}function hv(t){return t==="y"?"height":"width"}const h6=new Set(["top","bottom"]);function Gr(t){return h6.has(hr(t))?"y":"x"}function pv(t){return ik(Gr(t))}function sk(t,e,n){n===void 0&&(n=!1);const r=_r(t),i=pv(t),o=hv(i);let l=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=qf(l)),[l,qf(l)]}function p6(t){const e=qf(t);return[jf(t),e,jf(e)]}function jf(t){return t.replace(/start|end/g,e=>f6[e])}const $T=["left","right"],VT=["right","left"],m6=["top","bottom"],g6=["bottom","top"];function y6(t,e,n){switch(t){case"top":case"bottom":return n?e?VT:$T:e?$T:VT;case"left":case"right":return e?m6:g6;default:return[]}}function v6(t,e,n,r){const i=_r(t);let o=y6(hr(t),n==="start",r);return i&&(o=o.map(l=>l+"-"+i),e&&(o=o.concat(o.map(jf)))),o}function qf(t){return t.replace(/left|right|bottom|top/g,e=>d6[e])}function b6(t){return{top:0,right:0,bottom:0,left:0,...t}}function mv(t){return typeof t!="number"?b6(t):{top:t,right:t,bottom:t,left:t}}function Xa(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function FT(t,e,n){let{reference:r,floating:i}=t;const o=Gr(e),l=pv(e),c=hv(l),d=hr(e),f=o==="y",p=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,v=r[c]/2-i[c]/2;let b;switch(d){case"top":b={x:p,y:r.y-i.height};break;case"bottom":b={x:p,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:m};break;case"left":b={x:r.x-i.width,y:m};break;default:b={x:r.x,y:r.y}}switch(_r(e)){case"start":b[l]-=v*(n&&f?-1:1);break;case"end":b[l]+=v*(n&&f?-1:1);break}return b}async function x6(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:l,elements:c,strategy:d}=t,{boundary:f="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:v=!1,padding:b=0}=ji(e,t),w=mv(b),E=c[v?m==="floating"?"reference":"floating":m],T=Xa(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(E)))==null||n?E:E.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:f,rootBoundary:p,strategy:d})),N=m==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),I=await(o.isElement==null?void 0:o.isElement(A))?await(o.getScale==null?void 0:o.getScale(A))||{x:1,y:1}:{x:1,y:1},M=Xa(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:N,offsetParent:A,strategy:d}):N);return{top:(T.top-M.top+w.top)/I.y,bottom:(M.bottom-T.bottom+w.bottom)/I.y,left:(T.left-M.left+w.left)/I.x,right:(M.right-T.right+w.right)/I.x}}const w6=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:l}=n,c=o.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let f=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:m}=FT(f,r,d),v=r,b={},w=0;for(let E=0;E<c.length;E++){var S;const{name:T,fn:N}=c[E],{x:A,y:I,data:M,reset:D}=await N({x:p,y:m,initialPlacement:r,placement:v,strategy:i,middlewareData:b,rects:f,platform:{...l,detectOverflow:(S=l.detectOverflow)!=null?S:x6},elements:{reference:t,floating:e}});p=A??p,m=I??m,b={...b,[T]:{...b[T],...M}},D&&w<=50&&(w++,typeof D=="object"&&(D.placement&&(v=D.placement),D.rects&&(f=D.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:i}):D.rects),{x:p,y:m}=FT(f,v,d)),E=-1)}return{x:p,y:m,placement:v,strategy:i,middlewareData:b}},S6=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:l,elements:c,middlewareData:d}=e,{element:f,padding:p=0}=ji(t,e)||{};if(f==null)return{};const m=mv(p),v={x:n,y:r},b=pv(i),w=hv(b),S=await l.getDimensions(f),E=b==="y",T=E?"top":"left",N=E?"bottom":"right",A=E?"clientHeight":"clientWidth",I=o.reference[w]+o.reference[b]-v[b]-o.floating[w],M=v[b]-o.reference[b],D=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let R=D?D[A]:0;(!R||!await(l.isElement==null?void 0:l.isElement(D)))&&(R=c.floating[A]||o.floating[w]);const B=I/2-M/2,z=R/2-S[w]/2-1,F=Qr(m[T],z),Q=Qr(m[N],z),G=F,X=R-S[w]-Q,q=R/2-S[w]/2+B,K=e0(G,q,X),L=!d.arrow&&_r(i)!=null&&q!==K&&o.reference[w]/2-(q<G?F:Q)-S[w]/2<0,W=L?q<G?q-G:q-X:0;return{[b]:v[b]+W,data:{[b]:K,centerOffset:q-K-W,...L&&{alignmentOffset:W}},reset:L}}});function E6(t,e,n){return(t?[...n.filter(i=>_r(i)===t),...n.filter(i=>_r(i)!==t)]:n.filter(i=>hr(i)===i)).filter(i=>t?_r(i)===t||(e?jf(i)!==i:!1):!0)}const C6=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,i;const{rects:o,middlewareData:l,placement:c,platform:d,elements:f}=e,{crossAxis:p=!1,alignment:m,allowedPlacements:v=HT,autoAlignment:b=!0,...w}=ji(t,e),S=m!==void 0||v===HT?E6(m||null,b,v):v,E=await d.detectOverflow(e,w),T=((n=l.autoPlacement)==null?void 0:n.index)||0,N=S[T];if(N==null)return{};const A=sk(N,o,await(d.isRTL==null?void 0:d.isRTL(f.floating)));if(c!==N)return{reset:{placement:S[0]}};const I=[E[hr(N)],E[A[0]],E[A[1]]],M=[...((r=l.autoPlacement)==null?void 0:r.overflows)||[],{placement:N,overflows:I}],D=S[T+1];if(D)return{data:{index:T+1,overflows:M},reset:{placement:D}};const R=M.map(F=>{const Q=_r(F.placement);return[F.placement,Q&&p?F.overflows.slice(0,2).reduce((G,X)=>G+X,0):F.overflows[0],F.overflows]}).sort((F,Q)=>F[1]-Q[1]),z=((i=R.filter(F=>F[2].slice(0,_r(F[0])?2:3).every(Q=>Q<=0))[0])==null?void 0:i[0])||R[0][0];return z!==c?{data:{index:T+1,overflows:M},reset:{placement:z}}:{}}}},T6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:l,initialPlacement:c,platform:d,elements:f}=e,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:S=!0,...E}=ji(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const T=hr(i),N=Gr(c),A=hr(c)===c,I=await(d.isRTL==null?void 0:d.isRTL(f.floating)),M=v||(A||!S?[qf(c)]:p6(c)),D=w!=="none";!v&&D&&M.push(...v6(c,S,w,I));const R=[c,...M],B=await d.detectOverflow(e,E),z=[];let F=((r=o.flip)==null?void 0:r.overflows)||[];if(p&&z.push(B[T]),m){const q=sk(i,l,I);z.push(B[q[0]],B[q[1]])}if(F=[...F,{placement:i,overflows:z}],!z.every(q=>q<=0)){var Q,G;const q=(((Q=o.flip)==null?void 0:Q.index)||0)+1,K=R[q];if(K&&(!(m==="alignment"?N!==Gr(K):!1)||F.every(oe=>Gr(oe.placement)===N?oe.overflows[0]>0:!0)))return{data:{index:q,overflows:F},reset:{placement:K}};let L=(G=F.filter(W=>W.overflows[0]<=0).sort((W,oe)=>W.overflows[1]-oe.overflows[1])[0])==null?void 0:G.placement;if(!L)switch(b){case"bestFit":{var X;const W=(X=F.filter(oe=>{if(D){const fe=Gr(oe.placement);return fe===N||fe==="y"}return!0}).map(oe=>[oe.placement,oe.overflows.filter(fe=>fe>0).reduce((fe,Ne)=>fe+Ne,0)]).sort((oe,fe)=>oe[1]-fe[1])[0])==null?void 0:X[0];W&&(L=W);break}case"initialPlacement":L=c;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function GT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function JT(t){return rk.some(e=>t[e]>=0)}const _6=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n,platform:r}=e,{strategy:i="referenceHidden",...o}=ji(t,e);switch(i){case"referenceHidden":{const l=await r.detectOverflow(e,{...o,elementContext:"reference"}),c=GT(l,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:JT(c)}}}case"escaped":{const l=await r.detectOverflow(e,{...o,altBoundary:!0}),c=GT(l,n.floating);return{data:{escapedOffsets:c,escaped:JT(c)}}}default:return{}}}}};function ok(t){const e=Qr(...t.map(o=>o.left)),n=Qr(...t.map(o=>o.top)),r=un(...t.map(o=>o.right)),i=un(...t.map(o=>o.bottom));return{x:e,y:n,width:r-e,height:i-n}}function A6(t){const e=t.slice().sort((i,o)=>i.y-o.y),n=[];let r=null;for(let i=0;i<e.length;i++){const o=e[i];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map(i=>Xa(ok(i)))}const N6=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:i,platform:o,strategy:l}=e,{padding:c=2,x:d,y:f}=ji(t,e),p=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),m=A6(p),v=Xa(ok(p)),b=mv(c);function w(){if(m.length===2&&m[0].left>m[1].right&&d!=null&&f!=null)return m.find(E=>d>E.left-b.left&&d<E.right+b.right&&f>E.top-b.top&&f<E.bottom+b.bottom)||v;if(m.length>=2){if(Gr(n)==="y"){const F=m[0],Q=m[m.length-1],G=hr(n)==="top",X=F.top,q=Q.bottom,K=G?F.left:Q.left,L=G?F.right:Q.right,W=L-K,oe=q-X;return{top:X,bottom:q,left:K,right:L,width:W,height:oe,x:K,y:X}}const E=hr(n)==="left",T=un(...m.map(F=>F.right)),N=Qr(...m.map(F=>F.left)),A=m.filter(F=>E?F.left===N:F.right===T),I=A[0].top,M=A[A.length-1].bottom,D=N,R=T,B=R-D,z=M-I;return{top:I,bottom:M,left:D,right:R,width:B,height:z,x:D,y:I}}return v}const S=await o.getElementRects({reference:{getBoundingClientRect:w},floating:r.floating,strategy:l});return i.reference.x!==S.reference.x||i.reference.y!==S.reference.y||i.reference.width!==S.reference.width||i.reference.height!==S.reference.height?{reset:{rects:S}}:{}}}},k6=new Set(["left","top"]);async function R6(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=hr(n),c=_r(n),d=Gr(n)==="y",f=k6.has(l)?-1:1,p=o&&d?-1:1,m=ji(e,t);let{mainAxis:v,crossAxis:b,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof w=="number"&&(b=c==="end"?w*-1:w),d?{x:b*p,y:v*f}:{x:v*f,y:b*p}}const M6=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:l,middlewareData:c}=e,d=await R6(e,t);return l===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+d.x,y:o+d.y,data:{...d,placement:l}}}}},I6=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i,platform:o}=e,{mainAxis:l=!0,crossAxis:c=!1,limiter:d={fn:T=>{let{x:N,y:A}=T;return{x:N,y:A}}},...f}=ji(t,e),p={x:n,y:r},m=await o.detectOverflow(e,f),v=Gr(hr(i)),b=ik(v);let w=p[b],S=p[v];if(l){const T=b==="y"?"top":"left",N=b==="y"?"bottom":"right",A=w+m[T],I=w-m[N];w=e0(A,w,I)}if(c){const T=v==="y"?"top":"left",N=v==="y"?"bottom":"right",A=S+m[T],I=S-m[N];S=e0(A,S,I)}const E=d.fn({...e,[b]:w,[v]:S});return{...E,data:{x:E.x-n,y:E.y-r,enabled:{[b]:l,[v]:c}}}}}},D6=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:l,elements:c}=e,{apply:d=()=>{},...f}=ji(t,e),p=await l.detectOverflow(e,f),m=hr(i),v=_r(i),b=Gr(i)==="y",{width:w,height:S}=o.floating;let E,T;m==="top"||m==="bottom"?(E=m,T=v===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(T=m,E=v==="end"?"top":"bottom");const N=S-p.top-p.bottom,A=w-p.left-p.right,I=Qr(S-p[E],N),M=Qr(w-p[T],A),D=!e.middlewareData.shift;let R=I,B=M;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(B=A),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(R=N),D&&!v){const F=un(p.left,0),Q=un(p.right,0),G=un(p.top,0),X=un(p.bottom,0);b?B=w-2*(F!==0||Q!==0?F+Q:un(p.left,p.right)):R=S-2*(G!==0||X!==0?G+X:un(p.top,p.bottom))}await d({...e,availableWidth:B,availableHeight:R});const z=await l.getDimensions(c.floating);return w!==z.width||S!==z.height?{reset:{rects:!0}}:{}}}};function Yh(){return typeof window<"u"}function al(t){return ak(t)?(t.nodeName||"").toLowerCase():"#document"}function qn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function qi(t){var e;return(e=(ak(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ak(t){return Yh()?t instanceof Node||t instanceof qn(t).Node:!1}function kr(t){return Yh()?t instanceof Element||t instanceof qn(t).Element:!1}function Zr(t){return Yh()?t instanceof HTMLElement||t instanceof qn(t).HTMLElement:!1}function KT(t){return!Yh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof qn(t).ShadowRoot}const O6=new Set(["inline","contents"]);function du(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Rr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!O6.has(i)}const L6=new Set(["table","td","th"]);function P6(t){return L6.has(al(t))}const U6=[":popover-open",":modal"];function Wh(t){return U6.some(e=>{try{return t.matches(e)}catch{return!1}})}const B6=["transform","translate","scale","rotate","perspective"],z6=["transform","translate","scale","rotate","perspective","filter"],j6=["paint","layout","strict","content"];function gv(t){const e=yv(),n=kr(t)?Rr(t):t;return B6.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||z6.some(r=>(n.willChange||"").includes(r))||j6.some(r=>(n.contain||"").includes(r))}function q6(t){let e=Ls(t);for(;Zr(e)&&!Qa(e);){if(gv(e))return e;if(Wh(e))return null;e=Ls(e)}return null}function yv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const H6=new Set(["html","body","#document"]);function Qa(t){return H6.has(al(t))}function Rr(t){return qn(t).getComputedStyle(t)}function Xh(t){return kr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ls(t){if(al(t)==="html")return t;const e=t.assignedSlot||t.parentNode||KT(t)&&t.host||qi(t);return KT(e)?e.host:e}function lk(t){const e=Ls(t);return Qa(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zr(e)&&du(e)?e:lk(e)}function ck(t,e,n){var r;e===void 0&&(e=[]);const i=lk(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),l=qn(i);return o?(t0(l),e.concat(l,l.visualViewport||[],du(i)?i:[],[])):e.concat(i,ck(i,[]))}function t0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function uk(t){const e=Rr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Zr(t),o=i?t.offsetWidth:n,l=i?t.offsetHeight:r,c=zf(n)!==o||zf(r)!==l;return c&&(n=o,r=l),{width:n,height:r,$:c}}function dk(t){return kr(t)?t:t.contextElement}function qa(t){const e=dk(t);if(!Zr(e))return Jr(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=uk(e);let l=(o?zf(n.width):n.width)/r,c=(o?zf(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const $6=Jr(0);function fk(t){const e=qn(t);return!yv()||!e.visualViewport?$6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function V6(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==qn(t)?!1:e}function Wc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=dk(t);let l=Jr(1);e&&(r?kr(r)&&(l=qa(r)):l=qa(t));const c=V6(o,n,r)?fk(o):Jr(0);let d=(i.left+c.x)/l.x,f=(i.top+c.y)/l.y,p=i.width/l.x,m=i.height/l.y;if(o){const v=qn(o),b=r&&kr(r)?qn(r):r;let w=v,S=t0(w);for(;S&&r&&b!==w;){const E=qa(S),T=S.getBoundingClientRect(),N=Rr(S),A=T.left+(S.clientLeft+parseFloat(N.paddingLeft))*E.x,I=T.top+(S.clientTop+parseFloat(N.paddingTop))*E.y;d*=E.x,f*=E.y,p*=E.x,m*=E.y,d+=A,f+=I,w=qn(S),S=t0(w)}}return Xa({width:p,height:m,x:d,y:f})}function Qh(t,e){const n=Xh(t).scrollLeft;return e?e.left+n:Wc(qi(t)).left+n}function hk(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Qh(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function F6(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",l=qi(r),c=e?Wh(e.floating):!1;if(r===l||c&&o)return n;let d={scrollLeft:0,scrollTop:0},f=Jr(1);const p=Jr(0),m=Zr(r);if((m||!m&&!o)&&((al(r)!=="body"||du(l))&&(d=Xh(r)),Zr(r))){const b=Wc(r);f=qa(r),p.x=b.x+r.clientLeft,p.y=b.y+r.clientTop}const v=l&&!m&&!o?hk(l,d):Jr(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-d.scrollLeft*f.x+p.x+v.x,y:n.y*f.y-d.scrollTop*f.y+p.y+v.y}}function G6(t){return Array.from(t.getClientRects())}function J6(t){const e=qi(t),n=Xh(t),r=t.ownerDocument.body,i=un(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=un(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+Qh(t);const c=-n.scrollTop;return Rr(r).direction==="rtl"&&(l+=un(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:l,y:c}}const YT=25;function K6(t,e){const n=qn(t),r=qi(t),i=n.visualViewport;let o=r.clientWidth,l=r.clientHeight,c=0,d=0;if(i){o=i.width,l=i.height;const p=yv();(!p||p&&e==="fixed")&&(c=i.offsetLeft,d=i.offsetTop)}const f=Qh(r);if(f<=0){const p=r.ownerDocument,m=p.body,v=getComputedStyle(m),b=p.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,w=Math.abs(r.clientWidth-m.clientWidth-b);w<=YT&&(o-=w)}else f<=YT&&(o+=f);return{width:o,height:l,x:c,y:d}}const Y6=new Set(["absolute","fixed"]);function W6(t,e){const n=Wc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Zr(t)?qa(t):Jr(1),l=t.clientWidth*o.x,c=t.clientHeight*o.y,d=i*o.x,f=r*o.y;return{width:l,height:c,x:d,y:f}}function WT(t,e,n){let r;if(e==="viewport")r=K6(t,n);else if(e==="document")r=J6(qi(t));else if(kr(e))r=W6(e,n);else{const i=fk(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Xa(r)}function pk(t,e){const n=Ls(t);return n===e||!kr(n)||Qa(n)?!1:Rr(n).position==="fixed"||pk(n,e)}function X6(t,e){const n=e.get(t);if(n)return n;let r=ck(t,[]).filter(c=>kr(c)&&al(c)!=="body"),i=null;const o=Rr(t).position==="fixed";let l=o?Ls(t):t;for(;kr(l)&&!Qa(l);){const c=Rr(l),d=gv(l);!d&&c.position==="fixed"&&(i=null),(o?!d&&!i:!d&&c.position==="static"&&!!i&&Y6.has(i.position)||du(l)&&!d&&pk(t,l))?r=r.filter(p=>p!==l):i=c,l=Ls(l)}return e.set(t,r),r}function Q6(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const l=[...n==="clippingAncestors"?Wh(e)?[]:X6(e,this._c):[].concat(n),r],c=l[0],d=l.reduce((f,p)=>{const m=WT(e,p,i);return f.top=un(m.top,f.top),f.right=Qr(m.right,f.right),f.bottom=Qr(m.bottom,f.bottom),f.left=un(m.left,f.left),f},WT(e,c,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function Z6(t){const{width:e,height:n}=uk(t);return{width:e,height:n}}function e$(t,e,n){const r=Zr(e),i=qi(e),o=n==="fixed",l=Wc(t,!0,o,e);let c={scrollLeft:0,scrollTop:0};const d=Jr(0);function f(){d.x=Qh(i)}if(r||!r&&!o)if((al(e)!=="body"||du(i))&&(c=Xh(e)),r){const b=Wc(e,!0,o,e);d.x=b.x+e.clientLeft,d.y=b.y+e.clientTop}else i&&f();o&&!r&&i&&f();const p=i&&!r&&!o?hk(i,c):Jr(0),m=l.left+c.scrollLeft-d.x-p.x,v=l.top+c.scrollTop-d.y-p.y;return{x:m,y:v,width:l.width,height:l.height}}function ny(t){return Rr(t).position==="static"}function XT(t,e){if(!Zr(t)||Rr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return qi(t)===n&&(n=n.ownerDocument.body),n}function mk(t,e){const n=qn(t);if(Wh(t))return n;if(!Zr(t)){let i=Ls(t);for(;i&&!Qa(i);){if(kr(i)&&!ny(i))return i;i=Ls(i)}return n}let r=XT(t,e);for(;r&&P6(r)&&ny(r);)r=XT(r,e);return r&&Qa(r)&&ny(r)&&!gv(r)?n:r||q6(t)||n}const t$=async function(t){const e=this.getOffsetParent||mk,n=this.getDimensions,r=await n(t.floating);return{reference:e$(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function n$(t){return Rr(t).direction==="rtl"}const r$={convertOffsetParentRelativeRectToViewportRelativeRect:F6,getDocumentElement:qi,getClippingRect:Q6,getOffsetParent:mk,getElementRects:t$,getClientRects:G6,getDimensions:Z6,getScale:qa,isElement:kr,isRTL:n$},gk=M6,yk=C6,vk=I6,bk=T6,xk=D6,wk=_6,Sk=S6,Ek=N6,Ck=(t,e,n)=>{const r=new Map,i={platform:r$,...n},o={...i.platform,_c:r};return w6(t,e,{...i,platform:o})};let n0,r0;if(typeof WeakMap<"u"){let t=new WeakMap;n0=e=>t.get(e),r0=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;n0=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},r0=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var ki=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let o=r+1,l=i+1;for(let c=1;o<this.width&&this.map[e+c]==n;c++)o++;for(let c=1;l<this.height&&this.map[e+this.width*c]==n;c++)l++;return{left:r,top:i,right:o,bottom:l}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:o,bottom:l}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[o*this.width+(n<0?r-1:i)]:(n<0?o==0:l==this.height)?null:this.map[r+this.width*(n<0?o-1:l)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:o}=this.findCell(t),{left:l,right:c,top:d,bottom:f}=this.findCell(e);return{left:Math.min(n,l),top:Math.min(i,d),right:Math.max(r,c),bottom:Math.max(o,f)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const o=r*this.width+i,l=this.map[o];n[l]||(n[l]=!0,!(i==t.left&&i&&this.map[o-1]==l||r==t.top&&r&&this.map[o-this.width]==l)&&e.push(l))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const o=i+n.child(r).nodeSize;if(r==t){let l=e+t*this.width;const c=(t+1)*this.width;for(;l<c&&this.map[l]<i;)l++;return l==c?o-1:this.map[l]}i=o}}static get(t){return n0(t)||r0(t,i$(t))}};function i$(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=s$(t),n=t.childCount,r=[];let i=0,o=null;const l=[];for(let f=0,p=e*n;f<p;f++)r[f]=0;for(let f=0,p=0;f<n;f++){const m=t.child(f);p++;for(let w=0;;w++){for(;i<r.length&&r[i]!=0;)i++;if(w==m.childCount)break;const S=m.child(w),{colspan:E,rowspan:T,colwidth:N}=S.attrs;for(let A=0;A<T;A++){if(A+f>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:p,n:T-A});break}const I=i+A*e;for(let M=0;M<E;M++){r[I+M]==0?r[I+M]=p:(o||(o=[])).push({type:"collision",row:f,pos:p,n:E-M});const D=N&&N[M];if(D){const R=(I+M)%e*2,B=l[R];B==null||B!=D&&l[R+1]==1?(l[R]=D,l[R+1]=1):B==D&&l[R+1]++}}}i+=E,p+=S.nodeSize}const v=(f+1)*e;let b=0;for(;i<v;)r[i++]==0&&b++;b&&(o||(o=[])).push({type:"missing",row:f,n:b}),p++}(e===0||n===0)&&(o||(o=[])).push({type:"zero_sized"});const c=new ki(e,n,r,o);let d=!1;for(let f=0;!d&&f<l.length;f+=2)l[f]!=null&&l[f+1]<n&&(d=!0);return d&&o$(c,l,t),c}function s$(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let o=0;if(n)for(let l=0;l<r;l++){const c=t.child(l);for(let d=0;d<c.childCount;d++){const f=c.child(d);l+f.attrs.rowspan>r&&(o+=f.attrs.colspan)}}for(let l=0;l<i.childCount;l++){const c=i.child(l);o+=c.attrs.colspan,c.attrs.rowspan>1&&(n=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function o$(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const o=t.map[i];if(r[o])continue;r[o]=!0;const l=n.nodeAt(o);if(!l)throw new RangeError(`No cell with offset ${o} found`);let c=null;const d=l.attrs;for(let f=0;f<d.colspan;f++){const p=e[(i+f)%t.width*2];p!=null&&(!d.colwidth||d.colwidth[f]!=p)&&((c||(c=a$(d)))[f]=p)}c&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:c})}}function a$(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function vv(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}new at("selectingCells");function l$(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function Tk(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function c$(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=l$(e.$head)||u$(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function u$(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function QT(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function _k(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function Ak(t,e,n){const r=t.node(-1),i=ki.get(r),o=t.start(-1),l=i.nextCell(t.pos-o,e,n);return l==null?null:t.node(0).resolve(o+l)}function ZT(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}var Kr=class Ti extends we{constructor(e,n=e){const r=e.node(-1),i=ki.get(r),o=e.start(-1),l=i.rectBetween(e.pos-o,n.pos-o),c=e.node(0),d=i.cellsInRect(l).filter(p=>p!=n.pos-o);d.unshift(n.pos-o);const f=d.map(p=>{const m=r.nodeAt(p);if(!m)throw new RangeError(`No cell with offset ${p} found`);const v=o+p+1;return new AA(c.resolve(v),c.resolve(v+m.content.size))});super(f[0].$from,f[0].$to,f),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(QT(r)&&QT(i)&&_k(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?Ti.rowSelection(r,i):o&&this.isColSelection()?Ti.colSelection(r,i):new Ti(r,i)}return Se.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=ki.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},l=[];for(let d=i.top;d<i.bottom;d++){const f=[];for(let p=d*n.width+i.left,m=i.left;m<i.right;m++,p++){const v=n.map[p];if(o[v])continue;o[v]=!0;const b=n.findCell(v);let w=e.nodeAt(v);if(!w)throw new RangeError(`No cell with offset ${v} found`);const S=i.left-b.left,E=b.right-i.right;if(S>0||E>0){let T=w.attrs;if(S>0&&(T=ZT(T,0,S)),E>0&&(T=ZT(T,T.colspan-E,E)),b.left<i.left){if(w=w.type.createAndFill(T),!w)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(T)}`)}else w=w.type.create(T,w.content)}if(b.top<i.top||b.bottom>i.bottom){const T={...w.attrs,rowspan:Math.min(b.bottom,i.bottom)-Math.max(b.top,i.top)};b.top<i.top?w=w.type.createAndFill(T):w=w.type.create(T,w.content)}f.push(w)}l.push(e.child(d).copy(re.from(f)))}const c=this.isColSelection()&&this.isRowSelection()?e:l;return new le(re.from(c),1,1)}replace(e,n=le.empty){const r=e.steps.length,i=this.ranges;for(let l=0;l<i.length;l++){const{$from:c,$to:d}=i[l],f=e.mapping.slice(r);e.replace(f.map(c.pos),f.map(d.pos),l?le.empty:n)}const o=we.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,n){this.replace(e,new le(re.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=ki.get(n),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let l=0;l<o.length;l++)e(n.nodeAt(o[l]),i+o[l])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=ki.get(r),o=e.start(-1),l=i.findCell(e.pos-o),c=i.findCell(n.pos-o),d=e.node(0);return l.top<=c.top?(l.top>0&&(e=d.resolve(o+i.map[l.left])),c.bottom<i.height&&(n=d.resolve(o+i.map[i.width*(i.height-1)+c.right-1]))):(c.top>0&&(n=d.resolve(o+i.map[c.left])),l.bottom<i.height&&(e=d.resolve(o+i.map[i.width*(i.height-1)+l.right-1]))),new Ti(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=ki.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),o=n.colCount(this.$headCell.pos-r);if(Math.min(i,o)>0)return!1;const l=i+this.$anchorCell.nodeAfter.attrs.colspan,c=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,c)==n.width}eq(e){return e instanceof Ti&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=ki.get(r),o=e.start(-1),l=i.findCell(e.pos-o),c=i.findCell(n.pos-o),d=e.node(0);return l.left<=c.left?(l.left>0&&(e=d.resolve(o+i.map[l.top*i.width])),c.right<i.width&&(n=d.resolve(o+i.map[i.width*(c.top+1)-1]))):(c.left>0&&(n=d.resolve(o+i.map[c.top*i.width])),l.right<i.width&&(e=d.resolve(o+i.map[i.width*(l.top+1)-1]))),new Ti(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new Ti(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new Ti(e.resolve(n),e.resolve(r))}getBookmark(){return new d$(this.$anchorCell.pos,this.$headCell.pos)}};Kr.prototype.visible=!1;we.jsonID("cell",Kr);var d$=class Nk{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Nk(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&_k(n,r)?new Kr(n,r):we.near(r,1)}};new at("fix-tables");function kk(t){const e=t.selection,n=c$(t),r=n.node(-1),i=n.start(-1),o=ki.get(r);return{...e instanceof Kr?o.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):o.findCell(n.pos-i),tableStart:i,map:o,table:r}}function f$(t){return function(e,n){if(!Tk(e))return!1;if(n){const r=vv(e.schema),i=kk(e),o=e.tr,l=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),c=l.map(d=>i.table.nodeAt(d));for(let d=0;d<l.length;d++)c[d].type==r.header_cell&&o.setNodeMarkup(i.tableStart+l[d],r.cell,c[d].attrs);if(o.steps.length===0)for(let d=0;d<l.length;d++)o.setNodeMarkup(i.tableStart+l[d],r.header_cell,c[d].attrs);n(o)}return!0}}function e1(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const o=e.table.nodeAt(r[i]);if(o&&o.type!==n.header_cell)return!1}return!0}function bv(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?f$(t):function(n,r){if(!Tk(n))return!1;if(r){const i=vv(n.schema),o=kk(n),l=n.tr,c=e1("row",o,i),d=e1("column",o,i),f=(t==="column"?c:t==="row"&&d)?1:0,p=t=="column"?{left:0,top:f,right:1,bottom:o.map.height}:t=="row"?{left:f,top:0,right:o.map.width,bottom:1}:o,m=t=="column"?d?i.cell:i.header_cell:t=="row"?c?i.cell:i.header_cell:i.cell;o.map.cellsInRect(p).forEach(v=>{const b=v+o.tableStart,w=l.doc.nodeAt(b);w&&l.setNodeMarkup(b,m,w.attrs)}),r(l)}return!0}}bv("row",{useDeprecatedLogic:!0});bv("column",{useDeprecatedLogic:!0});bv("cell",{useDeprecatedLogic:!0});function Kd(t,e){const n=t.selection;if(!(n instanceof Kr))return!1;if(e){const r=t.tr,i=vv(t.schema).cell.createAndFill().content;n.forEachCell((o,l)=>{o.content.eq(i)||r.replace(r.mapping.map(l+1),r.mapping.map(l+o.nodeSize-1),new le(i,0,0))}),r.docChanged&&e(r)}return!0}ev({ArrowLeft:Yd("horiz",-1),ArrowRight:Yd("horiz",1),ArrowUp:Yd("vert",-1),ArrowDown:Yd("vert",1),"Shift-ArrowLeft":Wd("horiz",-1),"Shift-ArrowRight":Wd("horiz",1),"Shift-ArrowUp":Wd("vert",-1),"Shift-ArrowDown":Wd("vert",1),Backspace:Kd,"Mod-Backspace":Kd,Delete:Kd,"Mod-Delete":Kd});function lf(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Yd(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;if(o instanceof Kr)return lf(n,r,we.near(o.$headCell,e));if(t!="horiz"&&!o.empty)return!1;const l=Rk(i,t,e);if(l==null)return!1;if(t=="horiz")return lf(n,r,we.near(n.doc.resolve(o.head+e),e));{const c=n.doc.resolve(l),d=Ak(c,t,e);let f;return d?f=we.near(d,1):e<0?f=we.near(n.doc.resolve(c.before(-1)),-1):f=we.near(n.doc.resolve(c.after(-1)),1),lf(n,r,f)}}}function Wd(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;let l;if(o instanceof Kr)l=o;else{const d=Rk(i,t,e);if(d==null)return!1;l=new Kr(n.doc.resolve(d))}const c=Ak(l.$headCell,t,e);return c?lf(n,r,new Kr(l.$anchorCell,c)):!1}}function Rk(t,e,n){if(!(t.state.selection instanceof Se))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const l=r.before(i),c=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(c)?l:null}}return null}new at("tableColumnResizing");function h$(t,e){const n=Math.min(t.top,e.top),r=Math.max(t.bottom,e.bottom),i=Math.min(t.left,e.left),l=Math.max(t.right,e.right)-i,c=r-n,d=i,f=n;return new DOMRect(d,f,l,c)}var p$=class{constructor({editor:t,element:e,view:n,updateDelay:r=250,resizeDelay:i=60,shouldShow:o,appendTo:l,getReferencedVirtualElement:c,options:d}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=({view:p,state:m,from:v,to:b})=>{const{doc:w,selection:S}=m,{empty:E}=S,T=!w.textBetween(v,b).length&&iv(m.selection),N=this.element.contains(document.activeElement);return!(!(p.hasFocus()||N)||E||T||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:p})=>{var m;if(this.editor.isDestroyed){this.destroy();return}if(this.preventHide){this.preventHide=!1;return}p!=null&&p.relatedTarget&&((m=this.element.parentNode)!=null&&m.contains(p.relatedTarget))||(p==null?void 0:p.relatedTarget)!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(p,m)=>{const v=!(m!=null&&m.selection.eq(p.state.selection)),b=!(m!=null&&m.doc.eq(p.state.doc));!v&&!b||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(p,v,b,m)},this.updateDelay))},this.updateHandler=(p,m,v,b)=>{const{composing:w}=p;if(w||!m&&!v)return;if(!this.getShouldShow(b)){this.hide();return}this.updatePosition(),this.show()},this.transactionHandler=({transaction:p})=>{const m=p.getMeta("bubbleMenu");m==="updatePosition"?this.updatePosition():m&&typeof m=="object"&&m.type==="updateOptions"&&this.updateOptions(m.options)};var f;this.editor=t,this.element=e,this.view=n,this.updateDelay=r,this.resizeDelay=i,this.appendTo=l,this.scrollTarget=(f=d==null?void 0:d.scrollTarget)!=null?f:window,this.getReferencedVirtualElement=c,this.floatingUIOptions={...this.floatingUIOptions,...d},this.element.tabIndex=0,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(bk(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(vk(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(gk(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(Sk(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(xk(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(yk(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(wk(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(Ek(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}get virtualElement(){var t,e,n;const{selection:r}=this.editor.state,i=(t=this.getReferencedVirtualElement)==null?void 0:t.call(this);if(i)return i;if(!((n=(e=this.view)==null?void 0:e.dom)!=null&&n.parentNode))return;const o=jN(this.view,r.from,r.to);let l={getBoundingClientRect:()=>o,getClientRects:()=>[o]};if(r instanceof ge){let c=this.view.nodeDOM(r.from);const d=c.dataset.nodeViewWrapper?c:c.querySelector("[data-node-view-wrapper]");d&&(c=d),c&&(l={getBoundingClientRect:()=>c.getBoundingClientRect(),getClientRects:()=>[c.getBoundingClientRect()]})}if(r instanceof Kr){const{$anchorCell:c,$headCell:d}=r,f=c?c.pos:d.pos,p=d?d.pos:c.pos,m=this.view.nodeDOM(f),v=this.view.nodeDOM(p);if(!m||!v)return;const b=m===v?m.getBoundingClientRect():h$(m.getBoundingClientRect(),v.getBoundingClientRect());l={getBoundingClientRect:()=>b,getClientRects:()=>[b]}}return l}updatePosition(){const t=this.virtualElement;t&&Ck(t,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:e,y:n,strategy:r,middlewareData:i})=>{var o,l;if((o=i.hide)!=null&&o.referenceHidden||(l=i.hide)!=null&&l.escaped){this.element.style.visibility="hidden";return}this.element.style.visibility="visible",this.element.style.width="max-content",this.element.style.position=r,this.element.style.left=`${e}px`,this.element.style.top=`${n}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const{state:n}=t,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(t,e);return}const i=!(e!=null&&e.selection.eq(t.state.selection)),o=!(e!=null&&e.doc.eq(t.state.doc));this.updateHandler(t,i,o,e)}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,o=Math.min(...i.map(d=>d.$from.pos)),l=Math.max(...i.map(d=>d.$to.pos));return((e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:t,from:o,to:l}))||!1}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}updateOptions(t){var e;if(t.updateDelay!==void 0&&(this.updateDelay=t.updateDelay),t.resizeDelay!==void 0&&(this.resizeDelay=t.resizeDelay),t.appendTo!==void 0&&(this.appendTo=t.appendTo),t.getReferencedVirtualElement!==void 0&&(this.getReferencedVirtualElement=t.getReferencedVirtualElement),t.shouldShow!==void 0&&t.shouldShow&&(this.shouldShow=t.shouldShow),t.options!==void 0){const n=(e=t.options.scrollTarget)!=null?e:window;n!==this.scrollTarget&&(this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.scrollTarget=n,this.scrollTarget.addEventListener("scroll",this.resizeHandler)),this.floatingUIOptions={...this.floatingUIOptions,...t.options}}}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},Mk=t=>new tt({key:typeof t.pluginKey=="string"?new at(t.pluginKey):t.pluginKey,view:e=>new p$({view:e,...t})});lt.create({name:"bubbleMenu",addOptions(){return{element:null,pluginKey:"bubbleMenu",updateDelay:void 0,appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Mk({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,options:this.options.options,appendTo:this.options.appendTo,getReferencedVirtualElement:this.options.getReferencedVirtualElement,shouldShow:this.options.shouldShow})]:[]}});var m$=class{constructor({editor:t,element:e,view:n,updateDelay:r=250,resizeDelay:i=60,options:o,appendTo:l,shouldShow:c}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.shouldShow=({view:f,state:p})=>{const{selection:m}=p,{$anchor:v,empty:b}=m,w=v.depth===1,S=v.parent.isTextblock&&!v.parent.type.spec.code&&!v.parent.textContent&&v.parent.childCount===0&&!this.getTextContent(v.parent);return!(!f.hasFocus()||!b||!w||!S||!this.editor.isEditable)},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(f,p,m,v)=>{const{composing:b}=f;if(b||!p&&!m)return;if(!this.getShouldShow(v)){this.hide();return}this.updatePosition(),this.show()},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:f})=>{var p;if(this.preventHide){this.preventHide=!1;return}f!=null&&f.relatedTarget&&((p=this.element.parentNode)!=null&&p.contains(f.relatedTarget))||(f==null?void 0:f.relatedTarget)!==this.editor.view.dom&&this.hide()},this.transactionHandler=({transaction:f})=>{const p=f.getMeta("floatingMenu");p==="updatePosition"?this.updatePosition():p&&typeof p=="object"&&p.type==="updateOptions"&&this.updateOptions(p.options)},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)};var d;this.editor=t,this.element=e,this.view=n,this.updateDelay=r,this.resizeDelay=i,this.appendTo=l,this.scrollTarget=(d=o==null?void 0:o.scrollTarget)!=null?d:window,this.floatingUIOptions={...this.floatingUIOptions,...o},this.element.tabIndex=0,c&&(this.shouldShow=c),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}getTextContent(t){return ON(t,{textSerializers:av(this.editor.schema)})}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(bk(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(vk(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(gk(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(Sk(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(xk(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(yk(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(wk(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(Ek(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,o=Math.min(...i.map(d=>d.$from.pos)),l=Math.max(...i.map(d=>d.$to.pos));return(e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,view:this.view,state:n,oldState:t,from:o,to:l})}updateOptions(t){var e;if(t.updateDelay!==void 0&&(this.updateDelay=t.updateDelay),t.resizeDelay!==void 0&&(this.resizeDelay=t.resizeDelay),t.appendTo!==void 0&&(this.appendTo=t.appendTo),t.shouldShow!==void 0&&t.shouldShow&&(this.shouldShow=t.shouldShow),t.options!==void 0){const n=(e=t.options.scrollTarget)!=null?e:window;n!==this.scrollTarget&&(this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.scrollTarget=n,this.scrollTarget.addEventListener("scroll",this.resizeHandler)),this.floatingUIOptions={...this.floatingUIOptions,...t.options}}}updatePosition(){const{selection:t}=this.editor.state,e=jN(this.view,t.from,t.to);Ck({getBoundingClientRect:()=>e,getClientRects:()=>[e]},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:r,y:i,strategy:o,middlewareData:l})=>{var c,d;if((c=l.hide)!=null&&c.referenceHidden||(d=l.hide)!=null&&d.escaped){this.element.style.visibility="hidden";return}this.element.style.visibility="visible",this.element.style.width="max-content",this.element.style.position=o,this.element.style.left=`${r}px`,this.element.style.top=`${i}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const n=!(e!=null&&e.selection.eq(t.state.selection)),r=!(e!=null&&e.doc.eq(t.state.doc));this.updateHandler(t,n,r,e)}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},Ik=t=>new tt({key:typeof t.pluginKey=="string"?new at(t.pluginKey):t.pluginKey,view:e=>new m$({view:e,...t})});lt.create({name:"floatingMenu",addOptions(){return{element:null,options:{},pluginKey:"floatingMenu",updateDelay:void 0,resizeDelay:void 0,appendTo:void 0,shouldShow:null}},addCommands(){return{updateFloatingMenuPosition:()=>({tr:t,dispatch:e})=>(e&&t.setMeta("floatingMenu","updatePosition"),!0)}},addProseMirrorPlugins(){return this.options.element?[Ik({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,resizeDelay:this.options.resizeDelay,options:this.options.options,appendTo:this.options.appendTo,shouldShow:this.options.shouldShow})]:[]}});var g$=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},y$=({contentComponent:t})=>{const e=K_.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return g.jsx(g.Fragment,{children:Object.values(e)})};function v$(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:oD.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var b$=class extends Be.Component{constructor(t){var e;super(t),this.editorContentRef=Be.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=v$(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return g.jsxs(g.Fragment,{children:[g.jsx("div",{ref:g$(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&g.jsx(y$,{contentComponent:t.contentComponent})]})}},x$=_.forwardRef((t,e)=>{const n=Be.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Be.createElement(b$,{key:n,innerRef:e,...t})}),Dk=Be.memo(x$),w$=typeof window<"u"?_.useLayoutEffect:_.useEffect,S$=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function E$(t){var e;const[n]=_.useState(()=>new S$(t.editor)),r=u6.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:a6);return w$(()=>n.watch(t.editor),[t.editor,n]),_.useDebugValue(r),r}var C$=!1,i0=typeof window>"u",T$=i0||!!(typeof window<"u"&&window.next),_$=class Ok{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?i0||T$?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)==null?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)==null?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)==null?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)==null?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)==null?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)==null?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)==null?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)==null?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)==null?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)==null?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)==null?void 0:o.call(i,...r)},onDelete:(...r)=>{var i,o;return(o=(i=this.options.current).onDelete)==null?void 0:o.call(i,...r)}};return new hH(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,o)=>{var l;return i===((l=n.extensions)==null?void 0:l[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Ok.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function A$(t={},e=[]){const n=_.useRef(t);n.current=t;const[r]=_.useState(()=>new _$(n)),i=K_.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return _.useDebugValue(i),_.useEffect(r.onRender(e)),E$({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&o===0?0:o+1}),i}var xv=_.createContext({editor:null});xv.Consumer;var Lk=()=>_.useContext(xv),N$=_.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),k$=()=>_.useContext(N$);Be.forwardRef((t,e)=>{const{onDragStart:n}=k$(),r=t.as||"div";return g.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});Be.createContext({markViewContentRef:()=>{}});var R$=Be.forwardRef(({pluginKey:t="bubbleMenu",editor:e,updateDelay:n,resizeDelay:r,appendTo:i,shouldShow:o=null,getReferencedVirtualElement:l,options:c,children:d,...f},p)=>{const m=_.useRef(document.createElement("div"));typeof p=="function"?p(m.current):p&&(p.current=m.current);const{editor:v}=Lk(),b=e||v,w={updateDelay:n,resizeDelay:r,appendTo:i,pluginKey:t,shouldShow:o,getReferencedVirtualElement:l,options:c},S=_.useRef(w);S.current=w;const[E,T]=_.useState(!1),N=_.useRef(!0);return _.useEffect(()=>{if(b!=null&&b.isDestroyed)return;if(!b){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const A=m.current;A.style.visibility="hidden",A.style.position="absolute";const I=Mk({...S.current,editor:b,element:A});b.registerPlugin(I);const M=S.current.pluginKey;return N.current=!0,T(!0),()=>{T(!1),b.unregisterPlugin(M),window.requestAnimationFrame(()=>{A.parentNode&&A.parentNode.removeChild(A)})}},[b]),_.useEffect(()=>{if(!(!E||!b||b.isDestroyed)){if(N.current){N.current=!1;return}b.view.dispatch(b.state.tr.setMeta("bubbleMenu",{type:"updateOptions",options:S.current}))}},[E,b,n,r,o,c,i,l]),Cs.createPortal(g.jsx("div",{...f,children:d}),m.current)}),M$=Be.forwardRef(({pluginKey:t="floatingMenu",editor:e,updateDelay:n,resizeDelay:r,appendTo:i,shouldShow:o=null,options:l,children:c,...d},f)=>{const p=_.useRef(document.createElement("div"));typeof f=="function"?f(p.current):f&&(f.current=p.current);const{editor:m}=Lk(),v=e||m,b={updateDelay:n,resizeDelay:r,appendTo:i,pluginKey:t,shouldShow:o,options:l},w=_.useRef(b);w.current=b;const[S,E]=_.useState(!1),T=_.useRef(!0);return _.useEffect(()=>{if(v!=null&&v.isDestroyed)return;if(!v){console.warn("FloatingMenu component is not rendered inside of an editor component or does not have editor prop.");return}const N=p.current;N.style.visibility="hidden",N.style.position="absolute";const A=Ik({...w.current,editor:v,element:N});v.registerPlugin(A);const I=w.current.pluginKey;return T.current=!0,E(!0),()=>{E(!1),v.unregisterPlugin(I),window.requestAnimationFrame(()=>{N.parentNode&&N.parentNode.removeChild(N)})}},[v]),_.useEffect(()=>{if(!(!S||!v||v.isDestroyed)){if(T.current){T.current=!1;return}v.view.dispatch(v.state.tr.setMeta("floatingMenu",{type:"updateOptions",options:w.current}))}},[S,v,n,r,o,l,i]),Cs.createPortal(g.jsx("div",{...d,children:c}),p.current)}),wv=_.createContext({editor:null,isReady:!1});wv.displayName="TiptapContext";var Zh=()=>_.useContext(wv);function Pk({instance:t,children:e}){var n;const[r,i]=_.useState((n=t==null?void 0:t.isInitialized)!=null?n:!1);_.useEffect(()=>{if(!t){i(!1);return}if(t.isInitialized){i(!0);return}const c=()=>{i(!0)};return t.on("create",c),()=>{t.off("create",c)}},[t]);const o=_.useMemo(()=>({editor:t,isReady:r}),[t,r]),l=_.useMemo(()=>({editor:t}),[t]);return g.jsx(xv.Provider,{value:l,children:g.jsx(wv.Provider,{value:o,children:e})})}Pk.displayName="Tiptap";function Uk({...t}){const{editor:e}=Zh();return g.jsx(Dk,{editor:e,...t})}Uk.displayName="Tiptap.Content";function Bk({children:t}){const{isReady:e}=Zh();return e?null:t}Bk.displayName="Tiptap.Loading";function zk({children:t,...e}){const{editor:n}=Zh();return n?g.jsx(R$,{editor:n,...e,children:t}):null}zk.displayName="Tiptap.BubbleMenu";function jk({children:t,...e}){const{editor:n}=Zh();return n?g.jsx(M$,{...e,editor:n,children:t}):null}jk.displayName="Tiptap.FloatingMenu";Object.assign(Pk,{Content:Uk,Loading:Bk,BubbleMenu:zk,FloatingMenu:jk});var Hf=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},I$=/^\s*>\s$/,D$=$n.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Hf("blockquote",{...Nt(this.options.HTMLAttributes,t),children:Hf("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const c=e.renderChildren([i]).split(`
`).map(d=>d.trim()===""?n:`${n} ${d}`);r.push(c.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Wa({find:I$,type:this.type})]}}),O$=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,L$=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,P$=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,U$=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,B$=Mo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Hf("strong",{...Nt(this.options.HTMLAttributes,t),children:Hf("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ya({find:O$,type:this.type}),Ya({find:P$,type:this.type})]},addPasteRules(){return[Ao({find:L$,type:this.type}),Ao({find:U$,type:this.type})]}}),z$=/(^|[^`])`([^`]+)`(?!`)$/,j$=/(^|[^`])`([^`]+)`(?!`)/g,q$=Mo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Nt(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ya({find:z$,type:this.type})]},addPasteRules(){return[Ao({find:j$,type:this.type})]}}),ry=4,H$=/^```([a-z]+)?[\s\n]$/,$$=/^~~~([a-z]+)?[\s\n]$/,V$=$n.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:ry,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const o=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(l=>l.startsWith(n)).map(l=>l.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Nt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:ry,{state:r}=t,{selection:i}=r,{$from:o,empty:l}=i;if(o.parent.type!==this.type)return!1;const c=" ".repeat(n);return l?t.commands.insertContent(c):t.commands.command(({tr:d})=>{const{from:f,to:p}=i,b=r.doc.textBetween(f,p,`
`,`
`).split(`
`).map(w=>c+w).join(`
`);return d.replaceWith(f,p,r.schema.text(b)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:ry,{state:r}=t,{selection:i}=r,{$from:o,empty:l}=i;return o.parent.type!==this.type?!1:l?t.commands.command(({tr:c})=>{var d;const{pos:f}=o,p=o.start(),m=o.end(),b=r.doc.textBetween(p,m,`
`,`
`).split(`
`);let w=0,S=0;const E=f-p;for(let D=0;D<b.length;D+=1){if(S+b[D].length>=E){w=D;break}S+=b[D].length+1}const N=((d=b[w].match(/^ */))==null?void 0:d[0])||"",A=Math.min(N.length,n);if(A===0)return!0;let I=p;for(let D=0;D<w;D+=1)I+=b[D].length+1;return c.delete(I,I+A),f-I<=A&&c.setSelection(Se.create(c.doc,I)),!0}):t.commands.command(({tr:c})=>{const{from:d,to:f}=i,v=r.doc.textBetween(d,f,`
`,`
`).split(`
`).map(b=>{var w;const S=((w=b.match(/^ */))==null?void 0:w[0])||"",E=Math.min(S.length,n);return b.slice(E)}).join(`
`);return c.replaceWith(d,f,r.schema.text(v)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!o||!l?!1:t.chain().command(({tr:c})=>(c.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const c=i.after();return c===void 0?!1:r.nodeAt(c)?t.commands.command(({tr:f})=>(f.setSelection(we.near(r.resolve(c))),!0)):t.commands.exitCode()}}},addInputRules(){return[Qy({find:H$,type:this.type,getAttributes:t=>({language:t[1]})}),Qy({find:$$,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new tt({key:new at("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:l,schema:c}=t.state,d=c.text(n.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:o},d)),l.selection.$from.parent.type!==this.type&&l.setSelection(Se.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),t.dispatch(l),!0}}})]}}),F$=$n.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),G$=$n.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Nt(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:c}=r.extensionManager,d=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:f,dispatch:p})=>{if(p&&d&&l){const m=d.filter(v=>c.includes(v.type.name));f.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),J$=$n.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Nt(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Qy({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),K$=$n.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Nt(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!mH(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return UN(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:o,tr:l,dispatch:c})=>{if(c){const{$to:d}=l.selection,f=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?l.setSelection(Se.create(l.doc,d.pos+1)):d.nodeAfter.isBlock?l.setSelection(ge.create(l.doc,d.pos)):l.setSelection(Se.create(l.doc,d.pos));else{const p=o.schema.nodes[this.options.nextNodeType]||d.parent.type.contentMatch.defaultType,m=p==null?void 0:p.create();m&&(l.insert(f,m),l.setSelection(Se.create(l.doc,f+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[pH({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Y$=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,W$=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,X$=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Q$=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Z$=Mo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ya({find:Y$,type:this.type}),Ya({find:X$,type:this.type})]},addPasteRules(){return[Ao({find:W$,type:this.type}),Ao({find:Q$,type:this.type})]}});const eV="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",tV="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",s0="numeric",o0="ascii",a0="alpha",Ec="asciinumeric",dc="alphanumeric",l0="domain",qk="emoji",nV="scheme",rV="slashscheme",iy="whitespace";function iV(t,e){return t in e||(e[t]=[]),e[t]}function yo(t,e,n){e[s0]&&(e[Ec]=!0,e[dc]=!0),e[o0]&&(e[Ec]=!0,e[a0]=!0),e[Ec]&&(e[dc]=!0),e[a0]&&(e[dc]=!0),e[dc]&&(e[l0]=!0),e[qk]&&(e[l0]=!0);for(const r in e){const i=iV(r,n);i.indexOf(t)<0&&i.push(t)}}function sV(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function An(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}An.groups={};An.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||An.groups;let i;return e&&e.j?i=e:(i=new An(e),n&&r&&yo(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const o=t.length;if(!o)return i;for(let l=0;l<o-1;l++)i=i.tt(t[l]);return i.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||An.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const o=e;let l,c=i.go(t);if(c?(l=new An,Object.assign(l.j,c.j),l.jr.push.apply(l.jr,c.jr),l.jd=c.jd,l.t=c.t):l=new An,o){if(r)if(l.t&&typeof l.t=="string"){const d=Object.assign(sV(l.t,r),n);yo(o,d,r)}else n&&yo(o,n,r);l.t=o}return i.j[t]=l,l}};const Ae=(t,e,n,r,i)=>t.ta(e,n,r,i),ft=(t,e,n,r,i)=>t.tr(e,n,r,i),t1=(t,e,n,r,i)=>t.ts(e,n,r,i),ie=(t,e,n,r,i)=>t.tt(e,n,r,i),_i="WORD",c0="UWORD",Hk="ASCIINUMERICAL",$k="ALPHANUMERICAL",Xc="LOCALHOST",u0="TLD",d0="UTLD",cf="SCHEME",Oa="SLASH_SCHEME",Sv="NUM",f0="WS",Ev="NL",Cc="OPENBRACE",Tc="CLOSEBRACE",$f="OPENBRACKET",Vf="CLOSEBRACKET",Ff="OPENPAREN",Gf="CLOSEPAREN",Jf="OPENANGLEBRACKET",Kf="CLOSEANGLEBRACKET",Yf="FULLWIDTHLEFTPAREN",Wf="FULLWIDTHRIGHTPAREN",Xf="LEFTCORNERBRACKET",Qf="RIGHTCORNERBRACKET",Zf="LEFTWHITECORNERBRACKET",eh="RIGHTWHITECORNERBRACKET",th="FULLWIDTHLESSTHAN",nh="FULLWIDTHGREATERTHAN",rh="AMPERSAND",ih="APOSTROPHE",sh="ASTERISK",bs="AT",oh="BACKSLASH",ah="BACKTICK",lh="CARET",Es="COLON",Cv="COMMA",ch="DOLLAR",qr="DOT",uh="EQUALS",Tv="EXCLAMATION",or="HYPHEN",_c="PERCENT",dh="PIPE",fh="PLUS",hh="POUND",Ac="QUERY",_v="QUOTE",Vk="FULLWIDTHMIDDLEDOT",Av="SEMI",Hr="SLASH",Nc="TILDE",ph="UNDERSCORE",Fk="EMOJI",mh="SYM";var Gk=Object.freeze({__proto__:null,ALPHANUMERICAL:$k,AMPERSAND:rh,APOSTROPHE:ih,ASCIINUMERICAL:Hk,ASTERISK:sh,AT:bs,BACKSLASH:oh,BACKTICK:ah,CARET:lh,CLOSEANGLEBRACKET:Kf,CLOSEBRACE:Tc,CLOSEBRACKET:Vf,CLOSEPAREN:Gf,COLON:Es,COMMA:Cv,DOLLAR:ch,DOT:qr,EMOJI:Fk,EQUALS:uh,EXCLAMATION:Tv,FULLWIDTHGREATERTHAN:nh,FULLWIDTHLEFTPAREN:Yf,FULLWIDTHLESSTHAN:th,FULLWIDTHMIDDLEDOT:Vk,FULLWIDTHRIGHTPAREN:Wf,HYPHEN:or,LEFTCORNERBRACKET:Xf,LEFTWHITECORNERBRACKET:Zf,LOCALHOST:Xc,NL:Ev,NUM:Sv,OPENANGLEBRACKET:Jf,OPENBRACE:Cc,OPENBRACKET:$f,OPENPAREN:Ff,PERCENT:_c,PIPE:dh,PLUS:fh,POUND:hh,QUERY:Ac,QUOTE:_v,RIGHTCORNERBRACKET:Qf,RIGHTWHITECORNERBRACKET:eh,SCHEME:cf,SEMI:Av,SLASH:Hr,SLASH_SCHEME:Oa,SYM:mh,TILDE:Nc,TLD:u0,UNDERSCORE:ph,UTLD:d0,UWORD:c0,WORD:_i,WS:f0});const Ei=/[a-z]/,sc=new RegExp("\\p{L}","u"),sy=new RegExp("\\p{Emoji}","u"),Ci=/\d/,oy=/\s/,n1="\r",ay=`
`,oV="",aV="",ly="";let Xd=null,Qd=null;function lV(t=[]){const e={};An.groups=e;const n=new An;Xd==null&&(Xd=r1(eV)),Qd==null&&(Qd=r1(tV)),ie(n,"'",ih),ie(n,"{",Cc),ie(n,"}",Tc),ie(n,"[",$f),ie(n,"]",Vf),ie(n,"(",Ff),ie(n,")",Gf),ie(n,"<",Jf),ie(n,">",Kf),ie(n,"",Yf),ie(n,"",Wf),ie(n,"",Xf),ie(n,"",Qf),ie(n,"",Zf),ie(n,"",eh),ie(n,"",th),ie(n,"",nh),ie(n,"&",rh),ie(n,"*",sh),ie(n,"@",bs),ie(n,"`",ah),ie(n,"^",lh),ie(n,":",Es),ie(n,",",Cv),ie(n,"$",ch),ie(n,".",qr),ie(n,"=",uh),ie(n,"!",Tv),ie(n,"-",or),ie(n,"%",_c),ie(n,"|",dh),ie(n,"+",fh),ie(n,"#",hh),ie(n,"?",Ac),ie(n,'"',_v),ie(n,"/",Hr),ie(n,";",Av),ie(n,"~",Nc),ie(n,"_",ph),ie(n,"\\",oh),ie(n,"",Vk);const r=ft(n,Ci,Sv,{[s0]:!0});ft(r,Ci,r);const i=ft(r,Ei,Hk,{[Ec]:!0}),o=ft(r,sc,$k,{[dc]:!0}),l=ft(n,Ei,_i,{[o0]:!0});ft(l,Ci,i),ft(l,Ei,l),ft(i,Ci,i),ft(i,Ei,i);const c=ft(n,sc,c0,{[a0]:!0});ft(c,Ei),ft(c,Ci,o),ft(c,sc,c),ft(o,Ci,o),ft(o,Ei),ft(o,sc,o);const d=ie(n,ay,Ev,{[iy]:!0}),f=ie(n,n1,f0,{[iy]:!0}),p=ft(n,oy,f0,{[iy]:!0});ie(n,ly,p),ie(f,ay,d),ie(f,ly,p),ft(f,oy,p),ie(p,n1),ie(p,ay),ft(p,oy,p),ie(p,ly,p);const m=ft(n,sy,Fk,{[qk]:!0});ie(m,"#"),ft(m,sy,m),ie(m,oV,m);const v=ie(m,aV);ie(v,"#"),ft(v,sy,m);const b=[[Ei,l],[Ci,i]],w=[[Ei,null],[sc,c],[Ci,o]];for(let S=0;S<Xd.length;S++)ps(n,Xd[S],u0,_i,b);for(let S=0;S<Qd.length;S++)ps(n,Qd[S],d0,c0,w);yo(u0,{tld:!0,ascii:!0},e),yo(d0,{utld:!0,alpha:!0},e),ps(n,"file",cf,_i,b),ps(n,"mailto",cf,_i,b),ps(n,"http",Oa,_i,b),ps(n,"https",Oa,_i,b),ps(n,"ftp",Oa,_i,b),ps(n,"ftps",Oa,_i,b),yo(cf,{scheme:!0,ascii:!0},e),yo(Oa,{slashscheme:!0,ascii:!0},e),t=t.sort((S,E)=>S[0]>E[0]?1:-1);for(let S=0;S<t.length;S++){const E=t[S][0],N=t[S][1]?{[nV]:!0}:{[rV]:!0};E.indexOf("-")>=0?N[l0]=!0:Ei.test(E)?Ci.test(E)?N[Ec]=!0:N[o0]=!0:N[s0]=!0,t1(n,E,E,N)}return t1(n,"localhost",Xc,{ascii:!0}),n.jd=new An(mh),{start:n,tokens:Object.assign({groups:e},Gk)}}function Jk(t,e){const n=cV(e.replace(/[A-Z]/g,c=>c.toLowerCase())),r=n.length,i=[];let o=0,l=0;for(;l<r;){let c=t,d=null,f=0,p=null,m=-1,v=-1;for(;l<r&&(d=c.go(n[l]));)c=d,c.accepts()?(m=0,v=0,p=c):m>=0&&(m+=n[l].length,v++),f+=n[l].length,o+=n[l].length,l++;o-=m,l-=v,f-=m,i.push({t:p.t,v:e.slice(o-f,o),s:o-f,e:o})}return i}function cV(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),o,l=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(l),r+=l.length}return e}function ps(t,e,n,r,i){let o;const l=e.length;for(let c=0;c<l-1;c++){const d=e[c];t.j[d]?o=t.j[d]:(o=new An(r),o.jr=i.slice(),t.j[d]=o),t=o}return o=new An(n),o.jr=i.slice(),t.j[e[l-1]]=o,o}function r1(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let o=0;for(;i.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let l=parseInt(t.substring(r,r+o),10);l>0;l--)n.pop();r+=o}else n.push(t[r]),r++}return e}const Qc={defaultProtocol:"http",events:null,format:i1,formatHref:i1,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Nv(t,e=null){let n=Object.assign({},Qc);t&&(n=Object.assign(n,t instanceof Nv?t.o:t));const r=n.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}Nv.prototype={o:Qc,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Qc[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function i1(t){return t}function Kk(t,e){this.t="token",this.v=t,this.tk=e}Kk.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Qc.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),o=this.toFormattedString(t),l={},c=t.get("className",n,e),d=t.get("target",n,e),f=t.get("rel",n,e),p=t.getObj("attributes",n,e),m=t.getObj("events",n,e);return l.href=r,c&&(l.class=c),d&&(l.target=d),f&&(l.rel=f),p&&Object.assign(l,p),{tagName:i,attributes:l,content:o,eventListeners:m}}};function ep(t,e){class n extends Kk{constructor(i,o){super(i,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const s1=ep("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),o1=ep("text"),uV=ep("nl"),Zd=ep("url",{isLink:!0,toHref(t=Qc.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Xc&&t[1].t===Es}}),sr=t=>new An(t);function dV({groups:t}){const e=t.domain.concat([rh,sh,bs,oh,ah,lh,ch,uh,or,Sv,_c,dh,fh,hh,Hr,mh,Nc,ph]),n=[ih,Es,Cv,qr,Tv,_c,Ac,_v,Av,Jf,Kf,Cc,Tc,Vf,$f,Ff,Gf,Yf,Wf,Xf,Qf,Zf,eh,th,nh],r=[rh,ih,sh,oh,ah,lh,ch,uh,or,Cc,Tc,_c,dh,fh,hh,Ac,Hr,mh,Nc,ph],i=sr(),o=ie(i,Nc);Ae(o,r,o),Ae(o,t.domain,o);const l=sr(),c=sr(),d=sr();Ae(i,t.domain,l),Ae(i,t.scheme,c),Ae(i,t.slashscheme,d),Ae(l,r,o),Ae(l,t.domain,l);const f=ie(l,bs);ie(o,bs,f),ie(c,bs,f),ie(d,bs,f);const p=ie(o,qr);Ae(p,r,o),Ae(p,t.domain,o);const m=sr();Ae(f,t.domain,m),Ae(m,t.domain,m);const v=ie(m,qr);Ae(v,t.domain,m);const b=sr(s1);Ae(v,t.tld,b),Ae(v,t.utld,b),ie(f,Xc,b);const w=ie(m,or);ie(w,or,w),Ae(w,t.domain,m),Ae(b,t.domain,m),ie(b,qr,v),ie(b,or,w);const S=ie(b,Es);Ae(S,t.numeric,s1);const E=ie(l,or),T=ie(l,qr);ie(E,or,E),Ae(E,t.domain,l),Ae(T,r,o),Ae(T,t.domain,l);const N=sr(Zd);Ae(T,t.tld,N),Ae(T,t.utld,N),Ae(N,t.domain,l),Ae(N,r,o),ie(N,qr,T),ie(N,or,E),ie(N,bs,f);const A=ie(N,Es),I=sr(Zd);Ae(A,t.numeric,I);const M=sr(Zd),D=sr();Ae(M,e,M),Ae(M,n,D),Ae(D,e,M),Ae(D,n,D),ie(N,Hr,M),ie(I,Hr,M);const R=ie(c,Es),B=ie(d,Es),z=ie(B,Hr),F=ie(z,Hr);Ae(c,t.domain,l),ie(c,qr,T),ie(c,or,E),Ae(d,t.domain,l),ie(d,qr,T),ie(d,or,E),Ae(R,t.domain,M),ie(R,Hr,M),ie(R,Ac,M),Ae(F,t.domain,M),Ae(F,e,M),ie(F,Hr,M);const Q=[[Cc,Tc],[$f,Vf],[Ff,Gf],[Jf,Kf],[Yf,Wf],[Xf,Qf],[Zf,eh],[th,nh]];for(let G=0;G<Q.length;G++){const[X,q]=Q[G],K=ie(M,X);ie(D,X,K),ie(K,q,M);const L=sr(Zd);Ae(K,e,L);const W=sr();Ae(K,n),Ae(L,e,L),Ae(L,n,W),Ae(W,e,L),Ae(W,n,W),ie(L,q,M),ie(W,q,M)}return ie(i,Xc,N),ie(i,Ev,uV),{start:i,tokens:Gk}}function fV(t,e,n){let r=n.length,i=0,o=[],l=[];for(;i<r;){let c=t,d=null,f=null,p=0,m=null,v=-1;for(;i<r&&!(d=c.go(n[i].t));)l.push(n[i++]);for(;i<r&&(f=d||c.go(n[i].t));)d=null,c=f,c.accepts()?(v=0,m=c):v>=0&&v++,i++,p++;if(v<0)i-=p,i<r&&(l.push(n[i]),i++);else{l.length>0&&(o.push(cy(o1,e,l)),l=[]),i-=v,p-=v;const b=m.t,w=n.slice(i-p,i);o.push(cy(b,e,w))}}return l.length>0&&o.push(cy(o1,e,l)),o}function cy(t,e,n){const r=n[0].s,i=n[n.length-1].e,o=e.slice(r,i);return new t(o,n)}const hV=typeof console<"u"&&console&&console.warn||(()=>{}),pV="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",et={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function mV(){return An.groups={},et.scanner=null,et.parser=null,et.tokenQueue=[],et.pluginQueue=[],et.customSchemes=[],et.initialized=!1,et}function a1(t,e=!1){if(et.initialized&&hV(`linkifyjs: already initialized - will not register custom scheme "${t}" ${pV}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);et.customSchemes.push([t,e])}function gV(){et.scanner=lV(et.customSchemes);for(let t=0;t<et.tokenQueue.length;t++)et.tokenQueue[t][1]({scanner:et.scanner});et.parser=dV(et.scanner.tokens);for(let t=0;t<et.pluginQueue.length;t++)et.pluginQueue[t][1]({scanner:et.scanner,parser:et.parser});return et.initialized=!0,et}function kv(t){return et.initialized||gV(),fV(et.parser.start,t,Jk(et.scanner.start,t))}kv.scan=Jk;function Yk(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Nv(n),i=kv(t),o=[];for(let l=0;l<i.length;l++){const c=i[l];c.isLink&&(!e||c.t===e)&&r.check(c)&&o.push(c.toFormattedObject(r))}return o}var Rv="[\0- -\u2029]",yV=new RegExp(Rv),vV=new RegExp(`${Rv}$`),bV=new RegExp(Rv,"g");function xV(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function wV(t){return new tt({key:new at("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(f=>f.docChanged)&&!n.doc.eq(r.doc),o=e.some(f=>f.getMeta("preventAutolink"));if(!i||o)return;const{tr:l}=r,c=kN(n.doc,[...e]);if(PN(c).forEach(({newRange:f})=>{const p=gq(r.doc,f,b=>b.isTextblock);let m,v;if(p.length>1)m=p[0],v=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const b=r.doc.textBetween(f.from,f.to," "," ");if(!vV.test(b))return;m=p[0],v=r.doc.textBetween(m.pos,f.to,void 0," ")}if(m&&v){const b=v.split(yV).filter(Boolean);if(b.length<=0)return!1;const w=b[b.length-1],S=m.pos+v.lastIndexOf(w);if(!w)return!1;const E=kv(w).map(T=>T.toObject(t.defaultProtocol));if(!xV(E))return!1;E.filter(T=>T.isLink).map(T=>({...T,from:S+T.start+1,to:S+T.end+1})).filter(T=>r.schema.marks.code?!r.doc.rangeHasMark(T.from,T.to,r.schema.marks.code):!0).filter(T=>t.validate(T.value)).filter(T=>t.shouldAutoLink(T.value)).forEach(T=>{lv(T.from,T.to,r.doc).some(N=>N.mark.type===t.type)||l.addMark(T.from,T.to,t.type.create({href:T.href}))})}}),!!l.steps.length)return l}})}function SV(t){return new tt({key:new at("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,o;if(r.button!==0||!e.editable)return!1;let l=null;if(r.target instanceof HTMLAnchorElement)l=r.target;else{const d=r.target;if(!d)return!1;const f=t.editor.view.dom;l=d.closest("a"),l&&!f.contains(l)&&(l=null)}if(!l)return!1;let c=!1;if(t.enableClickSelection&&(c=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const d=LN(e.state,t.type.name),f=(i=l.href)!=null?i:d.href,p=(o=l.target)!=null?o:d.target;f&&(window.open(f,p),c=!0)}return c}}})}function EV(t){return new tt({key:new at("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:o}=e,{selection:l}=o,{empty:c}=l;if(c)return!1;let d="";r.content.forEach(p=>{d+=p.textContent});const f=Yk(d,{defaultProtocol:t.defaultProtocol}).find(p=>p.isLink&&p.value===d);return!d||!f||i!==void 0&&!i(f.value)?!1:t.editor.commands.setMark(t.type,{href:f.href})}}})}function ao(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(bV,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Wk=Mo.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){a1(t);return}a1(t.scheme,t.optionalSlashes)})},onDestroy(){mV()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!ao(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!ao(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!ao(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Nt(this.options.HTMLAttributes,t),0]:["a",Nt(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!ao(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!ao(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ao({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=Yk(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:l=>!!ao(l,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(wV({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!ao(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(SV({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(EV({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),CV=Wk,TV=Object.defineProperty,_V=(t,e)=>{for(var n in e)TV(t,n,{get:e[n],enumerable:!0})},AV="listItem",l1="textStyle",c1=/^\s*([-+*])\s$/,Xk=$n.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Nt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(AV,this.editor.getAttributes(l1)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Wa({find:c1,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Wa({find:c1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(l1),editor:this.editor})),[t]}}),Qk=$n.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Nt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const l=t.tokens.slice(1),c=e.parseChildren(l);n.push(...c)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>fv(t,e,r=>{var i,o;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((o=(i=r.meta)==null?void 0:i.parentAttrs)==null?void 0:o.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),NV={};_V(NV,{findListItemPos:()=>fu,getNextListDepth:()=>Mv,handleBackspace:()=>h0,handleDelete:()=>p0,hasListBefore:()=>Zk,hasListItemAfter:()=>kV,hasListItemBefore:()=>eR,listItemHasSubList:()=>tR,nextListIsDeeper:()=>nR,nextListIsHigher:()=>rR});var fu=(t,e)=>{const{$from:n}=e.selection,r=At(t,e.schema);let i=null,o=n.depth,l=n.pos,c=null;for(;o>0&&c===null;)i=n.node(o),i.type===r?c=o:(o-=1,l-=1);return c===null?null:{$pos:e.doc.resolve(l),depth:c}},Mv=(t,e)=>{const n=fu(t,e);if(!n)return!1;const[,r]=Tq(e,t,n.$pos.pos+4);return r},Zk=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),o=t.doc.resolve(i).node();return!(!o||!n.includes(o.type.name))},eR=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},tR=(t,e,n)=>{if(!n)return!1;const r=At(t,e.schema);let i=!1;return n.descendants(o=>{o.type===r&&(i=!0)}),i},h0=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Os(t.state,e)&&Zk(t.state,e,n)){const{$anchor:c}=t.state.selection,d=t.state.doc.resolve(c.before()-1),f=[];d.node().descendants((v,b)=>{v.type.name===e&&f.push({node:v,pos:b})});const p=f.at(-1);if(!p)return!1;const m=t.state.doc.resolve(d.start()+p.pos+1);return t.chain().cut({from:c.start()-1,to:c.end()+1},m.end()).joinForward().run()}if(!Os(t.state,e)||!kq(t.state))return!1;const r=fu(e,t.state);if(!r)return!1;const o=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),l=tR(e,t.state,o);return eR(e,t.state)&&!l?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},nR=(t,e)=>{const n=Mv(t,e),r=fu(t,e);return!r||!n?!1:n>r.depth},rR=(t,e)=>{const n=Mv(t,e),r=fu(t,e);return!r||!n?!1:n<r.depth},p0=(t,e)=>{if(!Os(t.state,e)||!Nq(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:nR(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():rR(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},kV=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},iR=lt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&p0(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&p0(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&h0(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&h0(t,n,r)&&(e=!0)}),e}}}}),u1=/^(\s*)(\d+)\.\s+(.*)$/,RV=/^\s/;function MV(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],o=i.match(u1);if(!o)break;const[,l,c,d]=o,f=l.length;let p=d,m=n+1;const v=[i];for(;m<t.length;){const b=t[m];if(b.match(u1))break;if(b.trim()==="")v.push(b),p+=`
`,m+=1;else if(b.match(RV))v.push(b),p+=`
${b.slice(f+2)}`,m+=1;else break}e.push({indent:f,number:parseInt(c,10),content:p.trim(),raw:v.join(`
`)}),r=m,n=m}return[e,r]}function sR(t,e,n){var r;const i=[];let o=0;for(;o<t.length;){const l=t[o];if(l.indent===e){const c=l.content.split(`
`),d=((r=c[0])==null?void 0:r.trim())||"",f=[];d&&f.push({type:"paragraph",raw:d,tokens:n.inlineTokens(d)});const p=c.slice(1).join(`
`).trim();if(p){const b=n.blockTokens(p);f.push(...b)}let m=o+1;const v=[];for(;m<t.length&&t[m].indent>e;)v.push(t[m]),m+=1;if(v.length>0){const b=Math.min(...v.map(S=>S.indent)),w=sR(v,b,n);f.push({type:"list",ordered:!0,start:v[0].number,items:w,raw:v.map(S=>S.raw).join(`
`)})}i.push({type:"list_item",raw:l.raw,tokens:f}),o=m}else o+=1}return i}function IV(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const o=e.parseChildren([i]);r.push({type:"paragraph",content:o})}else{const o=e.parseChildren([i]);o.length>0&&r.push(...o)}}),{type:"listItem",content:r}})}var DV="listItem",d1="textStyle",f1=/^(\d+)\.\s$/,oR=$n.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Nt(this.options.HTMLAttributes,n),0]:["ol",Nt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?IV(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[o,l]=MV(i);if(o.length===0)return;const c=sR(o,0,n);return c.length===0?void 0:{type:"list",ordered:!0,start:((r=o[0])==null?void 0:r.number)||1,items:c,raw:i.slice(0,l).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(DV,this.editor.getAttributes(d1)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Wa({find:f1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Wa({find:f1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(d1)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),OV=/^\s*(\[([( |x])?\])\s$/,LV=$n.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Nt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return fv(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),l=document.createElement("span"),c=document.createElement("input"),d=document.createElement("div"),f=m=>{var v,b;c.ariaLabel=((b=(v=this.options.a11y)==null?void 0:v.checkboxLabel)==null?void 0:b.call(v,m,c.checked))||`Task item checkbox for ${m.textContent||"empty task item"}`};f(t),o.contentEditable="false",c.type="checkbox",c.addEventListener("mousedown",m=>m.preventDefault()),c.addEventListener("change",m=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){c.checked=!c.checked;return}const{checked:v}=m.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:b})=>{const w=n();if(typeof w!="number")return!1;const S=b.doc.nodeAt(w);return b.setNodeMarkup(w,void 0,{...S==null?void 0:S.attrs,checked:v}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,v)||(c.checked=!c.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([m,v])=>{i.setAttribute(m,v)}),i.dataset.checked=t.attrs.checked,c.checked=t.attrs.checked,o.append(c,l),i.append(o,d),Object.entries(e).forEach(([m,v])=>{i.setAttribute(m,v)});let p=new Set(Object.keys(e));return{dom:i,contentDOM:d,update:m=>{if(m.type!==this.type)return!1;i.dataset.checked=m.attrs.checked,c.checked=m.attrs.checked,f(m);const v=r.extensionManager.attributes,b=Yc(m,v),w=new Set(Object.keys(b)),S=this.options.HTMLAttributes;return p.forEach(E=>{w.has(E)||(E in S?i.setAttribute(E,S[E]):i.removeAttribute(E))}),Object.entries(b).forEach(([E,T])=>{T==null?E in S?i.setAttribute(E,S[E]):i.removeAttribute(E):i.setAttribute(E,T)}),p=w,!0}}}},addInputRules(){return[Wa({find:OV,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),PV=$n.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Nt(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=o=>{const l=Zy(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:c=>({indentLevel:c[1].length,mainContent:c[4],checked:c[3].toLowerCase()==="x"}),createToken:(c,d)=>({type:"taskItem",raw:"",mainContent:c.mainContent,indentLevel:c.indentLevel,checked:c.checked,text:c.mainContent,tokens:n.inlineTokens(c.mainContent),nestedTokens:d}),customNestedParser:r},n);return l?[{type:"taskList",raw:l.raw,items:l.items}]:n.blockTokens(o)},i=Zy(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,l)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:l}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});lt.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Xk.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(Qk.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(iR.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(oR.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(LV.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(PV.configure(this.options.taskList)),t}});var h1="&nbsp;",UV="",BV=$n.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Nt(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];if(n.length===1&&n[0].type==="image")return e.parseChildren([n[0]]);const r=e.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===h1||r[0].text===UV)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(t,e)=>{if(!t)return"";const n=Array.isArray(t.content)?t.content:[];return n.length===0?h1:e.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),zV=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,jV=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,qV=Mo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Nt(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ya({find:zV,type:this.type})]},addPasteRules(){return[Ao({find:jV,type:this.type})]}}),HV=$n.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),aR=Mo.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Nt(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const o=i[2].trim();return{type:"underline",raw:i[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),$V=aR;function VV(t={}){return new tt({view(e){return new FV(e,t)}})}class FV{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=l=>{this[i](l)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),l=o.width/i.offsetWidth,c=o.height/i.offsetHeight;if(n){let m=e.nodeBefore,v=e.nodeAfter;if(m||v){let b=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(b){let w=b.getBoundingClientRect(),S=m?w.bottom:w.top;m&&v&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let E=this.width/2*c;r={left:w.left,right:w.right,top:S-E,bottom:S+E}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),v=this.width/2*l;r={left:m.left-v,right:m.left+v,top:m.top,bottom:m.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let f,p;if(!d||d==document.body&&getComputedStyle(d).position=="static")f=-pageXOffset,p=-pageYOffset;else{let m=d.getBoundingClientRect(),v=m.width/d.offsetWidth,b=m.height/d.offsetHeight;f=m.left-d.scrollLeft*v,p=m.top-d.scrollTop*b}this.element.style.left=(r.left-f)/l+"px",this.element.style.top=(r.top-p)/c+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/c+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let l=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=wA(this.editorView.state.doc,l,this.editorView.dragging.slice);c!=null&&(l=c)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class gt extends we{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return gt.valid(r)?new gt(r):we.near(r)}content(){return le.empty}eq(e){return e instanceof gt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new gt(e.resolve(n.pos))}getBookmark(){return new Iv(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!GV(e)||!JV(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&gt.valid(e))return e;let i=e.pos,o=null;for(let l=e.depth;;l--){let c=e.node(l);if(n>0?e.indexAfter(l)<c.childCount:e.index(l)>0){o=c.child(n>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;i+=n;let d=e.doc.resolve(i);if(gt.valid(d))return d}for(;;){let l=n>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!ge.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=l,i+=n;let c=e.doc.resolve(i);if(gt.valid(c))return c}return null}}}gt.prototype.visible=!1;gt.findFrom=gt.findGapCursorFrom;we.jsonID("gapcursor",gt);class Iv{constructor(e){this.pos=e}map(e){return new Iv(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return gt.valid(n)?new gt(n):we.near(n)}}function lR(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function GV(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||lR(i.type))return!0;if(i.inlineContent)return!1}}return!0}function JV(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||lR(i.type))return!0;if(i.inlineContent)return!1}}return!0}function KV(){return new tt({props:{decorations:QV,createSelectionBetween(t,e,n){return e.pos==n.pos&&gt.valid(n)?new gt(n):null},handleClick:WV,handleKeyDown:YV,handleDOMEvents:{beforeinput:XV}}})}const YV=ev({ArrowLeft:ef("horiz",-1),ArrowRight:ef("horiz",1),ArrowUp:ef("vert",-1),ArrowDown:ef("vert",1)});function ef(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let l=r.selection,c=e>0?l.$to:l.$from,d=l.empty;if(l instanceof Se){if(!o.endOfTextblock(n)||c.depth==0)return!1;d=!1,c=r.doc.resolve(e>0?c.after():c.before())}let f=gt.findGapCursorFrom(c,e,d);return f?(i&&i(r.tr.setSelection(new gt(f))),!0):!1}}function WV(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!gt.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&ge.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new gt(r))),!0)}function XV(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof gt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=re.empty;for(let l=r.length-1;l>=0;l--)i=re.from(r[l].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new le(i,0,0));return o.setSelection(Se.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function QV(t){if(!(t.selection instanceof gt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ct.create(t.doc,[dn.widget(t.selection.head,e,{key:"gapcursor"})])}var gh=200,jt=function(){};jt.prototype.append=function(e){return e.length?(e=jt.from(e),!this.length&&e||e.length<gh&&this.leafAppend(e)||this.length<gh&&e.leafPrepend(this)||this.appendInner(e)):this};jt.prototype.prepend=function(e){return e.length?jt.from(e).append(this):this};jt.prototype.appendInner=function(e){return new ZV(this,e)};jt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?jt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};jt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};jt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};jt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,l){return i.push(e(o,l))},n,r),i};jt.from=function(e){return e instanceof jt?e:e&&e.length?new cR(e):jt.empty};var cR=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,l,c){for(var d=o;d<l;d++)if(i(this.values[d],c+d)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,l,c){for(var d=o-1;d>=l;d--)if(i(this.values[d],c+d)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=gh)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=gh)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(jt);jt.empty=new cR([]);var ZV=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,l){var c=this.left.length;if(i<c&&this.left.forEachInner(r,i,Math.min(o,c),l)===!1||o>c&&this.right.forEachInner(r,Math.max(i-c,0),Math.min(this.length,o)-c,l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,l){var c=this.left.length;if(i>c&&this.right.forEachInvertedInner(r,i-c,Math.max(o,c)-c,l+c)===!1||o<c&&this.left.forEachInvertedInner(r,Math.min(i,c),o,l)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(jt);const eF=500;class Cr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let l=e.tr,c,d,f=[],p=[];return this.items.forEach((m,v)=>{if(!m.step){i||(i=this.remapping(r,v+1),o=i.maps.length),o--,p.push(m);return}if(i){p.push(new $r(m.map));let b=m.step.map(i.slice(o)),w;b&&l.maybeStep(b).doc&&(w=l.mapping.maps[l.mapping.maps.length-1],f.push(new $r(w,void 0,void 0,f.length+p.length))),o--,w&&i.appendMap(w,o)}else l.maybeStep(m.step);if(m.selection)return c=i?m.selection.map(i.slice(o)):m.selection,d=new Cr(this.items.slice(0,r).append(p.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:l,selection:c}}addTransform(e,n,r,i){let o=[],l=this.eventCount,c=this.items,d=!i&&c.length?c.get(c.length-1):null;for(let p=0;p<e.steps.length;p++){let m=e.steps[p].invert(e.docs[p]),v=new $r(e.mapping.maps[p],m,n),b;(b=d&&d.merge(v))&&(v=b,p?o.pop():c=c.slice(0,c.length-1)),o.push(v),n&&(l++,n=void 0),i||(d=v)}let f=l-r.depth;return f>nF&&(c=tF(c,f),l-=f),new Cr(c.append(o),l)}remapping(e,n){let r=new $c;return this.items.forEach((i,o)=>{let l=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,l)},e,n),r}addMaps(e){return this.eventCount==0?this:new Cr(this.items.append(e.map(n=>new $r(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,l=e.steps.length,c=this.eventCount;this.items.forEach(v=>{v.selection&&c--},i);let d=n;this.items.forEach(v=>{let b=o.getMirror(--d);if(b==null)return;l=Math.min(l,b);let w=o.maps[b];if(v.step){let S=e.steps[b].invert(e.docs[b]),E=v.selection&&v.selection.map(o.slice(d+1,b));E&&c++,r.push(new $r(w,S,E))}else r.push(new $r(w))},i);let f=[];for(let v=n;v<l;v++)f.push(new $r(o.maps[v]));let p=this.items.slice(0,i).append(f).append(r),m=new Cr(p,c);return m.emptyItemCount()>eF&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((l,c)=>{if(c>=e)i.push(l),l.selection&&o++;else if(l.step){let d=l.step.map(n.slice(r)),f=d&&d.getMap();if(r--,f&&n.appendMap(f,r),d){let p=l.selection&&l.selection.map(n.slice(r));p&&o++;let m=new $r(f.invert(),d,p),v,b=i.length-1;(v=i.length&&i[b].merge(m))?i[b]=v:i.push(m)}}else l.map&&r--},this.items.length,0),new Cr(jt.from(i.reverse()),o)}}Cr.empty=new Cr(jt.empty,0);function tF(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class $r{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new $r(n.getMap().invert(),n,this.selection)}}}class xs{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const nF=20;function rF(t,e,n,r){let i=n.getMeta(So),o;if(i)return i.historyState;n.getMeta(oF)&&(t=new xs(t.done,t.undone,null,0,-1));let l=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(l&&l.getMeta(So))return l.getMeta(So).redo?new xs(t.done.addTransform(n,void 0,r,uf(e)),t.undone,p1(n.mapping.maps),t.prevTime,t.prevComposition):new xs(t.done,t.undone.addTransform(n,void 0,r,uf(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let c=n.getMeta("composition"),d=t.prevTime==0||!l&&t.prevComposition!=c&&(t.prevTime<(n.time||0)-r.newGroupDelay||!iF(n,t.prevRanges)),f=l?uy(t.prevRanges,n.mapping):p1(n.mapping.maps);return new xs(t.done.addTransform(n,d?e.selection.getBookmark():void 0,r,uf(e)),Cr.empty,f,n.time,c??t.prevComposition)}else return(o=n.getMeta("rebased"))?new xs(t.done.rebased(n,o),t.undone.rebased(n,o),uy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new xs(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),uy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function iF(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function p1(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,l)=>e.push(o,l));return e}function uy(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function sF(t,e,n){let r=uf(e),i=So.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),c=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),d=new xs(n?c:o.remaining,n?o.remaining:c,null,0,-1);return o.transform.setSelection(l).setMeta(So,{redo:n,historyState:d})}let dy=!1,m1=null;function uf(t){let e=t.plugins;if(m1!=e){dy=!1,m1=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){dy=!0;break}}return dy}const So=new at("history"),oF=new at("closeHistory");function aF(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new tt({key:So,state:{init(){return new xs(Cr.empty,Cr.empty,null,0,-1)},apply(e,n,r){return rF(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?dR:r=="historyRedo"?fR:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function uR(t,e){return(n,r)=>{let i=So.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=sF(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const dR=uR(!1,!0),fR=uR(!0,!0);lt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new tt({key:new at("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const o=this.storage.characters({node:r.doc});if(o>i){const l=o-i,c=0,d=l;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const f=r.tr.deleteRange(c,d);return t=!0,f}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=r||i>r&&o>r&&o<=i)return!0;if(i>r&&o>r&&o>i||!e.getMeta("paste"))return!1;const c=e.selection.$head.pos,d=o-r,f=c-d,p=c;return e.deleteRange(f,p),!(this.storage.characters({node:e.doc})>r)}})]}});var lF=lt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[VV(this.options)]}});lt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new tt({key:new at("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,o=[];if(!n||!r)return ct.create(t,[]);let l=0;this.options.mode==="deepest"&&t.descendants((d,f)=>{if(d.isText)return;if(!(i>=f&&i<=f+d.nodeSize-1))return!1;l+=1});let c=0;return t.descendants((d,f)=>{if(d.isText||!(i>=f&&i<=f+d.nodeSize-1))return!1;if(c+=1,this.options.mode==="deepest"&&l-c>0||this.options.mode==="shallowest"&&c>1)return this.options.mode==="deepest";o.push(dn.node(f,f+d.nodeSize,{class:this.options.className}))}),ct.create(t,o)}}})]}});var cF=lt.create({name:"gapCursor",addProseMirrorPlugins(){return[KV()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Fe(pe(t,"allowGapCursor",n)))!=null?e:null}}}),g1="placeholder";function uF(t){return t.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}var dF=lt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:g1,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const t=this.options.dataAttribute?`data-${uF(this.options.dataAttribute)}`:`data-${g1}`;return[new tt({key:new at("placeholder"),props:{decorations:({doc:e,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=n,o=[];if(!r)return null;const l=this.editor.isEmpty;return e.descendants((c,d)=>{const f=i>=d&&i<=d+c.nodeSize,p=!c.isLeaf&&Gh(c);if((f||!this.options.showOnlyCurrent)&&p){const m=[this.options.emptyNodeClass];l&&m.push(this.options.emptyEditorClass);const v=dn.node(d,d+c.nodeSize,{class:m.join(" "),[t]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:c,pos:d,hasAnchor:f}):this.options.placeholder});o.push(v)}return this.options.includeChildren}),ct.create(e,o)}}})]}});lt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new tt({key:new at("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||UN(n.selection)||t.view.dragging?null:ct.create(n.doc,[dn.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function y1({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var fF=lt.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new at(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new tt({key:e,appendTransaction:(i,o,l)=>{const{doc:c,tr:d,schema:f}=l,p=e.getState(l),m=c.content.size,v=f.nodes[n];if(p)return d.insert(m,v.create())},state:{init:(i,o)=>{const l=o.tr.doc.lastChild;return!y1({node:l,types:r})},apply:(i,o)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return o;const l=i.doc.lastChild;return!y1({node:l,types:r})}}})]}}),hF=lt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>dR(t,e),redo:()=>({state:t,dispatch:e})=>fR(t,e)}},addProseMirrorPlugins(){return[aF(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),pF=lt.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(B$.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(D$.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(Xk.configure(this.options.bulletList)),this.options.code!==!1&&i.push(q$.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(V$.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(F$.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(lF.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(cF.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(G$.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(J$.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(hF.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(K$.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(Z$.configure(this.options.italic)),this.options.listItem!==!1&&i.push(Qk.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(iR.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(Wk.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(oR.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(BV.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(qV.configure(this.options.strike)),this.options.text!==!1&&i.push(HV.configure(this.options.text)),this.options.underline!==!1&&i.push(aR.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(fF.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),mF=pF,gF=dF,yF=lt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).some(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).some(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),vF=yF;function bF({data:t,isSelected:e,onSelect:n,onUpdate:r,onDelete:i}){const o=A$({extensions:[mF.configure({heading:{levels:[1,2,3]}}),gF.configure({placeholder:'Start writing, or press "/" for commands...'}),CV.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 underline"}}),vF.configure({types:["heading","paragraph"]}),$V],content:t.html||"",editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none min-h-[100px] p-4"}},onUpdate:({editor:c})=>{r({type:"text",html:c.getHTML()})},onFocus:()=>{n()}});_.useEffect(()=>{o&&t.html!==o.getHTML()&&o.commands.setContent(t.html||"")},[t.html,o]);const l=()=>{const c=o==null?void 0:o.getAttributes("link").href,d=prompt("Enter URL:",c);if(d!==null){if(d===""){o==null||o.chain().focus().unsetLink().run();return}o==null||o.chain().focus().setLink({href:d}).run()}};return o?g.jsxs("div",{className:`relative group rounded-lg border transition-all ${e?"border-blue-400 shadow-sm":"border-gray-200 hover:border-gray-300"}`,onClick:n,children:[e&&g.jsxs("div",{className:"flex items-center gap-1 px-2 py-1.5 border-b border-gray-200 bg-gray-50 rounded-t-lg flex-wrap",children:[g.jsx(_n,{onClick:()=>o.chain().focus().toggleHeading({level:1}).run(),active:o.isActive("heading",{level:1}),title:"Heading 1",children:g.jsx(cO,{className:"w-4 h-4"})}),g.jsx(_n,{onClick:()=>o.chain().focus().toggleHeading({level:2}).run(),active:o.isActive("heading",{level:2}),title:"Heading 2",children:g.jsx(dO,{className:"w-4 h-4"})}),g.jsx(_n,{onClick:()=>o.chain().focus().toggleHeading({level:3}).run(),active:o.isActive("heading",{level:3}),title:"Heading 3",children:g.jsx(hO,{className:"w-4 h-4"})}),g.jsx("div",{className:"w-px h-5 bg-gray-300 mx-1"}),g.jsx(_n,{onClick:()=>o.chain().focus().toggleBold().run(),active:o.isActive("bold"),title:"Bold",children:g.jsx(vD,{className:"w-4 h-4"})}),g.jsx(_n,{onClick:()=>o.chain().focus().toggleItalic().run(),active:o.isActive("italic"),title:"Italic",children:g.jsx(vO,{className:"w-4 h-4"})}),g.jsx(_n,{onClick:()=>o.chain().focus().toggleUnderline().run(),active:o.isActive("underline"),title:"Underline",children:g.jsx(xL,{className:"w-4 h-4"})}),g.jsx("div",{className:"w-px h-5 bg-gray-300 mx-1"}),g.jsx(_n,{onClick:()=>o.chain().focus().toggleBulletList().run(),active:o.isActive("bulletList"),title:"Bullet list",children:g.jsx(TO,{className:"w-4 h-4"})}),g.jsx(_n,{onClick:()=>o.chain().focus().toggleOrderedList().run(),active:o.isActive("orderedList"),title:"Numbered list",children:g.jsx(EO,{className:"w-4 h-4"})}),g.jsx(_n,{onClick:()=>o.chain().focus().toggleBlockquote().run(),active:o.isActive("blockquote"),title:"Quote",children:g.jsx(VO,{className:"w-4 h-4"})}),g.jsx("div",{className:"w-px h-5 bg-gray-300 mx-1"}),g.jsx(_n,{onClick:()=>o.chain().focus().setTextAlign("left").run(),active:o.isActive({textAlign:"left"}),title:"Align left",children:g.jsx(mL,{className:"w-4 h-4"})}),g.jsx(_n,{onClick:()=>o.chain().focus().setTextAlign("center").run(),active:o.isActive({textAlign:"center"}),title:"Align center",children:g.jsx(dL,{className:"w-4 h-4"})}),g.jsx(_n,{onClick:()=>o.chain().focus().setTextAlign("right").run(),active:o.isActive({textAlign:"right"}),title:"Align right",children:g.jsx(hL,{className:"w-4 h-4"})}),g.jsx("div",{className:"w-px h-5 bg-gray-300 mx-1"}),g.jsx(_n,{onClick:l,active:o.isActive("link"),title:"Add link",children:g.jsx(H1,{className:"w-4 h-4"})}),g.jsx("div",{className:"flex-1"}),g.jsx(_n,{onClick:i,title:"Delete block",className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:g.jsx(Nn,{className:"w-4 h-4"})})]}),g.jsx(Dk,{editor:o})]}):null}function _n({onClick:t,active:e,title:n,children:r,className:i=""}){return g.jsx("button",{type:"button",onClick:t,title:n,className:`p-1.5 rounded transition-colors ${e?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-200"} ${i}`,children:r})}function xF(t){return t.includes("youtube.com")||t.includes("youtu.be")?"youtube":t.includes("vimeo.com")?"vimeo":t.includes("loom.com")?"loom":"custom"}function wF(t,e){var n,r;try{if(e==="youtube"){let i="";return t.includes("youtu.be/")?i=((n=t.split("youtu.be/")[1])==null?void 0:n.split("?")[0])||"":t.includes("youtube.com/watch")?i=new URL(t).searchParams.get("v")||"":t.includes("youtube.com/embed/")&&(i=((r=t.split("embed/")[1])==null?void 0:r.split("?")[0])||""),i?`https://www.youtube.com/embed/${i}`:null}if(e==="vimeo"){const i=t.match(/vimeo\.com\/(\d+)/),o=i==null?void 0:i[1];return o?`https://player.vimeo.com/video/${o}`:null}if(e==="loom"){const i=t.match(/loom\.com\/share\/([a-zA-Z0-9]+)/),o=i==null?void 0:i[1];return o?`https://www.loom.com/embed/${o}`:null}return null}catch{return null}}function SF({data:t,isSelected:e,onSelect:n,onUpdate:r,onDelete:i}){const[o,l]=_.useState(t.url||""),c=_.useMemo(()=>t.url?wF(t.url,t.provider):null,[t.url,t.provider]),d=f=>{l(f);const p=xF(f);r({type:"video",url:f,provider:p})};return g.jsxs("div",{className:`relative group rounded-lg border transition-all overflow-hidden ${e?"border-blue-400 shadow-sm":"border-gray-200 hover:border-gray-300"}`,onClick:n,children:[e&&g.jsx("button",{onClick:f=>{f.stopPropagation(),i()},className:"absolute top-2 right-2 z-10 p-1.5 bg-white border border-gray-200 rounded-lg shadow-sm text-red-500 hover:text-red-700 hover:bg-red-50 transition-colors",title:"Delete block",children:g.jsx(Nn,{className:"w-4 h-4"})}),c?g.jsx("div",{className:"aspect-video bg-black",children:g.jsx("iframe",{src:c,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):g.jsx("div",{className:"p-6 bg-gray-50",children:g.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[g.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-100 flex items-center justify-center mb-4",children:g.jsx(T0,{className:"w-8 h-8 text-purple-600"})}),g.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Add a video"}),g.jsx("p",{className:"text-sm text-gray-500 mb-4 text-center",children:"Paste a YouTube, Vimeo, or Loom URL"})]})}),(e||!c)&&g.jsxs("div",{className:"p-3 border-t border-gray-200 bg-white",children:[g.jsx("div",{className:"flex gap-2",children:g.jsxs("div",{className:"flex-1 relative",children:[g.jsx("input",{type:"url",value:o,onChange:f=>d(f.target.value),placeholder:"https://youtube.com/watch?v=...",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),t.url&&g.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600",title:"Open in new tab",children:g.jsx(C0,{className:"w-4 h-4"})})]})}),t.provider&&t.provider!=="custom"&&g.jsx("div",{className:"mt-2 flex items-center gap-2",children:g.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 rounded text-gray-600 capitalize",children:t.provider})})]})]})}const fy={youtube:{name:"YouTube",icon:lo,color:"text-red-600",bgColor:"bg-red-100",placeholder:"https://youtube.com/watch?v=...",getEmbedUrl:t=>{var n;let e="";if(t.includes("youtu.be/"))e=((n=t.split("youtu.be/")[1])==null?void 0:n.split("?")[0])||"";else if(t.includes("youtube.com/watch"))try{e=new URL(t).searchParams.get("v")||""}catch{return null}return e?`https://www.youtube.com/embed/${e}`:null}},vimeo:{name:"Vimeo",icon:lo,color:"text-blue-500",bgColor:"bg-blue-100",placeholder:"https://vimeo.com/...",getEmbedUrl:t=>{const e=t.match(/vimeo\.com\/(\d+)/);return e!=null&&e[1]?`https://player.vimeo.com/video/${e[1]}`:null}},loom:{name:"Loom",icon:lo,color:"text-purple-600",bgColor:"bg-purple-100",placeholder:"https://loom.com/share/...",getEmbedUrl:t=>{const e=t.match(/loom\.com\/share\/([a-zA-Z0-9]+)/);return e!=null&&e[1]?`https://www.loom.com/embed/${e[1]}`:null}},codepen:{name:"CodePen",icon:nO,color:"text-gray-800",bgColor:"bg-gray-100",placeholder:"https://codepen.io/user/pen/...",getEmbedUrl:t=>{const e=t.match(/codepen\.io\/([^\/]+)\/pen\/([^\/\?]+)/);return e?`https://codepen.io/${e[1]}/embed/${e[2]}?default-tab=result`:null}},codesandbox:{name:"CodeSandbox",icon:by,color:"text-yellow-600",bgColor:"bg-yellow-100",placeholder:"https://codesandbox.io/s/...",getEmbedUrl:t=>{const e=t.match(/codesandbox\.io\/s\/([^\/\?]+)/);return e!=null&&e[1]?`https://codesandbox.io/embed/${e[1]}`:null}},figma:{name:"Figma",icon:eO,color:"text-purple-500",bgColor:"bg-purple-100",placeholder:"https://figma.com/file/...",getEmbedUrl:t=>t.includes("figma.com")?`https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(t)}`:null},notion:{name:"Notion",icon:lo,color:"text-gray-800",bgColor:"bg-gray-100",placeholder:"https://notion.so/...",getEmbedUrl:t=>t.includes("notion.so")||t.includes("notion.site")?t:null},miro:{name:"Miro",icon:lo,color:"text-yellow-500",bgColor:"bg-yellow-100",placeholder:"https://miro.com/app/board/...",getEmbedUrl:t=>{const e=t.match(/miro\.com\/app\/board\/([^\/\?]+)/);return e!=null&&e[1]?`https://miro.com/app/embed/${e[1]}`:null}},typeform:{name:"Typeform",icon:lo,color:"text-blue-600",bgColor:"bg-blue-100",placeholder:"https://form.typeform.com/to/...",getEmbedUrl:t=>t},"google-slides":{name:"Google Slides",icon:G1,color:"text-yellow-600",bgColor:"bg-yellow-100",placeholder:"https://docs.google.com/presentation/d/...",getEmbedUrl:t=>{const e=t.match(/presentation\/d\/([^\/]+)/);return e!=null&&e[1]?`https://docs.google.com/presentation/d/${e[1]}/embed`:null}},custom:{name:"Custom Embed",icon:by,color:"text-gray-600",bgColor:"bg-gray-100",placeholder:"https://...",getEmbedUrl:t=>t}};function EF({data:t,isSelected:e,onSelect:n,onUpdate:r,onDelete:i}){const[o,l]=_.useState(t.embedUrl||""),c=fy[t.provider],d=c.icon,f=t.embedUrl?c.getEmbedUrl(t.embedUrl):null,p=v=>{l(v),r({type:"embed",provider:t.provider,embedUrl:v,config:t.config})},m=v=>{r({type:"embed",provider:v,embedUrl:"",config:{}}),l("")};return g.jsxs("div",{className:`relative group rounded-lg border transition-all overflow-hidden ${e?"border-blue-400 shadow-sm":"border-gray-200 hover:border-gray-300"}`,onClick:n,children:[e&&g.jsx("button",{onClick:v=>{v.stopPropagation(),i()},className:"absolute top-2 right-2 z-10 p-1.5 bg-white border border-gray-200 rounded-lg shadow-sm text-red-500 hover:text-red-700 hover:bg-red-50 transition-colors",title:"Delete block",children:g.jsx(Nn,{className:"w-4 h-4"})}),f?g.jsx("div",{className:"aspect-video bg-gray-100",children:g.jsx("iframe",{src:f,className:"w-full h-full border-0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen",allowFullScreen:!0})}):g.jsx("div",{className:"p-6 bg-gray-50",children:g.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[g.jsx("div",{className:`w-14 h-14 rounded-full ${c.bgColor} flex items-center justify-center mb-4`,children:g.jsx(d,{className:`w-7 h-7 ${c.color}`})}),g.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["Add ",c.name," embed"]})]})}),e&&g.jsxs("div",{className:"p-3 border-t border-gray-200 bg-white space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Provider"}),g.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(fy).map(v=>{const b=fy[v];return g.jsx("button",{onClick:()=>m(v),className:`px-2 py-1 text-xs rounded transition-colors ${t.provider===v?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:b.name},v)})})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"URL"}),g.jsx("div",{className:"flex gap-2",children:g.jsxs("div",{className:"flex-1 relative",children:[g.jsx("input",{type:"url",value:o,onChange:v=>p(v.target.value),placeholder:c.placeholder,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.embedUrl&&g.jsx("a",{href:t.embedUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600",title:"Open in new tab",children:g.jsx(C0,{className:"w-4 h-4"})})]})})]})]})]})}function CF({data:t,isSelected:e,onSelect:n,onUpdate:r,onDelete:i}){const o=()=>{const b={id:crypto.randomUUID(),question:"",options:["",""],correctAnswerIndex:0};r({...t,questions:[...t.questions,b]})},l=(b,w)=>{const S=[...t.questions];S[b]={...S[b],...w},r({...t,questions:S})},c=b=>{r({...t,questions:t.questions.filter((w,S)=>S!==b)})},d=b=>{const w=t.questions[b];l(b,{options:[...w.options,""]})},f=(b,w,S)=>{const T=[...t.questions[b].options];T[w]=S,l(b,{options:T})},p=(b,w)=>{const S=t.questions[b];if(S.options.length<=2)return;const E=S.options.filter((N,A)=>A!==w),T=S.correctAnswerIndex>=w&&S.correctAnswerIndex>0?S.correctAnswerIndex-1:S.correctAnswerIndex;l(b,{options:E,correctAnswerIndex:Math.min(T,E.length-1)})},m=(b,w)=>{l(b,{correctAnswerIndex:w})},v=b=>{r({...t,passingScore:Math.max(0,Math.min(100,b))})};return g.jsxs("div",{className:`relative group rounded-lg border transition-all overflow-hidden ${e?"border-blue-400 shadow-sm":"border-gray-200 hover:border-gray-300"}`,onClick:n,children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-amber-50 border-b border-amber-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Rc,{className:"w-5 h-5 text-amber-600"}),g.jsx("span",{className:"font-medium text-amber-800",children:"Quiz"}),g.jsxs("span",{className:"text-sm text-amber-600",children:["(",t.questions.length," question",t.questions.length!==1?"s":"",")"]})]}),e&&g.jsx("button",{onClick:b=>{b.stopPropagation(),i()},className:"p-1.5 text-red-500 hover:text-red-700 hover:bg-red-100 rounded transition-colors",title:"Delete quiz",children:g.jsx(Nn,{className:"w-4 h-4"})})]}),g.jsxs("div",{className:"p-4 space-y-4",children:[t.questions.length===0?g.jsxs("div",{className:"text-center py-8 text-gray-500",children:[g.jsx(Rc,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),g.jsx("p",{className:"text-sm",children:"No questions yet"}),g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Click below to add your first question"})]}):t.questions.map((b,w)=>g.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[g.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[g.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center bg-amber-100 text-amber-700 text-sm font-medium rounded-full",children:w+1}),g.jsx("input",{type:"text",value:b.question,onChange:S=>l(w,{question:S.target.value}),placeholder:"Enter your question...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:S=>S.stopPropagation()}),e&&g.jsx("button",{onClick:S=>{S.stopPropagation(),c(w)},className:"p-1.5 text-gray-400 hover:text-red-600 transition-colors",title:"Delete question",children:g.jsx(Nn,{className:"w-4 h-4"})})]}),g.jsxs("div",{className:"ml-8 space-y-2",children:[b.options.map((S,E)=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:T=>{T.stopPropagation(),m(w,E)},className:`flex-shrink-0 w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${b.correctAnswerIndex===E?"bg-green-500 border-green-500 text-white":"border-gray-300 hover:border-green-400"}`,title:b.correctAnswerIndex===E?"Correct answer":"Mark as correct",children:b.correctAnswerIndex===E&&g.jsx(E0,{className:"w-3 h-3"})}),g.jsx("input",{type:"text",value:S,onChange:T=>f(w,E,T.target.value),placeholder:`Option ${E+1}`,className:"flex-1 px-3 py-1.5 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:T=>T.stopPropagation()}),e&&b.options.length>2&&g.jsx("button",{onClick:T=>{T.stopPropagation(),p(w,E)},className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Remove option",children:g.jsx(ko,{className:"w-4 h-4"})})]},E)),e&&b.options.length<6&&g.jsx("button",{onClick:S=>{S.stopPropagation(),d(w)},className:"ml-7 text-sm text-blue-600 hover:text-blue-700",children:"+ Add option"})]})]},b.id)),e&&g.jsxs("button",{onClick:b=>{b.stopPropagation(),o()},className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors",children:[g.jsx(Vr,{className:"w-4 h-4"}),"Add Question"]}),e&&t.questions.length>0&&g.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200",children:[g.jsx("label",{className:"text-sm text-gray-600",children:"Passing score:"}),g.jsx("input",{type:"number",value:t.passingScore,onChange:b=>v(parseInt(b.target.value)||0),min:0,max:100,className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm text-center focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:b=>b.stopPropagation()}),g.jsx("span",{className:"text-sm text-gray-500",children:"%"})]})]})]})}const v1=[{value:"javascript",label:"JavaScript"},{value:"typescript",label:"TypeScript"},{value:"python",label:"Python"},{value:"html",label:"HTML"},{value:"css",label:"CSS"},{value:"json",label:"JSON"},{value:"sql",label:"SQL"},{value:"bash",label:"Bash"},{value:"rust",label:"Rust"},{value:"go",label:"Go"},{value:"java",label:"Java"},{value:"csharp",label:"C#"},{value:"php",label:"PHP"},{value:"ruby",label:"Ruby"},{value:"swift",label:"Swift"},{value:"kotlin",label:"Kotlin"}];function TF({data:t,isSelected:e,onSelect:n,onUpdate:r,onDelete:i}){var v;const[o,l]=_.useState(!1),c=async()=>{await navigator.clipboard.writeText(t.code),l(!0),setTimeout(()=>l(!1),2e3)},d=b=>{r({...t,code:b})},f=b=>{r({...t,language:b})},p=()=>{r({...t,runnable:!t.runnable})},m=((v=v1.find(b=>b.value===t.language))==null?void 0:v.label)||t.language;return g.jsxs("div",{className:`relative group rounded-lg border transition-all overflow-hidden ${e?"border-blue-400 shadow-sm":"border-gray-200 hover:border-gray-300"}`,onClick:n,children:[g.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-800 border-b border-gray-700",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(z1,{className:"w-4 h-4 text-gray-400"}),e?g.jsx("select",{value:t.language,onChange:b=>f(b.target.value),onClick:b=>b.stopPropagation(),className:"bg-gray-700 text-gray-200 text-xs px-2 py-1 rounded border border-gray-600 focus:outline-none focus:ring-1 focus:ring-blue-500",children:v1.map(b=>g.jsx("option",{value:b.value,children:b.label},b.value))}):g.jsx("span",{className:"text-xs text-gray-400",children:m})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[t.runnable&&g.jsx("span",{className:"text-xs text-green-400 px-2 py-0.5 bg-green-900/30 rounded mr-2",children:"Runnable"}),g.jsx("button",{onClick:b=>{b.stopPropagation(),c()},className:"p-1.5 text-gray-400 hover:text-gray-200 transition-colors",title:"Copy code",children:o?g.jsx(E0,{className:"w-4 h-4 text-green-400"}):g.jsx(VD,{className:"w-4 h-4"})}),e&&g.jsx("button",{onClick:b=>{b.stopPropagation(),i()},className:"p-1.5 text-gray-400 hover:text-red-400 transition-colors",title:"Delete block",children:g.jsx(Nn,{className:"w-4 h-4"})})]})]}),e?g.jsx("textarea",{value:t.code,onChange:b=>d(b.target.value),onClick:b=>b.stopPropagation(),placeholder:"Paste your code here...",className:"w-full min-h-[200px] p-4 bg-gray-900 text-gray-100 font-mono text-sm resize-y focus:outline-none",spellCheck:!1}):g.jsx("pre",{className:"p-4 bg-gray-900 text-gray-100 font-mono text-sm overflow-x-auto",children:g.jsx("code",{children:t.code||"// No code yet..."})}),e&&g.jsx("div",{className:"flex items-center gap-4 px-3 py-2 bg-gray-100 border-t border-gray-200",children:g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:t.runnable,onChange:p,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),g.jsx("span",{className:"text-sm text-gray-700",children:"Allow students to run this code"})]})})]})}function _F({data:t,isSelected:e,onSelect:n,onUpdate:r,onDelete:i}){const[o,l]=_.useState(!1),[c,d]=_.useState(null),[f,p]=_.useState(!1),[m,v]=_.useState(""),b=_.useRef(null),w=async N=>{var I;const A=(I=N.target.files)==null?void 0:I[0];if(A){if(!A.type.startsWith("image/")){d("Please select an image file");return}if(A.size>5*1024*1024){d("Image must be smaller than 5MB");return}l(!0),d(null);try{const M=A.name.split(".").pop(),R=`course-images/${`${crypto.randomUUID()}.${M}`}`,{error:B}=await Te.storage.from("course-assets").upload(R,A);if(B)throw B;const{data:z}=Te.storage.from("course-assets").getPublicUrl(R);r({type:"image",url:z.publicUrl,alt:A.name,caption:t.caption})}catch(M){console.error("Upload failed:",M),d(M.message||"Failed to upload image")}finally{l(!1)}}},S=()=>{m.trim()&&(r({type:"image",url:m.trim(),alt:t.alt||"Image",caption:t.caption}),p(!1),v(""))},E=N=>{r({...t,caption:N})},T=N=>{r({...t,alt:N})};return g.jsxs("div",{className:`relative group rounded-lg border transition-all overflow-hidden ${e?"border-blue-400 shadow-sm":"border-gray-200 hover:border-gray-300"}`,onClick:n,children:[e&&g.jsx("button",{onClick:N=>{N.stopPropagation(),i()},className:"absolute top-2 right-2 z-10 p-1.5 bg-white border border-gray-200 rounded-lg shadow-sm text-red-500 hover:text-red-700 hover:bg-red-50 transition-colors",title:"Delete block",children:g.jsx(Nn,{className:"w-4 h-4"})}),t.url?g.jsxs("div",{className:"relative",children:[g.jsx("img",{src:t.url,alt:t.alt,className:"w-full max-h-[500px] object-contain bg-gray-100"}),e&&g.jsxs("div",{className:"p-3 border-t border-gray-200 bg-white space-y-2",children:[g.jsx("input",{type:"text",value:t.alt,onChange:N=>T(N.target.value),placeholder:"Alt text (for accessibility)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),g.jsx("input",{type:"text",value:t.caption||"",onChange:N=>E(N.target.value),placeholder:"Add a caption (optional)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),!e&&t.caption&&g.jsx("p",{className:"text-sm text-gray-500 text-center py-2 italic",children:t.caption})]}):g.jsxs("div",{className:"p-6 bg-gray-50",children:[g.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:w,className:"hidden"}),f?g.jsx("div",{className:"space-y-3",children:g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"url",value:m,onChange:N=>v(N.target.value),placeholder:"https://example.com/image.jpg",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0,onKeyDown:N=>{N.key==="Enter"&&S(),N.key==="Escape"&&(p(!1),v(""))}}),g.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors",children:"Add"}),g.jsx("button",{onClick:()=>{p(!1),v("")},className:"p-2 text-gray-500 hover:text-gray-700",children:g.jsx(ko,{className:"w-5 h-5"})})]})}):g.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[g.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center mb-4",children:g.jsx(wh,{className:"w-8 h-8 text-blue-600"})}),g.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Add an image"}),g.jsx("p",{className:"text-sm text-gray-500 mb-4 text-center",children:"Upload an image or paste a URL"}),g.jsxs("div",{className:"flex gap-3",children:[g.jsxs("button",{onClick:()=>{var N;return(N=b.current)==null?void 0:N.click()},disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors disabled:opacity-50",children:[g.jsx(SL,{className:"w-4 h-4"}),o?"Uploading...":"Upload"]}),g.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg text-sm hover:bg-gray-100 transition-colors",children:[g.jsx(H1,{className:"w-4 h-4"}),"Paste URL"]})]}),c&&g.jsx("p",{className:"mt-3 text-sm text-red-600",children:c})]})]})]})}function AF({data:t,isSelected:e,onSelect:n,onUpdate:r,onDelete:i}){const o=[{value:"line",label:"Line"},{value:"space",label:"Space"},{value:"dots",label:"Dots"}];return g.jsxs("div",{className:`relative group py-4 transition-all ${e?"bg-blue-50 rounded-lg":""}`,onClick:n,children:[g.jsxs("div",{className:"flex items-center justify-center",children:[t.style==="line"&&g.jsx("div",{className:"w-full h-px bg-gray-300"}),t.style==="space"&&g.jsx("div",{className:"w-full h-8"}),t.style==="dots"&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),g.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),g.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"})]})]}),e&&g.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center gap-1 px-2 py-1 bg-white border border-gray-200 rounded-lg shadow-sm",children:[o.map(l=>g.jsx("button",{onClick:c=>{c.stopPropagation(),r({type:"divider",style:l.value})},className:`px-2 py-1 text-xs rounded transition-colors ${t.style===l.value?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:l.label},l.value)),g.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),g.jsx("button",{onClick:l=>{l.stopPropagation(),i()},className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",title:"Delete",children:g.jsx(Nn,{className:"w-3.5 h-3.5"})})]})]})}function NF({page:t,isSelected:e,onSelect:n,onUpdate:r,onDelete:i}){const l={text:bF,video:SF,embed:EF,quiz:CF,code:TF,image:_F,divider:AF}[t.type];return l?g.jsx(l,{data:t.data,isSelected:e,onSelect:n,onUpdate:r,onDelete:i}):g.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-600",children:["Unknown block type: ",t.type]})}const kF=[{type:"text",icon:vL,label:"Text",description:"Rich text with formatting",keywords:["text","paragraph","write","content"]},{type:"video",icon:T0,label:"Video",description:"YouTube, Vimeo, or Loom",keywords:["video","youtube","vimeo","loom","media"]},{type:"image",icon:wh,label:"Image",description:"Upload or embed an image",keywords:["image","photo","picture","upload"]},{type:"code",icon:by,label:"Code",description:"Code snippet with syntax highlighting",keywords:["code","snippet","programming","javascript","python"]},{type:"quiz",icon:Rc,label:"Quiz",description:"Multiple choice questions",keywords:["quiz","question","test","assessment"]},{type:"embed",icon:lo,label:"Embed",description:"CodePen, Figma, Miro, and more",keywords:["embed","codepen","figma","miro","codesandbox","iframe"]},{type:"divider",icon:PO,label:"Divider",description:"Visual separator",keywords:["divider","separator","line","break"]}];function RF({position:t,onSelect:e,onClose:n}){const[r,i]=_.useState(""),[o,l]=_.useState(0),c=_.useRef(null),d=_.useRef(null),f=kF.filter(m=>{if(!r)return!0;const v=r.toLowerCase();return m.label.toLowerCase().includes(v)||m.description.toLowerCase().includes(v)||m.keywords.some(b=>b.includes(v))});_.useEffect(()=>{var m;(m=d.current)==null||m.focus()},[]),_.useEffect(()=>{l(0)},[r]),_.useEffect(()=>{const m=v=>{switch(v.key){case"ArrowDown":v.preventDefault(),l(b=>Math.min(b+1,f.length-1));break;case"ArrowUp":v.preventDefault(),l(b=>Math.max(b-1,0));break;case"Enter":v.preventDefault(),f[o]&&e(f[o].type);break;case"Escape":v.preventDefault(),n();break}};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[f,o,e,n]),_.useEffect(()=>{const m=v=>{c.current&&!c.current.contains(v.target)&&n()};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[n]);const p={x:Math.min(t.x,window.innerWidth-280),y:Math.min(t.y,window.innerHeight-400)};return g.jsxs("div",{ref:c,className:"fixed z-50 w-64 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{left:p.x,top:p.y},children:[g.jsx("div",{className:"p-2 border-b border-gray-100",children:g.jsxs("div",{className:"relative",children:[g.jsx(Sh,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),g.jsx("input",{ref:d,type:"text",value:r,onChange:m=>i(m.target.value),placeholder:"Search blocks...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),g.jsx("div",{className:"max-h-64 overflow-y-auto py-1",children:f.length===0?g.jsx("div",{className:"px-3 py-4 text-center text-sm text-gray-500",children:"No blocks found"}):f.map((m,v)=>{const b=m.icon;return g.jsxs("button",{onClick:()=>e(m.type),onMouseEnter:()=>l(v),className:`w-full flex items-start gap-3 px-3 py-2 text-left transition-colors ${v===o?"bg-blue-50":"hover:bg-gray-50"}`,children:[g.jsx("div",{className:`p-1.5 rounded ${v===o?"bg-blue-100":"bg-gray-100"}`,children:g.jsx(b,{className:`w-4 h-4 ${v===o?"text-blue-600":"text-gray-600"}`})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:`text-sm font-medium ${v===o?"text-blue-900":"text-gray-900"}`,children:m.label}),g.jsx("div",{className:"text-xs text-gray-500 truncate",children:m.description})]})]},m.type)})}),g.jsx("div",{className:"px-3 py-2 bg-gray-50 border-t border-gray-100",children:g.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[g.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-200 rounded text-gray-600",children:""}),g.jsx("span",{children:"Navigate"}),g.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-200 rounded text-gray-600",children:""}),g.jsx("span",{children:"Select"}),g.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-200 rounded text-gray-600",children:"Esc"}),g.jsx("span",{children:"Close"})]})})]})}function MF({page:t,isSelected:e,onSelect:n,onUpdate:r,onDelete:i}){const{attributes:o,listeners:l,setNodeRef:c,transform:d,transition:f,isDragging:p}=L0({id:t.id}),m={transform:Yr.Transform.toString(d),transition:f,opacity:p?.5:1};return g.jsxs("div",{ref:c,style:m,className:"relative group",children:[g.jsx("button",{...o,...l,className:"absolute -left-8 top-2 p-1 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(xh,{className:"w-4 h-4"})}),g.jsx(NF,{page:t,isSelected:e,onSelect:n,onUpdate:r,onDelete:i})]})}function IF({lesson:t,onUpdateLesson:e,onUpdateContent:n}){const[r,i]=_.useState(null),[o,l]=_.useState(null),[c,d]=_.useState(!1),[f,p]=_.useState({x:0,y:0}),v=(Y1(t.content)?t.content:K1()).pages.sort((R,B)=>R.order-B.order),b=y_(wf(Ih,{activationConstraint:{distance:8}}),wf(Mh,{coordinateGetter:F_})),w=R=>{const B=v.find(z=>z.id===R.active.id);B&&l(B)},S=R=>{const{active:B,over:z}=R;if(l(null),!z||B.id===z.id)return;const F=v.findIndex(K=>K.id===B.id),Q=v.findIndex(K=>K.id===z.id),G=[...v],[X]=G.splice(F,1);G.splice(Q,0,X);const q=G.map((K,L)=>({...K,order:L}));n({pages:q})},E=_.useCallback((R,B)=>{var G;const z=B?(((G=v.find(X=>X.id===B))==null?void 0:G.order)??v.length-1)+1:v.length,F=RL(R,z),Q=v.map(X=>X.order>=z?{...X,order:X.order+1}:X);n({pages:[...Q,F].sort((X,q)=>X.order-q.order)}),i(F.id),d(!1)},[v,n]),T=_.useCallback((R,B)=>{const z=v.map(F=>F.id===R?{...F,data:B}:F);n({pages:z})},[v,n]),N=_.useCallback(R=>{const z=v.filter(F=>F.id!==R).map((F,Q)=>({...F,order:Q}));n({pages:z}),r===R&&i(null)},[v,r,n]),A=R=>{e({title:R})},I=R=>{e({duration:Math.max(1,R)})},M=()=>{e({isLocked:!t.isLocked})},D=R=>{const B=R.target.getBoundingClientRect();p({x:B.left,y:B.bottom+8}),d(!0)};return _.useCallback(R=>{if(R.key==="/"&&!c){const B=window.getSelection();if(B&&B.rangeCount>0){const F=B.getRangeAt(0).getBoundingClientRect();p({x:F.left,y:F.bottom+8}),d(!0)}}R.key==="Escape"&&(d(!1),i(null))},[c]),g.jsxs("div",{className:"flex flex-col h-full bg-white",children:[g.jsx("div",{className:"flex-shrink-0 px-8 py-4 border-b border-gray-200",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"flex-1",children:g.jsx("input",{type:"text",value:t.title,onChange:R=>A(R.target.value),placeholder:"Lesson title",className:"w-full text-2xl font-bold text-gray-900 border-0 border-b-2 border-transparent hover:border-gray-200 focus:border-blue-500 focus:outline-none transition-colors pb-1"})}),g.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[g.jsx(PD,{className:"w-4 h-4"}),g.jsx("input",{type:"number",value:t.duration,onChange:R=>I(parseInt(R.target.value)||1),min:1,className:"w-16 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),g.jsx("span",{className:"text-sm",children:"min"})]}),g.jsx("button",{onClick:M,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors ${t.isLocked?"bg-amber-100 text-amber-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:t.isLocked?"Lesson is locked":"Lesson is unlocked",children:t.isLocked?g.jsxs(g.Fragment,{children:[g.jsx(Mc,{className:"w-4 h-4"}),"Locked"]}):g.jsxs(g.Fragment,{children:[g.jsx(V1,{className:"w-4 h-4"}),"Unlocked"]})})]})}),g.jsx("div",{className:"flex-1 overflow-y-auto",onClick:()=>i(null),children:g.jsxs("div",{className:"max-w-3xl mx-auto px-8 py-6",children:[v.length===0?g.jsxs("div",{className:"text-center py-16",children:[g.jsx($a,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),g.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Start building your lesson"}),g.jsx("p",{className:"text-gray-500 mb-6",children:"Add content blocks like text, videos, quizzes, and more"}),g.jsxs("button",{onClick:D,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[g.jsx(Vr,{className:"w-4 h-4"}),"Add your first block"]})]}):g.jsxs(U_,{sensors:b,collisionDetection:w_,onDragStart:w,onDragEnd:S,children:[g.jsx(O0,{items:v.map(R=>R.id),strategy:D0,children:g.jsx("div",{className:"space-y-4",children:v.map(R=>g.jsx(MF,{page:R,isSelected:r===R.id,onSelect:()=>i(R.id),onUpdate:B=>T(R.id,B),onDelete:()=>N(R.id)},R.id))})}),g.jsx(z_,{children:o&&g.jsx("div",{className:"bg-white border border-blue-300 rounded-lg p-4 shadow-lg opacity-90",children:g.jsxs("span",{className:"text-sm text-gray-600",children:[o.type," block"]})})})]}),v.length>0&&g.jsx("div",{className:"mt-6 flex justify-center",children:g.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[g.jsx(Vr,{className:"w-4 h-4"}),"Add block"]})})]})}),c&&g.jsx(RF,{position:f,onSelect:R=>E(R),onClose:()=>d(!1)})]})}function DF({sections:t,onSelectLesson:e,onAddSection:n,onClose:r}){const[i,o]=_.useState(""),[l,c]=_.useState(0),d=_.useRef(null),p=[{id:"add-section",icon:sO,label:"Add Section",description:"Create a new section",action:()=>{n(),r()},type:"action"},{id:"shortcuts",icon:xO,label:"Keyboard Shortcuts",description:"View all shortcuts",action:()=>{alert(`Cmd+K: Command palette
Cmd+S: Save
Esc: Close`),r()},type:"action"},...t.flatMap(S=>S.lessons.map(E=>({id:`lesson-${E.id}`,icon:$a,label:E.title,description:S.title,action:()=>{e(E.id),r()},type:"navigation"})))].filter(S=>{var T;if(!i)return!0;const E=i.toLowerCase();return S.label.toLowerCase().includes(E)||(((T=S.description)==null?void 0:T.toLowerCase().includes(E))??!1)}),m=p.filter(S=>S.type==="action"),v=p.filter(S=>S.type==="navigation"),b=[...m,...v];_.useEffect(()=>{var S;(S=d.current)==null||S.focus()},[]),_.useEffect(()=>{c(0)},[i]),_.useEffect(()=>{const S=E=>{switch(E.key){case"ArrowDown":E.preventDefault(),c(T=>Math.min(T+1,b.length-1));break;case"ArrowUp":E.preventDefault(),c(T=>Math.max(T-1,0));break;case"Enter":E.preventDefault(),b[l]&&b[l].action();break;case"Escape":E.preventDefault(),r();break}};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[b,l,r]);let w=0;return g.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-[15vh] bg-black/50",children:g.jsxs("div",{className:"w-full max-w-lg bg-white rounded-xl shadow-2xl overflow-hidden",children:[g.jsx("div",{className:"p-4 border-b border-gray-100",children:g.jsxs("div",{className:"relative",children:[g.jsx(Sh,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),g.jsx("input",{ref:d,type:"text",value:i,onChange:S=>o(S.target.value),placeholder:"Search commands and lessons...",className:"w-full pl-10 pr-4 py-2 text-lg border-0 focus:outline-none focus:ring-0"})]})}),g.jsx("div",{className:"max-h-80 overflow-y-auto",children:b.length===0?g.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:"No results found"}):g.jsxs(g.Fragment,{children:[m.length>0&&g.jsxs("div",{children:[g.jsx("div",{className:"px-4 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50",children:"Actions"}),m.map(S=>{const E=w++,T=S.icon;return g.jsxs("button",{onClick:S.action,onMouseEnter:()=>c(E),className:`w-full flex items-center gap-3 px-4 py-3 text-left transition-colors ${E===l?"bg-blue-50":"hover:bg-gray-50"}`,children:[g.jsx(T,{className:`w-5 h-5 ${E===l?"text-blue-600":"text-gray-400"}`}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:`font-medium ${E===l?"text-blue-900":"text-gray-900"}`,children:S.label}),S.description&&g.jsx("div",{className:"text-sm text-gray-500",children:S.description})]})]},S.id)})]}),v.length>0&&g.jsxs("div",{children:[g.jsx("div",{className:"px-4 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50",children:"Jump to Lesson"}),v.map(S=>{const E=w++,T=S.icon;return g.jsxs("button",{onClick:S.action,onMouseEnter:()=>c(E),className:`w-full flex items-center gap-3 px-4 py-3 text-left transition-colors ${E===l?"bg-blue-50":"hover:bg-gray-50"}`,children:[g.jsx(T,{className:`w-5 h-5 ${E===l?"text-blue-600":"text-gray-400"}`}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:`font-medium ${E===l?"text-blue-900":"text-gray-900"}`,children:S.label}),S.description&&g.jsx("div",{className:"text-sm text-gray-500",children:S.description})]})]},S.id)})]})]})}),g.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-100",children:g.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:[g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-200 rounded text-gray-600",children:""}),"Navigate"]}),g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-200 rounded text-gray-600",children:""}),"Select"]}),g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-200 rounded text-gray-600",children:"Esc"}),"Close"]})]})})]})})}const OF=["Development","Business","Design","Marketing","Photography","Music","Health","Lifestyle","Other"],LF=["Beginner","Intermediate","Advanced"];function PF({course:t,onUpdate:e,onClose:n}){const[r,i]=_.useState(t.title),[o,l]=_.useState(t.description),[c,d]=_.useState(t.category),[f,p]=_.useState(t.level),[m,v]=_.useState(t.price),[b,w]=_.useState(t.thumbnailUrl),S=()=>{e({title:r,description:o,category:c,level:f,price:m,thumbnailUrl:b}),n()};return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:g.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-xl shadow-xl max-h-[90vh] overflow-hidden",children:[g.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Course Settings"}),g.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:g.jsx(ko,{className:"w-5 h-5"})})]}),g.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Title"}),g.jsx("input",{type:"text",value:r,onChange:E=>i(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter course title"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),g.jsx("textarea",{value:o,onChange:E=>l(E.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Describe what students will learn..."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Thumbnail"}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx("div",{className:"w-40 h-24 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:b?g.jsx("img",{src:b,alt:"Course thumbnail",className:"w-full h-full object-cover"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center",children:g.jsx(wh,{className:"w-8 h-8 text-gray-400"})})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("input",{type:"url",value:b,onChange:E=>w(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"https://example.com/image.jpg"}),g.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter an image URL or upload to Supabase Storage"})]})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),g.jsx("select",{value:c,onChange:E=>d(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:OF.map(E=>g.jsx("option",{value:E,children:E},E))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level"}),g.jsx("select",{value:f,onChange:E=>p(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:LF.map(E=>g.jsx("option",{value:E,children:E},E))})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (USD)"}),g.jsxs("div",{className:"relative",children:[g.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),g.jsx("input",{type:"number",value:m,onChange:E=>v(Math.max(0,parseFloat(E.target.value)||0)),min:0,step:.01,className:"w-full pl-7 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),g.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Set to 0 for a free course"})]})]})}),g.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50",children:[g.jsx("button",{onClick:n,className:"px-4 py-2 text-sm text-gray-700 hover:text-gray-900 transition-colors",children:"Cancel"}),g.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})})}function UF(){const{courseId:t}=tu(),e=Pi(),[n,r]=_.useState(!1),[i,o]=_.useState(!1),[l,c]=_.useState(!1),{course:d,sections:f,selectedLessonId:p,selectedLesson:m,saveStatus:v,error:b,isLoading:w,updateCourseDetails:S,publishCourse:E,addSection:T,updateSection:N,deleteSection:A,reorderSections:I,addLesson:M,updateLesson:D,deleteLesson:R,reorderLessons:B,selectLesson:z,updateLessonContent:F,forceSave:Q}=T4(t);if(_.useState(()=>{const X=q=>{(q.metaKey||q.ctrlKey)&&q.key==="k"&&(q.preventDefault(),c(!0)),(q.metaKey||q.ctrlKey)&&q.key==="s"&&(q.preventDefault(),Q())};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)}),w)return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:g.jsxs("div",{className:"text-center",children:[g.jsx($1,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),g.jsx("p",{className:"text-gray-600",children:"Loading course..."})]})});if(b||!d)return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-red-600 mb-4",children:b||"Course not found"}),g.jsx("button",{onClick:()=>e("/instructor"),className:"text-blue-600 hover:text-blue-700",children:"Back to dashboard"})]})});const G=d.published;return g.jsxs("div",{className:"h-screen flex flex-col bg-gray-100",children:[g.jsxs("header",{className:"flex-shrink-0 h-14 bg-white border-b border-gray-200 flex items-center justify-between px-4",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("button",{onClick:()=>e("/instructor"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[g.jsx(bh,{className:"w-4 h-4"}),g.jsx("span",{className:"text-sm",children:"Back"})]}),g.jsx("div",{className:"h-6 w-px bg-gray-200"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("h1",{className:"font-semibold text-gray-900 truncate max-w-md",children:d.title}),g.jsx(_4,{status:v})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[g.jsx(tL,{className:"w-4 h-4"}),"Settings"]}),g.jsxs("button",{onClick:()=>window.open(`/#/course/${t}`,"_blank"),className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[g.jsx(QD,{className:"w-4 h-4"}),"Preview"]}),g.jsx("button",{onClick:()=>E(!G),className:`flex items-center gap-2 px-4 py-1.5 text-sm font-medium rounded-lg transition-colors ${G?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-green-600 text-white hover:bg-green-700"}`,children:G?g.jsxs(g.Fragment,{children:[g.jsx(WD,{className:"w-4 h-4"}),"Unpublish"]}):g.jsxs(g.Fragment,{children:[g.jsx(q1,{className:"w-4 h-4"}),"Publish"]})})]})]}),g.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[g.jsx("aside",{className:`flex-shrink-0 bg-white border-r border-gray-200 transition-all duration-200 ${n?"w-0":"w-72"}`,children:!n&&g.jsx(v5,{sections:f,selectedLessonId:p,onSelectLesson:z,onAddSection:()=>T(),onUpdateSection:N,onDeleteSection:A,onReorderSections:I,onAddLesson:M,onUpdateLesson:D,onDeleteLesson:R,onReorderLessons:B})}),g.jsx("button",{onClick:()=>r(!n),className:"absolute left-[calc(theme(width.72)-12px)] top-1/2 -translate-y-1/2 z-10 w-6 h-12 bg-white border border-gray-200 rounded-r-lg shadow-sm flex items-center justify-center text-gray-400 hover:text-gray-600 transition-all",style:{left:n?0:"calc(18rem - 12px)"},children:n?g.jsx(hf,{className:"w-4 h-4"}):g.jsx(vy,{className:"w-4 h-4"})}),g.jsx("main",{className:"flex-1 overflow-hidden",children:m?g.jsx(IF,{lesson:m,onUpdateLesson:X=>D(m.id,X),onUpdateContent:X=>F(m.id,X)}):g.jsx("div",{className:"h-full flex flex-col items-center justify-center text-gray-500",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:g.jsx(vy,{className:"w-8 h-8 text-gray-400"})}),g.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a lesson to edit"}),g.jsx("p",{className:"text-sm text-gray-500 max-w-sm",children:"Choose a lesson from the sidebar, or create a new section and lesson to get started"})]})})})]}),i&&g.jsx(PF,{course:d,onUpdate:S,onClose:()=>o(!1)}),l&&g.jsx(DF,{sections:f,onSelectLesson:z,onAddSection:()=>T(),onClose:()=>c(!1)})]})}const BF=()=>{const{courseId:t}=tu(),{courses:e}=Bi(),{user:n}=nl(),r=_.useRef(null),i=e.find(l=>l.id===t);if(!i||!n)return g.jsx("div",{className:"p-10 text-center",children:"Certificate unavailable"});const o=()=>{window.print()};return g.jsxs("div",{className:"min-h-screen bg-gray-100 py-10 px-4 flex flex-col items-center",children:[g.jsxs("div",{className:"w-full max-w-4xl flex justify-between items-center mb-8 print:hidden",children:[g.jsx(Qt,{to:"/dashboard",children:g.jsxs(Ue,{variant:"ghost",className:"gap-2",children:[g.jsx(bh,{className:"h-4 w-4"})," Back to Dashboard"]})}),g.jsxs("div",{className:"flex gap-4",children:[g.jsxs(Ue,{variant:"outline",onClick:o,className:"gap-2 bg-white",children:[g.jsx(HO,{className:"h-4 w-4"})," Print / PDF"]}),g.jsxs(Ue,{variant:"outline",className:"gap-2 bg-white",children:[g.jsx(rL,{className:"h-4 w-4"})," Share"]})]})]}),g.jsx("div",{ref:r,className:"bg-white p-2 shadow-2xl max-w-4xl w-full aspect-[1.414/1] print:shadow-none print:w-full print:absolute print:top-0 print:left-0 print:m-0",children:g.jsxs("div",{className:"h-full w-full border-[20px] border-double border-primary-900 p-10 flex flex-col items-center justify-between text-center relative bg-white",children:[g.jsx("div",{className:"absolute top-4 left-4 w-16 h-16 border-t-4 border-l-4 border-primary-600"}),g.jsx("div",{className:"absolute top-4 right-4 w-16 h-16 border-t-4 border-r-4 border-primary-600"}),g.jsx("div",{className:"absolute bottom-4 left-4 w-16 h-16 border-b-4 border-l-4 border-primary-600"}),g.jsx("div",{className:"absolute bottom-4 right-4 w-16 h-16 border-b-4 border-r-4 border-primary-600"}),g.jsxs("div",{className:"mt-8",children:[g.jsx("div",{className:"inline-block p-4 rounded-full bg-primary-50 mb-4",children:g.jsx(fc,{className:"h-16 w-16 text-primary-600"})}),g.jsx("h1",{className:"text-4xl md:text-6xl font-serif text-primary-900 font-bold uppercase tracking-widest mb-2",children:"Certificate"}),g.jsx("h2",{className:"text-xl md:text-2xl text-primary-600 font-light uppercase tracking-widest",children:"Of Completion"})]}),g.jsxs("div",{className:"flex-1 flex flex-col justify-center w-full",children:[g.jsx("p",{className:"text-gray-500 italic text-lg mb-4 font-serif",children:"This is to certify that"}),g.jsx("h3",{className:"text-3xl md:text-5xl font-serif font-bold text-gray-900 border-b-2 border-gray-200 pb-4 mb-6 mx-auto w-3/4",children:n.name}),g.jsx("p",{className:"text-gray-500 italic text-lg mb-4 font-serif",children:"has successfully completed the course"}),g.jsx("h4",{className:"text-2xl md:text-3xl font-bold text-primary-800 mb-8 max-w-2xl mx-auto",children:i.title})]}),g.jsxs("div",{className:"w-full flex flex-col md:flex-row justify-between items-end px-4 md:px-12 pb-4 mt-auto gap-8",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-lg font-serif border-t border-gray-400 pt-2 px-8 min-w-[200px]",children:new Date().toLocaleDateString()}),g.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mt-1",children:"Date Completed"})]}),g.jsx("div",{className:"hidden md:flex h-24 w-24 rounded-full bg-primary-50 border-4 border-primary-600 items-center justify-center text-primary-800 font-bold text-[10px] uppercase text-center p-2 mx-4 shadow-inner",children:g.jsxs("div",{className:"border border-primary-300 rounded-full h-20 w-20 flex items-center justify-center",children:["Verified",g.jsx("br",{}),"LMS Platform"]})}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-lg font-serif border-t border-gray-400 pt-2 px-8 min-w-[200px] italic",children:i.instructorName}),g.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mt-1",children:"Instructor Signature"})]})]})]})}),g.jsx("style",{children:`
        @media print {
          @page { size: landscape; margin: 0; }
          body * { visibility: hidden; }
          #root { display: none; }
          .print\\:absolute { position: absolute !important; top: 0; left: 0; width: 100%; height: 100%; visibility: visible; z-index: 9999; }
          .print\\:absolute * { visibility: visible; }
        }
      `})]})},zF=()=>{var I,M;const t=Pi(),e=Ir(),{login:n,register:r}=nl(),[i,o]=_.useState(!0),[l,c]=_.useState(!1),[d,f]=_.useState(null),[p,m]=_.useState(""),[v,b]=_.useState(""),[w,S]=_.useState(""),[E,T]=_.useState(Er.STUDENT),N=((M=(I=e.state)==null?void 0:I.from)==null?void 0:M.pathname)||"/",A=async D=>{D.preventDefault(),f(null),c(!0);try{i?await n(v,w):await r(p,v,E,w),t(N,{replace:!0})}catch(R){f(R.message||"Authentication failed")}finally{c(!1)}};return g.jsxs("div",{className:"min-h-screen flex bg-white",children:[g.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-primary-900 relative overflow-hidden items-center justify-center text-white p-12",children:[g.jsxs("div",{className:"relative z-10 max-w-lg",children:[g.jsxs("div",{className:"flex items-center gap-3 text-3xl font-bold mb-8",children:[g.jsx(yy,{className:"h-10 w-10 text-primary-300"}),g.jsx("span",{children:"LMS Platform"})]}),g.jsxs("h1",{className:"text-5xl font-bold mb-6 leading-tight",children:["Master New Skills,",g.jsx("br",{}),g.jsx("span",{className:"text-primary-300",children:"Anytime, Anywhere."})]}),g.jsx("p",{className:"text-primary-100 text-lg mb-8",children:"Join thousands of learners and instructors on the most advanced learning management system powered by AI."}),g.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-12",children:[g.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-6 rounded-xl",children:[g.jsx("h3",{className:"text-xl font-bold mb-2",children:"For Students"}),g.jsx("p",{className:"text-primary-200 text-sm",children:"Access world-class courses, track progress, and earn certificates."})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-6 rounded-xl",children:[g.jsx("h3",{className:"text-xl font-bold mb-2",children:"For Instructors"}),g.jsx("p",{className:"text-primary-200 text-sm",children:"Create courses, manage students, and grow your audience."})]})]})]}),g.jsx("div",{className:"absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 bg-primary-700 rounded-full opacity-50 blur-3xl"}),g.jsx("div",{className:"absolute bottom-0 left-0 -ml-20 -mb-20 w-96 h-96 bg-primary-500 rounded-full opacity-30 blur-3xl"})]}),g.jsx("div",{className:"flex-1 flex flex-col justify-center px-4 sm:px-12 lg:px-24 bg-gray-50",children:g.jsxs("div",{className:"max-w-md mx-auto w-full bg-white p-8 rounded-2xl shadow-sm border border-gray-100",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:i?"Welcome back!":"Create an account"}),g.jsx("p",{className:"text-gray-500 text-sm",children:i?"Please enter your details to access your account.":"Start your learning journey today."})]}),d&&g.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm flex items-center gap-2",children:[g.jsx(U1,{className:"h-4 w-4"}),d]}),g.jsxs("form",{onSubmit:A,className:"space-y-4",children:[!i&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),g.jsxs("div",{className:"relative",children:[g.jsx(CL,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:"text",required:!0,value:p,onChange:D=>m(D.target.value),className:"pl-10 w-full bg-white text-gray-900 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary-500 outline-none placeholder-gray-400",placeholder:"John Doe"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),g.jsxs("div",{className:"relative",children:[g.jsx(IO,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:"email",required:!0,value:v,onChange:D=>b(D.target.value),className:"pl-10 w-full bg-white text-gray-900 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary-500 outline-none placeholder-gray-400",placeholder:"name@company.com"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),g.jsxs("div",{className:"relative",children:[g.jsx(Mc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:"password",required:!0,value:w,onChange:D=>S(D.target.value),className:"pl-10 w-full bg-white text-gray-900 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary-500 outline-none placeholder-gray-400",placeholder:""})]})]}),!i&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"I want to:"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsx("button",{type:"button",onClick:()=>T(Er.STUDENT),className:`px-4 py-2 rounded-lg border text-sm font-medium transition-colors ${E===Er.STUDENT?"bg-primary-50 border-primary-500 text-primary-700":"border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:"Learn"}),g.jsx("button",{type:"button",onClick:()=>T(Er.INSTRUCTOR),className:`px-4 py-2 rounded-lg border text-sm font-medium transition-colors ${E===Er.INSTRUCTOR?"bg-primary-50 border-primary-500 text-primary-700":"border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:"Teach"})]})]}),g.jsxs(Ue,{type:"submit",className:"w-full mt-6",size:"lg",isLoading:l,children:[i?"Sign In":"Create Account"," ",g.jsx(P1,{className:"ml-2 h-4 w-4"})]})]}),g.jsx("div",{className:"mt-8 text-center",children:g.jsxs("p",{className:"text-sm text-gray-600",children:[i?"Don't have an account? ":"Already have an account? ",g.jsx("button",{onClick:()=>o(!i),className:"text-primary-600 font-bold hover:underline",children:i?"Sign up":"Log in"})]})}),g.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-100 text-xs text-gray-500",children:[g.jsx("p",{className:"font-semibold mb-2",children:"Demo Credentials:"}),g.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[g.jsxs("div",{className:"bg-gray-100 p-2 rounded cursor-pointer hover:bg-gray-200",onClick:()=>{b("student@example.com"),o(!0)},children:[g.jsx("span",{className:"block font-medium",children:"Student"}),g.jsx("span",{className:"block text-gray-400",children:"student@example.com"})]}),g.jsxs("div",{className:"bg-gray-100 p-2 rounded cursor-pointer hover:bg-gray-200",onClick:()=>{b("instructor@example.com"),o(!0)},children:[g.jsx("span",{className:"block font-medium",children:"Instructor"}),g.jsx("span",{className:"block text-gray-400",children:"instructor@example.com"})]})]})]})]})})]})},hy=({allowedRoles:t})=>{const{user:e,isLoading:n}=nl(),r=Ir();return n?g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e?t&&!t.includes(e.role)?g.jsx(my,{to:"/",replace:!0}):g.jsx(k1,{}):g.jsx(my,{to:"/login",state:{from:r},replace:!0})},jF=()=>{Pi();const{user:t}=nl(),{addCourse:e}=Bi(),[n,r]=_.useState(!1),[i,o]=_.useState(!1);return null},qF=()=>g.jsx(l4,{children:g.jsx(a4,{children:g.jsxs(W2,{children:[g.jsxs(A2,{children:[g.jsx(cn,{path:"/login",element:g.jsx(zF,{})}),g.jsxs(cn,{path:"/",element:g.jsx(hy,{}),children:[g.jsxs(cn,{element:g.jsx(c4,{}),children:[g.jsx(cn,{index:!0,element:g.jsx(d4,{})}),g.jsx(cn,{path:"course/:id",element:g.jsx(f4,{})}),g.jsx(cn,{path:"dashboard",element:g.jsx(S4,{})}),g.jsx(cn,{path:"certificate/:courseId",element:g.jsx(BF,{})}),g.jsx(cn,{element:g.jsx(hy,{allowedRoles:[Er.INSTRUCTOR,Er.ADMIN]}),children:g.jsx(cn,{path:"instructor",element:g.jsx(E4,{})})})]}),g.jsx(cn,{path:"learn/:courseId/lesson/:lessonId",element:g.jsx(x4,{})}),g.jsxs(cn,{element:g.jsx(hy,{allowedRoles:[Er.INSTRUCTOR,Er.ADMIN]}),children:[g.jsx(cn,{path:"instructor/edit/:courseId",element:g.jsx(UF,{})}),g.jsx(cn,{path:"instructor/edit-legacy/:id",element:g.jsx(C4,{})})]})]}),g.jsx(cn,{path:"*",element:g.jsx(my,{to:"/",replace:!0})})]}),g.jsx(jF,{})]})})}),hR=document.getElementById("root");if(!hR)throw new Error("Could not find root element to mount to");const HF=OI.createRoot(hR);HF.render(g.jsx(Be.StrictMode,{children:g.jsx(qF,{})}));
